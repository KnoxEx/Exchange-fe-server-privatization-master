{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/flowingWater/flowingWater.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/flowingWater/flowingWater.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _slicedToArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { fixD, getCoinShowName, colorMap, imgMap, formatTime } from '@/utils';\nexport default {\n  name: 'page-flowingWater',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      nowType: 1,\n      // 1为充值 2为提现 3为其他 4 创新试验区\n      symbol: '',\n      // 当前币种\n      tabelList: [],\n      // table数据列表\n      financeListData: [],\n      subTableDataId: '',\n      subTableData: [],\n      subContentId: null,\n      symbolList: [],\n      // 币种选择列表\n      otherType: '',\n      // 其他记录 type\n      otherTypeList: [],\n      // 其他记录 type选择列表\n      otherTypeFirst: true,\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      revokeList: [],\n      // 撤销队列\n      currentIncomeType: '0',\n      otherTypeInner: '0',\n      // 其他记录 type\n      topUpTypeInner: '0' // 其他记录 type\n\n    };\n  },\n  computed: {\n    incomeType: function incomeType() {\n      return [{\n        code: '0',\n        value: this.$t('freeStaking.incomeFilter[0]')\n      }, {\n        code: '1',\n        value: this.$t('freeStaking.incomeFilter[2]')\n      }, {\n        code: '2',\n        value: this.$t('freeStaking.incomeFilter[1]')\n      }];\n    },\n    topUpTypeList: function topUpTypeList() {\n      return [{\n        code: '0',\n        value: this.$t('assets.otcFlowingWater.all')\n      }, {\n        code: '1',\n        value: this.$t('assets.flowingWater.type1')\n      }, {\n        code: '2',\n        value: this.$t('assets.flowingWater.type2')\n      }];\n    },\n    otherTypeListInner: function otherTypeListInner() {\n      return [{\n        code: '0',\n        value: this.$t('assets.otcFlowingWater.all')\n      }, {\n        code: '1',\n        value: this.$t('assets.flowingWater.WithdrawalsRecord')\n      }, {\n        code: '2',\n        value: this.$t('assets.withdraw.innerList')\n      }];\n    },\n    freeStakingStatus: function freeStakingStatus() {\n      return {\n        1: this.$t('manageFinances.completed')\n      };\n    },\n    financialTypeStatus: function financialTypeStatus() {\n      return {\n        0: this.$t('freeStaking.incomeFilter[0]'),\n        1: this.$t('freeStaking.incomeFilter[2]'),\n        2: this.$t('freeStaking.incomeFilter[1]')\n      };\n    },\n    // 是否开启了freeStaking\n    incrementConfigStatus: function incrementConfigStatus() {\n      return this.$store.state.baseData.incrementConfigStatus || 0;\n    },\n    publicInfo: function publicInfo() {\n      return this.$store.state.baseData.publicInfo;\n    },\n    navTab: function navTab() {\n      var arr = [{\n        name: this.$t('assets.flowingWater.RechargeRecord'),\n        index: 1\n      }, // 充值记录\n      {\n        name: this.$t('assets.flowingWater.WithdrawalsRecord'),\n        index: 2\n      }, // 提现记录\n      {\n        name: this.$t('assets.flowingWater.OtherRecords'),\n        index: 3\n      } // 其他记录\n      ];\n\n      if (this.newcoinOpen === '1') {\n        arr.push({\n          name: this.$t('innov.innov_tit'),\n          index: 4\n        }); // 创新试验区\n      }\n\n      if (this.incrementConfigStatus) {\n        arr.push({\n          name: this.$t('manageFinances.record'),\n          index: 5\n        }); // 理财记录\n      }\n\n      return arr;\n    },\n    // finance/account_balance 接口返回成功的数据\n    exchangeData: function exchangeData() {\n      return this.$store.state.assets.exchangeData;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [];\n\n      if (this.nowType === 1) {\n        list = [{\n          title: this.$t('assets.flowingWater.RechargeTime'),\n          width: '10%'\n        }, // 充值时间\n        {\n          title: this.$t('assets.flowingWater.RechargeCoin'),\n          width: '10%'\n        }, // 币种\n        {\n          title: this.$t('assets.flowingWater.RechargeVolume'),\n          width: '30%'\n        }, // 充值数量\n        {\n          title: this.$t('assets.flowingWater.RechargeNumber'),\n          width: '20%'\n        }, // 确认次数\n        {\n          title: this.$t('assets.flowingWater.RechargeStatus'),\n          width: '10%'\n        }, // 状态\n        {\n          title: this.$t('assets.flowingWater.withdrawOptions'),\n          width: '10%'\n        } // 操作\n        ];\n      }\n\n      if (this.nowType === 2) {\n        list = [{\n          title: this.$t('assets.flowingWater.withdrawTime'),\n          width: '10%'\n        }, // 提现时间\n        {\n          title: this.$t('assets.flowingWater.otherCoin'),\n          width: '10%',\n          align: 'left'\n        }, // 币种\n        {\n          title: this.$t('assets.flowingWater.withdrawVolume'),\n          width: '10%'\n        }, // 提币数量\n        {\n          title: this.$t('assets.flowingWater.withdrawFee'),\n          width: '10%'\n        }, // 网络手续费\n        {\n          title: this.$t('assets.flowingWater.withdrawRemarks'),\n          width: '15%'\n        }, // 标签\n        {\n          title: this.$t('assets.flowingWater.withdrawStatus'),\n          width: '10%'\n        }, // 状态\n        {\n          title: this.$t('assets.flowingWater.withdrawOptions'),\n          width: '10%'\n        } // 操作\n        ];\n      }\n\n      if (this.nowType === 3 || this.nowType === 5) {\n        list = [{\n          title: this.$t('assets.flowingWater.otherTime'),\n          width: '10%'\n        }, // 时间\n        {\n          title: this.$t('assets.flowingWater.otherCoin'),\n          width: '10%'\n        }, // 币种\n        {\n          title: this.$t('assets.flowingWater.otherType'),\n          width: '25%'\n        }, // 类型\n        {\n          title: this.$t('assets.flowingWater.otherVolume'),\n          width: '25%'\n        }, // 数量\n        {\n          title: this.$t('assets.flowingWater.otherStatus'),\n          width: '20%'\n        } // 状态\n        ];\n      }\n\n      return list;\n    },\n    subColumns: function subColumns() {\n      var arr = [this.$t('assets.flowingWater.withdrawAddress'), // 地址\n      this.$t('assets.flowingWater.updataAt'), // 钱包处理时间\n      this.$t('assets.flowingWater.txid') // 区块链交易ID\n      ];\n\n      if (this.nowType === 1) {\n        arr = [this.$t('assets.flowingWater.rechargeAddress'), // 地址\n        this.$t('assets.flowingWater.updataAt'), // 钱包处理时间\n        this.$t('assets.flowingWater.txid') // 区块链交易ID\n        ];\n      }\n\n      return arr;\n    },\n    // 用于axios的symbol\n    axiosSymbol: function axiosSymbol() {\n      if (this.symbol === 'all') {\n        return null;\n      }\n\n      return this.symbol;\n    },\n    newcoinOpen: function newcoinOpen() {\n      return this.$store.state.baseData.newcoinOpen;\n    },\n    isInnerTransferOpen: function isInnerTransferOpen() {\n      return this.$store.state.baseData.is_inner_transfer_open || 0;\n    }\n  },\n  watch: {\n    exchangeData: function exchangeData(v) {\n      if (v && this.market) {\n        this.setData();\n      }\n    },\n    market: function market(v) {\n      if (v && this.exchangeData) {\n        this.setData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      // 如果没有 finance/account_balance 接口返回成功的数据\n      if (!this.exchangeData) {\n        this.$store.dispatch('assetsExchangeData');\n      }\n\n      if (this.exchangeData && this.market) {\n        this.setData();\n      }\n    },\n    getFreeStaking: function getFreeStaking() {\n      var _this = this;\n\n      this.axios({\n        url: this.$store.state.url.freeStaking.financial_management,\n        headers: {},\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          gainCoin: this.axiosSymbol || '',\n          financialType: Number(this.currentIncomeType)\n        },\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          var _data$data = data.data,\n              financeList = _data$data.financeList,\n              count = _data$data.count;\n          var list = financeList.map(function (item, index) {\n            var coinList = _this.market.coinList;\n            var currentCoin = coinList[item.gainCoin];\n            var fix = currentCoin ? currentCoin.showPrecision : 0; // const showCoin = getCoinShowName(item.coinSymbol, coinList);\n\n            return {\n              id: index,\n              data: [item.time, // 时间\n              item.gainCoin, // 币种\n              _this.financialTypeStatus[item.financialType], // 类型\n              fixD(item.amount, fix), // 数量\n              _this.freeStakingStatus[item.status] // 状态\n              ]\n            };\n          });\n          _this.tabelList = list;\n          _this.paginationObj.total = count;\n        }\n\n        _this.tabelLoading = false;\n      });\n    },\n    getOtherTypeList: function getOtherTypeList() {\n      var _this2 = this;\n\n      this.axios({\n        url: 'record/other_transfer_scene'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var cenceList = data.data.cenceList;\n          var list = [];\n          cenceList.forEach(function (item) {\n            list.push({\n              code: item.key,\n              value: item.key_text\n            });\n          });\n          _this2.otherTypeList = list;\n\n          if (list.length) {\n            _this2.otherType = list[0].code;\n          }\n\n          _this2.getData();\n        }\n      });\n    },\n    symbolChange: function symbolChange(item) {\n      this.symbol = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    otherTypeChange: function otherTypeChange(item) {\n      this.otherType = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    otherTypeChangeInner: function otherTypeChangeInner(item) {\n      this.otherTypeInner = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    topUpTypeChange: function topUpTypeChange(item) {\n      this.topUpTypeInner = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    setIncomeType: function setIncomeType(item) {\n      this.currentIncomeType = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    // tab切换\n    currentType: function currentType(item) {\n      this.nowType = item.index; // this.symbol = 'all'\n\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n\n      if (item.index !== 4) {\n        this.tabelLoading = true;\n      }\n\n      if (item.index === 3) {\n        if (this.otherTypeFirst) {\n          // 获取其他记录中选择类型的列表\n          this.getOtherTypeList();\n          this.otherTypeFirst = false;\n        } else {\n          this.getData();\n        }\n      }\n\n      if (item.index !== 3) {\n        this.getData();\n      }\n    },\n    setData: function setData() {\n      var _this3 = this;\n\n      var list = [{\n        code: 'all',\n        value: this.$t('assets.flowingWater.allCoin')\n      }];\n      var coinList = this.market.coinList;\n      Object.keys(this.exchangeData.allCoinMap).forEach(function (item) {\n        if (_this3.exchangeData.allCoinMap[item].isFiat) {\n          return;\n        }\n\n        var showCoin = getCoinShowName(item, coinList);\n        list.push({\n          code: item,\n          value: showCoin\n        });\n      });\n      this.symbolList = list;\n      this.symbol = 'all';\n      this.getData();\n    },\n    getData: function getData() {\n      if (this.nowType === 1) {\n        this.rechargeData();\n      } else if (this.nowType === 2) {\n        this.withdrawData();\n      } else if (this.nowType === 5) {\n        this.getFreeStaking();\n      } else if (this.nowType === 3) {\n        this.otherData();\n      }\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getData();\n    },\n    // 撤销操作\n    tableClick: function tableClick(type, id) {\n      var _this4 = this;\n\n      if (type === 'revoke') {\n        var even = {};\n        this.tabelList.forEach(function (item) {\n          if (item.id === id) {\n            even = item;\n          }\n        });\n\n        if (this.revokeList.indexOf(even.id) === -1) {\n          this.revokeList.push(even.id);\n          this.axios({\n            url: '/finance/cancel_withdraw',\n            headers: {},\n            params: {\n              withdrawId: even.id\n            },\n            method: 'post'\n          }).then(function (data) {\n            var ind = _this4.revokeList.indexOf(even.id);\n\n            _this4.revokeList.splice(ind, 1);\n\n            if (data.code.toString() === '0') {\n              _this4.getData();\n\n              _this4.$bus.$emit('tip', {\n                text: data.msg,\n                type: 'success'\n              });\n            } else {\n              _this4.$bus.$emit('tip', {\n                text: data.msg,\n                type: 'error'\n              });\n            }\n          });\n        }\n      }\n\n      if (type === 'subView') {\n        this.subTableDataId = id.id;\n        this.subTableData = [];\n        this.financeListData.forEach(function (item) {\n          if (item.id === _this4.subTableDataId) {\n            var address = item.addressTo;\n            var txidadd = item.txid;\n\n            if (_this4.isHavePage) {\n              var _address$split = address.split('_'),\n                  _address$split2 = _slicedToArray(_address$split, 1),\n                  newAddress = _address$split2[0];\n\n              address = newAddress;\n            }\n\n            if (_this4.publicInfo.switch.open_txid_addr_jump && _this4.publicInfo.switch.open_txid_addr_jump === '1' && item.txidAddr) {\n              var txid = \"<a href='\".concat(item.txidAddr, \"' target='_blank' class='b-4-cl'>\").concat(item.txid, \"</a>\");\n              txidadd = txid;\n            }\n\n            _this4.subTableData.push([address, // 地址\n            item.walletTime ? formatTime(item.walletTime) : '---', txidadd || '---']);\n          }\n        });\n      }\n    },\n    // 充值数据\n    rechargeData: function rechargeData() {\n      var _this5 = this;\n\n      this.axios({\n        url: 'record/new_deposit_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          coinSymbol: this.axiosSymbol,\n          type: this.topUpTypeInner === '0' ? null : Number(this.topUpTypeInner) // 类型\n\n        }\n      }).then(function (data) {\n        if (_this5.nowType !== 1) return;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n          _this5.financeListData = data.data.financeList.map(function (item) {\n            return _objectSpread(_objectSpread({}, item), {}, {\n              id: item.createdAtTime\n            });\n          });\n          data.data.financeList.forEach(function (item) {\n            var coinList = _this5.market.coinList;\n            var fix = coinList[item.symbol] && coinList[item.symbol].showPrecision || 0;\n            var showCoin = getCoinShowName(item.symbol, coinList);\n            list.push({\n              id: item.createdAtTime,\n              data: [item.createdAt, // 时间\n              showCoin, // 币种\n              fixD(item.amount, fix), // 充值数量\n              item.confirmDesc, // 确认次数\n              item.status_text, // 状态\n              _this5.handleButton(item)]\n            });\n          });\n          _this5.tabelLoading = false;\n          _this5.tabelList = list;\n          _this5.paginationObj.total = data.data.count;\n        }\n      });\n    },\n    // 提现数据\n    withdrawData: function withdrawData() {\n      var _this6 = this;\n\n      this.axios({\n        url: 'record/new_withdraw_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          coinSymbol: this.axiosSymbol,\n          type: this.otherTypeInner === '0' ? null : Number(this.otherTypeInner) // 类型\n\n        }\n      }).then(function (data) {\n        if (_this6.nowType !== 2) return;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n          _this6.financeListData = data.data.financeList;\n          data.data.financeList.forEach(function (item) {\n            var coinList = _this6.market.coinList;\n            var fix = coinList[item.symbol] && coinList[item.symbol].showPrecision || 0;\n            var showCoin = getCoinShowName(item.symbol, coinList);\n            list.push({\n              id: item.id,\n              data: [item.createdAt, // 时间\n              showCoin, // 币种\n              // address, // 地址\n              fixD(item.amount, fix), // 充值数量\n              fixD(item.fee, fix), // 手续费\n              item.label, // 备注\n              item.status_text, // 状态\n              _this6.handleButton(item)]\n            });\n          });\n          _this6.tabelLoading = false;\n          _this6.tabelList = list;\n          _this6.paginationObj.total = data.data.count;\n        }\n      });\n    },\n    handleButton: function handleButton(item) {\n      var arr = [];\n\n      if (item.status === 0 && this.nowType === 2 && item.type === '1') {\n        arr.push({\n          type: 'button',\n          // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n          text: this.$t('assets.flowingWater.Cancel'),\n          iconClass: [''],\n          eventType: 'revoke'\n        });\n      }\n\n      arr.push({\n        type: 'subTable',\n        classes: 'u-8-cl',\n        text: this.$t('trade.view'),\n        // 详情\n        eventType: 'subView'\n      });\n      return arr;\n    },\n    // 其他数据\n    otherData: function otherData() {\n      var _this7 = this;\n\n      this.axios({\n        url: 'record/other_transfer_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          coinSymbol: this.axiosSymbol,\n          transactionScene: this.otherType\n        }\n      }).then(function (data) {\n        if (_this7.nowType !== 3) return;\n\n        if (data.code.toString() === '0') {\n          var _data$data2 = data.data,\n              financeList = _data$data2.financeList,\n              count = _data$data2.count;\n          var list = [];\n          financeList.forEach(function (item, index) {\n            var coinList = _this7.market.coinList;\n            var fix = coinList[item.coinSymbol] && coinList[item.coinSymbol].showPrecision || 0;\n            var showCoin = getCoinShowName(item.coinSymbol, coinList);\n            list.push({\n              id: index,\n              data: [item.createTime, // 时间\n              showCoin, // 币种\n              item.transactionScene, // 类型\n              fixD(item.amount, fix), // 数量\n              item.status_text // 状态\n              ]\n            });\n          });\n          _this7.tabelLoading = false;\n          _this7.tabelList = list;\n          _this7.paginationObj.total = count;\n        }\n      });\n    }\n  }\n};",null]}