{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/newTrade/newTrade.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/newTrade/newTrade.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { fixD, formatTime, nul, thousandsComma as _thousandsComma } from '@/utils';\nexport default {\n  name: 'newTrade',\n  components: {},\n  data: function data() {\n    return {\n      wsData: [],\n      dataList: [],\n      cellWidth: [120, 90, 90],\n      differNUmber: 29,\n      bodyHeight: '700px',\n      symbolCurrent: null\n    };\n  },\n  computed: {\n    // 当前合约面值\n    multiplier: function multiplier() {\n      return Number(this.$store.state.future.multiplier);\n    },\n    // 合约数量单位\n    coUnit: function coUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 数量单位类型Number\n    coUnitType: function coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 合约数量精度\n    volfix: function volfix() {\n      return this.$store.state.future.volfix;\n    },\n    // 合约币对价格精度\n    pricefix: function pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    theadList: function theadList() {\n      return [this.$t('futures.newTrade.text2'), // 价格\n      \"\".concat(this.$t('futures.newTrade.text3'), \" (\").concat(this.coUnit, \")\"), // 数量\n      this.$t('futures.newTrade.text4') //  时间\n      ];\n    }\n  },\n  watch: {\n    coUnitType: function coUnitType(val, old) {\n      if (val && old) {\n        this.setDataList(JSON.stringify(this.wsData), 'req');\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.$bus.$on('TRADE_DATA_REQ', function (data) {\n        _this.setDataList(data, 'req');\n      });\n      this.$bus.$on('TRADE_DATA_SUB', function (data) {\n        _this.setDataList(data, 'sub');\n      }); // 获取 当前选中的货币对\n\n      this.$bus.$on('SYMBOL_CURRENT', function (val) {\n        _this.symbolCurrent = val;\n      });\n    },\n    setDataList: function setDataList(data, type) {\n      var _this2 = this;\n\n      var wsData = JSON.parse(data);\n      var arr = [];\n\n      if (type === 'req') {\n        this.dataList = [];\n        this.wsData = [];\n      }\n\n      if (wsData && wsData.length) {\n        wsData.forEach(function (item, index) {\n          var vol = item.vol; // 标的货币\n\n          if (_this2.coUnitType === 1) {\n            vol = fixD(nul(vol, _this2.multiplier), _this2.volfix);\n          }\n\n          var obj = {\n            side: item.side === 'SELL' ? 'u-4-cl' : 'u-1-cl',\n            time: formatTime(item.ts).split(' ')[1],\n            ts: item.ts,\n            price: fixD(item.price, _this2.pricefix),\n            vol: vol,\n            date: new Date().getTime() + index\n          };\n\n          if (type === 'sub') {\n            _this2.dataList.unshift(obj);\n\n            _this2.wsData.unshift(item);\n\n            if (_this2.dataList.length > 150) {\n              _this2.dataList.pop();\n\n              _this2.wsData.pop();\n            }\n          } else {\n            arr.push(obj);\n          }\n        });\n      }\n\n      if (type === 'req') {\n        this.dataList = arr;\n        this.wsData = wsData;\n      }\n\n      this.differNUmber = 29 - this.dataList.length > 0 ? 29 - this.dataList.length : 0;\n    },\n    handelPrice: function handelPrice(price) {\n      this.$bus.$emit('HANDEL_PRICE', price);\n    },\n    kyes: function kyes(item, index) {\n      if (item.change) {\n        return new Date().getTime();\n      }\n\n      return index;\n    },\n    thousandsComma: function thousandsComma(num) {\n      if (num) {\n        return _thousandsComma(num);\n      }\n\n      return num;\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/newTrade/newTrade.js"],"names":["fixD","formatTime","nul","thousandsComma","name","components","data","wsData","dataList","cellWidth","differNUmber","bodyHeight","symbolCurrent","computed","multiplier","Number","$store","state","future","coUnit","coUnitType","volfix","pricefix","theadList","$t","watch","val","old","setDataList","JSON","stringify","methods","init","$bus","$on","type","parse","arr","length","forEach","item","index","vol","obj","side","time","ts","split","price","date","Date","getTime","unshift","pop","push","handelPrice","$emit","kyes","change","num"],"mappings":"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","sourcesContent":["import {\n  fixD, formatTime, nul, thousandsComma,\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'newTrade',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      wsData: [],\r\n      dataList: [],\r\n      cellWidth: [120, 90, 90],\r\n      differNUmber: 29,\r\n      bodyHeight: '700px',\r\n      symbolCurrent: null,\r\n    };\r\n  },\r\n  computed: {\r\n    // 当前合约面值\r\n    multiplier() {\r\n      return Number(this.$store.state.future.multiplier);\r\n    },\r\n    // 合约数量单位\r\n    coUnit() {\r\n      return this.$store.state.future.coUnit;\r\n    },\r\n    // 数量单位类型Number\r\n    coUnitType() {\r\n      return this.$store.state.future.coUnitType;\r\n    },\r\n    // 合约数量精度\r\n    volfix() {\r\n      return this.$store.state.future.volfix;\r\n    },\r\n    // 合约币对价格精度\r\n    pricefix() {\r\n      return this.$store.state.future.pricefix;\r\n    },\r\n    theadList() {\r\n      return [\r\n        this.$t('futures.newTrade.text2'), // 价格\r\n        `${this.$t('futures.newTrade.text3')} (${this.coUnit})`, // 数量\r\n        this.$t('futures.newTrade.text4'), //  时间\r\n      ];\r\n    },\r\n  },\r\n  watch: {\r\n    coUnitType(val, old) {\r\n      if (val && old) {\r\n        this.setDataList(JSON.stringify(this.wsData), 'req');\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.$bus.$on('TRADE_DATA_REQ', (data) => {\r\n        this.setDataList(data, 'req');\r\n      });\r\n      this.$bus.$on('TRADE_DATA_SUB', (data) => {\r\n        this.setDataList(data, 'sub');\r\n      });\r\n      // 获取 当前选中的货币对\r\n      this.$bus.$on('SYMBOL_CURRENT', (val) => {\r\n        this.symbolCurrent = val;\r\n      });\r\n    },\r\n    setDataList(data, type) {\r\n      const wsData = JSON.parse(data);\r\n      const arr = [];\r\n      if (type === 'req') {\r\n        this.dataList = [];\r\n        this.wsData = [];\r\n      }\r\n      if (wsData && wsData.length) {\r\n        wsData.forEach((item, index) => {\r\n          let { vol } = item;\r\n          // 标的货币\r\n          if (this.coUnitType === 1) {\r\n            vol = fixD(nul(vol, this.multiplier), this.volfix);\r\n          }\r\n          const obj = {\r\n            side: item.side === 'SELL' ? 'u-4-cl' : 'u-1-cl',\r\n            time: formatTime(item.ts).split(' ')[1],\r\n            ts: item.ts,\r\n            price: fixD(item.price, this.pricefix),\r\n            vol,\r\n            date: new Date().getTime() + index,\r\n          };\r\n          if (type === 'sub') {\r\n            this.dataList.unshift(obj);\r\n            this.wsData.unshift(item);\r\n            if (this.dataList.length > 150) {\r\n              this.dataList.pop();\r\n              this.wsData.pop();\r\n            }\r\n          } else {\r\n            arr.push(obj);\r\n          }\r\n        });\r\n      }\r\n      if (type === 'req') {\r\n        this.dataList = arr;\r\n        this.wsData = wsData;\r\n      }\r\n      this.differNUmber = 29 - this.dataList.length > 0 ? 29 - this.dataList.length : 0;\r\n    },\r\n    handelPrice(price) {\r\n      this.$bus.$emit('HANDEL_PRICE', price);\r\n    },\r\n    kyes(item, index) {\r\n      if (item.change) {\r\n        return new Date().getTime();\r\n      }\r\n      return index;\r\n    },\r\n    thousandsComma(num) {\r\n      if (num) {\r\n        return thousandsComma(num);\r\n      }\r\n      return num;\r\n    },\r\n  },\r\n};\r\n"]}]}