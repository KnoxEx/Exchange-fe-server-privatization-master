{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/CompanyApplication/CompanyApplicationDetail/CompanyApplicationDetail.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/CompanyApplication/CompanyApplicationDetail/CompanyApplicationDetail.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { myStorage, logImg, getCoinShowName } from '@/utils';\nexport default {\n  name: 'CompanyApplication',\n  data: function data() {\n    return {\n      textFlag: true,\n      copyTime: 0,\n      submitLoading: false,\n      // 提交按钮loading\n      superCompany: false,\n      stepProgress: this.$t('application.stepProgress'),\n      moduleShow: false\n    };\n  },\n  watch: {},\n  computed: {\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    fiatTradeOpen: function fiatTradeOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.fiat_trade_open === '1') {\n        return true;\n      }\n\n      return false;\n    },\n    otcCompanyInfo: function otcCompanyInfo() {\n      return this.userInfo.otcCompanyInfo || {};\n    },\n    userCompanyInfo: function userCompanyInfo() {\n      return this.userInfo.userCompanyInfo || {};\n    },\n    headerDesc: function headerDesc() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n      var str = '';\n\n      switch (applyStatus) {\n        case 0:\n          {\n            str = this.$t('application.company.head.desc');\n            break;\n          }\n\n        case 3:\n          {\n            str = this.$t('application.company.head.descApplied');\n\n            if (applyRuleStatus === 0 || applyRuleStatus === 1) {\n              str = this.$t('application.company.head.desc');\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            if (applyRuleStatus === 1 || applyRuleStatus === 0) {\n              str = this.$t('application.company.head.desc');\n            }\n\n            break;\n          }\n\n        default:\n          {\n            str = '';\n          }\n      }\n\n      return str;\n    },\n    headerTitle: function headerTitle() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      var companyTypeS = 1;\n      var str = '';\n      var applyMap = {\n        0: '',\n        1: 'Appling',\n        3: 'Applied'\n      };\n      var companyMap = {\n        1: '',\n        2: 'Super'\n      };\n      var applyType = applyMap[this.applyStatus];\n\n      if (this.applySuper) {\n        applyType = '';\n      } else if (applyStatus === 1 && applyRuleStatus === 0) {\n        applyType = 'Appling';\n      } else if (applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 1 || applyStatus === 2 && applyRuleStatus === 3) {\n        applyType = 'Applied';\n      } else if (applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 0) || applyStatus === 3 && applyRuleStatus === 0 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2) {\n        applyType = '';\n      }\n\n      if (applyRuleStatus === 1 && companyStatus === 2 || applyStatus === 3 && applyRuleStatus === 3 || applyStatus === 2 && applyRuleStatus === 3 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2) {\n        companyTypeS = 2;\n      }\n\n      var companyTypeDesc = companyMap[companyTypeS];\n      str = this.$t(\"application.company\".concat(companyTypeDesc, \".head.title\").concat(applyType));\n\n      if (str.indexOf('undefined') > -1) {\n        str = '';\n      }\n\n      return str;\n    },\n    applySuper: function applySuper() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyType = this.companyType;\n      return (applyStatus === 3 || applyStatus === 2) && applyRuleStatus === 1 && companyType === 2;\n    },\n    companyStatus: function companyStatus() {\n      return Number(this.otcCompanyInfo.status);\n    },\n    applyStatus: function applyStatus() {\n      return Number(this.userCompanyInfo.applyStatus);\n    },\n    marginCoinSymbol: function marginCoinSymbol() {\n      return this.otcCompanyInfo.marginCoinSymbol;\n    },\n    normalCompanyMarginNum: function normalCompanyMarginNum() {\n      var no = 0;\n\n      if (this.applyRuleStatus === 0) {\n        no = Number(this.otcCompanyInfo.normalCompanyMarginNum);\n      } else if (this.applyRuleStatus === 1) {\n        no = Number(this.otcCompanyInfo.superCompanyMarginNum);\n      }\n\n      return no;\n    },\n    otcCompanyApplyEmail: function otcCompanyApplyEmail() {\n      return this.otcCompanyInfo.otcCompanyApplyEmail;\n    },\n\n    /*\n    * applyRuleStatus\n    * 0: 未认证\n    * 1: 普通商户\n    * 2: 普通商户解除\n    * 3: 超级商户\n    * 4: 超级商户解除\n    * */\n    applyRuleStatus: function applyRuleStatus() {\n      return Number(this.userCompanyInfo.status);\n    },\n    allPass: function allPass() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      return applyRuleStatus === 3 && (applyStatus === 3 || applyStatus === 2) || (applyStatus === 3 || applyStatus === 2) && applyRuleStatus === 1 && companyStatus === 1;\n    },\n    applyPass: function applyPass() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n      return applyRuleStatus === 3 && applyStatus === 3 || applyStatus === 3 && applyRuleStatus === 1;\n    },\n    applying: function applying() {\n      var bol = false;\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n\n      if (applyStatus === 1 && (applyRuleStatus === 1 || applyRuleStatus === 3 || applyRuleStatus === 0)) {\n        bol = true;\n      }\n\n      return bol;\n    },\n    relieving: function relieving() {\n      var bol = false;\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n\n      if (applyStatus === 1 && (applyRuleStatus === 2 || applyRuleStatus === 4)) {\n        bol = true;\n      }\n\n      return bol;\n    },\n    docAddr: function docAddr() {\n      return this.otcCompanyInfo.docAddr;\n    },\n    submitDisabled: function submitDisabled() {\n      return !this.textFlag;\n    },\n    btnShow: function btnShow() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      return applyStatus === 0 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2 || applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 2 || applyRuleStatus === 0 && applyStatus !== 1;\n    },\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo || {};\n    }\n  },\n  methods: {\n    getShowCoin: function getShowCoin(v) {\n      var str = v;\n\n      if (this.market && this.market.coinList) {\n        str = getCoinShowName(v, this.market.coinList);\n      }\n\n      return str;\n    },\n    init: function init() {\n      var applyRuleStatus = this.applyRuleStatus,\n          applyStatus = this.applyStatus;\n\n      if (this.companyStatus === 0) {\n        this.$router.push('/');\n      } else if ((applyRuleStatus === 2 || applyRuleStatus === 4) && applyStatus === 1) {\n        this.$router.push('/companyApplication');\n      } else {\n        this.moduleShow = true;\n      }\n    },\n    relieveClick: function relieveClick() {\n      var _window = window,\n          history = _window.history;\n\n      if (!history.state) {\n        this.$router.push('/companyApplication');\n      } else {\n        history.back();\n      }\n    },\n    lineShow: function lineShow(inx, len) {\n      return inx + 1 < len;\n    },\n    copyMail: function copyMail(val) {\n      var time = new Date().getTime();\n\n      if (time - this.copyTime > 1000) {\n        this.$bus.$emit('tip', {\n          text: '复制成功',\n          type: 'success'\n        });\n\n        var save = function save(e) {\n          e.clipboardData.setData('text/plain', val);\n          e.preventDefault();\n        };\n\n        document.addEventListener('copy', save, false);\n        document.execCommand('copy');\n        document.removeEventListener('copy', save);\n        this.copyTime = time;\n      }\n    },\n    actived: function actived(type) {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      var count = applyStatus;\n\n      if (applyRuleStatus === 1 && applyStatus === 3 && companyStatus === 2 || applyRuleStatus === 0 && applyStatus !== 1 || applyStatus === 2 && applyRuleStatus === 1) {\n        count = 0;\n      }\n\n      if (applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 3)) {\n        count = 3;\n      }\n\n      return count >= type ? 'a-12-bg' : 'a-2-bg ';\n    },\n    checkoutClick: function checkoutClick(flag) {\n      this.textFlag = flag;\n    },\n    back: function back() {\n      this.$router.push('/');\n    },\n    applyCompany: function applyCompany() {\n      var _this = this;\n\n      var type = 1;\n\n      if (this.applyRuleStatus === 0) {\n        type = 0;\n      }\n\n      if (this.applyRuleStatus === 1) {\n        type = 1;\n      }\n\n      this.axios({\n        url: this.$store.state.url.common.company_apply,\n        hostType: 'otc',\n        method: 'post',\n        params: {\n          type: type\n        }\n      }).then(function (data) {\n        if (!Number(data.code)) {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this.$store.dispatch('getUserInfo');\n\n          myStorage.remove('companyAppling');\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n\n        _this.submitLoading = false;\n      });\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      this.submitLoading = true;\n      this.axios({\n        url: this.$store.state.url.common.otc_account_list,\n        hostType: 'ex',\n        method: 'post'\n      }).then(function (data) {\n        if (!Number(data.code)) {\n          var allCoinMap = data.data.allCoinMap;\n          var hasSymbol = false;\n          allCoinMap.forEach(function (item) {\n            if (item.coinSymbol === _this2.marginCoinSymbol) {\n              hasSymbol = true;\n\n              if (Number(item.normal) >= _this2.normalCompanyMarginNum) {\n                _this2.applyCompany();\n              } else {\n                _this2.$bus.$emit('tip', {\n                  text: _this2.fiatTradeOpen ? _this2.$t('assets.b2c.otcShow.unEnough') : _this2.$t('application.unEnough'),\n                  type: 'error'\n                });\n\n                _this2.submitLoading = false;\n              }\n            }\n          });\n\n          if (!hasSymbol) {\n            logImg({\n              host: window.location.host,\n              type: 'marginCoinSymbol',\n              path: window.location.href,\n              ds: 'marginCoinSymbol error',\n              data: {\n                marginCoinSymbol: _this2.marginCoinSymbol,\n                allCoinMap: allCoinMap.map(function (i) {\n                  return i.coinSymbol;\n                })\n              },\n              t: new Date().getTime()\n            });\n          }\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/CompanyApplication/CompanyApplicationDetail/CompanyApplicationDetail.js"],"names":["myStorage","logImg","getCoinShowName","name","data","textFlag","copyTime","submitLoading","superCompany","stepProgress","$t","moduleShow","watch","computed","market","$store","state","baseData","fiatTradeOpen","base","publicInfo","switch","fiat_trade_open","otcCompanyInfo","userInfo","userCompanyInfo","headerDesc","applyStatus","applyRuleStatus","str","headerTitle","companyStatus","companyTypeS","applyMap","companyMap","applyType","applySuper","companyTypeDesc","indexOf","companyType","Number","status","marginCoinSymbol","normalCompanyMarginNum","no","superCompanyMarginNum","otcCompanyApplyEmail","allPass","applyPass","applying","bol","relieving","docAddr","submitDisabled","btnShow","methods","getShowCoin","v","coinList","init","$router","push","relieveClick","window","history","back","lineShow","inx","len","copyMail","val","time","Date","getTime","$bus","$emit","text","type","save","e","clipboardData","setData","preventDefault","document","addEventListener","execCommand","removeEventListener","actived","count","checkoutClick","flag","applyCompany","axios","url","common","company_apply","hostType","method","params","then","code","msg","dispatch","remove","submit","otc_account_list","allCoinMap","hasSymbol","forEach","item","coinSymbol","normal","host","location","path","href","ds","map","i","t"],"mappings":"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","sourcesContent":["import { myStorage, logImg, getCoinShowName } from '@/utils';\n\nexport default {\n  name: 'CompanyApplication',\n  data() {\n    return {\n      textFlag: true,\n      copyTime: 0,\n      submitLoading: false, // 提交按钮loading\n      superCompany: false,\n      stepProgress: this.$t('application.stepProgress'),\n      moduleShow: false,\n    };\n  },\n  watch: {\n  },\n  computed: {\n    market() { return this.$store.state.baseData.market; },\n    fiatTradeOpen() {\n      const base = this.$store.state.baseData.publicInfo;\n      if (base && base.switch && base.switch.fiat_trade_open === '1') {\n        return true;\n      }\n      return false;\n    },\n    otcCompanyInfo() {\n      return this.userInfo.otcCompanyInfo || {};\n    },\n    userCompanyInfo() {\n      return this.userInfo.userCompanyInfo || {};\n    },\n    headerDesc() {\n      const { applyStatus, applyRuleStatus } = this;\n      let str = '';\n      switch (applyStatus) {\n        case 0: {\n          str = this.$t('application.company.head.desc');\n          break;\n        }\n        case 3: {\n          str = this.$t('application.company.head.descApplied');\n          if (applyRuleStatus === 0 || applyRuleStatus === 1) {\n            str = this.$t('application.company.head.desc');\n          }\n          break;\n        }\n        case 2: {\n          if (applyRuleStatus === 1 || applyRuleStatus === 0) {\n            str = this.$t('application.company.head.desc');\n          }\n          break;\n        }\n        default: {\n          str = '';\n        }\n      }\n      return str;\n    },\n    headerTitle() {\n      const { applyStatus, applyRuleStatus, companyStatus } = this;\n      let companyTypeS = 1;\n      let str = '';\n      const applyMap = {\n        0: '',\n        1: 'Appling',\n        3: 'Applied',\n      };\n      const companyMap = {\n        1: '',\n        2: 'Super',\n      };\n      let applyType = applyMap[this.applyStatus];\n      if (this.applySuper) {\n        applyType = '';\n      } else if (applyStatus === 1 && applyRuleStatus === 0) {\n        applyType = 'Appling';\n      } else if ((applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 1)\n        || (applyStatus === 2 && applyRuleStatus === 3)) {\n        applyType = 'Applied';\n      } else if ((applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 0))\n        || (applyStatus === 3 && applyRuleStatus === 0)\n        || (applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2)) {\n        applyType = '';\n      }\n      if ((applyRuleStatus === 1 && companyStatus === 2)\n        || (applyStatus === 3 && applyRuleStatus === 3)\n        || (applyStatus === 2 && applyRuleStatus === 3)\n      || (applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2)) {\n        companyTypeS = 2;\n      }\n      const companyTypeDesc = companyMap[companyTypeS];\n      str = this.$t(`application.company${companyTypeDesc}.head.title${applyType}`);\n      if (str.indexOf('undefined') > -1) {\n        str = '';\n      }\n      return str;\n    },\n    applySuper() {\n      const { applyStatus, applyRuleStatus, companyType } = this;\n      return ((applyStatus === 3 || applyStatus === 2)\n        && applyRuleStatus === 1 && companyType === 2);\n    },\n    companyStatus() {\n      return Number(this.otcCompanyInfo.status);\n    },\n    applyStatus() {\n      return Number(this.userCompanyInfo.applyStatus);\n    },\n    marginCoinSymbol() {\n      return this.otcCompanyInfo.marginCoinSymbol;\n    },\n    normalCompanyMarginNum() {\n      let no = 0;\n      if (this.applyRuleStatus === 0) {\n        no = Number(this.otcCompanyInfo.normalCompanyMarginNum);\n      } else if (this.applyRuleStatus === 1) {\n        no = Number(this.otcCompanyInfo.superCompanyMarginNum);\n      }\n      return no;\n    },\n    otcCompanyApplyEmail() {\n      return this.otcCompanyInfo.otcCompanyApplyEmail;\n    },\n    /*\n    * applyRuleStatus\n    * 0: 未认证\n    * 1: 普通商户\n    * 2: 普通商户解除\n    * 3: 超级商户\n    * 4: 超级商户解除\n    * */\n    applyRuleStatus() {\n      return Number(this.userCompanyInfo.status);\n    },\n    allPass() {\n      const { applyStatus, applyRuleStatus, companyStatus } = this;\n      return (applyRuleStatus === 3 && (applyStatus === 3 || applyStatus === 2))\n        || ((applyStatus === 3 || applyStatus === 2)\n          && applyRuleStatus === 1 && companyStatus === 1);\n    },\n    applyPass() {\n      const { applyStatus, applyRuleStatus } = this;\n      return (applyRuleStatus === 3 && applyStatus === 3)\n        || (applyStatus === 3 && applyRuleStatus === 1);\n    },\n    applying() {\n      let bol = false;\n      const { applyStatus, applyRuleStatus } = this;\n      if ((applyStatus === 1)\n        && (applyRuleStatus === 1 || applyRuleStatus === 3 || applyRuleStatus === 0)) {\n        bol = true;\n      }\n      return bol;\n    },\n    relieving() {\n      let bol = false;\n      const { applyStatus, applyRuleStatus } = this;\n      if (applyStatus === 1 && (applyRuleStatus === 2 || applyRuleStatus === 4)) {\n        bol = true;\n      }\n      return bol;\n    },\n    docAddr() {\n      return this.otcCompanyInfo.docAddr;\n    },\n    submitDisabled() {\n      return !this.textFlag;\n    },\n    btnShow() {\n      const { applyStatus, applyRuleStatus, companyStatus } = this;\n      return applyStatus === 0\n      || (applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2)\n      || (applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 2)\n      || (applyRuleStatus === 0 && applyStatus !== 1);\n    },\n    userInfo() {\n      return this.$store.state.baseData.userInfo || {};\n    },\n  },\n  methods: {\n    getShowCoin(v) {\n      let str = v;\n      if (this.market && this.market.coinList) {\n        str = getCoinShowName(v, this.market.coinList);\n      }\n      return str;\n    },\n    init() {\n      const { applyRuleStatus, applyStatus } = this;\n      if (this.companyStatus === 0) {\n        this.$router.push('/');\n      } else if ((applyRuleStatus === 2 || applyRuleStatus === 4) && applyStatus === 1) {\n        this.$router.push('/companyApplication');\n      } else {\n        this.moduleShow = true;\n      }\n    },\n    relieveClick() {\n      const { history } = window;\n      if (!history.state) {\n        this.$router.push('/companyApplication');\n      } else {\n        history.back();\n      }\n    },\n    lineShow(inx, len) {\n      return (inx + 1) < len;\n    },\n    copyMail(val) {\n      const time = new Date().getTime();\n      if (time - this.copyTime > 1000) {\n        this.$bus.$emit('tip', { text: '复制成功', type: 'success' });\n        const save = function save(e) {\n          e.clipboardData.setData('text/plain', val);\n          e.preventDefault();\n        };\n        document.addEventListener('copy', save, false);\n        document.execCommand('copy');\n        document.removeEventListener('copy', save);\n        this.copyTime = time;\n      }\n    },\n    actived(type) {\n      const { applyStatus, applyRuleStatus, companyStatus } = this;\n      let count = applyStatus;\n      if ((applyRuleStatus === 1 && applyStatus === 3 && companyStatus === 2)\n        || (applyRuleStatus === 0 && applyStatus !== 1)\n      || (applyStatus === 2 && applyRuleStatus === 1)) {\n        count = 0;\n      }\n      if (applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 3)) {\n        count = 3;\n      }\n      return count >= type ? 'a-12-bg' : 'a-2-bg ';\n    },\n    checkoutClick(flag) {\n      this.textFlag = flag;\n    },\n    back() {\n      this.$router.push('/');\n    },\n    applyCompany() {\n      let type = 1;\n      if (this.applyRuleStatus === 0) {\n        type = 0;\n      }\n      if (this.applyRuleStatus === 1) {\n        type = 1;\n      }\n      this.axios({\n        url: this.$store.state.url.common.company_apply,\n        hostType: 'otc',\n        method: 'post',\n        params: {\n          type,\n        },\n      }).then((data) => {\n        if (!Number(data.code)) {\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\n          this.$store.dispatch('getUserInfo');\n          myStorage.remove('companyAppling');\n        } else {\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\n        }\n        this.submitLoading = false;\n      });\n    },\n    submit() {\n      this.submitLoading = true;\n      this.axios({\n        url: this.$store.state.url.common.otc_account_list,\n        hostType: 'ex',\n        method: 'post',\n      }).then((data) => {\n        if (!Number(data.code)) {\n          const { allCoinMap } = data.data;\n          let hasSymbol = false;\n          allCoinMap.forEach((item) => {\n            if (item.coinSymbol === this.marginCoinSymbol) {\n              hasSymbol = true;\n              if (Number(item.normal) >= this.normalCompanyMarginNum) {\n                this.applyCompany();\n              } else {\n                this.$bus.$emit('tip', {\n                  text: this.fiatTradeOpen\n                    ? this.$t('assets.b2c.otcShow.unEnough')\n                    : this.$t('application.unEnough'),\n                  type: 'error',\n                });\n                this.submitLoading = false;\n              }\n            }\n          });\n          if (!hasSymbol) {\n            logImg({\n              host: window.location.host,\n              type: 'marginCoinSymbol',\n              path: window.location.href,\n              ds: 'marginCoinSymbol error',\n              data: {\n                marginCoinSymbol: this.marginCoinSymbol,\n                allCoinMap: allCoinMap.map((i) => i.coinSymbol),\n              },\n              t: new Date().getTime(),\n            });\n          }\n        }\n      });\n    },\n  },\n};\n"]}]}