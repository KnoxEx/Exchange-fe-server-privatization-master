{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/components/positionLis/positionLis.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/components/positionLis/positionLis.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/*\r\n@ 持仓列表\r\n@author HDD */\nimport { nul, division, fixD, fixInput, thousandsComma as _thousandsComma, myStorage } from '@/utils';\nexport default {\n  name: 'positionList',\n  data: function data() {\n    return {\n      // 修改保证金弹框\n      isShowDialog: false,\n      formLisValue: {},\n      // 持仓列表\n      tableDataList: null,\n      // 平仓提交数据\n      submitData: {},\n      // 修改保证金数据\n      editMargindata: {},\n      // 二次确认数据\n      confirmData: {},\n      // 是否显示二次确认弹框\n      forcedReminderShow: false,\n      // 防止二次提交\n      submitFlag: true,\n      // 止盈止损弹框\n      stopOrderShow: false,\n      // 止盈止损张数\n      stopOrderdata: {},\n      cellWidth: [],\n      // class\n      activeLineId: '',\n      activeLineClass: '',\n      // 只显示当前合约开关\n      isShowCurPosition: myStorage.get('isShowCurPosition'),\n      // 显示已结算盈亏弹框\n      isAmountDialog: false,\n      // 已结算盈亏弹框数据\n      activeAmountData: {},\n      // 去掉已结算盈亏弹框的按钮\n      ishaveOption: false // positionListNumber: 0,\n\n    };\n  },\n  watch: {\n    positionList: function positionList(val) {\n      if (val && val.length) {\n        this.tableDataList = this.formPosition();\n      } else {\n        this.tableDataList = null;\n      }\n\n      this.setCellWidth();\n    },\n    userConfig: function userConfig(val, old) {\n      if (val && old) {\n        this.formLisValue = {};\n        this.$store.dispatch('getPositionList');\n        this.tableDataList = this.formPosition();\n      }\n    },\n    positionListNumber: function positionListNumber(val) {\n      this.$bus.$emit('positionListNumber', val);\n    }\n  },\n  computed: {\n    lanText: function lanText() {\n      return {\n        columns1: this.$t('futures.positionLis.columns1'),\n        columns2: this.$t('futures.positionLis.columns2'),\n        columns3: this.$t('futures.positionLis.columns3'),\n        columns4: this.$t('futures.positionLis.columns4'),\n        columns5: this.$t('futures.positionLis.columns5'),\n        columns6: this.$t('futures.positionLis.columns6'),\n        columns7: this.$t('futures.positionLis.columns7'),\n        columns8: this.$t('futures.positionLis.columns8'),\n        columns9: this.$t('futures.positionLis.columns9'),\n        columns10: this.$t('futures.positionLis.columns10'),\n        text1: this.$t('futures.positionLis.text1'),\n        text2: this.$t('futures.positionLis.text2'),\n        text3: this.$t('futures.positionLis.text3'),\n        text4: this.$t('futures.positionLis.text4'),\n        text5: this.$t('futures.positionLis.text5'),\n        text6: this.$t('futures.positionLis.text6'),\n        text7: this.$t('futures.positionLis.text7'),\n        text8: this.$t('futures.positionLis.text8'),\n        text9: this.$t('futures.positionLis.text9'),\n        text10: this.$t('futures.positionLis.text10'),\n        text11: this.$t('futures.positionLis.text11'),\n        text12: this.$t('futures.positionLis.text12'),\n        text13: this.$t('futures.positionLis.text13'),\n        text14: this.$t('futures.positionLis.text14'),\n        text15: this.$t('futures.positionLis.text15'),\n        text16: this.$t('futures.positionLis.text16'),\n        text17: this.$t('futures.positionLis.text17'),\n        text18: this.$t('futures.positionLis.text18'),\n        text19: this.$t('futures.positionLis.text19'),\n        text20: this.$t('futures.positionLis.text20'),\n        text21: this.$t('futures.positionLis.text21'),\n        text22: this.$t('futures.positionLis.text22'),\n        text23: this.$t('futures.positionLis.text23'),\n        text24: this.$t('futures.positionLis.text24'),\n        text25: this.$t('futures.positionLis.text25'),\n        text26: this.$t('futures.positionLis.text26')\n      };\n    },\n    // 表头\n    columns: function columns() {\n      // '量 ' : '张'\n      var coUnittext = this.coUnitType === 1 ? this.lanText.text4 : this.lanText.text5;\n      return [{\n        title: this.lanText.columns1 // '合约',\n\n      }, {\n        title: \"\".concat(this.lanText.columns2, \"(\").concat(coUnittext, \")\"),\n        // 仓位/可平\n        promptText: this.lanText.text6\n      }, {\n        title: this.lanText.columns3,\n        // '成本价',\n        promptText: this.lanText.text7\n      }, {\n        title: this.lanText.columns4,\n        // '标记价格',\n        promptText: this.lanText.text8\n      }, {\n        title: this.lanText.columns5,\n        // '强平价格',\n        promptText: this.lanText.text9\n      }, {\n        title: this.lanText.columns6,\n        // '占用保证金',\n        promptText: this.lanText.text10\n      }, {\n        title: this.lanText.columns7,\n        // '保证金率',\n        promptText: this.lanText.text11\n      }, {\n        title: this.lanText.columns8,\n        // '盈亏/收益率',\n        promptText: this.lanText.text12\n      }, {\n        title: this.lanText.text26 // '已结算盈亏',\n\n      }, {\n        title: this.lanText.columns9,\n        // '快速平仓',\n        classes: 'close-position'\n      }, {\n        title: this.lanText.columns10,\n        // '止盈止损',\n        promptText: this.lanText.text13\n      }];\n    },\n    // 用户配置信息\n    userConfig: function userConfig() {\n      return this.$store.state.future.futureUserConfig;\n    },\n    // 合约列表 MAP\n    contractListMap: function contractListMap() {\n      return this.$store.state.future.contractListMap;\n    },\n    // 当前合约ID\n    contractId: function contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 持仓列表\n    positionList: function positionList() {\n      return this.$store.state.future.positionList || [];\n    },\n    // 合约数量精度\n    volfix: function volfix() {\n      return this.$store.state.future.volfix;\n    },\n    // 数量单位类型Number（1标的货币 2张）\n    coUnitType: function coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 当前合约面值\n    multiplier: function multiplier() {\n      return Number(this.$store.state.future.multiplier);\n    },\n    // 合约数量单位\n    volUnit: function volUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 合约币对价格精度\n    pricefix: function pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    positionTypeList: function positionTypeList() {\n      // ['', '全仓', '逐仓'];\n      return ['', this.lanText.text14, this.lanText.text15];\n    },\n    volumePlaceholder: function volumePlaceholder() {\n      // '输入数量' : '输入张数';\n      return this.coUnitType === 1 ? this.lanText.text24 : this.lanText.text25;\n    },\n    positionListNumber: function positionListNumber() {\n      if (this.tableDataList) {\n        var keyArr = Object.keys(this.tableDataList);\n        return keyArr.length;\n      }\n\n      return 0;\n    }\n  },\n  methods: {\n    // 设置表头单元格的宽度\n    setCellWidth: function setCellWidth() {\n      var _this = this;\n\n      var tdFefsKeys = Object.keys(this.$refs);\n      this.cellWidth = [];\n      tdFefsKeys.forEach(function (item) {\n        if (item.indexOf('td') !== -1) {\n          if (_this.$refs[item][0]) {\n            _this.cellWidth.push(\"\".concat(_this.$refs[item][0].offsetWidth, \"px\"));\n          }\n        }\n      });\n    },\n    // 当前合约名称\n    activeContractName: function activeContractName(data) {\n      var name = '';\n      var text = '';\n\n      if (data) {\n        var nameText = data.symbol ? data.symbol.replace('-', '') : '';\n\n        if (data.contractType !== 'E') {\n          text = \"-\".concat(data.marginCoin);\n        }\n\n        name = \"\".concat(nameText).concat(text);\n      }\n\n      return name;\n    },\n    // 设置精度\n    fixDset: function fixDset(value, fix) {\n      if (value && fix.toString()) {\n        return fixD(value, fix);\n      }\n\n      return '0.00';\n    },\n    // 设置精度 + 符号\n    fixDSign: function fixDSign(value, fix) {\n      if (value && fix.toString()) {\n        if (Number(value) > 0) {\n          return \"+\".concat(fixD(value, fix));\n        }\n\n        return fixD(value, fix);\n      }\n\n      return '0.00';\n    },\n    // 设置 标的货币单位的数量 还是 张数\n    setVolume: function setVolume(vol, fix, multiplier) {\n      var volume = vol; // 标的货币\n\n      if (this.coUnitType === 1 && multiplier) {\n        // 算出标的货币数量（数量 * 合约面值）\n        volume = fixD(nul(vol, multiplier), fix);\n      }\n\n      return volume;\n    },\n    // 获取仓位的合约和币对配置的信息\n    activeContractInfo: function activeContractInfo(name) {\n      if (this.contractListMap) {\n        return this.contractListMap[name];\n      }\n\n      return null;\n    },\n    // 换算百分比\n    setRate: function setRate(data) {\n      if (data) {\n        return \"\".concat(this.fixDset(nul(data, 100), 2), \"%\");\n      }\n\n      return '0.00%';\n    },\n    lineClass: function lineClass(contractId) {\n      if (contractId !== this.activeLineId) {\n        this.activeLineId = contractId;\n        var classes = this.activeLineClass === 'u-15-bg' ? '' : 'u-15-bg';\n        this.activeLineClass = classes;\n        return this.activeLineClass;\n      }\n\n      return this.activeLineClass;\n    },\n    // 格式化持有仓位\n    formPosition: function formPosition() {\n      var _this2 = this;\n\n      var arr = {};\n      var activeArr = {};\n\n      if (this.positionList && this.positionList.length) {\n        this.positionList.forEach(function (item) {\n          if (!_this2.isShowCurPosition || _this2.isShowCurPosition && item.contractId === _this2.contractId) {\n            _this2.activeLineId = '';\n            _this2.activeLineClass = '';\n\n            var activeData = _this2.activeContractInfo(item.contractName);\n\n            if (!activeData) return false;\n\n            var activeName = _this2.activeContractName(activeData);\n\n            var key = \"\".concat(activeName).concat(item.orderSide);\n            var priceVal = null;\n            var volumeVal = null;\n\n            if (_this2.formLisValue && _this2.formLisValue[key]) {\n              priceVal = _this2.formLisValue[key].price;\n              volumeVal = _this2.formLisValue[key].volume;\n            }\n\n            var sideClass = {\n              bg: 'u-1-bg',\n              color: 'u-1-cl'\n            };\n\n            if (item.orderSide === 'SELL') {\n              sideClass = {\n                bg: 'u-4-bg',\n                color: 'u-4-cl'\n              };\n            } // 强平价格\n\n\n            var reducePrice;\n\n            if (item.reducePrice && item.reducePrice <= 0) {\n              reducePrice = '--';\n            } else {\n              reducePrice = _this2.fixDset(item.reducePrice, activeData.priceFix);\n            } // 合约面值 ： 张\n\n\n            var coUnit = _this2.coUnitType === 1 ? activeData.multiplierCoin : _this2.lanText.text5; // '张';\n            // marginRate\n\n            var obj = {\n              positionId: item.id,\n              key: key,\n              contractName: item.contractName,\n              sideText: item.orderSide === 'SELL' ? _this2.lanText.text16 : _this2.lanText.text17,\n              // '空' : '多',\n              // 数量精度\n              volfix: activeData.volfix,\n              // 价格精度\n              priceFix: activeData.priceFix,\n              // classs\n              lineClass: _this2.lineClass(item.contractId),\n              // 合约名称\n              name: activeName,\n              // 合约ID\n              contractId: item.contractId,\n              // 合约币对\n              symbol: item.symbol,\n              // 买入卖出方向\n              orderSide: item.orderSide,\n              // 买卖Class\n              sideClass: sideClass,\n              // 杠杆\n              leverageLevel: item.leverageLevel,\n              // 仓位模式（1全仓 2逐仓）\n              positionType: item.positionType,\n              // 仓位模式文案（1全仓 2逐仓）\n              positionTypeText: _this2.positionTypeList[item.positionType],\n              // 数量单位\n              coUnit: coUnit,\n              // 张数\n              positionVolumeOriginal: item.positionVolume,\n              // 合约面值\n              multiplier: activeData.multiplier,\n              // 仓位数量\n              positionVolume: _this2.setVolume(item.positionVolume, activeData.volfix, activeData.multiplier),\n              // 可平数量\n              canCloseVolume: _this2.setVolume(item.canCloseVolume, activeData.volfix, activeData.multiplier),\n              // 开仓均价\n              openAvgPrice: _this2.fixDset(item.openAvgPrice, activeData.priceFix),\n              // 标记价格\n              indexPrice: _this2.fixDset(item.indexPrice, activeData.priceFix),\n              // 强平价格\n              reducePrice: reducePrice,\n              // 保证金\n              holdAmount: _this2.fixDset(item.holdAmount, activeData.mCionFix),\n              // 保证金币种\n              marginCoin: activeData.marginCoin,\n              // 保证金率\n              marginRate: _this2.setRate(item.marginRate),\n              // 盈亏\n              openRealizedAmount: _this2.fixDset(item.openRealizedAmount, activeData.mCionFix),\n              openRealizedClass: item.openRealizedAmount < 0 ? 'u-4-cl' : 'u-1-cl',\n              // 回报率\n              returnRate: _this2.setRate(item.returnRate),\n              returnRateClass: item.returnRate < 0 ? 'u-4-cl' : 'u-1-cl',\n              // 可用\n              canUseAmount: _this2.fixDset(item.canUseAmount, activeData.mCionFix),\n              // 可减少保证金\n              canSubMarginAmount: _this2.fixDset(item.canSubMarginAmount, activeData.mCionFix),\n              // 限价\n              price: priceVal,\n              volume: volumeVal,\n              // 已盈\n              realizedAmount: item.realizedAmount,\n              // 未盈\n              unRealizedAmount: item.unRealizedAmount,\n              // 阶梯最低维持保证金率\n              keepRate: item.keepRate,\n              // 平仓最大手续费率\n              maxFeeRate: item.maxFeeRate,\n              // 当前合约价格单位\n              quote: activeData.quote,\n              // 已结算盈亏\n              profitRealizedAmount: _this2.fixDSign(item.profitRealizedAmount, activeData.mCionFix),\n              // 持仓结算\n              settleProfit: _this2.fixDSign(item.settleProfit, activeData.mCionFix),\n              // 手续费\n              tradeFee: _this2.fixDSign(item.tradeFee, activeData.mCionFix),\n              // 资金费用\n              capitalFee: item.capitalFee && item.capitalFee !== '0' ? _this2.fixDSign(item.capitalFee, activeData.mCionFix) : '--',\n              // 平仓盈亏\n              closeProfit: item.closeProfit && item.closeProfit !== '0' ? _this2.fixDSign(item.closeProfit, activeData.mCionFix) : '--',\n              // 分摊金额\n              shareAmount: item.shareAmount && item.shareAmount !== '0' ? _this2.fixDSign(item.shareAmount, activeData.mCionFix) : '--'\n            };\n\n            if (_this2.contractId === item.contractId) {\n              activeArr[key] = obj;\n            } else {\n              arr[key] = obj;\n            }\n          }\n\n          return false;\n        });\n      }\n\n      return Object.assign(activeArr, arr);\n    },\n    // 输入平仓价格\n    priceChange: function priceChange(e, data) {\n      var _this3 = this;\n\n      var value = e.target.value;\n      var price = fixInput(value, data.priceFix) || '';\n      this.$nextTick(function () {\n        _this3.tableDataList[data.key].price = price;\n      });\n\n      if (!this.formLisValue[data.key]) {\n        this.formLisValue[data.key] = {\n          price: price\n        };\n      } else {\n        this.formLisValue[data.key].price = price;\n      }\n    },\n    // 输入平仓数量\n    volumeChange: function volumeChange(e, data) {\n      var _this4 = this;\n\n      var value = e.target.value;\n      var volume = fixInput(value, 0);\n\n      if (this.coUnitType === 1) {\n        volume = fixInput(value, data.volfix);\n      }\n\n      this.$nextTick(function () {\n        _this4.tableDataList[data.key].volume = volume;\n      });\n\n      if (!this.formLisValue[data.key]) {\n        this.formLisValue[data.key] = {\n          volume: volume\n        };\n      } else {\n        this.formLisValue[data.key].volume = volume;\n      }\n    },\n    // 平仓提交\n    closeOrder: function closeOrder(type, data) {\n      var canCloseVolume = data.canCloseVolume,\n          volume = data.volume,\n          price = data.price;\n\n      if (!price && type === 1) {\n        // 请输入价格\n        this.$bus.$emit('tip', {\n          text: this.lanText.text18,\n          type: 'error'\n        });\n        return false;\n      }\n\n      if (!volume) {\n        // 请输入数量\n        this.$bus.$emit('tip', {\n          text: this.lanText.text19,\n          type: 'error'\n        });\n        return false;\n      }\n\n      if (Number(volume) > Number(canCloseVolume)) {\n        // 超出可平数量\n        this.$bus.$emit('tip', {\n          text: this.lanText.text20,\n          type: 'error'\n        });\n        return false;\n      }\n\n      var submitVolume = volume; // 计算提交时 使用的数量[张]\n\n      if (this.coUnitType === 1) {\n        submitVolume = fixD(division(volume, data.multiplier), 0);\n      }\n\n      this.submitData = {\n        contractId: data.contractId,\n        // 合约ID\n        positionType: data.positionType,\n        // 持仓类型(1 全仓，2 仓逐)\n        side: data.orderSide === 'SELL' ? 'BUY' : 'SELL',\n        // 买卖方向（buy 买入，sell 卖出）\n        leverageLevel: data.leverageLevel,\n        // 杠杆倍数\n        price: price,\n        // 平仓价格(市价单传0)\n        volume: submitVolume,\n        // 平仓数量\n        open: 'CLOSE',\n        type: type,\n        // 订单类型 (1 limit， 2 market)\n        triggerPrice: null,\n        isConditionOrder: false // 是否是条件单\n\n      }; // 判断用户是否设置了开启二次确认\n\n      if (this.userConfig && this.userConfig.pcSecondConfirm) {\n        // 确认按钮class\n        var sideClass = 'u-4-bg';\n        var sideText = this.lanText.text21; // '卖出平多';\n\n        if (data.orderSide === 'SELL') {\n          sideText = this.lanText.text22; // '买入平空';\n\n          sideClass = 'u-1-bg';\n        }\n\n        this.confirmData = {\n          // 价格\n          price: type === 1 ? \"\".concat(price, \" \").concat(data.quote) : this.lanText.text23,\n          // '市价',\n          //  数量\n          vol: \"\".concat(volume, \" \").concat(data.coUnit),\n          // 保证金\n          marginCoin: \"0.00 \".concat(data.marginCoin),\n          // 币种\n          symbol: data.symbol.replace('-', ''),\n          // 订单类型Number（1限价单、2市价单、3条件单）\n          currentCategory: type,\n          // 确认按钮文案（买入做多...）\n          sideText: sideText,\n          // 确认按钮颜色class\n          sideClass: sideClass,\n          // 是否是开仓市价单\n          isOpenAndIsMarket: false,\n          // 条件单 触发价\n          triggerPrice: ''\n        };\n        this.forcedReminderShow = true;\n      } else {\n        this.dialogConfirmLoading = true;\n        this.submit();\n      }\n\n      return false;\n    },\n    // 下单提交\n    submit: function submit() {\n      var _this5 = this;\n\n      if (this.submitFlag) {\n        this.submitFlag = false;\n        this.axios({\n          url: this.$store.state.url.futures.orderCreate,\n          hostType: 'co',\n          method: 'post',\n          params: this.submitData\n        }).then(function (_ref) {\n          var code = _ref.code,\n              msg = _ref.msg;\n\n          if (code.toString() === '0') {\n            _this5.formLisValue = {};\n\n            _this5.$store.dispatch('getUserConfig');\n\n            _this5.forcedReminderShow = false;\n            var timer = setTimeout(function () {\n              _this5.$store.dispatch('getPositionList');\n            }, 500);\n            clearTimeout(timer);\n\n            _this5.$bus.$emit('tip', {\n              text: msg,\n              type: 'success'\n            });\n          } else {\n            _this5.$bus.$emit('tip', {\n              text: msg,\n              type: 'error'\n            });\n          }\n\n          _this5.dialogConfirmLoading = false;\n          _this5.submitFlag = true;\n        }).catch(function () {\n          _this5.submitFlag = true;\n        });\n      }\n    },\n    // 下单二次确认提交\n    submitOrder: function submitOrder(data) {\n      var _this6 = this;\n\n      // 如果勾选了下次不再提醒\n      if (data) {\n        this.axios({\n          url: this.$store.state.url.futures.editUserPageConfig,\n          hostType: 'co',\n          method: 'post',\n          params: {\n            pcSecondConfirm: 0,\n            contractId: this.contractId\n          }\n        }).then(function (_ref2) {\n          var code = _ref2.code,\n              msg = _ref2.msg;\n\n          if (code.toString() === '0') {\n            _this6.$store.dispatch('getUserConfig');\n          } else {\n            _this6.$bus.$emit('tip', {\n              text: msg,\n              type: 'error'\n            });\n          }\n        });\n      }\n\n      this.dialogConfirmLoading = true;\n      this.submit();\n    },\n    // 显示保证金弹框\n    openMarginDialog: function openMarginDialog(item) {\n      var activeData = this.activeContractInfo(item.contractName);\n\n      var obj = _objectSpread(_objectSpread({}, item), activeData);\n\n      this.editMargindata = obj;\n      this.isShowDialog = true;\n    },\n    // 显示止盈止损弹框\n    showStopOrder: function showStopOrder(item) {\n      var activeData = this.activeContractInfo(item.contractName);\n\n      var obj = _objectSpread(_objectSpread({}, item), activeData);\n\n      this.stopOrderdata = obj;\n      this.stopOrderShow = true;\n    },\n    // 弹框取消\n    dialogClose: function dialogClose() {\n      this.isShowDialog = false; // 关闭强制提醒（二次确认）弹框\n\n      this.forcedReminderShow = false; // 关闭 止盈止损弹框\n\n      this.stopOrderShow = false; // 关闭 已结算盈亏弹框\n\n      this.isAmountDialog = false;\n    },\n    thousandsComma: function thousandsComma(num) {\n      if (num) {\n        return _thousandsComma(num);\n      }\n\n      return num;\n    },\n    // 显示已结算盈亏弹框\n    isShowAmountDialog: function isShowAmountDialog(data) {\n      this.activeAmountData = data;\n      this.isAmountDialog = true;\n    },\n    // 已结算盈亏颜色\n    profitClass: function profitClass(val) {\n      if (val) {\n        if (val.indexOf('+') > -1) {\n          return 'u-1-cl';\n        }\n\n        return 'u-4-cl';\n      }\n\n      return 'b-1-cl';\n    },\n    init: function init() {\n      var _this7 = this;\n\n      this.$bus.$emit('positionListNumber', this.positionListNumber);\n\n      if (myStorage.get('isShowCurPosition') === undefined) {\n        this.isShowCurPosition = true;\n      }\n\n      if (this.positionList && this.positionList.length) {\n        this.tableDataList = this.formPosition();\n      } else {\n        this.tableDataList = null;\n      }\n\n      setTimeout(function () {\n        _this7.setCellWidth();\n      }, 500); // 监听 浏览器窗口大小改变\n\n      this.$bus.$on('WINFOW_ON_RESIIZE', function () {\n        _this7.setCellWidth();\n      }); // 监听 只显示当前合约\n\n      this.$bus.$on('isShowCurPosition', function (data) {\n        _this7.isShowCurPosition = data;\n        _this7.tableDataList = _this7.formPosition();\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/components/positionLis/positionLis.js"],"names":["nul","division","fixD","fixInput","thousandsComma","myStorage","name","data","isShowDialog","formLisValue","tableDataList","submitData","editMargindata","confirmData","forcedReminderShow","submitFlag","stopOrderShow","stopOrderdata","cellWidth","activeLineId","activeLineClass","isShowCurPosition","get","isAmountDialog","activeAmountData","ishaveOption","watch","positionList","val","length","formPosition","setCellWidth","userConfig","old","$store","dispatch","positionListNumber","$bus","$emit","computed","lanText","columns1","$t","columns2","columns3","columns4","columns5","columns6","columns7","columns8","columns9","columns10","text1","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15","text16","text17","text18","text19","text20","text21","text22","text23","text24","text25","text26","columns","coUnittext","coUnitType","title","promptText","classes","state","future","futureUserConfig","contractListMap","contractId","volfix","multiplier","Number","volUnit","coUnit","pricefix","positionTypeList","volumePlaceholder","keyArr","Object","keys","methods","tdFefsKeys","$refs","forEach","item","indexOf","push","offsetWidth","activeContractName","text","nameText","symbol","replace","contractType","marginCoin","fixDset","value","fix","toString","fixDSign","setVolume","vol","volume","activeContractInfo","setRate","lineClass","arr","activeArr","activeData","contractName","activeName","key","orderSide","priceVal","volumeVal","price","sideClass","bg","color","reducePrice","priceFix","multiplierCoin","obj","positionId","id","sideText","leverageLevel","positionType","positionTypeText","positionVolumeOriginal","positionVolume","canCloseVolume","openAvgPrice","indexPrice","holdAmount","mCionFix","marginRate","openRealizedAmount","openRealizedClass","returnRate","returnRateClass","canUseAmount","canSubMarginAmount","realizedAmount","unRealizedAmount","keepRate","maxFeeRate","quote","profitRealizedAmount","settleProfit","tradeFee","capitalFee","closeProfit","shareAmount","assign","priceChange","e","target","$nextTick","volumeChange","closeOrder","type","submitVolume","side","open","triggerPrice","isConditionOrder","pcSecondConfirm","currentCategory","isOpenAndIsMarket","dialogConfirmLoading","submit","axios","url","futures","orderCreate","hostType","method","params","then","code","msg","timer","setTimeout","clearTimeout","catch","submitOrder","editUserPageConfig","openMarginDialog","showStopOrder","dialogClose","num","isShowAmountDialog","profitClass","init","undefined","$on"],"mappings":"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","sourcesContent":["/*\r\n@ 持仓列表\r\n@author HDD */\r\nimport {\r\n  nul, division, fixD, fixInput, thousandsComma, myStorage,\r\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'positionList',\r\n  data() {\r\n    return {\r\n      // 修改保证金弹框\r\n      isShowDialog: false,\r\n      formLisValue: {},\r\n      // 持仓列表\r\n      tableDataList: null,\r\n      // 平仓提交数据\r\n      submitData: {},\r\n      // 修改保证金数据\r\n      editMargindata: {},\r\n      // 二次确认数据\r\n      confirmData: {},\r\n      // 是否显示二次确认弹框\r\n      forcedReminderShow: false,\r\n      // 防止二次提交\r\n      submitFlag: true,\r\n      // 止盈止损弹框\r\n      stopOrderShow: false,\r\n      // 止盈止损张数\r\n      stopOrderdata: {},\r\n      cellWidth: [],\r\n      // class\r\n      activeLineId: '',\r\n      activeLineClass: '',\r\n      // 只显示当前合约开关\r\n      isShowCurPosition: myStorage.get('isShowCurPosition'),\r\n      // 显示已结算盈亏弹框\r\n      isAmountDialog: false,\r\n      // 已结算盈亏弹框数据\r\n      activeAmountData: {},\r\n      // 去掉已结算盈亏弹框的按钮\r\n      ishaveOption: false,\r\n      // positionListNumber: 0,\r\n    };\r\n  },\r\n  watch: {\r\n    positionList(val) {\r\n      if (val && val.length) {\r\n        this.tableDataList = this.formPosition();\r\n      } else {\r\n        this.tableDataList = null;\r\n      }\r\n      this.setCellWidth();\r\n    },\r\n    userConfig(val, old) {\r\n      if (val && old) {\r\n        this.formLisValue = {};\r\n        this.$store.dispatch('getPositionList');\r\n        this.tableDataList = this.formPosition();\r\n      }\r\n    },\r\n    positionListNumber(val) {\r\n      this.$bus.$emit('positionListNumber', val);\r\n    },\r\n  },\r\n  computed: {\r\n    lanText() {\r\n      return {\r\n        columns1: this.$t('futures.positionLis.columns1'),\r\n        columns2: this.$t('futures.positionLis.columns2'),\r\n        columns3: this.$t('futures.positionLis.columns3'),\r\n        columns4: this.$t('futures.positionLis.columns4'),\r\n        columns5: this.$t('futures.positionLis.columns5'),\r\n        columns6: this.$t('futures.positionLis.columns6'),\r\n        columns7: this.$t('futures.positionLis.columns7'),\r\n        columns8: this.$t('futures.positionLis.columns8'),\r\n        columns9: this.$t('futures.positionLis.columns9'),\r\n        columns10: this.$t('futures.positionLis.columns10'),\r\n        text1: this.$t('futures.positionLis.text1'),\r\n        text2: this.$t('futures.positionLis.text2'),\r\n        text3: this.$t('futures.positionLis.text3'),\r\n        text4: this.$t('futures.positionLis.text4'),\r\n        text5: this.$t('futures.positionLis.text5'),\r\n        text6: this.$t('futures.positionLis.text6'),\r\n        text7: this.$t('futures.positionLis.text7'),\r\n        text8: this.$t('futures.positionLis.text8'),\r\n        text9: this.$t('futures.positionLis.text9'),\r\n        text10: this.$t('futures.positionLis.text10'),\r\n        text11: this.$t('futures.positionLis.text11'),\r\n        text12: this.$t('futures.positionLis.text12'),\r\n        text13: this.$t('futures.positionLis.text13'),\r\n        text14: this.$t('futures.positionLis.text14'),\r\n        text15: this.$t('futures.positionLis.text15'),\r\n        text16: this.$t('futures.positionLis.text16'),\r\n        text17: this.$t('futures.positionLis.text17'),\r\n        text18: this.$t('futures.positionLis.text18'),\r\n        text19: this.$t('futures.positionLis.text19'),\r\n        text20: this.$t('futures.positionLis.text20'),\r\n        text21: this.$t('futures.positionLis.text21'),\r\n        text22: this.$t('futures.positionLis.text22'),\r\n        text23: this.$t('futures.positionLis.text23'),\r\n        text24: this.$t('futures.positionLis.text24'),\r\n        text25: this.$t('futures.positionLis.text25'),\r\n        text26: this.$t('futures.positionLis.text26'),\r\n      };\r\n    },\r\n    // 表头\r\n    columns() {\r\n      // '量 ' : '张'\r\n      const coUnittext = this.coUnitType === 1 ? this.lanText.text4 : this.lanText.text5;\r\n      return [\r\n        {\r\n          title: this.lanText.columns1, // '合约',\r\n        },\r\n        {\r\n          title: `${this.lanText.columns2}(${coUnittext})`, // 仓位/可平\r\n          promptText: this.lanText.text6,\r\n        },\r\n        {\r\n          title: this.lanText.columns3, // '成本价',\r\n          promptText: this.lanText.text7,\r\n        },\r\n        {\r\n          title: this.lanText.columns4, // '标记价格',\r\n          promptText: this.lanText.text8,\r\n        },\r\n        {\r\n          title: this.lanText.columns5, // '强平价格',\r\n          promptText: this.lanText.text9,\r\n        },\r\n        {\r\n          title: this.lanText.columns6, // '占用保证金',\r\n          promptText: this.lanText.text10,\r\n        },\r\n        {\r\n          title: this.lanText.columns7, // '保证金率',\r\n          promptText: this.lanText.text11,\r\n        },\r\n        {\r\n          title: this.lanText.columns8, // '盈亏/收益率',\r\n          promptText: this.lanText.text12,\r\n        },\r\n        {\r\n          title: this.lanText.text26, // '已结算盈亏',\r\n        },\r\n        {\r\n          title: this.lanText.columns9, // '快速平仓',\r\n          classes: 'close-position',\r\n        },\r\n        {\r\n          title: this.lanText.columns10, // '止盈止损',\r\n          promptText: this.lanText.text13,\r\n        },\r\n      ];\r\n    },\r\n    // 用户配置信息\r\n    userConfig() {\r\n      return this.$store.state.future.futureUserConfig;\r\n    },\r\n    // 合约列表 MAP\r\n    contractListMap() {\r\n      return this.$store.state.future.contractListMap;\r\n    },\r\n    // 当前合约ID\r\n    contractId() {\r\n      return this.$store.state.future.contractId;\r\n    },\r\n    // 持仓列表\r\n    positionList() {\r\n      return this.$store.state.future.positionList || [];\r\n    },\r\n    // 合约数量精度\r\n    volfix() {\r\n      return this.$store.state.future.volfix;\r\n    },\r\n    // 数量单位类型Number（1标的货币 2张）\r\n    coUnitType() {\r\n      return this.$store.state.future.coUnitType;\r\n    },\r\n    // 当前合约面值\r\n    multiplier() {\r\n      return Number(this.$store.state.future.multiplier);\r\n    },\r\n    // 合约数量单位\r\n    volUnit() {\r\n      return this.$store.state.future.coUnit;\r\n    },\r\n    // 合约币对价格精度\r\n    pricefix() {\r\n      return this.$store.state.future.pricefix;\r\n    },\r\n\r\n    positionTypeList() {\r\n      // ['', '全仓', '逐仓'];\r\n      return ['', this.lanText.text14, this.lanText.text15];\r\n    },\r\n    volumePlaceholder() {\r\n      // '输入数量' : '输入张数';\r\n      return this.coUnitType === 1 ? this.lanText.text24 : this.lanText.text25;\r\n    },\r\n    positionListNumber() {\r\n      if (this.tableDataList) {\r\n        const keyArr = Object.keys(this.tableDataList);\r\n        return keyArr.length;\r\n      }\r\n      return 0;\r\n    },\r\n  },\r\n  methods: {\r\n    // 设置表头单元格的宽度\r\n    setCellWidth() {\r\n      const tdFefsKeys = Object.keys(this.$refs);\r\n      this.cellWidth = [];\r\n      tdFefsKeys.forEach((item) => {\r\n        if (item.indexOf('td') !== -1) {\r\n          if (this.$refs[item][0]) {\r\n            this.cellWidth.push(`${this.$refs[item][0].offsetWidth}px`);\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 当前合约名称\r\n    activeContractName(data) {\r\n      let name = '';\r\n      let text = '';\r\n      if (data) {\r\n        const nameText = data.symbol ? data.symbol.replace('-', '') : '';\r\n        if (data.contractType !== 'E') {\r\n          text = `-${data.marginCoin}`;\r\n        }\r\n        name = `${nameText}${text}`;\r\n      }\r\n      return name;\r\n    },\r\n    // 设置精度\r\n    fixDset(value, fix) {\r\n      if (value && fix.toString()) {\r\n        return fixD(value, fix);\r\n      }\r\n      return '0.00';\r\n    },\r\n    // 设置精度 + 符号\r\n    fixDSign(value, fix) {\r\n      if (value && fix.toString()) {\r\n        if (Number(value) > 0) {\r\n          return `+${fixD(value, fix)}`;\r\n        }\r\n        return fixD(value, fix);\r\n      }\r\n      return '0.00';\r\n    },\r\n    // 设置 标的货币单位的数量 还是 张数\r\n    setVolume(vol, fix, multiplier) {\r\n      let volume = vol;\r\n      // 标的货币\r\n      if (this.coUnitType === 1 && multiplier) {\r\n        // 算出标的货币数量（数量 * 合约面值）\r\n        volume = fixD(nul(vol, multiplier), fix);\r\n      }\r\n      return volume;\r\n    },\r\n    // 获取仓位的合约和币对配置的信息\r\n    activeContractInfo(name) {\r\n      if (this.contractListMap) {\r\n        return this.contractListMap[name];\r\n      }\r\n      return null;\r\n    },\r\n    // 换算百分比\r\n    setRate(data) {\r\n      if (data) {\r\n        return `${this.fixDset(nul(data, 100), 2)}%`;\r\n      }\r\n      return '0.00%';\r\n    },\r\n    lineClass(contractId) {\r\n      if (contractId !== this.activeLineId) {\r\n        this.activeLineId = contractId;\r\n        const classes = this.activeLineClass === 'u-15-bg' ? '' : 'u-15-bg';\r\n        this.activeLineClass = classes;\r\n        return this.activeLineClass;\r\n      }\r\n      return this.activeLineClass;\r\n    },\r\n    // 格式化持有仓位\r\n    formPosition() {\r\n      const arr = {};\r\n      const activeArr = {};\r\n      if (this.positionList && this.positionList.length) {\r\n        this.positionList.forEach((item) => {\r\n          if (!this.isShowCurPosition\r\n            || (this.isShowCurPosition && item.contractId === this.contractId)) {\r\n            this.activeLineId = '';\r\n            this.activeLineClass = '';\r\n            const activeData = this.activeContractInfo(item.contractName);\r\n            if (!activeData) return false;\r\n            const activeName = this.activeContractName(activeData);\r\n            const key = `${activeName}${item.orderSide}`;\r\n            let priceVal = null;\r\n            let volumeVal = null;\r\n            if (this.formLisValue && this.formLisValue[key]) {\r\n              priceVal = this.formLisValue[key].price;\r\n              volumeVal = this.formLisValue[key].volume;\r\n            }\r\n            let sideClass = {\r\n              bg: 'u-1-bg',\r\n              color: 'u-1-cl',\r\n            };\r\n            if (item.orderSide === 'SELL') {\r\n              sideClass = {\r\n                bg: 'u-4-bg',\r\n                color: 'u-4-cl',\r\n              };\r\n            }\r\n            // 强平价格\r\n            let reducePrice;\r\n            if (item.reducePrice && item.reducePrice <= 0) {\r\n              reducePrice = '--';\r\n            } else {\r\n              reducePrice = this.fixDset(item.reducePrice, activeData.priceFix);\r\n            }\r\n            // 合约面值 ： 张\r\n            const coUnit = this.coUnitType === 1\r\n              ? activeData.multiplierCoin : this.lanText.text5; // '张';\r\n            // marginRate\r\n            const obj = {\r\n              positionId: item.id,\r\n              key,\r\n              contractName: item.contractName,\r\n              sideText: item.orderSide === 'SELL' ? this.lanText.text16 : this.lanText.text17, // '空' : '多',\r\n              // 数量精度\r\n              volfix: activeData.volfix,\r\n              // 价格精度\r\n              priceFix: activeData.priceFix,\r\n              // classs\r\n              lineClass: this.lineClass(item.contractId),\r\n              // 合约名称\r\n              name: activeName,\r\n              // 合约ID\r\n              contractId: item.contractId,\r\n              // 合约币对\r\n              symbol: item.symbol,\r\n              // 买入卖出方向\r\n              orderSide: item.orderSide,\r\n              // 买卖Class\r\n              sideClass,\r\n              // 杠杆\r\n              leverageLevel: item.leverageLevel,\r\n              // 仓位模式（1全仓 2逐仓）\r\n              positionType: item.positionType,\r\n              // 仓位模式文案（1全仓 2逐仓）\r\n              positionTypeText: this.positionTypeList[item.positionType],\r\n              // 数量单位\r\n              coUnit,\r\n              // 张数\r\n              positionVolumeOriginal: item.positionVolume,\r\n              // 合约面值\r\n              multiplier: activeData.multiplier,\r\n              // 仓位数量\r\n              positionVolume: this.setVolume(\r\n                item.positionVolume, activeData.volfix, activeData.multiplier,\r\n              ),\r\n              // 可平数量\r\n              canCloseVolume: this.setVolume(\r\n                item.canCloseVolume, activeData.volfix, activeData.multiplier,\r\n              ),\r\n              // 开仓均价\r\n              openAvgPrice: this.fixDset(item.openAvgPrice, activeData.priceFix),\r\n              // 标记价格\r\n              indexPrice: this.fixDset(item.indexPrice, activeData.priceFix),\r\n              // 强平价格\r\n              reducePrice,\r\n              // 保证金\r\n              holdAmount: this.fixDset(item.holdAmount, activeData.mCionFix),\r\n              // 保证金币种\r\n              marginCoin: activeData.marginCoin,\r\n              // 保证金率\r\n              marginRate: this.setRate(item.marginRate),\r\n              // 盈亏\r\n              openRealizedAmount: this.fixDset(item.openRealizedAmount, activeData.mCionFix),\r\n              openRealizedClass: item.openRealizedAmount < 0 ? 'u-4-cl' : 'u-1-cl',\r\n              // 回报率\r\n              returnRate: this.setRate(item.returnRate),\r\n              returnRateClass: item.returnRate < 0 ? 'u-4-cl' : 'u-1-cl',\r\n              // 可用\r\n              canUseAmount: this.fixDset(item.canUseAmount, activeData.mCionFix),\r\n              // 可减少保证金\r\n              canSubMarginAmount: this.fixDset(item.canSubMarginAmount, activeData.mCionFix),\r\n              // 限价\r\n              price: priceVal,\r\n              volume: volumeVal,\r\n              // 已盈\r\n              realizedAmount: item.realizedAmount,\r\n              // 未盈\r\n              unRealizedAmount: item.unRealizedAmount,\r\n              // 阶梯最低维持保证金率\r\n              keepRate: item.keepRate,\r\n              // 平仓最大手续费率\r\n              maxFeeRate: item.maxFeeRate,\r\n              // 当前合约价格单位\r\n              quote: activeData.quote,\r\n              // 已结算盈亏\r\n              profitRealizedAmount: this.fixDSign(item.profitRealizedAmount, activeData.mCionFix),\r\n              // 持仓结算\r\n              settleProfit: this.fixDSign(item.settleProfit, activeData.mCionFix),\r\n              // 手续费\r\n              tradeFee: this.fixDSign(item.tradeFee, activeData.mCionFix),\r\n              // 资金费用\r\n              capitalFee: (item.capitalFee && item.capitalFee !== '0')\r\n                ? this.fixDSign(item.capitalFee, activeData.mCionFix) : '--',\r\n              // 平仓盈亏\r\n              closeProfit: (item.closeProfit && item.closeProfit !== '0')\r\n                ? this.fixDSign(item.closeProfit, activeData.mCionFix) : '--',\r\n              // 分摊金额\r\n              shareAmount: (item.shareAmount && item.shareAmount !== '0')\r\n                ? this.fixDSign(item.shareAmount, activeData.mCionFix) : '--',\r\n            };\r\n            if (this.contractId === item.contractId) {\r\n              activeArr[key] = obj;\r\n            } else {\r\n              arr[key] = obj;\r\n            }\r\n          }\r\n          return false;\r\n        });\r\n      }\r\n      return Object.assign(activeArr, arr);\r\n    },\r\n    // 输入平仓价格\r\n    priceChange(e, data) {\r\n      const { value } = e.target;\r\n      const price = fixInput(value, data.priceFix) || '';\r\n      this.$nextTick(() => {\r\n        this.tableDataList[data.key].price = price;\r\n      });\r\n      if (!this.formLisValue[data.key]) {\r\n        this.formLisValue[data.key] = {\r\n          price,\r\n        };\r\n      } else {\r\n        this.formLisValue[data.key].price = price;\r\n      }\r\n    },\r\n    // 输入平仓数量\r\n    volumeChange(e, data) {\r\n      const { value } = e.target;\r\n      let volume = fixInput(value, 0);\r\n      if (this.coUnitType === 1) {\r\n        volume = fixInput(value, data.volfix);\r\n      }\r\n      this.$nextTick(() => {\r\n        this.tableDataList[data.key].volume = volume;\r\n      });\r\n      if (!this.formLisValue[data.key]) {\r\n        this.formLisValue[data.key] = {\r\n          volume,\r\n        };\r\n      } else {\r\n        this.formLisValue[data.key].volume = volume;\r\n      }\r\n    },\r\n    // 平仓提交\r\n    closeOrder(type, data) {\r\n      const { canCloseVolume, volume, price } = data;\r\n      if (!price && type === 1) {\r\n        // 请输入价格\r\n        this.$bus.$emit('tip', { text: this.lanText.text18, type: 'error' });\r\n        return false;\r\n      }\r\n      if (!volume) {\r\n        // 请输入数量\r\n        this.$bus.$emit('tip', { text: this.lanText.text19, type: 'error' });\r\n        return false;\r\n      }\r\n      if (Number(volume) > Number(canCloseVolume)) {\r\n        // 超出可平数量\r\n        this.$bus.$emit('tip', { text: this.lanText.text20, type: 'error' });\r\n        return false;\r\n      }\r\n\r\n      let submitVolume = volume;\r\n      // 计算提交时 使用的数量[张]\r\n      if (this.coUnitType === 1) {\r\n        submitVolume = fixD(division(volume, data.multiplier), 0);\r\n      }\r\n      this.submitData = {\r\n        contractId: data.contractId, // 合约ID\r\n        positionType: data.positionType, // 持仓类型(1 全仓，2 仓逐)\r\n        side: data.orderSide === 'SELL' ? 'BUY' : 'SELL', // 买卖方向（buy 买入，sell 卖出）\r\n        leverageLevel: data.leverageLevel, // 杠杆倍数\r\n        price, // 平仓价格(市价单传0)\r\n        volume: submitVolume, // 平仓数量\r\n        open: 'CLOSE',\r\n        type, // 订单类型 (1 limit， 2 market)\r\n        triggerPrice: null,\r\n        isConditionOrder: false, // 是否是条件单\r\n      };\r\n      // 判断用户是否设置了开启二次确认\r\n      if (this.userConfig && this.userConfig.pcSecondConfirm) {\r\n        // 确认按钮class\r\n        let sideClass = 'u-4-bg';\r\n        let sideText = this.lanText.text21; // '卖出平多';\r\n        if (data.orderSide === 'SELL') {\r\n          sideText = this.lanText.text22; // '买入平空';\r\n          sideClass = 'u-1-bg';\r\n        }\r\n\r\n        this.confirmData = {\r\n          // 价格\r\n          price: type === 1 ? `${price} ${data.quote}` : this.lanText.text23, // '市价',\r\n          //  数量\r\n          vol: `${volume} ${data.coUnit}`,\r\n          // 保证金\r\n          marginCoin: `0.00 ${data.marginCoin}`,\r\n          // 币种\r\n          symbol: data.symbol.replace('-', ''),\r\n          // 订单类型Number（1限价单、2市价单、3条件单）\r\n          currentCategory: type,\r\n          // 确认按钮文案（买入做多...）\r\n          sideText,\r\n          // 确认按钮颜色class\r\n          sideClass,\r\n          // 是否是开仓市价单\r\n          isOpenAndIsMarket: false,\r\n          // 条件单 触发价\r\n          triggerPrice: '',\r\n        };\r\n        this.forcedReminderShow = true;\r\n      } else {\r\n        this.dialogConfirmLoading = true;\r\n        this.submit();\r\n      }\r\n\r\n      return false;\r\n    },\r\n    // 下单提交\r\n    submit() {\r\n      if (this.submitFlag) {\r\n        this.submitFlag = false;\r\n        this.axios({\r\n          url: this.$store.state.url.futures.orderCreate,\r\n          hostType: 'co',\r\n          method: 'post',\r\n          params: this.submitData,\r\n        }).then(({ code, msg }) => {\r\n          if (code.toString() === '0') {\r\n            this.formLisValue = {};\r\n            this.$store.dispatch('getUserConfig');\r\n            this.forcedReminderShow = false;\r\n            const timer = setTimeout(() => {\r\n              this.$store.dispatch('getPositionList');\r\n            }, 500);\r\n            clearTimeout(timer);\r\n            this.$bus.$emit('tip', { text: msg, type: 'success' });\r\n          } else {\r\n            this.$bus.$emit('tip', { text: msg, type: 'error' });\r\n          }\r\n          this.dialogConfirmLoading = false;\r\n          this.submitFlag = true;\r\n        }).catch(() => {\r\n          this.submitFlag = true;\r\n        });\r\n      }\r\n    },\r\n    // 下单二次确认提交\r\n    submitOrder(data) {\r\n      // 如果勾选了下次不再提醒\r\n      if (data) {\r\n        this.axios({\r\n          url: this.$store.state.url.futures.editUserPageConfig,\r\n          hostType: 'co',\r\n          method: 'post',\r\n          params: {\r\n            pcSecondConfirm: 0,\r\n            contractId: this.contractId,\r\n          },\r\n        }).then(({ code, msg }) => {\r\n          if (code.toString() === '0') {\r\n            this.$store.dispatch('getUserConfig');\r\n          } else {\r\n            this.$bus.$emit('tip', { text: msg, type: 'error' });\r\n          }\r\n        });\r\n      }\r\n      this.dialogConfirmLoading = true;\r\n      this.submit();\r\n    },\r\n    // 显示保证金弹框\r\n    openMarginDialog(item) {\r\n      const activeData = this.activeContractInfo(item.contractName);\r\n      const obj = { ...item, ...activeData };\r\n      this.editMargindata = obj;\r\n      this.isShowDialog = true;\r\n    },\r\n    // 显示止盈止损弹框\r\n    showStopOrder(item) {\r\n      const activeData = this.activeContractInfo(item.contractName);\r\n      const obj = { ...item, ...activeData };\r\n      this.stopOrderdata = obj;\r\n      this.stopOrderShow = true;\r\n    },\r\n    // 弹框取消\r\n    dialogClose() {\r\n      this.isShowDialog = false;\r\n      // 关闭强制提醒（二次确认）弹框\r\n      this.forcedReminderShow = false;\r\n      // 关闭 止盈止损弹框\r\n      this.stopOrderShow = false;\r\n      // 关闭 已结算盈亏弹框\r\n      this.isAmountDialog = false;\r\n    },\r\n    thousandsComma(num) {\r\n      if (num) {\r\n        return thousandsComma(num);\r\n      }\r\n      return num;\r\n    },\r\n    // 显示已结算盈亏弹框\r\n    isShowAmountDialog(data) {\r\n      this.activeAmountData = data;\r\n      this.isAmountDialog = true;\r\n    },\r\n    // 已结算盈亏颜色\r\n    profitClass(val) {\r\n      if (val) {\r\n        if (val.indexOf('+') > -1) {\r\n          return 'u-1-cl';\r\n        }\r\n        return 'u-4-cl';\r\n      }\r\n      return 'b-1-cl';\r\n    },\r\n    init() {\r\n      this.$bus.$emit('positionListNumber', this.positionListNumber);\r\n      if (myStorage.get('isShowCurPosition') === undefined) {\r\n        this.isShowCurPosition = true;\r\n      }\r\n      if (this.positionList && this.positionList.length) {\r\n        this.tableDataList = this.formPosition();\r\n      } else {\r\n        this.tableDataList = null;\r\n      }\r\n      setTimeout(() => {\r\n        this.setCellWidth();\r\n      }, 500);\r\n      // 监听 浏览器窗口大小改变\r\n      this.$bus.$on('WINFOW_ON_RESIIZE', () => {\r\n        this.setCellWidth();\r\n      });\r\n      // 监听 只显示当前合约\r\n      this.$bus.$on('isShowCurPosition', (data) => {\r\n        this.isShowCurPosition = data;\r\n        this.tableDataList = this.formPosition();\r\n      });\r\n    },\r\n\r\n  },\r\n};\r\n"]}]}