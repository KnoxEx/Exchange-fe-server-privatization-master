{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/otcFlowingWater/otcFlowingWater.js","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/otcFlowingWater/otcFlowingWater.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, colorMap, imgMap, getCoinShowName } from '@/utils';\nexport default {\n  name: 'page-flowingWater',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      type: 'all',\n      // 当前类型\n      symbol: '',\n      // 当前币种\n      tabelList: [],\n      // table数据列表\n      symbolList: [],\n      // 币种选择列表\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      }\n    };\n  },\n  computed: {\n    typeList: function typeList() {\n      return [{\n        code: 'all',\n        value: this.$t('assets.otcFlowingWater.all')\n      }, // 全部\n      {\n        code: '1',\n        value: this.$t('assets.otcFlowingWater.inOtc')\n      }, // 转入场外\n      {\n        code: '2',\n        value: this.$t('assets.otcFlowingWater.outOtc')\n      } // 转出场外\n      ];\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [{\n        title: this.$t('assets.otcFlowingWater.listTime'),\n        width: '20%'\n      }, // 时间\n      {\n        title: this.$t('assets.otcFlowingWater.listCoin'),\n        width: '20%'\n      }, // 币种\n      {\n        title: this.$t('assets.otcFlowingWater.listType'),\n        width: '20%'\n      }, // 类型\n      {\n        title: this.$t('assets.otcFlowingWater.listVolume'),\n        width: '40%'\n      } // 数量\n      ];\n      return list;\n    },\n    // 用于axios的symbol\n    axiosSymbol: function axiosSymbol() {\n      if (this.symbol === 'all') {\n        return null;\n      }\n\n      return this.symbol;\n    },\n    // 用于axios的type\n    axiosType: function axiosType() {\n      if (this.type === 'all') {\n        return null;\n      }\n\n      return this.type;\n    }\n  },\n  watch: {\n    market: function market(v) {\n      if (v) {\n        this.setData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.market) {\n        this.setData();\n      }\n    },\n    symbolChange: function symbolChange(item) {\n      this.symbol = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    typeChange: function typeChange(item) {\n      this.type = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    setData: function setData() {\n      var _this = this;\n\n      var list = [{\n        code: 'all',\n        value: this.$t('assets.otcFlowingWater.allCoin')\n      }];\n      Object.keys(this.market.coinList).forEach(function (item) {\n        if (_this.market.coinList[item].otcOpen === 1) {\n          list.push({\n            value: getCoinShowName(item, _this.market.coinList),\n            code: item\n          });\n        }\n      });\n      this.symbolList = list;\n      this.symbol = 'all';\n      this.getData();\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      this.axios({\n        url: '/record/otc_transfer_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          coinSymbol: this.axiosSymbol,\n          transactionType: this.axiosType\n        }\n      }).then(function (data) {\n        _this2.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n          data.data.financeList.forEach(function (item, index) {\n            var coinList = _this2.market.coinList;\n            var fix = coinList[item.coinSymbol] && coinList[item.coinSymbol].showPrecision || 0;\n            list.push({\n              id: index,\n              data: [item.createTime, // 时间\n              getCoinShowName(item.coinSymbol, coinList), // 币种\n              item.transactionType_text, // 类型\n              fixD(item.amount, fix) // 充值数量\n              ]\n            });\n          });\n          _this2.tabelList = list;\n          _this2.paginationObj.total = data.data.count;\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getData();\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/otcFlowingWater/otcFlowingWater.js"],"names":["fixD","colorMap","imgMap","getCoinShowName","name","data","tabelLoading","type","symbol","tabelList","symbolList","paginationObj","total","display","currentPage","computed","typeList","code","value","$t","market","$store","state","baseData","columns","list","title","width","axiosSymbol","axiosType","watch","v","setData","methods","init","symbolChange","item","getData","typeChange","Object","keys","coinList","forEach","otcOpen","push","axios","url","params","pageSize","page","coinSymbol","transactionType","then","toString","financeList","index","fix","showPrecision","id","createTime","transactionType_text","amount","count","$bus","$emit","text","msg","pagechange"],"mappings":"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","sourcesContent":["import {\r\n  fixD, colorMap, imgMap, getCoinShowName,\r\n} from '@/utils';\r\n\r\n\r\nexport default {\r\n  name: 'page-flowingWater',\r\n  data() {\r\n    return {\r\n      tabelLoading: true,\r\n      imgMap,\r\n      colorMap,\r\n      type: 'all', // 当前类型\r\n      symbol: '', // 当前币种\r\n      tabelList: [], // table数据列表\r\n      symbolList: [], // 币种选择列表\r\n      paginationObj: {\r\n        total: 0, // 数据总条数\r\n        display: 10, // 每页显示条数\r\n        currentPage: 1, // 当前页码\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    typeList() {\r\n      return [\r\n        { code: 'all', value: this.$t('assets.otcFlowingWater.all') }, // 全部\r\n        { code: '1', value: this.$t('assets.otcFlowingWater.inOtc') }, // 转入场外\r\n        { code: '2', value: this.$t('assets.otcFlowingWater.outOtc') }, // 转出场外\r\n      ];\r\n    },\r\n    // market 接口\r\n    market() { return this.$store.state.baseData.market; },\r\n    // 表格title\r\n    columns() {\r\n      const list = [\r\n        { title: this.$t('assets.otcFlowingWater.listTime'), width: '20%' }, // 时间\r\n        { title: this.$t('assets.otcFlowingWater.listCoin'), width: '20%' }, // 币种\r\n        { title: this.$t('assets.otcFlowingWater.listType'), width: '20%' }, // 类型\r\n        { title: this.$t('assets.otcFlowingWater.listVolume'), width: '40%' }, // 数量\r\n      ];\r\n      return list;\r\n    },\r\n    // 用于axios的symbol\r\n    axiosSymbol() {\r\n      if (this.symbol === 'all') {\r\n        return null;\r\n      }\r\n      return this.symbol;\r\n    },\r\n    // 用于axios的type\r\n    axiosType() {\r\n      if (this.type === 'all') {\r\n        return null;\r\n      }\r\n      return this.type;\r\n    },\r\n  },\r\n  watch: {\r\n    market(v) { if (v) { this.setData(); } },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.market) { this.setData(); }\r\n    },\r\n    symbolChange(item) {\r\n      this.symbol = item.code;\r\n      this.paginationObj.currentPage = 1; // 页码\r\n      this.paginationObj.total = 0; // 总条数\r\n      this.tabelList = [];\r\n      this.tabelLoading = true;\r\n      this.getData();\r\n    },\r\n    typeChange(item) {\r\n      this.type = item.code;\r\n      this.paginationObj.currentPage = 1; // 页码\r\n      this.paginationObj.total = 0; // 总条数\r\n      this.tabelList = [];\r\n      this.tabelLoading = true;\r\n      this.getData();\r\n    },\r\n    setData() {\r\n      const list = [{ code: 'all', value: this.$t('assets.otcFlowingWater.allCoin') }];\r\n      Object.keys(this.market.coinList).forEach((item) => {\r\n        if (this.market.coinList[item].otcOpen === 1) {\r\n          list.push({\r\n            value: getCoinShowName(item, this.market.coinList),\r\n            code: item,\r\n          });\r\n        }\r\n      });\r\n      this.symbolList = list;\r\n      this.symbol = 'all';\r\n      this.getData();\r\n    },\r\n    getData() {\r\n      this.axios({\r\n        url: '/record/otc_transfer_list',\r\n        params: {\r\n          pageSize: this.paginationObj.display, // 每页条数\r\n          page: this.paginationObj.currentPage, // 页码\r\n          coinSymbol: this.axiosSymbol,\r\n          transactionType: this.axiosType,\r\n        },\r\n      }).then((data) => {\r\n        this.tabelLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          const list = [];\r\n          data.data.financeList.forEach((item, index) => {\r\n            const { coinList } = this.market;\r\n            const fix = (coinList[item.coinSymbol] && coinList[item.coinSymbol].showPrecision) || 0;\r\n            list.push({\r\n              id: index,\r\n              data: [\r\n                item.createTime, // 时间\r\n                getCoinShowName(item.coinSymbol, coinList), // 币种\r\n                item.transactionType_text, // 类型\r\n                fixD(item.amount, fix), // 充值数量\r\n              ],\r\n            });\r\n          });\r\n          this.tabelList = list;\r\n          this.paginationObj.total = data.data.count;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    pagechange(v) {\r\n      this.paginationObj.currentPage = v;\r\n      this.getData();\r\n    },\r\n  },\r\n};\r\n"]}]}