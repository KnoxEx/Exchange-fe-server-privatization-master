{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/leverageAccount/leverageAccount.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/leverageAccount/leverageAccount.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { myStorage, fixD, fixRate, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-leverAccount',\n  data: function data() {\n    return {\n      otcHeader: \"background: url(\".concat(imgMap.zc_le, \")\"),\n      tabelLoading: true,\n      // 表格 loading\n      imgMap: imgMap,\n      colorMap: colorMap,\n      dataList: [],\n      // 表格 数据\n      totalBalance: '--',\n      // 资产折合\n      totalBalanceSymbol: '',\n      // 资产折合币种\n      switchFlag: false,\n      // 是否隐藏零资产\n      findValue: '',\n      // 搜索币种\n      totalRate: '--' // 折合法币\n\n    };\n  },\n  watch: {\n    market: function market(v) {\n      if (v) {\n        this.getData();\n      }\n    }\n  },\n  computed: {\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    showTotalBalanceSymbol: function showTotalBalanceSymbol() {\n      var str = this.totalBalanceSymbol;\n\n      if (this.market && this.market.coinList && this.market.coinList[this.totalBalanceSymbol]) {\n        str = getCoinShowName(this.totalBalanceSymbol, this.market.coinList);\n      }\n\n      return str;\n    },\n    linkurl: function linkurl() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.url;\n      }\n\n      return {};\n    },\n    tradeLinkUrl: function tradeLinkUrl() {\n      if (process.env.NODE_ENV === 'development') {\n        return '/ex/margin';\n      }\n\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\n        return \"\".concat(this.linkurl.exUrl, \"/margin\");\n      }\n\n      return '';\n    },\n    // 表格title\n    columns: function columns() {\n      return [{\n        title: this.$t('assets.leverageAccount.list1')\n      }, // 杠杆账户\n      {\n        title: this.$t('assets.leverageAccount.list2'),\n        width: '13%'\n      }, // 总资产\n      {\n        title: this.$t('assets.leverageAccount.list3'),\n        width: '13%'\n      }, // 可用\n      {\n        title: this.$t('assets.leverageAccount.list4'),\n        width: '13%'\n      }, // 冻结\n      {\n        title: this.$t('assets.leverageAccount.list5'),\n        width: '13%'\n      }, // 已借\n      {\n        title: this.$t('assets.leverageAccount.list6'),\n        width: '13%'\n      }, // 爆仓价\n      {\n        title: this.$t('assets.leverageAccount.list7'),\n        width: '10%'\n      }, // 风险率\n      {\n        title: this.$t('assets.leverageAccount.list8')\n      } // 操作\n      ];\n    },\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 资金列表展示到页面数据\n    dataListFilter: function dataListFilter() {\n      var _this = this;\n\n      // 隐藏零资产功能过滤数据\n      var list = [];\n\n      if (this.switchFlag) {\n        this.dataList.forEach(function (item) {\n          var _item$data$1$ = item.data[1][0],\n              subContent = _item$data$1$.subContent,\n              text = _item$data$1$.text;\n\n          if (parseFloat(text) || parseFloat(subContent.text)) {\n            list.push(item);\n          }\n        });\n      } else {\n        list = this.dataList;\n      } // 搜索框功能过滤数据\n\n\n      var newList = [];\n      list.forEach(function (item) {\n        if (item.data[0].toUpperCase().indexOf(_this.findValue.toUpperCase()) !== -1) {\n          newList.push(item);\n        }\n      });\n      return newList;\n    }\n  },\n  methods: {\n    init: function init() {\n      if (myStorage.get('assetsSwitch')) {\n        this.switchFlag = myStorage.get('assetsSwitch');\n      }\n\n      if (this.market) {\n        this.getData();\n      }\n    },\n    transferSuccess: function transferSuccess() {\n      this.getData();\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      this.axios({\n        url: '/lever/finance/balance'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this2.tabelLoading = false;\n          var leverMap = data.data.leverMap;\n          _this2.serverData = leverMap;\n\n          _this2.setData(data.data);\n        }\n      });\n    },\n    // 处理列表数据\n    setData: function setData(_ref) {\n      var _this3 = this;\n\n      var totalBalance = _ref.totalBalance,\n          totalBalanceSymbol = _ref.totalBalanceSymbol,\n          leverMap = _ref.leverMap;\n      this.tabelLoading = false;\n      var _this$market = this.market,\n          coinList = _this$market.coinList,\n          rate = _this$market.rate,\n          market = _this$market.market;\n      this.totalBalance = fixD(totalBalance, 8); // 折合资产\n\n      this.totalBalanceSymbol = totalBalanceSymbol; // 折合币种\n\n      this.totalRate = fixRate(totalBalance, rate, totalBalanceSymbol); // 折合法币\n\n      var list = [];\n      Object.keys(leverMap).forEach(function (v) {\n        var item = leverMap[v];\n        var quoteFix = coinList[item.quoteCoin].showPrecision || 0;\n\n        if (_this3.symbolAll) {\n          quoteFix = _this3.symbolAll[item.name].price;\n        } // const marketFix = market[item.quoteCoin][item.name].volume || 0;\n        // const showSymbol = market[v][cv].showName || market[v][cv].name;\n\n\n        var obj = market[item.quoteCoin][item.name];\n        var showSymbol = obj.showName || obj.name; // getCoinShowName\n\n        var showBaseCoin = getCoinShowName(item.baseCoin, coinList);\n        var showQuoteFix = getCoinShowName(item.quoteCoin, coinList);\n        list.push({\n          id: JSON.stringify(item),\n          data: [showSymbol, // 总资产\n          [{\n            text: \"\".concat(fixD(item.baseTotalBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              text: \"\".concat(fixD(item.quoteTotalBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 可用\n          [{\n            text: \"\".concat(fixD(item.baseNormalBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              text: \"\".concat(fixD(item.quoteNormalBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 冻结\n          [{\n            text: \"\".concat(fixD(item.baseLockBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              text: \"\".concat(fixD(item.quoteLockBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 已借\n          [{\n            // text: `${fixD(item.baseBorrowBalance, baseFix)} ${showBaseCoin}`,\n            text: \"\".concat(fixD(item.baseBorrowBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              // text: `${fixD(item.quoteBorrowBalance, quoteFix)} ${showQuoteFix}`,\n              text: \"\".concat(fixD(item.quoteBorrowBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 爆仓价\n          \"\".concat(fixD(item.burstPrice, quoteFix), \" \").concat(showQuoteFix), // 风险率\n          item.riskRate ? \"\".concat(item.riskRate, \"%\") : '--', [{\n            type: 'button',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: _this3.$t('assets.leverageAccount.transfer'),\n            // 划转\n            eventType: 'transfer'\n          }, {\n            type: 'link',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: _this3.$t('assets.leverageAccount.ToLoan'),\n            // 借贷\n            links: \"leverageToLoan?symbol=\".concat(item.symbol)\n          }, {\n            type: 'icon',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            iconSvg: '<svg class=\"icon icon-16\" aria-hidden=\"true\"><use xlink:href=\"#icon-c_1\"></use></svg>',\n            eventType: 'goTrade'\n          }]]\n        });\n      });\n      this.dataList = list;\n    },\n    // 隐藏零资产\n    findChanges: function findChanges(v) {\n      this.findValue = v;\n    },\n    switchChange: function switchChange() {\n      this.switchFlag = !this.switchFlag;\n      myStorage.set('assetsSwitch', this.switchFlag);\n    },\n    tableClick: function tableClick(v, data) {\n      var obj = JSON.parse(data);\n\n      if (v === 'transfer') {\n        this.$bus.$emit('coTransfer', obj.symbol);\n      } else if (v === 'goTrade') {\n        var symbol = obj.name;\n\n        if (symbol.toString().indexOf('/') === -1) {\n          return;\n        }\n\n        var arr = symbol.split('/'); // myStorage.set('markTitle', symbol.split('/')[1]);\n        // myStorage.set('sSymbolName', symbol);\n\n        window.location.href = \"\".concat(this.tradeLinkUrl, \"/\").concat(arr[0], \"_\").concat(arr[1]);\n      }\n    }\n  }\n};",null]}