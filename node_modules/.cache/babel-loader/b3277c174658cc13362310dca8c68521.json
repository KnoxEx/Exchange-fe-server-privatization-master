{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/home/home.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/home/home.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _slicedToArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapState } from 'vuex';\nimport { myStorage, imgMap, colorMap, getCoinShowName } from '@/utils';\nimport _worker from '@/utils/webWorker';\nexport default {\n  data: function data() {\n    return {\n      krwCheck: false,\n      // krw 弹窗下次不再提示\n      krwFlag: false,\n      // krw 弹窗\n      krwBg: \"background: url(\".concat(imgMap.krwhomebg, \")\"),\n      // 首页轮播图的 宽和高\n      styles: {\n        width: '100%',\n        height: '580px',\n        backgroundColor: colorMap['c-3-bg']\n      },\n      stylesHeight: '580',\n      // 市场数据\n      marketData: null,\n      // MywebSocket\n      MywebSocket: null,\n      // 当前市场\n      marketCurrent: null,\n      // 当前币对\n      symbolCurrent: null,\n      // 当前币对列表\n      symbolCurrentList: [],\n      // 筛选 货币对\n      listfilter: null,\n      // 表格加载LOADING\n      tableLoading: false,\n      // 表格 超过 20条出现滚动条\n      lineNumber: 20,\n      // 首页 轮播图\n      slideList: [],\n      // 首页 轮播图-文案\n      slideListTitle: {\n        title: '',\n        subTitle: ''\n      },\n      // 首页 公告数据\n      noticeList: [],\n      // 24小时行情WS数据\n      marketDataObj: [],\n      marketDataList: [],\n      // 推荐位数据\n      recommendDataList: {},\n      klineDataList: {},\n      // 自选币对\n      mySymbolList: myStorage.get('mySymbol') || [],\n      setMyMarketSwitch: true,\n      // class\n      photoAppShow: false,\n      productShow: false,\n      homeEditReady: false,\n      home_edit_html: '',\n      moreButtonImg1: \"background: url(\".concat(imgMap.ggicon, \")\"),\n      moreButtonImg2: \"background: url(\".concat(imgMap.ggicon_h, \")\"),\n      moreButtonImg3: \"background: url(\".concat(imgMap.om_gg, \")\"),\n      registerInfo: '',\n      instruments: [],\n      // 合约列表\n      tabType: 'USD',\n      coHeaderSymbol: []\n    };\n  },\n  computed: _objectSpread(_objectSpread({\n    coinTagLangs: function coinTagLangs() {\n      return this.$store.state.baseData.coinTagLangs;\n    },\n    coinTagOpen: function coinTagOpen() {\n      return this.$store.state.baseData.coin_tag_open;\n    },\n    optionalSymbolServerOpen: function optionalSymbolServerOpen() {\n      return this.$store.state.baseData.optional_symbol_server_open;\n    },\n    appDownload: function appDownload() {\n      return this.$store.state.baseData.app_download;\n    },\n    index_international_open: function index_international_open() {\n      return this.$store.state.baseData.index_international_open;\n    },\n    storeKrwFlag: function storeKrwFlag() {\n      return this.$store.state.baseData.krwFlag;\n    },\n    coinsKrwOpen: function coinsKrwOpen() {\n      return this.$store.state.baseData.index_layer_open;\n    }\n  }, mapState({\n    baseInfo: function baseInfo(_ref) {\n      var baseData = _ref.baseData;\n      this.marketData = baseData.market; // 获取当前市场\n\n      this.marketCurrent = myStorage.get('homeMarkTitle'); // 获取当前币对\n\n      this.symbolCurrent = myStorage.get('sSymbolName');\n      return baseData;\n    }\n  })), {}, {\n    imgClass: function imgClass() {\n      var style = {\n        bgIcon: {\n          backgroundImage: \"url(\".concat(imgMap.home_edit_icon, \")\")\n        },\n        bgImg: {\n          background: \"url(\".concat(imgMap.home_edit_bg, \") 0 bottom repeat-x #0E1A2E\")\n        },\n        homeEditImga: {\n          backgroundImage: \"url(\".concat(imgMap.home_edit_imga, \")\")\n        },\n        homeEditImgb: {\n          backgroundImage: \"url(\".concat(imgMap.home_edit_imgb, \")\")\n        }\n      };\n      return style;\n    },\n    // 推荐位 币对\n    headerSymbol: function headerSymbol() {\n      if (this.marketData) {\n        return this.marketData.headerSymbol;\n      }\n\n      return [];\n    },\n    // 全部 货币对\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 当前市场列表\n    currentMarketList: function currentMarketList() {\n      return this.marketData ? this.marketData.market : null;\n    },\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    // 当前币对列表\n    symbolList: function symbolList() {\n      var _this = this;\n\n      // 如果 当前市场 是 自选市场\n      if (this.marketCurrent === 'myMarket') {\n        var mySymbol = myStorage.get('mySymbol') || [];\n        var marketList = {};\n\n        if (mySymbol.length) {\n          mySymbol.forEach(function (item) {\n            if (item && _this.symbolAll[item]) {\n              marketList[item] = _this.symbolAll[item];\n            }\n          });\n        }\n\n        return marketList;\n      }\n\n      if (this.currentMarketList && this.marketCurrent) {\n        return this.currentMarketList[this.marketCurrent];\n      }\n\n      return null;\n    },\n    // WS worker\n    worker: function worker() {\n      return _worker();\n    },\n    // 汇率单位\n    rateData: function rateData() {\n      return this.$store.state.baseData.rate;\n    },\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    isCoOpen: function isCoOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\n        return true;\n      }\n\n      return false;\n    }\n  }),\n  watch: {\n    coinsKrwOpen: function coinsKrwOpen(v) {\n      if (v === 1 && this.storeKrwFlag) {\n        if (!localStorage.krwCheck) {\n          this.krwFlag = true;\n        }\n      }\n    },\n    symbolList: function symbolList(val, oldVal) {\n      var _this2 = this;\n\n      if (oldVal) {\n        var oldValKey = Object.keys(oldVal);\n        var objData = {};\n        oldValKey.forEach(function (item) {\n          if (_this2.headerSymbol.indexOf(item) < 0 && oldVal[item]) {\n            objData[item] = oldVal[item];\n          }\n        });\n        this.webSocketSend('Market', 'unsub', this.symbolCurrent, objData);\n        this.webSocketSend('Market', 'sub', this.symbolCurrent, val);\n      }\n    },\n    // 监听 是否登录\n    isLogin: function isLogin(val) {\n      if (val) {\n        this.mySymbolList = myStorage.get('mySymbol') || [];\n      }\n    },\n    // 监听获取到 market 接口的数据\n    marketData: function marketData(val) {\n      if (val.wsUrl && !this.isCoOpen) {\n        var exParmas = {\n          type: 'CREAT_WEBSOCKET',\n          data: {\n            wsUrl: val.wsUrl,\n            lan: this.$store.state.baseData.lan,\n            rate: this.rateData,\n            symbolAll: this.symbolAll\n          }\n        }; // 创建WS\n\n        this.worker.postMessage(exParmas);\n      }\n    },\n    instruments: function instruments(val) {\n      if (val && this.marketData && this.marketData.wsUrl) {\n        // 创建WS\n        this.worker.postMessage({\n          type: 'CREAT_CO_WEBSOCKET',\n          data: {\n            wsUrl: this.marketData.wsUrl,\n            // wsUrl: 'wss://ws3.dcmex.com/wsswap/realTime',\n            lan: this.$store.state.baseData.lan,\n            rate: this.rateData,\n            symbolAll: this.instruments\n          }\n        });\n      }\n    },\n    // 监听 webSocket 创建成功\n    MywebSocket: function MywebSocket(val) {\n      var _this3 = this;\n\n      if (val) {\n        if (this.isCoOpen) {\n          // 发送 数据 Send\n          var arr = ['OrderBook:2', 'QuoteBin5m:2'];\n          this.webSocketCoSend('CoReview', null, this.tabType, arr); // 发送kline实时数据合约\n\n          if (this.coHeaderSymbol.length) {\n            var args = [];\n            this.coHeaderSymbol.forEach(function (item) {\n              args.push(\"QuoteBin30m:\".concat(item.instrument_id));\n            });\n            this.worker.postMessage({\n              type: 'WEBSOCKET_KLINE_CO_SEND',\n              data: {\n                args: args\n              }\n            });\n          }\n        } else {\n          var symbolListKey = Object.keys(this.symbolList);\n          var objData = {};\n          symbolListKey.forEach(function (item) {\n            objData[item] = _this3.symbolList[item];\n          });\n          this.headerSymbol.forEach(function (item) {\n            if (symbolListKey.indexOf(item) < 0 && _this3.symbolAll[item]) {\n              objData[item] = _this3.symbolAll[item];\n            }\n          }); // 发送 24小时行情历史数据 Send\n\n          this.webSocketSend('Review', null, this.symbolCurrent, this.symbolAll); // 发送 24小时行情实时数据 Send\n\n          this.webSocketSend('Market', 'sub', this.symbolCurrent, objData); // 发送 推荐位 kline数据 Send\n\n          if (this.headerSymbol.length) {\n            this.headerSymbol.forEach(function (item) {\n              var symbolArr = item.toLowerCase().split('/');\n              var symbol = symbolArr[0] + symbolArr[1];\n\n              _this3.worker.postMessage({\n                type: 'WEBSOCKET_KLINE_SEND',\n                data: {\n                  symbol: symbol,\n                  type: 'req',\n                  lastTimeS: '1min',\n                  lTime: false,\n                  number: 100,\n                  symbolCurrent: item\n                }\n              });\n\n              _this3.worker.postMessage({\n                type: 'WEBSOCKET_KLINE_SEND',\n                data: {\n                  symbol: symbol,\n                  type: 'sub',\n                  lastTimeS: '1min',\n                  lTime: false,\n                  symbolCurrent: item\n                }\n              });\n            });\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    getCoMarketData: function getCoMarketData() {\n      var _this4 = this;\n\n      this.axios({\n        url: 'swap/instruments',\n        headers: {},\n        method: 'get',\n        hostType: 'fe-cov2-api'\n      }).then(function (data) {\n        if (data.errno === 'OK') {\n          _this4.instruments = _toConsumableArray(data.data.instruments);\n\n          _this4.instruments.forEach(function (item) {\n            if (item.quote_coin === 'USDT') {\n              _this4.$bus.$emit('COMARGET_SWITCH', 'USDT');\n            }\n\n            if (item.quote_coin === 'USD') {\n              _this4.$bus.$emit('COMARGET_SWITCH', 'USD');\n            }\n          });\n\n          if (_this4.instruments.length >= 6) {\n            _this4.coHeaderSymbol = _toConsumableArray(_this4.instruments.slice(0, 6));\n          } else {\n            _this4.coHeaderSymbol = _toConsumableArray(_this4.instruments);\n          }\n\n          _this4.$bus.$emit('COHEADER_SYMBOL', _this4.coHeaderSymbol); // 获取Kline历史数据\n\n\n          _this4.getKhistory();\n        }\n      });\n    },\n    getCoinLabel: function getCoinLabel(name) {\n      var coinList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (coinList && coinList[name.toUpperCase()]) {\n        var _coinList$name$toUppe = coinList[name.toUpperCase()].coinTag,\n            coinTag = _coinList$name$toUppe === void 0 ? '' : _coinList$name$toUppe;\n        return coinTag ? this.coinTagLangs[coinTag] : '';\n      }\n\n      return '';\n    },\n    init: function init() {\n      var _this5 = this;\n\n      if (this.coinsKrwOpen === 1 && this.storeKrwFlag) {\n        if (!localStorage.krwCheck) {\n          this.krwFlag = true;\n        }\n      }\n\n      this.onmessageWorker();\n      this.getLundata(); // 监听 市场切换\n\n      this.$bus.$on('SWITCH-MARKET', function (data) {\n        _this5.marketCurrent = _this5.isCoOpen ? data.type : data;\n\n        _this5.setMarketData();\n      });\n      this.$bus.$on('SWITCH-STORE', function (data) {\n        _this5.setMyMarket(data);\n\n        _this5.setMarketData();\n      });\n\n      if (this.isCoOpen) {\n        this.getCoMarketData();\n      }\n    },\n    goRegister: function goRegister() {\n      if (this.registerInfo) {\n        this.$router.push(\"/register?email=\".concat(this.registerInfo));\n      }\n    },\n    goPage: function goPage(path) {\n      this.$router.push(\"/\".concat(path));\n    },\n    download: function download(type) {\n      window.open(this.appDownload[\"\".concat(type, \"_download_url\")]);\n    },\n    registerChange: function registerChange(val) {\n      this.registerInfo = val;\n    },\n    krwCheckClick: function krwCheckClick() {\n      this.krwCheck = !this.krwCheck;\n    },\n    krwClose: function krwClose() {\n      this.krwFlag = false;\n      this.$store.dispatch('setKrwFlag');\n    },\n    krwConfrim: function krwConfrim() {\n      this.krwFlag = false;\n      this.$store.dispatch('setKrwFlag');\n\n      if (this.krwCheck) {\n        localStorage.krwCheck = true;\n      }\n    },\n    getIconImg: function getIconImg(val) {\n      return \"background:url(\".concat(imgMap[\"home_edit_icon\".concat(val)], \")\");\n    },\n    // 公告更多跳转\n    btnLink: function btnLink() {\n      this.$router.push('/noticeInfo');\n    },\n    onScrollHandle: function onScrollHandle() {\n      var _this6 = this;\n\n      window.onscroll = function () {\n        if (!_this6.productShow) {\n          var WH = window.innerHeight;\n\n          var photoAppTop = _this6.$refs.photoApp.getBoundingClientRect().y;\n\n          var productTop = _this6.$refs.product.getBoundingClientRect().y;\n\n          if (WH - photoAppTop > 300) {\n            _this6.photoAppShow = true;\n          }\n\n          if (WH - productTop > 200) {\n            _this6.productShow = true;\n          }\n        } else {\n          window.onscroll = null;\n        }\n      };\n    },\n    onmessageWorker: function onmessageWorker() {\n      var _this7 = this;\n\n      this.worker.onmessage = function (event) {\n        var data = event.data; // 监听 WebSocket 链接成功\n\n        if (data.type === 'WEBSOCKET_ON_OPEN') {\n          _this7.MywebSocket = data.data.type;\n        } // 监听 WS 数据\n\n\n        if (data.type === 'WEBSOCKET_DATA') {\n          _this7.listenWSData(data.data);\n        }\n      };\n    },\n    // 监听 WS 返回的数据\n    listenWSData: function listenWSData(data) {\n      var _this8 = this;\n\n      var type = data.type,\n          WsData = data.WsData; // 24小时行情数据\n\n      if (type === 'MARKET_DATA') {\n        this.marketDataObj = WsData;\n        var marketArr = Object.keys(this.marketDataObj);\n\n        if (this.isCoOpen) {\n          if (marketArr.length === this.instruments.length) {\n            this.setMarketData();\n            this.setRecommendData();\n          }\n        } else {\n          this.setMarketData();\n          this.setRecommendData();\n        }\n      }\n\n      if (type.indexOf('KLINE_DATA') > -1) {\n        if (this.headerSymbol.length && !this.isCoOpen) {\n          this.headerSymbol.forEach(function (key) {\n            var _WsData$channel$split = WsData.channel.split('_'),\n                _WsData$channel$split2 = _slicedToArray(_WsData$channel$split, 2),\n                symbolType = _WsData$channel$split2[1];\n\n            var symbolArr = key.toLowerCase().split('/');\n            var symbol = symbolArr[0] + symbolArr[1];\n\n            if (symbol === symbolType) {\n              if (WsData.event_rep === 'rep') {\n                var kData = WsData.data;\n                _this8.klineDataList[key] = [];\n                var lengthNumber = kData.slice(-20);\n                lengthNumber.forEach(function (item) {\n                  _this8.klineDataList[key].push([item.id, item.close]);\n                });\n              } else {\n                var _kData = WsData.tick;\n                var keyYs = _this8.klineDataList[key] || [];\n                var lengths = keyYs.length;\n\n                if (_this8.klineDataList[key].length) {\n                  var lastId = _this8.klineDataList[key][lengths - 1][0];\n\n                  if (lastId === _kData.id) {\n                    _this8.klineDataList[key].pop();\n                  }\n\n                  if (_this8.klineDataList[key].length > 20) {\n                    _this8.klineDataList[key].shift();\n                  }\n\n                  _this8.klineDataList[key].push([_kData.id, _kData.close]);\n                }\n              }\n            }\n          });\n          this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\n        }\n\n        if (this.isCoOpen) {\n          var kData = WsData;\n          var wsId = kData.group.charAt(kData.group.length - 1);\n          this.coHeaderSymbol.forEach(function (item) {\n            var keyYs = _this8.klineDataList[item.symbol] || [];\n            var lengths = keyYs.length;\n            var lastId = _this8.klineDataList[item.symbol][lengths - 1][0];\n\n            if (_this8.klineDataList[item.symbol].length) {\n              if (Number(lastId) === Number(wsId)) {\n                _this8.klineDataList[item.symbol].pop();\n\n                if (_this8.klineDataList[item.symbol].length > 30) {\n                  _this8.klineDataList[item.symbol].shift();\n                }\n\n                var _kData$data$ = kData.data[0],\n                    close = _kData$data$.close,\n                    timestamp = _kData$data$.timestamp;\n\n                _this8.klineDataList[item.symbol].push([timestamp, close]);\n              }\n            }\n          });\n          this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\n        }\n      }\n    },\n    // 发送 Send\n    webSocketSend: function webSocketSend(type, sendType, symbolData, symbolList) {\n      if (this.isCoOpen) return;\n      this.worker.postMessage({\n        type: 'WEBSOCKET_SEND',\n        data: {\n          type: type,\n          sendType: sendType,\n          symbolData: symbolData,\n          symbolList: symbolList\n        }\n      });\n    },\n    // 发送 CoSend\n    webSocketCoSend: function webSocketCoSend(type, sendType, symbolData, symbolList) {\n      this.worker.postMessage({\n        type: 'WEBSOCKET_CO_SEND',\n        data: {\n          type: type,\n          sendType: sendType,\n          symbolData: symbolData,\n          symbolList: symbolList\n        }\n      });\n    },\n    // 格式化 推荐位的 K线数据\n    setRecommendData: function setRecommendData() {\n      var _this9 = this;\n\n      if (this.headerSymbol.length && !this.isCoOpen) {\n        this.headerSymbol.forEach(function (item) {\n          _this9.recommendDataList[item] = {};\n\n          if (_this9.marketDataObj && _this9.marketDataObj[item]) {\n            _this9.recommendDataList[item] = _this9.marketDataObj[item];\n          }\n        });\n        this.$bus.$emit('RECOMMEEND_DATA', this.recommendDataList);\n      }\n\n      if (this.isCoOpen) {\n        if (this.coHeaderSymbol.length) {\n          this.coHeaderSymbol.forEach(function (item) {\n            if (_this9.marketDataObj && _this9.marketDataObj[item.symbol]) {\n              _this9.recommendDataList[item.symbol] = _this9.marketDataObj[item.symbol];\n            }\n          });\n          this.$bus.$emit('RECOMMEEND_DATA', this.recommendDataList);\n        }\n      }\n    },\n    // 格式化 推荐位的24小时行情数据\n    setMarketData: function setMarketData() {\n      var _this10 = this;\n\n      if (this.isCoOpen) {\n        var marketDataList = [];\n        var USTDinstruments = this.instruments.filter(function (item) {\n          return item.quote_coin === 'USDT';\n        });\n        var USTinstruments = this.instruments.filter(function (item) {\n          return item.quote_coin === 'USD';\n        });\n        var typeData = this.marketCurrent === 'USD' ? USTinstruments : USTDinstruments;\n        typeData.forEach(function (item) {\n          var itemData = _this10.marketDataObj[item.symbol];\n\n          if (itemData) {\n            var showName = itemData.name.split('/')[0] || itemData.name;\n            var iconSvg = \"<span>\".concat(showName, \"</span>\"); // const name = item.name;\n\n            marketDataList.push({\n              isShow: true,\n              id: item.symbol,\n              showName: showName,\n              data: [[{\n                iconSvg: '',\n                type: 'icon',\n                eventType: 'store'\n              }, {\n                iconSvg: iconSvg,\n                type: 'icon',\n                eventType: 'symbol',\n                classes: 'symbolName',\n                sortVal: itemData.sort,\n                key: 'sort'\n              }], [{\n                text: itemData.close.data,\n                classes: ['fontSize14'],\n                sortVal: itemData.closes,\n                key: 'closes',\n                subContent: {\n                  text: itemData.close.price !== '--' ? \"\\u2248 \".concat(itemData.close.price) : itemData.close.price,\n                  classes: ['b-2-cl'] // 默认没有\n\n                }\n              }], [{\n                type: 'label',\n                text: itemData.rose.data,\n                sortVal: itemData.roses,\n                key: 'roses',\n                classes: _this10.itemRoseClass(itemData.rose)\n              }], [{\n                text: itemData.high\n              }], [{\n                text: itemData.low\n              }], [{\n                text: itemData.vol\n              }], [{\n                text: itemData.amount\n              }]]\n            });\n          }\n        });\n        this.marketDataList = marketDataList;\n      } else {\n        if (!this.symbolList) return;\n        var _marketDataList = [];\n        var keyarr = Object.keys(this.symbolList);\n        keyarr.forEach(function (item) {\n          if (_this10.symbolList[item].newcoinFlag) {\n            _this10.newcoinFlag = true;\n          }\n\n          var itemData = _this10.marketDataObj[item];\n\n          if (itemData) {\n            var showName = getCoinShowName(itemData.name, _this10.symbolAll);\n\n            var coinLabel = _this10.getCoinLabel(itemData.symbol.symbol, _this10.coinList);\n\n            var iconSvg = \"<span>\".concat(showName, \"</span>\");\n\n            if (coinLabel && _this10.coinTagOpen) {\n              var str = \"<div class=\\\"coin-label\\\">\\n              <span class=\\\"coin-text a-12-cl\\\">\".concat(coinLabel, \"</span>\\n              <span class=\\\"coin-bg a-12-bg\\\"></span>\\n            </div>\");\n              iconSvg = \"\".concat(iconSvg).concat(str);\n            }\n\n            _marketDataList.push({\n              isShow: _this10.symbolList[item].isShow,\n              id: itemData.name,\n              showName: showName,\n              data: [[{\n                iconSvg: _this10.myMarketIcon(itemData.name),\n                type: 'icon',\n                eventType: 'store'\n              }, {\n                iconSvg: iconSvg,\n                type: 'icon',\n                eventType: 'symbol',\n                classes: 'symbolName',\n                sortVal: itemData.sort,\n                key: 'sort'\n              }], [{\n                text: itemData.close.data,\n                classes: ['fontSize14'],\n                sortVal: itemData.closes,\n                key: 'closes',\n                subContent: {\n                  text: itemData.close.price !== '--' ? \"\\u2248 \".concat(itemData.close.price) : itemData.close.price,\n                  classes: ['b-2-cl'] // 默认没有\n\n                }\n              }], [{\n                type: 'label',\n                text: itemData.rose.data,\n                sortVal: itemData.roses,\n                key: 'roses',\n                classes: _this10.itemRoseClass(itemData.rose)\n              }], [{\n                text: itemData.high\n              }], [{\n                text: itemData.low\n              }], [{\n                text: itemData.vol\n              }], [{\n                text: itemData.amount\n              }]]\n            });\n          }\n        });\n        this.marketDataList = _marketDataList.sort(function (a, b) {\n          return a.sort - b.sort;\n        });\n      }\n    },\n    // 设置币对是否收藏的ICON\n    myMarketIcon: function myMarketIcon(symbol) {\n      if (this.mySymbolList.indexOf(symbol) === -1) {\n        return \"<svg class=\\\"icon icon-16\\\" aria-hidden=\\\"true\\\">\\n                <use xlink:href=\\\"#icon-c_11\\\">\\n              </use></svg>\";\n      }\n\n      return \"<svg class=\\\"icon icon-16\\\" aria-hidden=\\\"true\\\">\\n                <use xlink:href=\\\"#icon-c_11_1\\\">\\n              </use></svg>\";\n    },\n    // 获取 首页数据(公告、轮播图)\n    getLundata: function getLundata() {\n      var _this11 = this;\n\n      var dataObj = {};\n\n      if (this.$route.query && this.$route.query.preview && this.$route.query.homeBoard) {\n        dataObj.preview = Number(this.$route.query.preview) > 1 ? 0 : Number(this.$route.query.preview);\n        dataObj.homeBoard = Number(this.$route.query.homeBoard); // if (this.$route.query.homeBoard === '20200216') {\n        //   dataObj = {};\n        // }\n      }\n\n      this.axios({\n        url: this.$store.state.url.common.index_data,\n        headers: {},\n        params: dataObj,\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          // 首页轮播图\n          var _data$data = data.data,\n              cmsAdvertList = _data$data.cmsAdvertList,\n              noticeInfoList = _data$data.noticeInfoList;\n\n          if (cmsAdvertList && cmsAdvertList.length) {\n            _this11.slideList = data.data.cmsAdvertList;\n          }\n\n          _this11.slideListTitle.title = data.data.index_international_title1 || '';\n          _this11.slideListTitle.subTitle = data.data.index_international_title2 || ''; // 首页公告\n\n          if (noticeInfoList && noticeInfoList.length) {\n            var arr = [];\n            var length = 18;\n\n            if (_this11.index_international_open === 1) {\n              length = 50;\n            }\n\n            noticeInfoList.forEach(function (item) {\n              var space = item.title.length > length ? '...' : '';\n              arr.push({\n                noticeText: \"\".concat(item.title.substr(0, length)).concat(space),\n                id: item.id\n              });\n            });\n            _this11.noticeList = arr;\n          }\n\n          _this11.home_edit_html = data.data.footer_warm_prompt;\n        }\n\n        _this11.homeEditReady = true;\n      });\n    },\n    // 设置 自选币对\n    setMyMarket: function setMyMarket(symbol) {\n      var _this12 = this;\n\n      var url = this.$store.state.url.common.optional_symbol;\n\n      if (this.optionalSymbolServerOpen === 1) {\n        url = this.$store.state.url.common.optional_symbols;\n      } // 防止重复点击\n\n\n      if (!this.setMyMarketSwitch) return;\n      this.setMyMarketSwitch = false;\n      var mySymbol = myStorage.get('mySymbol') || [];\n      var addOrDelete = true;\n\n      if (mySymbol.length && mySymbol.indexOf(symbol) > -1) {\n        mySymbol = mySymbol.filter(function (item) {\n          return item !== symbol;\n        });\n        addOrDelete = false;\n      } else {\n        mySymbol.push(symbol);\n        addOrDelete = true;\n      }\n\n      if (this.optionalSymbolServerOpen === 1 && this.isLogin) {\n        this.axios({\n          url: url,\n          headers: {},\n          params: {\n            operationType: addOrDelete === true ? '1' : '2',\n            // 0批量添加 1单个添加 2单个删除\n            symbols: symbol\n          },\n          method: 'post'\n        }).then(function (data) {\n          if (data.code === '0') {\n            _this12.setMyMarketSwitch = true;\n            _this12.mySymbolList = mySymbol;\n            myStorage.set('mySymbol', mySymbol);\n          } else {\n            _this12.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        this.setMyMarketSwitch = true;\n        this.mySymbolList = mySymbol;\n        myStorage.set('mySymbol', mySymbol);\n      }\n    },\n    // 24小时行情 涨跌幅 的背景、样色的class\n    itemRoseClass: function itemRoseClass(rose) {\n      var bgClass = null;\n\n      if (rose.class === 'u-1-cl') {\n        bgClass = 'rose-label u-3-bg';\n      } else if (rose.class === 'u-4-cl') {\n        bgClass = 'rose-label u-6-bg';\n      }\n\n      return [rose.class, bgClass];\n    },\n    // 获取Kine历史数据\n    getKhistory: function getKhistory() {\n      var _this13 = this;\n\n      var endTime = new Date().getTime().toString().substr(0, 10);\n      var newTime = new Date(new Date().getTime() - 30 * 60 * 1000);\n      var startTime = newTime.getTime().toString().substr(0, 10);\n      this.coHeaderSymbol.forEach(function (item) {\n        var url = \"swap/kline?instrumentID=\".concat(item.instrument_id, \"&startTime=\").concat(startTime, \"&endTime=\").concat(endTime, \"&resolution=M&unit=1\");\n\n        _this13.axios({\n          url: url,\n          headers: {},\n          method: 'get',\n          hostType: 'fe-cov2-api'\n        }).then(function (data) {\n          if (data.errno === 'OK') {\n            var kData = data.data;\n            _this13.klineDataList[item.symbol] = [];\n            var lengthNumber = kData ? kData.slice(-30) : [];\n\n            if (lengthNumber && lengthNumber.length) {\n              lengthNumber.forEach(function (ele) {\n                _this13.klineDataList[item.symbol].push([ele.timestamp, ele.close]);\n              });\n            }\n\n            _this13.$bus.$emit('RECOMMEEND_KLINE_DATA', _this13.klineDataList);\n          }\n        });\n      });\n    }\n  },\n  destroyed: function destroyed() {\n    this.$bus.$off('SWITCH-STORE');\n    this.$bus.$off('SWITCH-MARKET');\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.webSocketSend('Market', 'unsub', this.symbolCurrent, this.symbolList);\n    window.onscroll = null;\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/home/home.js"],"names":["mapState","myStorage","imgMap","colorMap","getCoinShowName","worker","data","krwCheck","krwFlag","krwBg","krwhomebg","styles","width","height","backgroundColor","stylesHeight","marketData","MywebSocket","marketCurrent","symbolCurrent","symbolCurrentList","listfilter","tableLoading","lineNumber","slideList","slideListTitle","title","subTitle","noticeList","marketDataObj","marketDataList","recommendDataList","klineDataList","mySymbolList","get","setMyMarketSwitch","photoAppShow","productShow","homeEditReady","home_edit_html","moreButtonImg1","ggicon","moreButtonImg2","ggicon_h","moreButtonImg3","om_gg","registerInfo","instruments","tabType","coHeaderSymbol","computed","coinTagLangs","$store","state","baseData","coinTagOpen","coin_tag_open","optionalSymbolServerOpen","optional_symbol_server_open","appDownload","app_download","index_international_open","storeKrwFlag","coinsKrwOpen","index_layer_open","baseInfo","market","imgClass","style","bgIcon","backgroundImage","home_edit_icon","bgImg","background","home_edit_bg","homeEditImga","home_edit_imga","homeEditImgb","home_edit_imgb","headerSymbol","symbolAll","currentMarketList","coinList","symbolList","mySymbol","marketList","length","forEach","item","rateData","rate","isLogin","isCoOpen","base","publicInfo","switch","indep_co_switch","watch","v","localStorage","val","oldVal","oldValKey","Object","keys","objData","indexOf","webSocketSend","wsUrl","exParmas","type","lan","postMessage","arr","webSocketCoSend","args","push","instrument_id","symbolListKey","symbolArr","toLowerCase","split","symbol","lastTimeS","lTime","number","methods","getCoMarketData","axios","url","headers","method","hostType","then","errno","quote_coin","$bus","$emit","slice","getKhistory","getCoinLabel","name","toUpperCase","coinTag","init","onmessageWorker","getLundata","$on","setMarketData","setMyMarket","goRegister","$router","goPage","path","download","window","open","registerChange","krwCheckClick","krwClose","dispatch","krwConfrim","getIconImg","btnLink","onScrollHandle","onscroll","WH","innerHeight","photoAppTop","$refs","photoApp","getBoundingClientRect","y","productTop","product","onmessage","event","listenWSData","WsData","marketArr","setRecommendData","key","channel","symbolType","event_rep","kData","lengthNumber","id","close","tick","keyYs","lengths","lastId","pop","shift","wsId","group","charAt","Number","timestamp","sendType","symbolData","USTDinstruments","filter","USTinstruments","typeData","itemData","showName","iconSvg","isShow","eventType","classes","sortVal","sort","text","closes","subContent","price","rose","roses","itemRoseClass","high","low","vol","amount","keyarr","newcoinFlag","coinLabel","str","myMarketIcon","a","b","dataObj","$route","query","preview","homeBoard","common","index_data","params","code","cmsAdvertList","noticeInfoList","index_international_title1","index_international_title2","space","noticeText","substr","footer_warm_prompt","optional_symbol","optional_symbols","addOrDelete","operationType","symbols","set","msg","bgClass","class","endTime","Date","getTime","toString","newTime","startTime","ele","destroyed","$off","beforeDestroy"],"mappings":"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","sourcesContent":["import { mapState } from 'vuex';\r\nimport {\r\n  myStorage, imgMap, colorMap, getCoinShowName,\r\n} from '@/utils';\r\nimport worker from '@/utils/webWorker';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      krwCheck: false, // krw 弹窗下次不再提示\r\n      krwFlag: false, // krw 弹窗\r\n      krwBg: `background: url(${imgMap.krwhomebg})`,\r\n      // 首页轮播图的 宽和高\r\n      styles: {\r\n        width: '100%',\r\n        height: '580px',\r\n        backgroundColor: colorMap['c-3-bg'],\r\n      },\r\n      stylesHeight: '580',\r\n      // 市场数据\r\n      marketData: null,\r\n      // MywebSocket\r\n      MywebSocket: null,\r\n      // 当前市场\r\n      marketCurrent: null,\r\n      // 当前币对\r\n      symbolCurrent: null,\r\n      // 当前币对列表\r\n      symbolCurrentList: [],\r\n      // 筛选 货币对\r\n      listfilter: null,\r\n      // 表格加载LOADING\r\n      tableLoading: false,\r\n      // 表格 超过 20条出现滚动条\r\n      lineNumber: 20,\r\n      // 首页 轮播图\r\n      slideList: [],\r\n      // 首页 轮播图-文案\r\n      slideListTitle: {\r\n        title: '',\r\n        subTitle: '',\r\n      },\r\n      // 首页 公告数据\r\n      noticeList: [],\r\n      // 24小时行情WS数据\r\n      marketDataObj: [],\r\n      marketDataList: [],\r\n      // 推荐位数据\r\n      recommendDataList: {},\r\n      klineDataList: {},\r\n      // 自选币对\r\n      mySymbolList: myStorage.get('mySymbol') || [],\r\n      setMyMarketSwitch: true,\r\n      // class\r\n      photoAppShow: false,\r\n      productShow: false,\r\n      homeEditReady: false,\r\n      home_edit_html: '',\r\n      moreButtonImg1: `background: url(${imgMap.ggicon})`,\r\n      moreButtonImg2: `background: url(${imgMap.ggicon_h})`,\r\n      moreButtonImg3: `background: url(${imgMap.om_gg})`,\r\n      registerInfo: '',\r\n      instruments: [], // 合约列表\r\n      tabType: 'USD',\r\n      coHeaderSymbol: [],\r\n    };\r\n  },\r\n  computed: {\r\n    coinTagLangs() {\r\n      return this.$store.state.baseData.coinTagLangs;\r\n    },\r\n    coinTagOpen() {\r\n      return this.$store.state.baseData.coin_tag_open;\r\n    },\r\n    optionalSymbolServerOpen() {\r\n      return this.$store.state.baseData.optional_symbol_server_open;\r\n    },\r\n    appDownload() {\r\n      return this.$store.state.baseData.app_download;\r\n    },\r\n    index_international_open() {\r\n      return this.$store.state.baseData.index_international_open;\r\n    },\r\n    storeKrwFlag() {\r\n      return this.$store.state.baseData.krwFlag;\r\n    },\r\n    coinsKrwOpen() {\r\n      return this.$store.state.baseData.index_layer_open;\r\n    },\r\n    ...mapState({\r\n      baseInfo({ baseData }) {\r\n        this.marketData = baseData.market;\r\n        // 获取当前市场\r\n        this.marketCurrent = myStorage.get('homeMarkTitle');\r\n        // 获取当前币对\r\n        this.symbolCurrent = myStorage.get('sSymbolName');\r\n        return baseData;\r\n      },\r\n    }),\r\n    imgClass() {\r\n      const style = {\r\n        bgIcon: {\r\n          backgroundImage: `url(${imgMap.home_edit_icon})`,\r\n        },\r\n        bgImg: {\r\n          background: `url(${imgMap.home_edit_bg}) 0 bottom repeat-x #0E1A2E`,\r\n        },\r\n        homeEditImga: {\r\n          backgroundImage: `url(${imgMap.home_edit_imga})`,\r\n        },\r\n        homeEditImgb: {\r\n          backgroundImage: `url(${imgMap.home_edit_imgb})`,\r\n        },\r\n      };\r\n      return style;\r\n    },\r\n    // 推荐位 币对\r\n    headerSymbol() {\r\n      if (this.marketData) {\r\n        return this.marketData.headerSymbol;\r\n      }\r\n      return [];\r\n    },\r\n    // 全部 货币对\r\n    symbolAll() {\r\n      return this.$store.state.baseData.symbolAll;\r\n    },\r\n    // 当前市场列表\r\n    currentMarketList() {\r\n      return this.marketData ? this.marketData.market : null;\r\n    },\r\n    coinList() {\r\n      if (this.$store.state.baseData.market) {\r\n        return this.$store.state.baseData.market.coinList;\r\n      }\r\n      return null;\r\n    },\r\n    // 当前币对列表\r\n    symbolList() {\r\n      // 如果 当前市场 是 自选市场\r\n      if (this.marketCurrent === 'myMarket') {\r\n        const mySymbol = myStorage.get('mySymbol') || [];\r\n        const marketList = {};\r\n        if (mySymbol.length) {\r\n          mySymbol.forEach((item) => {\r\n            if (item && this.symbolAll[item]) {\r\n              marketList[item] = this.symbolAll[item];\r\n            }\r\n          });\r\n        }\r\n        return marketList;\r\n      }\r\n      if (this.currentMarketList && this.marketCurrent) {\r\n        return this.currentMarketList[this.marketCurrent];\r\n      }\r\n      return null;\r\n    },\r\n    // WS worker\r\n    worker() {\r\n      return worker();\r\n    },\r\n    // 汇率单位\r\n    rateData() {\r\n      return this.$store.state.baseData.rate;\r\n    },\r\n    isLogin() {\r\n      return this.$store.state.baseData.isLogin;\r\n    },\r\n    isCoOpen() {\r\n      const base = this.$store.state.baseData.publicInfo;\r\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n  },\r\n  watch: {\r\n    coinsKrwOpen(v) {\r\n      if (v === 1 && this.storeKrwFlag) {\r\n        if (!localStorage.krwCheck) {\r\n          this.krwFlag = true;\r\n        }\r\n      }\r\n    },\r\n    symbolList(val, oldVal) {\r\n      if (oldVal) {\r\n        const oldValKey = Object.keys(oldVal);\r\n        const objData = {};\r\n        oldValKey.forEach((item) => {\r\n          if (this.headerSymbol.indexOf(item) < 0 && oldVal[item]) {\r\n            objData[item] = oldVal[item];\r\n          }\r\n        });\r\n        this.webSocketSend('Market', 'unsub', this.symbolCurrent, objData);\r\n        this.webSocketSend('Market', 'sub', this.symbolCurrent, val);\r\n      }\r\n    },\r\n    // 监听 是否登录\r\n    isLogin(val) {\r\n      if (val) {\r\n        this.mySymbolList = myStorage.get('mySymbol') || [];\r\n      }\r\n    },\r\n    // 监听获取到 market 接口的数据\r\n    marketData(val) {\r\n      if (val.wsUrl && !this.isCoOpen) {\r\n        const exParmas = {\r\n          type: 'CREAT_WEBSOCKET',\r\n          data: {\r\n            wsUrl: val.wsUrl,\r\n            lan: this.$store.state.baseData.lan,\r\n            rate: this.rateData,\r\n            symbolAll: this.symbolAll,\r\n          },\r\n        };\r\n        // 创建WS\r\n        this.worker.postMessage(exParmas);\r\n      }\r\n    },\r\n    instruments(val) {\r\n      if (val && this.marketData && this.marketData.wsUrl) {\r\n        // 创建WS\r\n        this.worker.postMessage({\r\n          type: 'CREAT_CO_WEBSOCKET',\r\n          data: {\r\n            wsUrl: this.marketData.wsUrl,\r\n            // wsUrl: 'wss://ws3.dcmex.com/wsswap/realTime',\r\n            lan: this.$store.state.baseData.lan,\r\n            rate: this.rateData,\r\n            symbolAll: this.instruments,\r\n          },\r\n        });\r\n      }\r\n    },\r\n    // 监听 webSocket 创建成功\r\n    MywebSocket(val) {\r\n      if (val) {\r\n        if (this.isCoOpen) {\r\n          // 发送 数据 Send\r\n          const arr = ['OrderBook:2', 'QuoteBin5m:2'];\r\n          this.webSocketCoSend('CoReview', null, this.tabType, arr);\r\n          // 发送kline实时数据合约\r\n          if (this.coHeaderSymbol.length) {\r\n            const args = [];\r\n            this.coHeaderSymbol.forEach((item) => {\r\n              args.push(`QuoteBin30m:${item.instrument_id}`);\r\n            });\r\n            this.worker.postMessage({\r\n              type: 'WEBSOCKET_KLINE_CO_SEND',\r\n              data: {\r\n                args,\r\n              },\r\n            });\r\n          }\r\n        } else {\r\n          const symbolListKey = Object.keys(this.symbolList);\r\n          const objData = {};\r\n          symbolListKey.forEach((item) => {\r\n            objData[item] = this.symbolList[item];\r\n          });\r\n          this.headerSymbol.forEach((item) => {\r\n            if (symbolListKey.indexOf(item) < 0 && this.symbolAll[item]) {\r\n              objData[item] = this.symbolAll[item];\r\n            }\r\n          });\r\n\r\n          // 发送 24小时行情历史数据 Send\r\n          this.webSocketSend('Review', null, this.symbolCurrent, this.symbolAll);\r\n          // 发送 24小时行情实时数据 Send\r\n          this.webSocketSend('Market', 'sub', this.symbolCurrent, objData);\r\n          // 发送 推荐位 kline数据 Send\r\n          if (this.headerSymbol.length) {\r\n            this.headerSymbol.forEach((item) => {\r\n              const symbolArr = item.toLowerCase().split('/');\r\n              const symbol = symbolArr[0] + symbolArr[1];\r\n              this.worker.postMessage({\r\n                type: 'WEBSOCKET_KLINE_SEND',\r\n                data: {\r\n                  symbol,\r\n                  type: 'req',\r\n                  lastTimeS: '1min',\r\n                  lTime: false,\r\n                  number: 100,\r\n                  symbolCurrent: item,\r\n                },\r\n              });\r\n              this.worker.postMessage({\r\n                type: 'WEBSOCKET_KLINE_SEND',\r\n                data: {\r\n                  symbol,\r\n                  type: 'sub',\r\n                  lastTimeS: '1min',\r\n                  lTime: false,\r\n                  symbolCurrent: item,\r\n                },\r\n              });\r\n            });\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    getCoMarketData() {\r\n      this.axios({\r\n        url: 'swap/instruments',\r\n        headers: {},\r\n        method: 'get',\r\n        hostType: 'fe-cov2-api',\r\n      }).then((data) => {\r\n        if (data.errno === 'OK') {\r\n          this.instruments = [...data.data.instruments];\r\n          this.instruments.forEach((item) => {\r\n            if (item.quote_coin === 'USDT') {\r\n              this.$bus.$emit('COMARGET_SWITCH', 'USDT');\r\n            }\r\n            if (item.quote_coin === 'USD') {\r\n              this.$bus.$emit('COMARGET_SWITCH', 'USD');\r\n            }\r\n          });\r\n          if (this.instruments.length >= 6) {\r\n            this.coHeaderSymbol = [...this.instruments.slice(0, 6)];\r\n          } else {\r\n            this.coHeaderSymbol = [...this.instruments];\r\n          }\r\n          this.$bus.$emit('COHEADER_SYMBOL', this.coHeaderSymbol);\r\n          // 获取Kline历史数据\r\n          this.getKhistory();\r\n        }\r\n      });\r\n    },\r\n    getCoinLabel(name, coinList = {}) {\r\n      if (coinList && coinList[name.toUpperCase()]) {\r\n        const { coinTag = '' } = coinList[name.toUpperCase()];\r\n        return coinTag ? this.coinTagLangs[coinTag] : '';\r\n      }\r\n\r\n      return '';\r\n    },\r\n    init() {\r\n      if (this.coinsKrwOpen === 1 && this.storeKrwFlag) {\r\n        if (!localStorage.krwCheck) {\r\n          this.krwFlag = true;\r\n        }\r\n      }\r\n      this.onmessageWorker();\r\n      this.getLundata();\r\n      // 监听 市场切换\r\n      this.$bus.$on('SWITCH-MARKET', (data) => {\r\n        this.marketCurrent = this.isCoOpen ? data.type : data;\r\n        this.setMarketData();\r\n      });\r\n      this.$bus.$on('SWITCH-STORE', (data) => {\r\n        this.setMyMarket(data);\r\n        this.setMarketData();\r\n      });\r\n      if (this.isCoOpen) {\r\n        this.getCoMarketData();\r\n      }\r\n    },\r\n    goRegister() {\r\n      if (this.registerInfo) {\r\n        this.$router.push(`/register?email=${this.registerInfo}`);\r\n      }\r\n    },\r\n    goPage(path) {\r\n      this.$router.push(`/${path}`);\r\n    },\r\n    download(type) {\r\n      window.open(this.appDownload[`${type}_download_url`]);\r\n    },\r\n    registerChange(val) {\r\n      this.registerInfo = val;\r\n    },\r\n    krwCheckClick() {\r\n      this.krwCheck = !this.krwCheck;\r\n    },\r\n    krwClose() {\r\n      this.krwFlag = false;\r\n      this.$store.dispatch('setKrwFlag');\r\n    },\r\n    krwConfrim() {\r\n      this.krwFlag = false;\r\n      this.$store.dispatch('setKrwFlag');\r\n      if (this.krwCheck) {\r\n        localStorage.krwCheck = true;\r\n      }\r\n    },\r\n    getIconImg(val) {\r\n      return `background:url(${imgMap[`home_edit_icon${val}`]})`;\r\n    },\r\n    // 公告更多跳转\r\n    btnLink() {\r\n      this.$router.push('/noticeInfo');\r\n    },\r\n    onScrollHandle() {\r\n      window.onscroll = () => {\r\n        if (!this.productShow) {\r\n          const WH = window.innerHeight;\r\n          const photoAppTop = this.$refs.photoApp.getBoundingClientRect().y;\r\n          const productTop = this.$refs.product.getBoundingClientRect().y;\r\n          if (WH - photoAppTop > 300) {\r\n            this.photoAppShow = true;\r\n          }\r\n          if (WH - productTop > 200) {\r\n            this.productShow = true;\r\n          }\r\n        } else {\r\n          window.onscroll = null;\r\n        }\r\n      };\r\n    },\r\n    onmessageWorker() {\r\n      this.worker.onmessage = (event) => {\r\n        const { data } = event;\r\n        // 监听 WebSocket 链接成功\r\n        if (data.type === 'WEBSOCKET_ON_OPEN') {\r\n          this.MywebSocket = data.data.type;\r\n        }\r\n        // 监听 WS 数据\r\n        if (data.type === 'WEBSOCKET_DATA') {\r\n          this.listenWSData(data.data);\r\n        }\r\n      };\r\n    },\r\n    // 监听 WS 返回的数据\r\n    listenWSData(data) {\r\n      const { type, WsData } = data;\r\n      // 24小时行情数据\r\n      if (type === 'MARKET_DATA') {\r\n        this.marketDataObj = WsData;\r\n        const marketArr = Object.keys(this.marketDataObj);\r\n        if (this.isCoOpen) {\r\n          if (marketArr.length === this.instruments.length) {\r\n            this.setMarketData();\r\n            this.setRecommendData();\r\n          }\r\n        } else {\r\n          this.setMarketData();\r\n          this.setRecommendData();\r\n        }\r\n      }\r\n      if (type.indexOf('KLINE_DATA') > -1) {\r\n        if (this.headerSymbol.length && !this.isCoOpen) {\r\n          this.headerSymbol.forEach((key) => {\r\n            const [, symbolType] = WsData.channel.split('_');\r\n            const symbolArr = key.toLowerCase().split('/');\r\n            const symbol = symbolArr[0] + symbolArr[1];\r\n            if (symbol === symbolType) {\r\n              if (WsData.event_rep === 'rep') {\r\n                const kData = WsData.data;\r\n                this.klineDataList[key] = [];\r\n                const lengthNumber = kData.slice(-20);\r\n                lengthNumber.forEach((item) => {\r\n                  this.klineDataList[key].push([\r\n                    item.id,\r\n                    item.close,\r\n                  ]);\r\n                });\r\n              } else {\r\n                const kData = WsData.tick;\r\n                const keyYs = this.klineDataList[key] || [];\r\n                const lengths = keyYs.length;\r\n                if (this.klineDataList[key].length) {\r\n                  const lastId = this.klineDataList[key][lengths - 1][0];\r\n                  if (lastId === kData.id) {\r\n                    this.klineDataList[key].pop();\r\n                  }\r\n                  if (this.klineDataList[key].length > 20) {\r\n                    this.klineDataList[key].shift();\r\n                  }\r\n                  this.klineDataList[key].push([\r\n                    kData.id,\r\n                    kData.close,\r\n                  ]);\r\n                }\r\n              }\r\n            }\r\n          });\r\n          this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\r\n        }\r\n        if (this.isCoOpen) {\r\n          const kData = WsData;\r\n          const wsId = kData.group.charAt(kData.group.length - 1);\r\n          this.coHeaderSymbol.forEach((item) => {\r\n            const keyYs = this.klineDataList[item.symbol] || [];\r\n            const lengths = keyYs.length;\r\n            const lastId = this.klineDataList[item.symbol][lengths - 1][0];\r\n            if (this.klineDataList[item.symbol].length) {\r\n              if (Number(lastId) === Number(wsId)) {\r\n                this.klineDataList[item.symbol].pop();\r\n                if (this.klineDataList[item.symbol].length > 30) {\r\n                  this.klineDataList[item.symbol].shift();\r\n                }\r\n                const { close, timestamp } = kData.data[0];\r\n                this.klineDataList[item.symbol].push([\r\n                  timestamp,\r\n                  close,\r\n                ]);\r\n              }\r\n            }\r\n          });\r\n          this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\r\n        }\r\n      }\r\n    },\r\n    // 发送 Send\r\n    webSocketSend(type, sendType, symbolData, symbolList) {\r\n      if (this.isCoOpen) return;\r\n      this.worker.postMessage({\r\n        type: 'WEBSOCKET_SEND',\r\n        data: {\r\n          type,\r\n          sendType,\r\n          symbolData,\r\n          symbolList,\r\n        },\r\n      });\r\n    },\r\n    // 发送 CoSend\r\n    webSocketCoSend(type, sendType, symbolData, symbolList) {\r\n      this.worker.postMessage({\r\n        type: 'WEBSOCKET_CO_SEND',\r\n        data: {\r\n          type,\r\n          sendType,\r\n          symbolData,\r\n          symbolList,\r\n        },\r\n      });\r\n    },\r\n    // 格式化 推荐位的 K线数据\r\n    setRecommendData() {\r\n      if (this.headerSymbol.length && !this.isCoOpen) {\r\n        this.headerSymbol.forEach((item) => {\r\n          this.recommendDataList[item] = {};\r\n          if (this.marketDataObj && this.marketDataObj[item]) {\r\n            this.recommendDataList[item] = this.marketDataObj[item];\r\n          }\r\n        });\r\n        this.$bus.$emit('RECOMMEEND_DATA', this.recommendDataList);\r\n      }\r\n      if (this.isCoOpen) {\r\n        if (this.coHeaderSymbol.length) {\r\n          this.coHeaderSymbol.forEach((item) => {\r\n            if (this.marketDataObj && this.marketDataObj[item.symbol]) {\r\n              this.recommendDataList[item.symbol] = this.marketDataObj[item.symbol];\r\n            }\r\n          });\r\n          this.$bus.$emit('RECOMMEEND_DATA', this.recommendDataList);\r\n        }\r\n      }\r\n    },\r\n    // 格式化 推荐位的24小时行情数据\r\n    setMarketData() {\r\n      if (this.isCoOpen) {\r\n        const marketDataList = [];\r\n        const USTDinstruments = this.instruments.filter((item) => item.quote_coin === 'USDT');\r\n        const USTinstruments = this.instruments.filter((item) => item.quote_coin === 'USD');\r\n        const typeData = this.marketCurrent === 'USD' ? USTinstruments : USTDinstruments;\r\n        typeData.forEach((item) => {\r\n          const itemData = this.marketDataObj[item.symbol];\r\n          if (itemData) {\r\n            const showName = itemData.name.split('/')[0] || itemData.name;\r\n            const iconSvg = `<span>${showName}</span>`;\r\n            // const name = item.name;\r\n            marketDataList.push({\r\n              isShow: true,\r\n              id: item.symbol,\r\n              showName,\r\n              data: [\r\n                [\r\n                  {\r\n                    iconSvg: '',\r\n                    type: 'icon',\r\n                    eventType: 'store',\r\n                  },\r\n                  {\r\n                    iconSvg,\r\n                    type: 'icon',\r\n                    eventType: 'symbol',\r\n                    classes: 'symbolName',\r\n                    sortVal: itemData.sort,\r\n                    key: 'sort',\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.close.data,\r\n                    classes: ['fontSize14'],\r\n                    sortVal: itemData.closes,\r\n                    key: 'closes',\r\n                    subContent: {\r\n                      text: itemData.close.price !== '--' ? `≈ ${itemData.close.price}` : itemData.close.price,\r\n                      classes: ['b-2-cl'], // 默认没有\r\n                    },\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    type: 'label',\r\n                    text: itemData.rose.data,\r\n                    sortVal: itemData.roses,\r\n                    key: 'roses',\r\n                    classes: this.itemRoseClass(itemData.rose),\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.high,\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.low,\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.vol,\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.amount,\r\n                  },\r\n                ],\r\n              ],\r\n            });\r\n          }\r\n        });\r\n        this.marketDataList = marketDataList;\r\n      } else {\r\n        if (!this.symbolList) return;\r\n        const marketDataList = [];\r\n        const keyarr = Object.keys(this.symbolList);\r\n        keyarr.forEach((item) => {\r\n          if (this.symbolList[item].newcoinFlag) {\r\n            this.newcoinFlag = true;\r\n          }\r\n          const itemData = this.marketDataObj[item];\r\n          if (itemData) {\r\n            const showName = getCoinShowName(itemData.name, this.symbolAll);\r\n            const coinLabel = this.getCoinLabel(itemData.symbol.symbol, this.coinList);\r\n            let iconSvg = `<span>${showName}</span>`;\r\n            if (coinLabel && this.coinTagOpen) {\r\n              const str = `<div class=\"coin-label\">\r\n              <span class=\"coin-text a-12-cl\">${coinLabel}</span>\r\n              <span class=\"coin-bg a-12-bg\"></span>\r\n            </div>`;\r\n              iconSvg = `${iconSvg}${str}`;\r\n            }\r\n            marketDataList.push({\r\n              isShow: this.symbolList[item].isShow,\r\n              id: itemData.name,\r\n              showName,\r\n              data: [\r\n                [\r\n                  {\r\n                    iconSvg: this.myMarketIcon(itemData.name),\r\n                    type: 'icon',\r\n                    eventType: 'store',\r\n                  },\r\n                  {\r\n                    iconSvg,\r\n                    type: 'icon',\r\n                    eventType: 'symbol',\r\n                    classes: 'symbolName',\r\n                    sortVal: itemData.sort,\r\n                    key: 'sort',\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.close.data,\r\n                    classes: ['fontSize14'],\r\n                    sortVal: itemData.closes,\r\n                    key: 'closes',\r\n                    subContent: {\r\n                      text: itemData.close.price !== '--' ? `≈ ${itemData.close.price}` : itemData.close.price,\r\n                      classes: ['b-2-cl'], // 默认没有\r\n                    },\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    type: 'label',\r\n                    text: itemData.rose.data,\r\n                    sortVal: itemData.roses,\r\n                    key: 'roses',\r\n                    classes: this.itemRoseClass(itemData.rose),\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.high,\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.low,\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.vol,\r\n                  },\r\n                ],\r\n                [\r\n                  {\r\n                    text: itemData.amount,\r\n                  },\r\n                ],\r\n              ],\r\n            });\r\n          }\r\n        });\r\n        this.marketDataList = marketDataList.sort((a, b) => a.sort - b.sort);\r\n      }\r\n    },\r\n    // 设置币对是否收藏的ICON\r\n    myMarketIcon(symbol) {\r\n      if (this.mySymbolList.indexOf(symbol) === -1) {\r\n        return `<svg class=\"icon icon-16\" aria-hidden=\"true\">\r\n                <use xlink:href=\"#icon-c_11\">\r\n              </use></svg>`;\r\n      }\r\n      return `<svg class=\"icon icon-16\" aria-hidden=\"true\">\r\n                <use xlink:href=\"#icon-c_11_1\">\r\n              </use></svg>`;\r\n    },\r\n    // 获取 首页数据(公告、轮播图)\r\n    getLundata() {\r\n      const dataObj = {};\r\n      if (this.$route.query && this.$route.query.preview && this.$route.query.homeBoard) {\r\n        dataObj.preview = Number(this.$route.query.preview) > 1 ? 0\r\n          : Number(this.$route.query.preview);\r\n        dataObj.homeBoard = Number(this.$route.query.homeBoard);\r\n        // if (this.$route.query.homeBoard === '20200216') {\r\n        //   dataObj = {};\r\n        // }\r\n      }\r\n      this.axios({\r\n        url: this.$store.state.url.common.index_data,\r\n        headers: {},\r\n        params: dataObj,\r\n        method: 'post',\r\n      }).then((data) => {\r\n        if (data.code === '0') {\r\n          // 首页轮播图\r\n          const { cmsAdvertList, noticeInfoList } = data.data;\r\n          if (cmsAdvertList && cmsAdvertList.length) {\r\n            this.slideList = data.data.cmsAdvertList;\r\n          }\r\n          this.slideListTitle.title = data.data.index_international_title1 || '';\r\n          this.slideListTitle.subTitle = data.data.index_international_title2 || '';\r\n          // 首页公告\r\n          if (noticeInfoList && noticeInfoList.length) {\r\n            const arr = [];\r\n            let length = 18;\r\n            if (this.index_international_open === 1) {\r\n              length = 50;\r\n            }\r\n            noticeInfoList.forEach((item) => {\r\n              const space = item.title.length > length ? '...' : '';\r\n              arr.push({\r\n                noticeText: `${item.title.substr(0, length)}${space}`,\r\n                id: item.id,\r\n              });\r\n            });\r\n            this.noticeList = arr;\r\n          }\r\n          this.home_edit_html = data.data.footer_warm_prompt;\r\n        }\r\n        this.homeEditReady = true;\r\n      });\r\n    },\r\n    // 设置 自选币对\r\n    setMyMarket(symbol) {\r\n      let url = this.$store.state.url.common.optional_symbol;\r\n      if (this.optionalSymbolServerOpen === 1) {\r\n        url = this.$store.state.url.common.optional_symbols;\r\n      }\r\n      // 防止重复点击\r\n      if (!this.setMyMarketSwitch) return;\r\n      this.setMyMarketSwitch = false;\r\n\r\n      let mySymbol = myStorage.get('mySymbol') || [];\r\n      let addOrDelete = true;\r\n      if (mySymbol.length && mySymbol.indexOf(symbol) > -1) {\r\n        mySymbol = mySymbol.filter((item) => item !== symbol);\r\n        addOrDelete = false;\r\n      } else {\r\n        mySymbol.push(symbol);\r\n        addOrDelete = true;\r\n      }\r\n      if (this.optionalSymbolServerOpen === 1 && this.isLogin) {\r\n        this.axios({\r\n          url,\r\n          headers: {},\r\n          params: {\r\n            operationType: addOrDelete === true ? '1' : '2', // 0批量添加 1单个添加 2单个删除\r\n            symbols: symbol,\r\n          },\r\n          method: 'post',\r\n        }).then((data) => {\r\n          if (data.code === '0') {\r\n            this.setMyMarketSwitch = true;\r\n            this.mySymbolList = mySymbol;\r\n            myStorage.set('mySymbol', mySymbol);\r\n          } else {\r\n            this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n          }\r\n        });\r\n      } else {\r\n        this.setMyMarketSwitch = true;\r\n        this.mySymbolList = mySymbol;\r\n        myStorage.set('mySymbol', mySymbol);\r\n      }\r\n    },\r\n    // 24小时行情 涨跌幅 的背景、样色的class\r\n    itemRoseClass(rose) {\r\n      let bgClass = null;\r\n      if (rose.class === 'u-1-cl') {\r\n        bgClass = 'rose-label u-3-bg';\r\n      } else if (rose.class === 'u-4-cl') {\r\n        bgClass = 'rose-label u-6-bg';\r\n      }\r\n      return [rose.class, bgClass];\r\n    },\r\n    // 获取Kine历史数据\r\n    getKhistory() {\r\n      const endTime = new Date().getTime().toString().substr(0, 10);\r\n      const newTime = new Date(new Date().getTime() - 30 * 60 * 1000);\r\n      const startTime = newTime.getTime().toString().substr(0, 10);\r\n      this.coHeaderSymbol.forEach((item) => {\r\n        const url = `swap/kline?instrumentID=${item.instrument_id}&startTime=${startTime}&endTime=${endTime}&resolution=M&unit=1`;\r\n        this.axios({\r\n          url,\r\n          headers: {},\r\n          method: 'get',\r\n          hostType: 'fe-cov2-api',\r\n        }).then((data) => {\r\n          if (data.errno === 'OK') {\r\n            const kData = data.data;\r\n            this.klineDataList[item.symbol] = [];\r\n            const lengthNumber = kData ? kData.slice(-30) : [];\r\n            if (lengthNumber && lengthNumber.length) {\r\n              lengthNumber.forEach((ele) => {\r\n                this.klineDataList[item.symbol].push([\r\n                  ele.timestamp,\r\n                  ele.close,\r\n                ]);\r\n              });\r\n            }\r\n            this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\r\n          }\r\n        });\r\n      });\r\n    },\r\n  },\r\n  destroyed() {\r\n    this.$bus.$off('SWITCH-STORE');\r\n    this.$bus.$off('SWITCH-MARKET');\r\n  },\r\n  beforeDestroy() {\r\n    this.webSocketSend('Market', 'unsub', this.symbolCurrent, this.symbolList);\r\n    window.onscroll = null;\r\n  },\r\n};\r\n"]}]}