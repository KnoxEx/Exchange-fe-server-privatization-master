{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/home/recommend/recommend.js","dependencies":[{"path":"/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/home/recommend/recommend.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _toConsumableArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { myStorage, colorMap } from '@/utils';\nexport default {\n  name: 'recommend',\n  data: function data() {\n    return {\n      // 滚动组件配置\n      ops: {\n        scrollPanel: {\n          speed: 400,\n          easing: 'easeOutQuad'\n        },\n        bar: {\n          size: 0\n        },\n        rail: {\n          size: 0\n        }\n      },\n      clientWidths: 0,\n      process: 0,\n      dataList: {},\n      klineDataList: {},\n      isScroll: false,\n      // true滚动 false剧中\n      scrollRG: 0,\n      // 滚动距离\n      timer: null,\n      liItemWidth: 310,\n      coHeaderSymbol: []\n    };\n  },\n  computed: {\n    isCoOpen: function isCoOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\n        return true;\n      }\n\n      return false;\n    },\n    coinTagLangs: function coinTagLangs() {\n      return this.$store.state.baseData.coinTagLangs;\n    },\n    coinTagOpen: function coinTagOpen() {\n      return this.$store.state.baseData.coin_tag_open;\n    },\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 全部币种列表\n    coinList: function coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    ulStyle: function ulStyle() {\n      var obj = {\n        width: \"\".concat(this.boxWidth, \"px\")\n      };\n\n      if (this.isScroll) {\n        obj.marginLeft = \"\".concat(-1 * this.scrollRG, \"px\");\n      }\n\n      return obj;\n    },\n    itemWidth: function itemWidth() {\n      return this.isCoOpen ? this.coHeaderSymbol.length * 300 - 20 : this.headerSymbol.length * 300 - 20;\n    },\n    headerSymbol: function headerSymbol() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.headerSymbol;\n      }\n\n      return [];\n    },\n    boxWidth: function boxWidth() {\n      return this.evenDatas.length * this.liItemWidth;\n    },\n    evenDatas: function evenDatas() {\n      var _this = this;\n\n      var arr = [];\n\n      if (!this.isCoOpen) {\n        if (this.headerSymbol.length) {\n          this.headerSymbol.forEach(function (item) {\n            var obj = {\n              symbol: item,\n              // 币对\n              price: '--',\n              // 价格\n              volume: '--',\n              // 24H vol\n              roseVal: '--',\n              // 涨跌幅\n              roseCls: '' // 涨跌幅颜色\n\n            };\n\n            if (_this.dataList[item]) {\n              var data = _this.dataList[item];\n              obj.price = data.close ? data.close.data : '--';\n              obj.volume = data.vol;\n              obj.roseVal = data.rose ? data.rose.data : '--';\n              obj.roseCls = data.rose ? data.rose.class : '--';\n              obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\n              obj.coinLabel = data.symbol ? _this.getCoinLabel(data.symbol.symbol, _this.coinList) : '';\n            }\n\n            arr.push(obj);\n          });\n\n          if (this.isScroll) {\n            for (var i = 0; i < this.headerSymbol.length; i += 1) {\n              arr.push(arr[i]);\n            }\n          }\n        }\n      } else if (this.coHeaderSymbol.length) {\n        this.coHeaderSymbol.forEach(function (item) {\n          var obj = {\n            symbol: item.symbol,\n            // 币对\n            price: '--',\n            // 价格\n            volume: '--',\n            // 24H vol\n            roseVal: '--',\n            // 涨跌幅\n            roseCls: '' // 涨跌幅颜色\n\n          };\n\n          if (_this.dataList[item.symbol]) {\n            var data = _this.dataList[item.symbol];\n            obj.price = data.close ? data.close.data : '--';\n            obj.volume = data.vol;\n            obj.roseVal = data.rose ? data.rose.data : '--';\n            obj.roseCls = data.rose ? data.rose.class : '--';\n            obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\n            obj.coinLabel = '';\n          }\n\n          arr.push(obj);\n        });\n\n        if (this.isScroll) {\n          for (var _i = 0; _i < this.coHeaderSymbol.length; _i += 1) {\n            arr.push(arr[_i]);\n          }\n        }\n      }\n\n      return arr;\n    },\n    linkurl: function linkurl() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.url;\n      }\n\n      return {};\n    }\n  },\n  watch: {\n    isScroll: function isScroll(v) {\n      if (v) {\n        this.scrollRG = 0;\n        this.start();\n      } else {\n        this.scrollRG = 0;\n        clearInterval(this.timer);\n      }\n    },\n    clientWidths: function clientWidths(v) {\n      if (v) {\n        var by = this.headerSymbol.length * this.liItemWidth; // 剧中\n\n        if (by <= v) {\n          this.isScroll = false; // 滚动\n        } else {\n          this.isScroll = true;\n        }\n      }\n    }\n  },\n  destroyed: function destroyed() {\n    this.$bus.$off('WINFOW_ON_RESIIZE');\n    this.$bus.$off('RECOMMEEND_DATA');\n    this.$bus.$off('RECOMMEEND_KLINE_DATA');\n    this.$bus.$off('COHEADER_SYMBOL');\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  methods: {\n    getCoinLabel: function getCoinLabel(name) {\n      var coinList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (coinList && coinList[name.toUpperCase()]) {\n        var _coinList$name$toUppe = coinList[name.toUpperCase()].coinTag,\n            coinTag = _coinList$name$toUppe === void 0 ? '' : _coinList$name$toUppe;\n        return coinTag ? this.coinTagLangs[coinTag] : '';\n      }\n\n      return '';\n    },\n    init: function init() {\n      var _this2 = this;\n\n      this.clientWidths = document.body.clientWidth;\n      this.$bus.$on('WINFOW_ON_RESIIZE', function () {\n        _this2.clientWidths = document.body.clientWidth;\n      }); // 监听 数据\n\n      this.$bus.$on('RECOMMEEND_DATA', function (data) {\n        var keys = Object.keys(data);\n        keys.forEach(function (item) {\n          var coinLabel = '';\n\n          if (_this2.isCoOpen) {\n            coinLabel = '';\n          } else {\n            coinLabel = data[item] && data[item].symbol ? _this2.getCoinLabel(data[item].symbol.symbol, _this2.coinList) : '';\n          }\n\n          _this2.$set(_this2.dataList, item, _objectSpread(_objectSpread(_objectSpread({}, {}), data[item]), {\n            coinLabel: coinLabel\n          }));\n        });\n      });\n      this.$bus.$on('RECOMMEEND_KLINE_DATA', function (data) {\n        var keys = Object.keys(data);\n        keys.forEach(function (item) {\n          _this2.$set(_this2.klineDataList, item, data[item]);\n        });\n      });\n      this.$bus.$on('COHEADER_SYMBOL', function (data) {\n        _this2.coHeaderSymbol = _toConsumableArray(data);\n      });\n    },\n    symbolIcon: function symbolIcon(data) {\n      var coin = data.symbol.split('/')[0];\n      var iconImg = this.coinList[coin] ? this.coinList[coin].icon : '';\n      return iconImg;\n    },\n    enter: function enter() {\n      clearInterval(this.timer);\n    },\n    leave: function leave() {\n      this.start();\n    },\n    start: function start() {\n      var _this3 = this;\n\n      clearInterval(this.timer);\n      this.timer = setInterval(function () {\n        var sum = _this3.evenDatas.length * _this3.liItemWidth - _this3.clientWidths;\n        _this3.scrollRG += 1;\n\n        if (_this3.scrollRG > sum) {\n          // this.scrollRG = sum % this.liItemWidth\n          _this3.scrollRG = _this3.headerSymbol.length * _this3.liItemWidth - _this3.clientWidths;\n        }\n      }, 50);\n    },\n    handleScroll: function handleScroll(vertical, horizontal) {\n      this.process = horizontal.process;\n    },\n    scrollRecommend: function scrollRecommend(type) {\n      var num = this.clientWidths / 2;\n\n      if (type === 'prev') {\n        num = -num;\n      }\n\n      this.$refs.vs.scrollBy({\n        dx: num\n      });\n    },\n    bandLink: function bandLink(data) {\n      if (data && !this.isCoOpen) {\n        myStorage.set('sSymbolName', data);\n        myStorage.set('markTitle', data.split('/')[1]);\n      }\n\n      if (!this.isCoOpen) {\n        this.$router.push('/trade');\n      } else {\n        var coUrl = this.linkurl.coUrl ? \"\".concat(this.linkurl.coUrl, \"/trade/\").concat(data) : '';\n        window.location.href = coUrl;\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/home/recommend/recommend.js"],"names":["myStorage","colorMap","name","data","ops","scrollPanel","speed","easing","bar","size","rail","clientWidths","process","dataList","klineDataList","isScroll","scrollRG","timer","liItemWidth","coHeaderSymbol","computed","isCoOpen","base","$store","state","baseData","publicInfo","switch","indep_co_switch","coinTagLangs","coinTagOpen","coin_tag_open","symbolAll","coinList","market","ulStyle","obj","width","boxWidth","marginLeft","itemWidth","length","headerSymbol","evenDatas","arr","forEach","item","symbol","price","volume","roseVal","roseCls","close","vol","rose","class","klineColor","coinLabel","getCoinLabel","push","i","linkurl","url","watch","v","start","clearInterval","by","destroyed","$bus","$off","beforeDestroy","methods","toUpperCase","coinTag","init","document","body","clientWidth","$on","keys","Object","$set","symbolIcon","coin","split","iconImg","icon","enter","leave","setInterval","sum","handleScroll","vertical","horizontal","scrollRecommend","type","num","$refs","vs","scrollBy","dx","bandLink","set","$router","coUrl","window","location","href"],"mappings":"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","sourcesContent":["import { myStorage, colorMap } from '@/utils';\r\n\r\nexport default {\r\n  name: 'recommend',\r\n  data() {\r\n    return {\r\n      // 滚动组件配置\r\n      ops: {\r\n        scrollPanel: {\r\n          speed: 400,\r\n          easing: 'easeOutQuad',\r\n        },\r\n        bar: {\r\n          size: 0,\r\n        },\r\n        rail: {\r\n          size: 0,\r\n        },\r\n      },\r\n      clientWidths: 0,\r\n      process: 0,\r\n      dataList: {},\r\n      klineDataList: {},\r\n      isScroll: false, // true滚动 false剧中\r\n      scrollRG: 0, // 滚动距离\r\n      timer: null,\r\n      liItemWidth: 310,\r\n      coHeaderSymbol: [],\r\n    };\r\n  },\r\n  computed: {\r\n    isCoOpen() {\r\n      const base = this.$store.state.baseData.publicInfo;\r\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    coinTagLangs() {\r\n      return this.$store.state.baseData.coinTagLangs;\r\n    },\r\n    coinTagOpen() {\r\n      return this.$store.state.baseData.coin_tag_open;\r\n    },\r\n    symbolAll() {\r\n      return this.$store.state.baseData.symbolAll;\r\n    },\r\n    // 全部币种列表\r\n    coinList() {\r\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\r\n        return this.$store.state.baseData.market.coinList;\r\n      }\r\n      return null;\r\n    },\r\n    ulStyle() {\r\n      const obj = {\r\n        width: `${this.boxWidth}px`,\r\n      };\r\n      if (this.isScroll) {\r\n        obj.marginLeft = `${-1 * this.scrollRG}px`;\r\n      }\r\n      return obj;\r\n    },\r\n    itemWidth() {\r\n      return this.isCoOpen\r\n        ? this.coHeaderSymbol.length * 300 - 20 : this.headerSymbol.length * 300 - 20;\r\n    },\r\n    headerSymbol() {\r\n      if (this.$store.state.baseData.market) {\r\n        return this.$store.state.baseData.market.headerSymbol;\r\n      }\r\n      return [];\r\n    },\r\n    boxWidth() {\r\n      return this.evenDatas.length * this.liItemWidth;\r\n    },\r\n    evenDatas() {\r\n      const arr = [];\r\n      if (!this.isCoOpen) {\r\n        if (this.headerSymbol.length) {\r\n          this.headerSymbol.forEach((item) => {\r\n            const obj = {\r\n              symbol: item, // 币对\r\n              price: '--', // 价格\r\n              volume: '--', // 24H vol\r\n              roseVal: '--', // 涨跌幅\r\n              roseCls: '', // 涨跌幅颜色\r\n            };\r\n            if (this.dataList[item]) {\r\n              const data = this.dataList[item];\r\n              obj.price = data.close ? data.close.data : '--';\r\n              obj.volume = data.vol;\r\n              obj.roseVal = data.rose ? data.rose.data : '--';\r\n              obj.roseCls = data.rose ? data.rose.class : '--';\r\n              obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\r\n              obj.coinLabel = data.symbol ? this.getCoinLabel(data.symbol.symbol, this.coinList) : '';\r\n            }\r\n            arr.push(obj);\r\n          });\r\n          if (this.isScroll) {\r\n            for (let i = 0; i < this.headerSymbol.length; i += 1) {\r\n              arr.push(arr[i]);\r\n            }\r\n          }\r\n        }\r\n      } else if (this.coHeaderSymbol.length) {\r\n        this.coHeaderSymbol.forEach((item) => {\r\n          const obj = {\r\n            symbol: item.symbol, // 币对\r\n            price: '--', // 价格\r\n            volume: '--', // 24H vol\r\n            roseVal: '--', // 涨跌幅\r\n            roseCls: '', // 涨跌幅颜色\r\n          };\r\n          if (this.dataList[item.symbol]) {\r\n            const data = this.dataList[item.symbol];\r\n            obj.price = data.close ? data.close.data : '--';\r\n            obj.volume = data.vol;\r\n            obj.roseVal = data.rose ? data.rose.data : '--';\r\n            obj.roseCls = data.rose ? data.rose.class : '--';\r\n            obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\r\n            obj.coinLabel = '';\r\n          }\r\n          arr.push(obj);\r\n        });\r\n        if (this.isScroll) {\r\n          for (let i = 0; i < this.coHeaderSymbol.length; i += 1) {\r\n            arr.push(arr[i]);\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr;\r\n    },\r\n    linkurl() {\r\n      if (this.$store.state.baseData.publicInfo) {\r\n        return this.$store.state.baseData.publicInfo.url;\r\n      }\r\n      return {};\r\n    },\r\n  },\r\n  watch: {\r\n    isScroll(v) {\r\n      if (v) {\r\n        this.scrollRG = 0;\r\n        this.start();\r\n      } else {\r\n        this.scrollRG = 0;\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n    clientWidths(v) {\r\n      if (v) {\r\n        const by = this.headerSymbol.length * this.liItemWidth;\r\n        // 剧中\r\n        if (by <= v) {\r\n          this.isScroll = false;\r\n        // 滚动\r\n        } else {\r\n          this.isScroll = true;\r\n        }\r\n      }\r\n    },\r\n  },\r\n  destroyed() {\r\n    this.$bus.$off('WINFOW_ON_RESIIZE');\r\n    this.$bus.$off('RECOMMEEND_DATA');\r\n    this.$bus.$off('RECOMMEEND_KLINE_DATA');\r\n    this.$bus.$off('COHEADER_SYMBOL');\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    getCoinLabel(name, coinList = {}) {\r\n      if (coinList && coinList[name.toUpperCase()]) {\r\n        const { coinTag = '' } = coinList[name.toUpperCase()];\r\n        return coinTag ? this.coinTagLangs[coinTag] : '';\r\n      }\r\n\r\n      return '';\r\n    },\r\n    init() {\r\n      this.clientWidths = document.body.clientWidth;\r\n      this.$bus.$on('WINFOW_ON_RESIIZE', () => {\r\n        this.clientWidths = document.body.clientWidth;\r\n      });\r\n      // 监听 数据\r\n      this.$bus.$on('RECOMMEEND_DATA', (data) => {\r\n        const keys = Object.keys(data);\r\n        keys.forEach((item) => {\r\n          let coinLabel = '';\r\n          if (this.isCoOpen) {\r\n            coinLabel = '';\r\n          } else {\r\n            coinLabel = (data[item] && data[item].symbol)\r\n              ? this.getCoinLabel(data[item].symbol.symbol, this.coinList)\r\n              : '';\r\n          }\r\n          this.$set(this.dataList, item,\r\n            { ...{}, ...data[item], ...{ coinLabel } });\r\n        });\r\n      });\r\n      this.$bus.$on('RECOMMEEND_KLINE_DATA', (data) => {\r\n        const keys = Object.keys(data);\r\n        keys.forEach((item) => {\r\n          this.$set(this.klineDataList, item, data[item]);\r\n        });\r\n      });\r\n      this.$bus.$on('COHEADER_SYMBOL', (data) => {\r\n        this.coHeaderSymbol = [...data];\r\n      });\r\n    },\r\n    symbolIcon(data) {\r\n      const coin = data.symbol.split('/')[0];\r\n      const iconImg = this.coinList[coin] ? this.coinList[coin].icon : '';\r\n      return iconImg;\r\n    },\r\n    enter() {\r\n      clearInterval(this.timer);\r\n    },\r\n    leave() {\r\n      this.start();\r\n    },\r\n    start() {\r\n      clearInterval(this.timer);\r\n      this.timer = setInterval(() => {\r\n        const sum = this.evenDatas.length * this.liItemWidth - this.clientWidths;\r\n        this.scrollRG += 1;\r\n        if (this.scrollRG > sum) {\r\n          // this.scrollRG = sum % this.liItemWidth\r\n          this.scrollRG = this.headerSymbol.length * this.liItemWidth - this.clientWidths;\r\n        }\r\n      }, 50);\r\n    },\r\n    handleScroll(vertical, horizontal) {\r\n      this.process = horizontal.process;\r\n    },\r\n    scrollRecommend(type) {\r\n      let num = this.clientWidths / 2;\r\n      if (type === 'prev') {\r\n        num = -num;\r\n      }\r\n      this.$refs.vs.scrollBy({\r\n        dx: num,\r\n      });\r\n    },\r\n    bandLink(data) {\r\n      if (data && !this.isCoOpen) {\r\n        myStorage.set('sSymbolName', data);\r\n        myStorage.set('markTitle', data.split('/')[1]);\r\n      }\r\n      if (!this.isCoOpen) {\r\n        this.$router.push('/trade');\r\n      } else {\r\n        const coUrl = this.linkurl.coUrl ? `${this.linkurl.coUrl}/trade/${data}` : '';\r\n        window.location.href = coUrl;\r\n      }\r\n    },\r\n  },\r\n\r\n};\r\n"]}]}