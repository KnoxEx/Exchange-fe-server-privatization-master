{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/innovations/innovations.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/innovations/innovations.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, formatTime, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-flowingWater',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      type: 'all',\n      // 当前类型\n      symbol: '',\n      // 当前币种\n      tabelList: [],\n      // table数据列表\n      symbolList: [],\n      // 币种选择列表\n      investSymbol: null,\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      }\n    };\n  },\n  computed: {\n    // 全部币种列表\n    coinList: function coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    statusList: function statusList() {\n      return [this.$t('innov.have'), // 进行中\n      this.$t('innov.financing'), // 募集成功\n      this.$t('innov.end') // 募集结束\n      ];\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [{\n        title: this.$t('innov.purchase_time'),\n        // '申购时间',\n        width: '100px'\n      }, {\n        title: this.$t('innov.purchase'),\n        // '申购订单编号',\n        width: '200px'\n      }, {\n        title: this.$t('innov.entry') // '项目名称',\n\n      }, {\n        title: this.$t('innov.purchase_amount'),\n        // '申购金额',\n        width: '150px'\n      }, {\n        title: this.$t('innov.obtain_token'),\n        // '获得代币',\n        width: '100px'\n      }, {\n        title: this.$t('innov.state'),\n        // '状态',\n        width: '100px'\n      }, {\n        title: this.$t('innov.operation'),\n        // '操作',\n        width: '100px'\n      }];\n      return list;\n    },\n    // 用于axios的symbol\n    axiosSymbol: function axiosSymbol() {\n      if (this.symbol === 'all') {\n        return null;\n      }\n\n      return this.symbol;\n    },\n    // 用于axios的type\n    axiosType: function axiosType() {\n      if (this.type === 'all') {\n        return null;\n      }\n\n      return this.type;\n    }\n  },\n  watch: {\n    market: function market(v) {\n      if (v) {\n        this.setData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.market) {\n        this.setData();\n      }\n    },\n    setData: function setData() {\n      var _this = this;\n\n      var list = [{\n        code: 'all',\n        value: this.$t('assets.otcFlowingWater.allCoin')\n      }];\n      Object.keys(this.market.coinList).forEach(function (item) {\n        if (_this.market.coinList[item].otcOpen === 1) {\n          list.push({\n            code: item,\n            value: item\n          });\n        }\n      });\n      this.symbolList = list;\n      this.symbol = 'all';\n      this.getData();\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      this.axios({\n        url: '/newcoin/invest_manage_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage // 页码\n\n        }\n      }).then(function (data) {\n        _this2.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n\n          if (data.data.record.length) {\n            data.data.record.forEach(function (item) {\n              _this2.investSymbol = item.investSymbol;\n              var coinList = _this2.market.coinList;\n              var investFix = coinList[item.investSymbol] ? coinList[item.investSymbol].showPrecision : 0;\n              var tokenFix = coinList[item.tokenSymbol] ? coinList[item.tokenSymbol].showPrecision : 0;\n              list.push({\n                id: item.projectId,\n                data: [formatTime(item.orderTime), // 时间\n                item.orderId, // 订单编号\n                item.name, // 项目名称\n                \"\".concat(fixD(item.investAmount, investFix), \"\\n                    \").concat(getCoinShowName(item.investSymbol, coinList)), // 申购金额\n                \"\".concat(fixD(item.tokenAmount, tokenFix), \"\\n                    \").concat(getCoinShowName(item.tokenSymbol, coinList)), // 获得代币数量\n                // this.statusList[item.status - 2], // 状态\n                _this2.setStatusText(item), [{\n                  type: 'button',\n                  text: _this2.$t('innov.view_details'),\n                  iconClass: [''],\n                  eventType: 'view',\n                  classes: _this2.classesVieew(item)\n                }]]\n              });\n            });\n            _this2.tabelList = list;\n            _this2.paginationObj.total = data.data.count;\n          }\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getData();\n    },\n    goViewPage: function goViewPage(type, data) {\n      this.$router.push(\"/innovation/\".concat(data));\n    },\n    classesVieew: function classesVieew(item) {\n      if (item.status === 7) {\n        return 'noshow';\n      }\n\n      return [];\n    },\n    setStatusText: function setStatusText(data) {\n      var text = '';\n\n      switch (data.status) {\n        case 2:\n          text = this.$t('innov.status1'); // '预热中';\n\n          break;\n\n        case 3:\n          text = this.$t('innov.status2'); // '进行中';\n\n          break;\n\n        case 4:\n          text = this.$t('innov.status3'); // '募集完成';\n\n          break;\n\n        case 5:\n          text = this.$t('innov.status4'); // '发放TOKEN';\n\n          break;\n\n        default:\n          text = this.$t('innov.status5');\n        // '退还申购基金';\n      }\n\n      return text;\n    }\n  }\n};",null]}