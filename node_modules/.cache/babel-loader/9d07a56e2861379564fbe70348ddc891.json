{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/locale/index.js","dependencies":[{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/locale/index.js","mtime":1641912372000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.match\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Vue from 'vue';\nimport VueI18n from 'vue-i18n';\nimport axios from '@/api/http/axios';\nimport { myStorage, getComplexType, getLocationLang } from '@/utils';\nimport localesMap from \"./filesMap.json\";\nimport defLan from \"./default\";\nVue.use(VueI18n);\nvar urlLang = '';\n\nif (window.publicInfo && window.publicInfo.lan.lanList) {\n  urlLang = getLocationLang();\n  var result = window.publicInfo.lan.lanList.some(function (el) {\n    return el.id === urlLang;\n  });\n  if (!result) urlLang = '';\n}\n\nvar lang = window.location.href.match(/[a-z]+_[A-Z]+/) && window.location.href.match(/[a-z]+_[A-Z]+/)[0];\nvar langKey = localesMap[lang];\nvar messages = {\n  def_Lan: _objectSpread({}, defLan)\n};\nexport var i18n = new VueI18n({\n  locale: 'def_Lan',\n  messages: messages,\n  missing: function missing() {\n    return '';\n  }\n});\n\nfunction loadLocaleMessage(locale, cb) {\n  var localeCache = myStorage.get('locale') || {};\n  var localeJson = localeCache[langKey];\n\n  if (localeJson) {\n    cb(null, localeJson);\n  } else {\n    axios({\n      url: \"/static/locales/\".concat(localesMap[lang]),\n      method: 'get',\n      hostType: 'def'\n    }).then(function (res) {\n      cb(null, res);\n    }).catch(function (error) {\n      cb(error);\n    });\n  }\n}\n\nexport function changeLanguage(lan, change) {\n  var localeCache = myStorage.get('locale') || {};\n  loadLocaleMessage(lan, function (error, message) {\n    if (error) {}\n\n    if (getComplexType(message) !== 'Object') return;\n    i18n.locale = lan;\n    i18n.setLocaleMessage(lan, message);\n    var keys = Object.keys(localeCache);\n    keys.forEach(function (item) {\n      if (item.indexOf(lan) > -1 && !change) {\n        delete localeCache[item];\n      }\n    });\n    localeCache[langKey] = message;\n    myStorage.set('locale', localeCache);\n\n    if (change) {\n      var locationLang = getLocationLang();\n\n      if (locationLang) {\n        window.location.href = window.location.href.replace(locationLang, lan);\n      } else {\n        window.location.reload();\n      }\n    }\n  });\n}\nchangeLanguage(lang);",null]}