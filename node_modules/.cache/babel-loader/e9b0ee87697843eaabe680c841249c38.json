{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/home/home.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/home/home.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _slicedToArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _toConsumableArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { mapState } from 'vuex';\nimport { myStorage, imgMap, colorMap, getCoinShowName } from '@/utils';\nimport _worker from '@/utils/webWorker';\nexport default {\n  data: function data() {\n    return {\n      krwCheck: false,\n      // krw 弹窗下次不再提示\n      krwFlag: false,\n      // krw 弹窗\n      krwBg: \"background: url(\".concat(imgMap.krwhomebg, \")\"),\n      // 首页轮播图的 宽和高\n      styles: {\n        width: '100%',\n        height: '580px',\n        backgroundColor: colorMap['c-3-bg']\n      },\n      stylesHeight: '580',\n      // 市场数据\n      marketData: null,\n      // MywebSocket\n      MywebSocket: null,\n      // 当前市场\n      marketCurrent: null,\n      // 当前币对\n      symbolCurrent: null,\n      // 当前币对列表\n      symbolCurrentList: [],\n      // 筛选 货币对\n      listfilter: null,\n      // 表格加载LOADING\n      tableLoading: false,\n      // 表格 超过 20条出现滚动条\n      lineNumber: 20,\n      // 首页 轮播图\n      slideList: [],\n      // 首页 轮播图-文案\n      slideListTitle: {\n        title: '',\n        subTitle: ''\n      },\n      // 首页 公告数据\n      noticeList: [],\n      // 24小时行情WS数据\n      marketDataObj: [],\n      marketDataList: [],\n      // 推荐位数据\n      recommendDataList: {},\n      klineDataList: {},\n      // 自选币对\n      mySymbolList: myStorage.get('mySymbol') || [],\n      setMyMarketSwitch: true,\n      // class\n      photoAppShow: false,\n      productShow: false,\n      homeEditReady: false,\n      home_edit_html: '',\n      moreButtonImg1: \"background: url(\".concat(imgMap.ggicon, \")\"),\n      moreButtonImg2: \"background: url(\".concat(imgMap.ggicon_h, \")\"),\n      moreButtonImg3: \"background: url(\".concat(imgMap.om_gg, \")\"),\n      registerInfo: '',\n      instruments: [],\n      // 合约列表\n      tabType: 'USD',\n      coHeaderSymbol: []\n    };\n  },\n  computed: _objectSpread(_objectSpread({\n    coinTagLangs: function coinTagLangs() {\n      return this.$store.state.baseData.coinTagLangs;\n    },\n    coinTagOpen: function coinTagOpen() {\n      return this.$store.state.baseData.coin_tag_open;\n    },\n    optionalSymbolServerOpen: function optionalSymbolServerOpen() {\n      return this.$store.state.baseData.optional_symbol_server_open;\n    },\n    appDownload: function appDownload() {\n      return this.$store.state.baseData.app_download;\n    },\n    index_international_open: function index_international_open() {\n      return this.$store.state.baseData.index_international_open;\n    },\n    storeKrwFlag: function storeKrwFlag() {\n      return this.$store.state.baseData.krwFlag;\n    },\n    coinsKrwOpen: function coinsKrwOpen() {\n      return this.$store.state.baseData.index_layer_open;\n    }\n  }, mapState({\n    baseInfo: function baseInfo(_ref) {\n      var baseData = _ref.baseData;\n      this.marketData = baseData.market; // 获取当前市场\n\n      this.marketCurrent = myStorage.get('homeMarkTitle'); // 获取当前币对\n\n      this.symbolCurrent = myStorage.get('sSymbolName');\n      return baseData;\n    }\n  })), {}, {\n    imgClass: function imgClass() {\n      var style = {\n        bgIcon: {\n          backgroundImage: \"url(\".concat(imgMap.home_edit_icon, \")\")\n        },\n        bgImg: {\n          background: \"url(\".concat(imgMap.home_edit_bg, \") 0 bottom repeat-x #0E1A2E\")\n        },\n        homeEditImga: {\n          backgroundImage: \"url(\".concat(imgMap.home_edit_imga, \")\")\n        },\n        homeEditImgb: {\n          backgroundImage: \"url(\".concat(imgMap.home_edit_imgb, \")\")\n        }\n      };\n      return style;\n    },\n    // 推荐位 币对\n    headerSymbol: function headerSymbol() {\n      if (this.marketData) {\n        return this.marketData.headerSymbol;\n      }\n\n      return [];\n    },\n    // 全部 货币对\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 当前市场列表\n    currentMarketList: function currentMarketList() {\n      return this.marketData ? this.marketData.market : null;\n    },\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    // 当前币对列表\n    symbolList: function symbolList() {\n      var _this = this;\n\n      // 如果 当前市场 是 自选市场\n      if (this.marketCurrent === 'myMarket') {\n        var mySymbol = myStorage.get('mySymbol') || [];\n        var marketList = {};\n\n        if (mySymbol.length) {\n          mySymbol.forEach(function (item) {\n            if (item && _this.symbolAll[item]) {\n              marketList[item] = _this.symbolAll[item];\n            }\n          });\n        }\n\n        return marketList;\n      }\n\n      if (this.currentMarketList && this.marketCurrent) {\n        return this.currentMarketList[this.marketCurrent];\n      }\n\n      return null;\n    },\n    // WS worker\n    worker: function worker() {\n      return _worker();\n    },\n    // 汇率单位\n    rateData: function rateData() {\n      return this.$store.state.baseData.rate;\n    },\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    isCoOpen: function isCoOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\n        return true;\n      }\n\n      return false;\n    }\n  }),\n  watch: {\n    coinsKrwOpen: function coinsKrwOpen(v) {\n      if (v === 1 && this.storeKrwFlag) {\n        if (!localStorage.krwCheck) {\n          this.krwFlag = true;\n        }\n      }\n    },\n    symbolList: function symbolList(val, oldVal) {\n      var _this2 = this;\n\n      if (oldVal) {\n        var oldValKey = Object.keys(oldVal);\n        var objData = {};\n        oldValKey.forEach(function (item) {\n          if (_this2.headerSymbol.indexOf(item) < 0 && oldVal[item]) {\n            objData[item] = oldVal[item];\n          }\n        });\n        this.webSocketSend('Market', 'unsub', this.symbolCurrent, objData);\n        this.webSocketSend('Market', 'sub', this.symbolCurrent, val);\n      }\n    },\n    // 监听 是否登录\n    isLogin: function isLogin(val) {\n      if (val) {\n        this.mySymbolList = myStorage.get('mySymbol') || [];\n      }\n    },\n    // 监听获取到 market 接口的数据\n    marketData: function marketData(val) {\n      if (val.wsUrl && !this.isCoOpen) {\n        var exParmas = {\n          type: 'CREAT_WEBSOCKET',\n          data: {\n            wsUrl: val.wsUrl,\n            lan: this.$store.state.baseData.lan,\n            rate: this.rateData,\n            symbolAll: this.symbolAll\n          }\n        }; // 创建WS\n\n        this.worker.postMessage(exParmas);\n      }\n    },\n    instruments: function instruments(val) {\n      if (val && this.marketData && this.marketData.wsUrl) {\n        // 创建WS\n        this.worker.postMessage({\n          type: 'CREAT_CO_WEBSOCKET',\n          data: {\n            wsUrl: this.marketData.wsUrl,\n            // wsUrl: 'wss://ws3.dcmex.com/wsswap/realTime',\n            lan: this.$store.state.baseData.lan,\n            rate: this.rateData,\n            symbolAll: this.instruments\n          }\n        });\n      }\n    },\n    // 监听 webSocket 创建成功\n    MywebSocket: function MywebSocket(val) {\n      var _this3 = this;\n\n      if (val) {\n        if (this.isCoOpen) {\n          // 发送 数据 Send\n          var arr = ['OrderBook:2', 'QuoteBin5m:2'];\n          this.webSocketCoSend('CoReview', null, this.tabType, arr); // 发送kline实时数据合约\n\n          if (this.coHeaderSymbol.length) {\n            var args = [];\n            this.coHeaderSymbol.forEach(function (item) {\n              args.push(\"QuoteBin30m:\".concat(item.instrument_id));\n            });\n            this.worker.postMessage({\n              type: 'WEBSOCKET_KLINE_CO_SEND',\n              data: {\n                args: args\n              }\n            });\n          }\n        } else {\n          var symbolListKey = Object.keys(this.symbolList);\n          var objData = {};\n          symbolListKey.forEach(function (item) {\n            objData[item] = _this3.symbolList[item];\n          });\n          this.headerSymbol.forEach(function (item) {\n            if (symbolListKey.indexOf(item) < 0 && _this3.symbolAll[item]) {\n              objData[item] = _this3.symbolAll[item];\n            }\n          }); // 发送 24小时行情历史数据 Send\n\n          this.webSocketSend('Review', null, this.symbolCurrent, this.symbolAll); // 发送 24小时行情实时数据 Send\n\n          this.webSocketSend('Market', 'sub', this.symbolCurrent, objData); // 发送 推荐位 kline数据 Send\n\n          if (this.headerSymbol.length) {\n            this.headerSymbol.forEach(function (item) {\n              var symbolArr = item.toLowerCase().split('/');\n              var symbol = symbolArr[0] + symbolArr[1];\n\n              _this3.worker.postMessage({\n                type: 'WEBSOCKET_KLINE_SEND',\n                data: {\n                  symbol: symbol,\n                  type: 'req',\n                  lastTimeS: '1min',\n                  lTime: false,\n                  number: 100,\n                  symbolCurrent: item\n                }\n              });\n\n              _this3.worker.postMessage({\n                type: 'WEBSOCKET_KLINE_SEND',\n                data: {\n                  symbol: symbol,\n                  type: 'sub',\n                  lastTimeS: '1min',\n                  lTime: false,\n                  symbolCurrent: item\n                }\n              });\n            });\n          }\n        }\n      }\n    }\n  },\n  methods: {\n    getCoMarketData: function getCoMarketData() {\n      var _this4 = this;\n\n      this.axios({\n        url: 'swap/instruments',\n        headers: {},\n        method: 'get',\n        hostType: 'fe-cov2-api'\n      }).then(function (data) {\n        if (data.errno === 'OK') {\n          _this4.instruments = _toConsumableArray(data.data.instruments);\n\n          _this4.instruments.forEach(function (item) {\n            if (item.quote_coin === 'USDT') {\n              _this4.$bus.$emit('COMARGET_SWITCH', 'USDT');\n            }\n\n            if (item.quote_coin === 'USD') {\n              _this4.$bus.$emit('COMARGET_SWITCH', 'USD');\n            }\n          });\n\n          if (_this4.instruments.length >= 6) {\n            _this4.coHeaderSymbol = _toConsumableArray(_this4.instruments.slice(0, 6));\n          } else {\n            _this4.coHeaderSymbol = _toConsumableArray(_this4.instruments);\n          }\n\n          _this4.$bus.$emit('COHEADER_SYMBOL', _this4.coHeaderSymbol); // 获取Kline历史数据\n\n\n          _this4.getKhistory();\n        }\n      });\n    },\n    getCoinLabel: function getCoinLabel(name) {\n      var coinList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (coinList && coinList[name.toUpperCase()]) {\n        var _coinList$name$toUppe = coinList[name.toUpperCase()].coinTag,\n            coinTag = _coinList$name$toUppe === void 0 ? '' : _coinList$name$toUppe;\n        return coinTag ? this.coinTagLangs[coinTag] : '';\n      }\n\n      return '';\n    },\n    init: function init() {\n      var _this5 = this;\n\n      if (this.coinsKrwOpen === 1 && this.storeKrwFlag) {\n        if (!localStorage.krwCheck) {\n          this.krwFlag = true;\n        }\n      }\n\n      this.onmessageWorker();\n      this.getLundata(); // 监听 市场切换\n\n      this.$bus.$on('SWITCH-MARKET', function (data) {\n        _this5.marketCurrent = _this5.isCoOpen ? data.type : data;\n\n        _this5.setMarketData();\n      });\n      this.$bus.$on('SWITCH-STORE', function (data) {\n        _this5.setMyMarket(data);\n\n        _this5.setMarketData();\n      });\n\n      if (this.isCoOpen) {\n        this.getCoMarketData();\n      }\n    },\n    goRegister: function goRegister() {\n      if (this.registerInfo) {\n        this.$router.push(\"/register?email=\".concat(this.registerInfo));\n      }\n    },\n    goPage: function goPage(path) {\n      this.$router.push(\"/\".concat(path));\n    },\n    download: function download(type) {\n      window.open(this.appDownload[\"\".concat(type, \"_download_url\")]);\n    },\n    registerChange: function registerChange(val) {\n      this.registerInfo = val;\n    },\n    krwCheckClick: function krwCheckClick() {\n      this.krwCheck = !this.krwCheck;\n    },\n    krwClose: function krwClose() {\n      this.krwFlag = false;\n      this.$store.dispatch('setKrwFlag');\n    },\n    krwConfrim: function krwConfrim() {\n      this.krwFlag = false;\n      this.$store.dispatch('setKrwFlag');\n\n      if (this.krwCheck) {\n        localStorage.krwCheck = true;\n      }\n    },\n    getIconImg: function getIconImg(val) {\n      return \"background:url(\".concat(imgMap[\"home_edit_icon\".concat(val)], \")\");\n    },\n    // 公告更多跳转\n    btnLink: function btnLink() {\n      this.$router.push('/noticeInfo');\n    },\n    onScrollHandle: function onScrollHandle() {\n      var _this6 = this;\n\n      window.onscroll = function () {\n        if (!_this6.productShow) {\n          var WH = window.innerHeight;\n\n          var photoAppTop = _this6.$refs.photoApp.getBoundingClientRect().y;\n\n          var productTop = _this6.$refs.product.getBoundingClientRect().y;\n\n          if (WH - photoAppTop > 300) {\n            _this6.photoAppShow = true;\n          }\n\n          if (WH - productTop > 200) {\n            _this6.productShow = true;\n          }\n        } else {\n          window.onscroll = null;\n        }\n      };\n    },\n    onmessageWorker: function onmessageWorker() {\n      var _this7 = this;\n\n      this.worker.onmessage = function (event) {\n        var data = event.data; // 监听 WebSocket 链接成功\n\n        if (data.type === 'WEBSOCKET_ON_OPEN') {\n          _this7.MywebSocket = data.data.type;\n        } // 监听 WS 数据\n\n\n        if (data.type === 'WEBSOCKET_DATA') {\n          _this7.listenWSData(data.data);\n        }\n      };\n    },\n    // 监听 WS 返回的数据\n    listenWSData: function listenWSData(data) {\n      var _this8 = this;\n\n      var type = data.type,\n          WsData = data.WsData; // 24小时行情数据\n\n      if (type === 'MARKET_DATA') {\n        this.marketDataObj = WsData;\n        var marketArr = Object.keys(this.marketDataObj);\n\n        if (this.isCoOpen) {\n          if (marketArr.length === this.instruments.length) {\n            this.setMarketData();\n            this.setRecommendData();\n          }\n        } else {\n          this.setMarketData();\n          this.setRecommendData();\n        }\n      }\n\n      if (type.indexOf('KLINE_DATA') > -1) {\n        if (this.headerSymbol.length && !this.isCoOpen) {\n          this.headerSymbol.forEach(function (key) {\n            var _WsData$channel$split = WsData.channel.split('_'),\n                _WsData$channel$split2 = _slicedToArray(_WsData$channel$split, 2),\n                symbolType = _WsData$channel$split2[1];\n\n            var symbolArr = key.toLowerCase().split('/');\n            var symbol = symbolArr[0] + symbolArr[1];\n\n            if (symbol === symbolType) {\n              if (WsData.event_rep === 'rep') {\n                var kData = WsData.data;\n                _this8.klineDataList[key] = [];\n                var lengthNumber = kData.slice(-20);\n                lengthNumber.forEach(function (item) {\n                  _this8.klineDataList[key].push([item.id, item.close]);\n                });\n              } else {\n                var _kData = WsData.tick;\n                var keyYs = _this8.klineDataList[key] || [];\n                var lengths = keyYs.length;\n\n                if (_this8.klineDataList[key].length) {\n                  var lastId = _this8.klineDataList[key][lengths - 1][0];\n\n                  if (lastId === _kData.id) {\n                    _this8.klineDataList[key].pop();\n                  }\n\n                  if (_this8.klineDataList[key].length > 20) {\n                    _this8.klineDataList[key].shift();\n                  }\n\n                  _this8.klineDataList[key].push([_kData.id, _kData.close]);\n                }\n              }\n            }\n          });\n          this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\n        }\n\n        if (this.isCoOpen) {\n          var kData = WsData;\n          var wsId = kData.group.charAt(kData.group.length - 1);\n          this.coHeaderSymbol.forEach(function (item) {\n            var keyYs = _this8.klineDataList[item.symbol] || [];\n            var lengths = keyYs.length;\n            var lastId = _this8.klineDataList[item.symbol][lengths - 1][0];\n\n            if (_this8.klineDataList[item.symbol].length) {\n              if (Number(lastId) === Number(wsId)) {\n                _this8.klineDataList[item.symbol].pop();\n\n                if (_this8.klineDataList[item.symbol].length > 30) {\n                  _this8.klineDataList[item.symbol].shift();\n                }\n\n                var _kData$data$ = kData.data[0],\n                    close = _kData$data$.close,\n                    timestamp = _kData$data$.timestamp;\n\n                _this8.klineDataList[item.symbol].push([timestamp, close]);\n              }\n            }\n          });\n          this.$bus.$emit('RECOMMEEND_KLINE_DATA', this.klineDataList);\n        }\n      }\n    },\n    // 发送 Send\n    webSocketSend: function webSocketSend(type, sendType, symbolData, symbolList) {\n      if (this.isCoOpen) return;\n      this.worker.postMessage({\n        type: 'WEBSOCKET_SEND',\n        data: {\n          type: type,\n          sendType: sendType,\n          symbolData: symbolData,\n          symbolList: symbolList\n        }\n      });\n    },\n    // 发送 CoSend\n    webSocketCoSend: function webSocketCoSend(type, sendType, symbolData, symbolList) {\n      this.worker.postMessage({\n        type: 'WEBSOCKET_CO_SEND',\n        data: {\n          type: type,\n          sendType: sendType,\n          symbolData: symbolData,\n          symbolList: symbolList\n        }\n      });\n    },\n    // 格式化 推荐位的 K线数据\n    setRecommendData: function setRecommendData() {\n      var _this9 = this;\n\n      if (this.headerSymbol.length && !this.isCoOpen) {\n        this.headerSymbol.forEach(function (item) {\n          _this9.recommendDataList[item] = {};\n\n          if (_this9.marketDataObj && _this9.marketDataObj[item]) {\n            _this9.recommendDataList[item] = _this9.marketDataObj[item];\n          }\n        });\n        this.$bus.$emit('RECOMMEEND_DATA', this.recommendDataList);\n      }\n\n      if (this.isCoOpen) {\n        if (this.coHeaderSymbol.length) {\n          this.coHeaderSymbol.forEach(function (item) {\n            if (_this9.marketDataObj && _this9.marketDataObj[item.symbol]) {\n              _this9.recommendDataList[item.symbol] = _this9.marketDataObj[item.symbol];\n            }\n          });\n          this.$bus.$emit('RECOMMEEND_DATA', this.recommendDataList);\n        }\n      }\n    },\n    // 格式化 推荐位的24小时行情数据\n    setMarketData: function setMarketData() {\n      var _this10 = this;\n\n      if (this.isCoOpen) {\n        var marketDataList = [];\n        var USTDinstruments = this.instruments.filter(function (item) {\n          return item.quote_coin === 'USDT';\n        });\n        var USTinstruments = this.instruments.filter(function (item) {\n          return item.quote_coin === 'USD';\n        });\n        var typeData = this.marketCurrent === 'USD' ? USTinstruments : USTDinstruments;\n        typeData.forEach(function (item) {\n          var itemData = _this10.marketDataObj[item.symbol];\n\n          if (itemData) {\n            var showName = itemData.name.split('/')[0] || itemData.name;\n            var iconSvg = \"<span>\".concat(showName, \"</span>\"); // const name = item.name;\n\n            marketDataList.push({\n              isShow: true,\n              id: item.symbol,\n              showName: showName,\n              data: [[{\n                iconSvg: '',\n                type: 'icon',\n                eventType: 'store'\n              }, {\n                iconSvg: iconSvg,\n                type: 'icon',\n                eventType: 'symbol',\n                classes: 'symbolName',\n                sortVal: itemData.sort,\n                key: 'sort'\n              }], [{\n                text: itemData.close.data,\n                classes: ['fontSize14'],\n                sortVal: itemData.closes,\n                key: 'closes',\n                subContent: {\n                  text: itemData.close.price !== '--' ? \"\\u2248 \".concat(itemData.close.price) : itemData.close.price,\n                  classes: ['b-2-cl'] // 默认没有\n\n                }\n              }], [{\n                type: 'label',\n                text: itemData.rose.data,\n                sortVal: itemData.roses,\n                key: 'roses',\n                classes: _this10.itemRoseClass(itemData.rose)\n              }], [{\n                text: itemData.high\n              }], [{\n                text: itemData.low\n              }], [{\n                text: itemData.vol\n              }], [{\n                text: itemData.amount\n              }]]\n            });\n          }\n        });\n        this.marketDataList = marketDataList;\n      } else {\n        if (!this.symbolList) return;\n        var _marketDataList = [];\n        var keyarr = Object.keys(this.symbolList);\n        keyarr.forEach(function (item) {\n          if (_this10.symbolList[item].newcoinFlag) {\n            _this10.newcoinFlag = true;\n          }\n\n          var itemData = _this10.marketDataObj[item];\n\n          if (itemData) {\n            var showName = getCoinShowName(itemData.name, _this10.symbolAll);\n\n            var coinLabel = _this10.getCoinLabel(itemData.symbol.symbol, _this10.coinList);\n\n            var iconSvg = \"<span>\".concat(showName, \"</span>\");\n\n            if (coinLabel && _this10.coinTagOpen) {\n              var str = \"<div class=\\\"coin-label\\\">\\n              <span class=\\\"coin-text a-12-cl\\\">\".concat(coinLabel, \"</span>\\n              <span class=\\\"coin-bg a-12-bg\\\"></span>\\n            </div>\");\n              iconSvg = \"\".concat(iconSvg).concat(str);\n            }\n\n            _marketDataList.push({\n              isShow: _this10.symbolList[item].isShow,\n              id: itemData.name,\n              showName: showName,\n              data: [[{\n                iconSvg: _this10.myMarketIcon(itemData.name),\n                type: 'icon',\n                eventType: 'store'\n              }, {\n                iconSvg: iconSvg,\n                type: 'icon',\n                eventType: 'symbol',\n                classes: 'symbolName',\n                sortVal: itemData.sort,\n                key: 'sort'\n              }], [{\n                text: itemData.close.data,\n                classes: ['fontSize14'],\n                sortVal: itemData.closes,\n                key: 'closes',\n                subContent: {\n                  text: itemData.close.price !== '--' ? \"\\u2248 \".concat(itemData.close.price) : itemData.close.price,\n                  classes: ['b-2-cl'] // 默认没有\n\n                }\n              }], [{\n                type: 'label',\n                text: itemData.rose.data,\n                sortVal: itemData.roses,\n                key: 'roses',\n                classes: _this10.itemRoseClass(itemData.rose)\n              }], [{\n                text: itemData.high\n              }], [{\n                text: itemData.low\n              }], [{\n                text: itemData.vol\n              }], [{\n                text: itemData.amount\n              }]]\n            });\n          }\n        });\n        this.marketDataList = _marketDataList.sort(function (a, b) {\n          return a.sort - b.sort;\n        });\n      }\n    },\n    // 设置币对是否收藏的ICON\n    myMarketIcon: function myMarketIcon(symbol) {\n      if (this.mySymbolList.indexOf(symbol) === -1) {\n        return \"<svg class=\\\"icon icon-16\\\" aria-hidden=\\\"true\\\">\\n                <use xlink:href=\\\"#icon-c_11\\\">\\n              </use></svg>\";\n      }\n\n      return \"<svg class=\\\"icon icon-16\\\" aria-hidden=\\\"true\\\">\\n                <use xlink:href=\\\"#icon-c_11_1\\\">\\n              </use></svg>\";\n    },\n    // 获取 首页数据(公告、轮播图)\n    getLundata: function getLundata() {\n      var _this11 = this;\n\n      var dataObj = {};\n\n      if (this.$route.query && this.$route.query.preview && this.$route.query.homeBoard) {\n        dataObj.preview = Number(this.$route.query.preview) > 1 ? 0 : Number(this.$route.query.preview);\n        dataObj.homeBoard = Number(this.$route.query.homeBoard); // if (this.$route.query.homeBoard === '20200216') {\n        //   dataObj = {};\n        // }\n      }\n\n      this.axios({\n        url: this.$store.state.url.common.index_data,\n        headers: {},\n        params: dataObj,\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          // 首页轮播图\n          var _data$data = data.data,\n              cmsAdvertList = _data$data.cmsAdvertList,\n              noticeInfoList = _data$data.noticeInfoList;\n\n          if (cmsAdvertList && cmsAdvertList.length) {\n            _this11.slideList = data.data.cmsAdvertList;\n          }\n\n          _this11.slideListTitle.title = data.data.index_international_title1 || '';\n          _this11.slideListTitle.subTitle = data.data.index_international_title2 || ''; // 首页公告\n\n          if (noticeInfoList && noticeInfoList.length) {\n            var arr = [];\n            var length = 18;\n\n            if (_this11.index_international_open === 1) {\n              length = 50;\n            }\n\n            noticeInfoList.forEach(function (item) {\n              var space = item.title.length > length ? '...' : '';\n              arr.push({\n                noticeText: \"\".concat(item.title.substr(0, length)).concat(space),\n                id: item.id\n              });\n            });\n            _this11.noticeList = arr;\n          }\n\n          _this11.home_edit_html = data.data.footer_warm_prompt;\n        }\n\n        _this11.homeEditReady = true;\n      });\n    },\n    // 设置 自选币对\n    setMyMarket: function setMyMarket(symbol) {\n      var _this12 = this;\n\n      var url = this.$store.state.url.common.optional_symbol;\n\n      if (this.optionalSymbolServerOpen === 1) {\n        url = this.$store.state.url.common.optional_symbols;\n      } // 防止重复点击\n\n\n      if (!this.setMyMarketSwitch) return;\n      this.setMyMarketSwitch = false;\n      var mySymbol = myStorage.get('mySymbol') || [];\n      var addOrDelete = true;\n\n      if (mySymbol.length && mySymbol.indexOf(symbol) > -1) {\n        mySymbol = mySymbol.filter(function (item) {\n          return item !== symbol;\n        });\n        addOrDelete = false;\n      } else {\n        mySymbol.push(symbol);\n        addOrDelete = true;\n      }\n\n      if (this.optionalSymbolServerOpen === 1 && this.isLogin) {\n        this.axios({\n          url: url,\n          headers: {},\n          params: {\n            operationType: addOrDelete === true ? '1' : '2',\n            // 0批量添加 1单个添加 2单个删除\n            symbols: symbol\n          },\n          method: 'post'\n        }).then(function (data) {\n          if (data.code === '0') {\n            _this12.setMyMarketSwitch = true;\n            _this12.mySymbolList = mySymbol;\n            myStorage.set('mySymbol', mySymbol);\n          } else {\n            _this12.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        this.setMyMarketSwitch = true;\n        this.mySymbolList = mySymbol;\n        myStorage.set('mySymbol', mySymbol);\n      }\n    },\n    // 24小时行情 涨跌幅 的背景、样色的class\n    itemRoseClass: function itemRoseClass(rose) {\n      var bgClass = null;\n\n      if (rose.class === 'u-1-cl') {\n        bgClass = 'rose-label u-3-bg';\n      } else if (rose.class === 'u-4-cl') {\n        bgClass = 'rose-label u-6-bg';\n      }\n\n      return [rose.class, bgClass];\n    },\n    // 获取Kine历史数据\n    getKhistory: function getKhistory() {\n      var _this13 = this;\n\n      var endTime = new Date().getTime().toString().substr(0, 10);\n      var newTime = new Date(new Date().getTime() - 30 * 60 * 1000);\n      var startTime = newTime.getTime().toString().substr(0, 10);\n      this.coHeaderSymbol.forEach(function (item) {\n        var url = \"swap/kline?instrumentID=\".concat(item.instrument_id, \"&startTime=\").concat(startTime, \"&endTime=\").concat(endTime, \"&resolution=M&unit=1\");\n\n        _this13.axios({\n          url: url,\n          headers: {},\n          method: 'get',\n          hostType: 'fe-cov2-api'\n        }).then(function (data) {\n          if (data.errno === 'OK') {\n            var kData = data.data;\n            _this13.klineDataList[item.symbol] = [];\n            var lengthNumber = kData ? kData.slice(-30) : [];\n\n            if (lengthNumber && lengthNumber.length) {\n              lengthNumber.forEach(function (ele) {\n                _this13.klineDataList[item.symbol].push([ele.timestamp, ele.close]);\n              });\n            }\n\n            _this13.$bus.$emit('RECOMMEEND_KLINE_DATA', _this13.klineDataList);\n          }\n        });\n      });\n    }\n  },\n  destroyed: function destroyed() {\n    this.$bus.$off('SWITCH-STORE');\n    this.$bus.$off('SWITCH-MARKET');\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.webSocketSend('Market', 'unsub', this.symbolCurrent, this.symbolList);\n    window.onscroll = null;\n  }\n};",null]}