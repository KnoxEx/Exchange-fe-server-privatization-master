{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/utils/setDefaultMarket.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/utils/setDefaultMarket.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n// 设置 默认市场 和 默认选中币对\n// eslint-disable-next-line import/extensions\nimport myStorage from \"./mystorage\";\n\nfunction getSorterMaker(market) {\n  var coinName = null;\n  var coinSort = null;\n  Object.keys(market).forEach(function (key) {\n    if (typeof coinSort !== 'number' || market[key].sort < coinSort) {\n      coinName = key;\n      coinSort = market[key].sort;\n    }\n  });\n  return coinName;\n}\n\nexport var setDefaultMarket = function setDefaultMarket(data) {\n  var markTitle = myStorage.get('markTitle');\n  var homeMarkTitle = myStorage.get('homeMarkTitle');\n  var marketIndex = data.maket_index; // 默认市场\n\n  if (!markTitle || !data.market[markTitle]) {\n    var defaultMarket = data.market[marketIndex] ? marketIndex : Object.keys(data.market)[0];\n    myStorage.set('markTitle', defaultMarket);\n  } // 首页默认市场\n\n\n  if (!homeMarkTitle || !data.market[homeMarkTitle]) {\n    var _defaultMarket = data.market[marketIndex] ? marketIndex : Object.keys(data.market)[0];\n\n    myStorage.set('homeMarkTitle', _defaultMarket);\n  } // 设置默认币对\n\n\n  var sSymbolName = myStorage.get('sSymbolName') || null;\n  var sMarkTitle = myStorage.get('markTitle'); // 如果 myStorage 中没有默认币对  或者 市场列表中没有选中的币对\n\n  if (!sSymbolName || !data.market[sMarkTitle][sSymbolName]) {\n    // const defaultSymbol = data.market[sMarkTitle][sSymbolName] ? sSymbolName\n    //   : Object.keys(data.market[sMarkTitle])[0];\n    var defaultSymbol = data.market[sMarkTitle][sSymbolName] ? sSymbolName : getSorterMaker(data.market[sMarkTitle]);\n    myStorage.set('sSymbolName', defaultSymbol);\n  }\n};\nexport var setLeverDefaultMarket = function setLeverDefaultMarket(data) {\n  var leverMarkTitle = myStorage.get('leverMarkTitle'); // // 默认市场\n\n  if (!leverMarkTitle || !data[leverMarkTitle]) {\n    var dataKey = Object.keys(data);\n    var defaultMarket = dataKey[0];\n    myStorage.set('leverMarkTitle', defaultMarket);\n  } // 设置默认币对\n\n\n  var leverSymbolName = myStorage.get('leverSymbolName') || null;\n  var sleverMarkTitle = myStorage.get('leverMarkTitle'); // 如果 myStorage 中没有默认币对  或者 市场列表中没有选中的币对\n\n  if (!leverSymbolName || !(data[sleverMarkTitle] && data[sleverMarkTitle][leverSymbolName])) {\n    if (data[sleverMarkTitle]) {\n      var defaultSymbol = Object.keys(data[sleverMarkTitle])[0];\n      myStorage.set('leverSymbolName', defaultSymbol);\n    }\n  }\n}; // 设置当前合约名称\n\nexport var setCoMarket = function setCoMarket(dataList) {\n  // console.log(contractList);\n  var sort0 = '';\n\n  if (dataList) {\n    var contractList = dataList.sort(function (a, b) {\n      return a.sort - b.sort;\n    });\n    var contractListName = [];\n    var contractListId = {};\n    contractList.forEach(function (item, index) {\n      if (index === 0) {\n        sort0 = item.contractName;\n      }\n\n      contractListName.push(item.contractName);\n      contractListId[item.contractName] = item.id;\n    });\n    var clientPathName = window.location.pathname.split('/');\n    var clientContractNameArr = clientPathName.filter(function (x) {\n      return contractListName.includes(x);\n    });\n    var clientContractName = clientContractNameArr[0];\n\n    if (clientContractName) {\n      myStorage.set('contractName', clientContractName);\n      myStorage.set('contractId', contractListId[clientContractName]);\n    } else {\n      var contractName = myStorage.get('contractName');\n\n      if (!contractName || contractListName.indexOf(contractName) === -1) {\n        myStorage.set('contractName', sort0);\n        myStorage.set('contractId', contractListId[sort0]);\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui-privatization/utils/setDefaultMarket.js"],"names":["myStorage","getSorterMaker","market","coinName","coinSort","Object","keys","forEach","key","sort","setDefaultMarket","data","markTitle","get","homeMarkTitle","marketIndex","maket_index","defaultMarket","set","sSymbolName","sMarkTitle","defaultSymbol","setLeverDefaultMarket","leverMarkTitle","dataKey","leverSymbolName","sleverMarkTitle","setCoMarket","dataList","sort0","contractList","a","b","contractListName","contractListId","item","index","contractName","push","id","clientPathName","window","location","pathname","split","clientContractNameArr","filter","x","includes","clientContractName","indexOf"],"mappings":"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","sourcesContent":["// 设置 默认市场 和 默认选中币对\r\n// eslint-disable-next-line import/extensions\r\nimport myStorage from './mystorage';\r\n\r\nfunction getSorterMaker(market) {\r\n  let coinName = null;\r\n  let coinSort = null;\r\n  Object.keys(market).forEach((key) => {\r\n    if (typeof coinSort !== 'number' || market[key].sort < coinSort) {\r\n      coinName = key;\r\n      coinSort = market[key].sort;\r\n    }\r\n  });\r\n\r\n  return coinName;\r\n}\r\n\r\nexport const setDefaultMarket = (data) => {\r\n  const markTitle = myStorage.get('markTitle');\r\n  const homeMarkTitle = myStorage.get('homeMarkTitle');\r\n  const marketIndex = data.maket_index;\r\n  // 默认市场\r\n  if (!markTitle || !data.market[markTitle]) {\r\n    const defaultMarket = data.market[marketIndex] ? marketIndex\r\n      : Object.keys(data.market)[0];\r\n    myStorage.set('markTitle', defaultMarket);\r\n  }\r\n  // 首页默认市场\r\n  if (!homeMarkTitle || !data.market[homeMarkTitle]) {\r\n    const defaultMarket = data.market[marketIndex] ? marketIndex\r\n      : Object.keys(data.market)[0];\r\n    myStorage.set('homeMarkTitle', defaultMarket);\r\n  }\r\n\r\n  // 设置默认币对\r\n  const sSymbolName = myStorage.get('sSymbolName') || null;\r\n  const sMarkTitle = myStorage.get('markTitle');\r\n  // 如果 myStorage 中没有默认币对  或者 市场列表中没有选中的币对\r\n  if (!sSymbolName || !data.market[sMarkTitle][sSymbolName]) {\r\n    // const defaultSymbol = data.market[sMarkTitle][sSymbolName] ? sSymbolName\r\n    //   : Object.keys(data.market[sMarkTitle])[0];\r\n    const defaultSymbol = data.market[sMarkTitle][sSymbolName] ? sSymbolName\r\n      : getSorterMaker(data.market[sMarkTitle]);\r\n    myStorage.set('sSymbolName', defaultSymbol);\r\n  }\r\n};\r\n\r\nexport const setLeverDefaultMarket = (data) => {\r\n  const leverMarkTitle = myStorage.get('leverMarkTitle');\r\n  // // 默认市场\r\n  if (!leverMarkTitle || !data[leverMarkTitle]) {\r\n    const dataKey = Object.keys(data);\r\n    const defaultMarket = dataKey[0];\r\n    myStorage.set('leverMarkTitle', defaultMarket);\r\n  }\r\n  // 设置默认币对\r\n  const leverSymbolName = myStorage.get('leverSymbolName') || null;\r\n  const sleverMarkTitle = myStorage.get('leverMarkTitle');\r\n  // 如果 myStorage 中没有默认币对  或者 市场列表中没有选中的币对\r\n  if (!leverSymbolName || !(data[sleverMarkTitle] && data[sleverMarkTitle][leverSymbolName])) {\r\n    if (data[sleverMarkTitle]) {\r\n      const defaultSymbol = Object.keys(data[sleverMarkTitle])[0];\r\n      myStorage.set('leverSymbolName', defaultSymbol);\r\n    }\r\n  }\r\n};\r\n\r\n// 设置当前合约名称\r\nexport const setCoMarket = (dataList) => {\r\n  // console.log(contractList);\r\n  let sort0 = '';\r\n  if (dataList) {\r\n    const contractList = dataList.sort((a, b) => a.sort - b.sort);\r\n    const contractListName = [];\r\n    const contractListId = {};\r\n    contractList.forEach((item, index) => {\r\n      if (index === 0) {\r\n        sort0 = item.contractName;\r\n      }\r\n      contractListName.push(item.contractName);\r\n      contractListId[item.contractName] = item.id;\r\n    });\r\n    const clientPathName = window.location.pathname.split('/');\r\n    const clientContractNameArr = clientPathName.filter((x) => contractListName.includes(x));\r\n    const clientContractName = clientContractNameArr[0];\r\n    if (clientContractName) {\r\n      myStorage.set('contractName', clientContractName);\r\n      myStorage.set('contractId', contractListId[clientContractName]);\r\n    } else {\r\n      const contractName = myStorage.get('contractName');\r\n      if (!contractName || contractListName.indexOf(contractName) === -1) {\r\n        myStorage.set('contractName', sort0);\r\n        myStorage.set('contractId', contractListId[sort0]);\r\n      }\r\n    }\r\n  }\r\n};\r\n"]}]}