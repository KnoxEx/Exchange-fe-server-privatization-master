{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/recommend/recommend.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/recommend/recommend.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _toConsumableArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { myStorage, colorMap } from '@/utils';\nexport default {\n  name: 'recommend',\n  data: function data() {\n    return {\n      // 滚动组件配置\n      ops: {\n        scrollPanel: {\n          speed: 400,\n          easing: 'easeOutQuad'\n        },\n        bar: {\n          size: 0\n        },\n        rail: {\n          size: 0\n        }\n      },\n      clientWidths: 0,\n      process: 0,\n      dataList: {},\n      klineDataList: {},\n      isScroll: false,\n      // true滚动 false剧中\n      scrollRG: 0,\n      // 滚动距离\n      timer: null,\n      liItemWidth: 310,\n      coHeaderSymbol: []\n    };\n  },\n  computed: {\n    isCoOpen: function isCoOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\n        return true;\n      }\n\n      return false;\n    },\n    coinTagLangs: function coinTagLangs() {\n      return this.$store.state.baseData.coinTagLangs;\n    },\n    coinTagOpen: function coinTagOpen() {\n      return this.$store.state.baseData.coin_tag_open;\n    },\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 全部币种列表\n    coinList: function coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    ulStyle: function ulStyle() {\n      var obj = {\n        width: \"\".concat(this.boxWidth, \"px\")\n      };\n\n      if (this.isScroll) {\n        obj.marginLeft = \"\".concat(-1 * this.scrollRG, \"px\");\n      }\n\n      return obj;\n    },\n    itemWidth: function itemWidth() {\n      return this.isCoOpen ? this.coHeaderSymbol.length * 300 - 20 : this.headerSymbol.length * 300 - 20;\n    },\n    headerSymbol: function headerSymbol() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.headerSymbol;\n      }\n\n      return [];\n    },\n    boxWidth: function boxWidth() {\n      return this.evenDatas.length * this.liItemWidth;\n    },\n    evenDatas: function evenDatas() {\n      var _this = this;\n\n      var arr = [];\n\n      if (!this.isCoOpen) {\n        if (this.headerSymbol.length) {\n          this.headerSymbol.forEach(function (item) {\n            var obj = {\n              symbol: item,\n              // 币对\n              price: '--',\n              // 价格\n              volume: '--',\n              // 24H vol\n              roseVal: '--',\n              // 涨跌幅\n              roseCls: '' // 涨跌幅颜色\n\n            };\n\n            if (_this.dataList[item]) {\n              var data = _this.dataList[item];\n              obj.price = data.close ? data.close.data : '--';\n              obj.volume = data.vol;\n              obj.roseVal = data.rose ? data.rose.data : '--';\n              obj.roseCls = data.rose ? data.rose.class : '--';\n              obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\n              obj.coinLabel = data.symbol ? _this.getCoinLabel(data.symbol.symbol, _this.coinList) : '';\n            }\n\n            arr.push(obj);\n          });\n\n          if (this.isScroll) {\n            for (var i = 0; i < this.headerSymbol.length; i += 1) {\n              arr.push(arr[i]);\n            }\n          }\n        }\n      } else if (this.coHeaderSymbol.length) {\n        this.coHeaderSymbol.forEach(function (item) {\n          var obj = {\n            symbol: item.symbol,\n            // 币对\n            price: '--',\n            // 价格\n            volume: '--',\n            // 24H vol\n            roseVal: '--',\n            // 涨跌幅\n            roseCls: '' // 涨跌幅颜色\n\n          };\n\n          if (_this.dataList[item.symbol]) {\n            var data = _this.dataList[item.symbol];\n            obj.price = data.close ? data.close.data : '--';\n            obj.volume = data.vol;\n            obj.roseVal = data.rose ? data.rose.data : '--';\n            obj.roseCls = data.rose ? data.rose.class : '--';\n            obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\n            obj.coinLabel = '';\n          }\n\n          arr.push(obj);\n        });\n\n        if (this.isScroll) {\n          for (var _i = 0; _i < this.coHeaderSymbol.length; _i += 1) {\n            arr.push(arr[_i]);\n          }\n        }\n      }\n\n      return arr;\n    },\n    linkurl: function linkurl() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.url;\n      }\n\n      return {};\n    }\n  },\n  watch: {\n    isScroll: function isScroll(v) {\n      if (v) {\n        this.scrollRG = 0;\n        this.start();\n      } else {\n        this.scrollRG = 0;\n        clearInterval(this.timer);\n      }\n    },\n    clientWidths: function clientWidths(v) {\n      if (v) {\n        var by = this.headerSymbol.length * this.liItemWidth; // 剧中\n\n        if (by <= v) {\n          this.isScroll = false; // 滚动\n        } else {\n          this.isScroll = true;\n        }\n      }\n    }\n  },\n  destroyed: function destroyed() {\n    this.$bus.$off('WINFOW_ON_RESIIZE');\n    this.$bus.$off('RECOMMEEND_DATA');\n    this.$bus.$off('RECOMMEEND_KLINE_DATA');\n    this.$bus.$off('COHEADER_SYMBOL');\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  methods: {\n    getCoinLabel: function getCoinLabel(name) {\n      var coinList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (coinList && coinList[name.toUpperCase()]) {\n        var _coinList$name$toUppe = coinList[name.toUpperCase()].coinTag,\n            coinTag = _coinList$name$toUppe === void 0 ? '' : _coinList$name$toUppe;\n        return coinTag ? this.coinTagLangs[coinTag] : '';\n      }\n\n      return '';\n    },\n    init: function init() {\n      var _this2 = this;\n\n      this.clientWidths = document.body.clientWidth;\n      this.$bus.$on('WINFOW_ON_RESIIZE', function () {\n        _this2.clientWidths = document.body.clientWidth;\n      }); // 监听 数据\n\n      this.$bus.$on('RECOMMEEND_DATA', function (data) {\n        var keys = Object.keys(data);\n        keys.forEach(function (item) {\n          var coinLabel = '';\n\n          if (_this2.isCoOpen) {\n            coinLabel = '';\n          } else {\n            coinLabel = data[item] && data[item].symbol ? _this2.getCoinLabel(data[item].symbol.symbol, _this2.coinList) : '';\n          }\n\n          _this2.$set(_this2.dataList, item, _objectSpread(_objectSpread(_objectSpread({}, {}), data[item]), {\n            coinLabel: coinLabel\n          }));\n        });\n      });\n      this.$bus.$on('RECOMMEEND_KLINE_DATA', function (data) {\n        var keys = Object.keys(data);\n        keys.forEach(function (item) {\n          _this2.$set(_this2.klineDataList, item, data[item]);\n        });\n      });\n      this.$bus.$on('COHEADER_SYMBOL', function (data) {\n        _this2.coHeaderSymbol = _toConsumableArray(data);\n      });\n    },\n    symbolIcon: function symbolIcon(data) {\n      var coin = data.symbol.split('/')[0];\n      var iconImg = this.coinList[coin] ? this.coinList[coin].icon : '';\n      return iconImg;\n    },\n    enter: function enter() {\n      clearInterval(this.timer);\n    },\n    leave: function leave() {\n      this.start();\n    },\n    start: function start() {\n      var _this3 = this;\n\n      clearInterval(this.timer);\n      this.timer = setInterval(function () {\n        var sum = _this3.evenDatas.length * _this3.liItemWidth - _this3.clientWidths;\n        _this3.scrollRG += 1;\n\n        if (_this3.scrollRG > sum) {\n          // this.scrollRG = sum % this.liItemWidth\n          _this3.scrollRG = _this3.headerSymbol.length * _this3.liItemWidth - _this3.clientWidths;\n        }\n      }, 50);\n    },\n    handleScroll: function handleScroll(vertical, horizontal) {\n      this.process = horizontal.process;\n    },\n    scrollRecommend: function scrollRecommend(type) {\n      var num = this.clientWidths / 2;\n\n      if (type === 'prev') {\n        num = -num;\n      }\n\n      this.$refs.vs.scrollBy({\n        dx: num\n      });\n    },\n    bandLink: function bandLink(data) {\n      if (data && !this.isCoOpen) {\n        myStorage.set('sSymbolName', data);\n        myStorage.set('markTitle', data.split('/')[1]);\n      }\n\n      if (!this.isCoOpen) {\n        this.$router.push('/trade');\n      } else {\n        var coUrl = this.linkurl.coUrl ? \"\".concat(this.linkurl.coUrl, \"/trade/\").concat(data) : '';\n        window.location.href = coUrl;\n      }\n    }\n  }\n};",null]}