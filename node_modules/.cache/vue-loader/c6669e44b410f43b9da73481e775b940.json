{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/views/agent/view.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/views/agent/view.vue","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport mixin from 'blockchain-ui-privatization/PC/common-mixin/broker/view/view';\n// import 'blockchain-ui-privatization/PC/common-mixin/broker/view/view.styl';\n\nexport default {\n  mixins: [mixin],\n  name: 'agentView',\n  components: {\n\n  },\n  data: () => ({\n    teamCount: '', // 团队人数\n    reward: '', // 累计奖励\n    userRoleName: '', // 合伙人\n    backSymbol: '',\n    labelList: [],\n    labelVar: 'TEAM-SUBSIDIARY',\n    dataList: [],\n    loading: false,\n    pageNum: 1,\n    pageSize: 10,\n    total: 0,\n  }),\n  computed: {\n    tableList() {\n      if (this.dataList && this.dataList.length) {\n        const dataArr = [];\n        if (this.labelVar === 'TEAM-SUBSIDIARY') {\n          this.dataList.forEach((item) => {\n            dataArr.push({\n              id: item.registerTime,\n              data: [\n                item.nickName,\n                item.registerTime,\n                item.account,\n                item.authStatus == 1 ? this.$t('agent.authed') : this.$t('agent.unAuth'),\n                item.teamNum,\n                `${item.holdAmount} ${item.holdSymbol}`,\n              ],\n            });\n          });\n        } else if (this.labelVar === 'COMMISSION-RECORD') {\n          this.dataList.forEach((item) => {\n            dataArr.push({\n              id: item.id,\n              data: [\n                item.account,\n                item.tradeTime,\n                item.tradeUId,\n                `${item.backAmount} ${item.backSymbol}`,\n              ],\n            });\n          });\n        }\n        return dataArr;\n      }\n      return [];\n    },\n    colums() {\n      let arr = [];\n      if (this.labelVar === 'TEAM-SUBSIDIARY') {\n        arr = [\n          { title: this.$t('agent.nickName'), width: '150px' },\n          { title: this.$t('agent.regTime'), width: '150px' },\n          { title: this.$t('agent.account'), width: '200px' },\n          { title: this.$t('agent.authStatus'), width: '150px' },\n          { title: this.$t('agent.teamNum'), width: '150px' },\n          { title: this.$t('agent.holdAmount') },\n        ];\n      } else if (this.labelVar === 'COMMISSION-RECORD') {\n        arr = [\n          { title: this.$t('agent.id'), width: '200px' },\n          { title: this.$t('agent.tradeTime'), width: '200px' },\n          { title: this.$t('agent.tradeUID'), width: '200px' },\n          { title: this.$t('agent.backAmount') },\n        ];\n      }\n      return arr;\n    },\n  },\n  mounted() {\n    this.getLabel();\n    this.getBaseInfo();\n  },\n  methods: {\n    getLabel() {\n      this.axios({\n        url: 'agent/labelList',\n        hostType: 'agent',\n        params: {},\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          // console.log(data)\n          this.labelList = data.data.sort((a, b) => a.sort - b.sort);\n          this.labelVar = this.labelList[0].labelVar;\n          this.getList();\n        }\n      });\n    },\n\n    getBaseInfo() {\n      this.axios({\n        url: 'agent/baseInfo',\n        hostType: 'agent',\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          // console.log(data)\n          if (data.data.attributeMap.length > 1) {\n            this.teamCount = data.data.attributeMap[0]['团队人数'];\n            this.reward = data.data.attributeMap[1]['累计奖励'];\n          }\n          this.userRoleName = data.data.userRoleName;\n          this.backSymbol = data.data.backSymbol;\n        }\n      });\n    },\n\n    getList() {\n      const params = {};\n      this.loading = true;\n      this.axios({\n        url: 'agent/list',\n        hostType: 'agent',\n        params: {\n          pageSize: this.pageSize,\n          pageNum: this.pageNum,\n          labelVar: this.labelVar,\n        },\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          this.pageNum = parseInt(data.data.pageNum) || 1;\n          this.total = parseInt(data.data.total);\n          this.dataList = data.data.data;\n        }\n        this.loading = false;\n      });\n    },\n\n    labelClick(labelVar) {\n      this.labelVar = labelVar;\n      this.pageNum = 1;\n      this.getList();\n    },\n\n    pagechange(num) {\n      this.pageNum = num;\n      this.getList();\n    },\n  },\n};\n",null]}