{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAdd/b2cAdd.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAdd/b2cAdd.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { imgMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      symbol: '',\n      bank: '',\n      // 银行\n      bankSub: '',\n      // 支行\n      cardNo: '',\n      // 账号\n      name: '',\n      // 姓名\n      cms: '',\n      // 短信验证码\n      google: '',\n      // 谷歌验证码\n      bankList: [],\n      btnLoading: false,\n      nowType: '',\n      setId: ''\n    };\n  },\n  watch: {\n    AddUserInfoIsReady: {\n      immediate: true,\n      handler: function handler(v) {\n        if (v) {\n          var userInfo = this.$store.state.baseData.userInfo;\n          this.name = userInfo.realName;\n        }\n      }\n    }\n  },\n  computed: {\n    AddUserInfoIsReady: function AddUserInfoIsReady() {\n      return this.userInfoIsReady;\n    },\n    buttonDisable: function buttonDisable() {\n      var flag = true;\n      var cmsSuc = this.OpenMobile ? this.cmsFlag : true;\n      var googleSuc = this.OpenGoogle ? this.googleFlag : true;\n\n      if (this.bank.length && this.cardNoFlag && cmsSuc && googleSuc || this.btnLoading) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    regExps: function regExps() {\n      return this.$store.state.regExp;\n    },\n    cardNoFlag: function cardNoFlag() {\n      return this.regExps.nonEmpty.test(this.cardNo);\n    },\n    bankSubFlag: function bankSubFlag() {\n      return this.regExps.nonEmpty.test(this.bankSub);\n    },\n    cmsFlag: function cmsFlag() {\n      return this.regExps.verification.test(this.cms);\n    },\n    googleFlag: function googleFlag() {\n      return this.regExps.verification.test(this.google);\n    },\n    cmsErrorFlag: function cmsErrorFlag() {\n      if (this.cms.length !== 0 && !this.cmsFlag) return true;\n      return false;\n    },\n    googleErrorFlag: function googleErrorFlag() {\n      if (this.google.length !== 0 && !this.googleFlag) return true;\n      return false;\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this$$route$query = this.$route.query,\n          symbol = _this$$route$query.symbol,\n          type = _this$$route$query.type,\n          id = _this$$route$query.id;\n\n      if (symbol && type === 'add') {\n        this.symbol = symbol.toUpperCase();\n        this.nowType = 'add';\n      } else if (symbol && type === 'set' && id) {\n        this.symbol = symbol.toUpperCase();\n        this.nowType = 'set';\n        this.setId = id;\n      } else {\n        this.$router.push('/assets/b2cAccount');\n        return;\n      }\n\n      this.getBankList();\n    },\n    addressChange: function addressChange(item) {\n      this.bank = item.code;\n    },\n    getSetMess: function getSetMess() {\n      var _this = this;\n\n      this.axios({\n        url: '/user/bank/get',\n        params: {\n          id: this.setId\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this.bank = data.data.bankNo.toString();\n          _this.bankSub = data.data.bankSub;\n          _this.cardNo = data.data.cardNo;\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      this.btnLoading = true;\n      this.axios({\n        url: this.nowType === 'add' ? '/user/bank/add' : '/user/bank/edit',\n        params: {\n          id: this.nowType === 'add' ? undefined : this.setId,\n          bankId: this.bank,\n          bankSub: this.bankSub || undefined,\n          cardNo: this.cardNo,\n          name: this.name,\n          symbol: this.symbol,\n          smsAuthCode: this.cms || undefined,\n          googleCode: this.google || undefined\n        }\n      }).then(function (data) {\n        _this2.btnLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this2.$router.push(\"/assets/b2cAddressMent?symbol=\".concat(_this2.symbol));\n\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 获取验证码\n    getCodeClick: function getCodeClick() {\n      this.sendCode();\n    },\n    sendCode: function sendCode() {\n      var _this3 = this;\n\n      this.axios({\n        url: 'v4/common/smsValidCode',\n        params: {\n          operationType: this.nowType === 'add' ? '30' : '31'\n        }\n      }).then(function (data) {\n        if (data.code.toString() !== '0') {\n          setTimeout(function () {\n            // 倒计时重置\n            _this3.$bus.$emit('getCode-clear', 'withdrawGetcode'); // tip框提示错误\n\n\n            _this3.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }, 2000);\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: _this3.$t('assets.withdraw.phoneSendSuccess'),\n            type: 'success'\n          });\n        }\n      });\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    getBankList: function getBankList() {\n      var _this4 = this;\n\n      this.axios({\n        url: '/bank/all',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var arr = [];\n          data.data.forEach(function (item) {\n            arr.push({\n              code: item.bankNo.toString(),\n              value: item.accountName\n            });\n          });\n          _this4.bankList = arr;\n\n          if (arr.length && _this4.nowType === 'add') {\n            _this4.bank = arr[0].code;\n          }\n\n          if (_this4.nowType === 'set') {\n            _this4.getSetMess();\n          }\n        } else {\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    }\n  }\n};",null]}