{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/partTimeJob/blockchain-ui-privatization/PC/components/homeDialog/homeDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/components/homeDialog/homeDialog.vue","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// 按钮\nimport { setCookie, getCookie } from '@/utils';\nexport default {\n  name: 'c-homeDialog',\n  data: function data() {\n    return {\n      dialogType: 'text',\n      // 弹窗类型 text / img\n      showFlag: false,\n      // 展示变量\n      titleText: '',\n      // 富文本类 -- 提示文案\n      oneText: '',\n      // 富文本类 -- 第一个按钮的文案\n      oneLink: '',\n      // 富文本类 -- 第一个按钮的跳转链接\n      twoText: '',\n      // 富文本类 -- 第二个按钮的文案\n      twoLink: '',\n      // 富文本类 -- 第二个按钮的跳转链接\n      htmlText: '',\n      // 富文本框内容\n      haveTwo: false,\n      // 富文本类 -- 是否有第二个按钮\n      haveOption: false,\n      // 富文本类 -- 是否有下面option区域\n      imgUrl: '',\n      // 图片类 -- 图片地址\n      imgLink: '',\n      // 图片类 -- 图片跳转链接\n      nowId: ''\n    };\n  },\n  watch: {\n    showFlag: function showFlag(v) {\n      var _this = this;\n\n      if (v) {\n        this.$nextTick(function () {\n          if (_this.$refs.dialog.offsetHeight % 2 !== 0) {\n            var str = \"\".concat(_this.$refs.dialog.offsetHeight + 1, \"px\");\n            _this.$refs.dialog.style.height = str;\n          }\n        });\n      }\n    },\n    userInfoIsReady: {\n      immediate: true,\n      handler: function handler(v) {\n        if (v) {// this.getData();\n        }\n      }\n    }\n  },\n  computed: {\n    // userInfo是否请求完毕\n    userInfoIsReady: function userInfoIsReady() {\n      return this.$store.state.baseData.userInfoIsReady;\n    }\n  },\n  methods: {\n    getData: function getData() {\n      var _this2 = this;\n\n      this.axios({\n        url: 'homepage_Elastic_Layer',\n        params: {\n          terminalType: '0'\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0' && data.data) {\n          // https://chaindown-oss.oss-cn-hongkong.aliyuncs.com/upload/20200303204248519.jpeg\n          var _data$data = data.data,\n              activityTitle = _data$data.activityTitle,\n              startTime = _data$data.startTime,\n              endTime = _data$data.endTime,\n              displayType = _data$data.displayType,\n              picturePath = _data$data.picturePath,\n              pictureUrl = _data$data.pictureUrl,\n              imageText = _data$data.imageText,\n              buttonWritingOne = _data$data.buttonWritingOne,\n              buttonWritingTwo = _data$data.buttonWritingTwo,\n              buttonUrlOne = _data$data.buttonUrlOne,\n              buttonUrlTwo = _data$data.buttonUrlTwo;\n          _this2.dialogType = displayType.toString() === '0' ? 'img' : 'text'; // 类型\n\n          _this2.titleText = activityTitle; // 标题\n\n          if (_this2.dialogType === 'img') {\n            // 图片地址\n            if (picturePath && picturePath.length) {\n              _this2.imgUrl = picturePath;\n            } // 图片跳转地址\n\n\n            if (pictureUrl && pictureUrl.length) {\n              _this2.imgLink = pictureUrl;\n            }\n          } else {\n            // 富文本内容\n            if (imageText && imageText.length) {\n              _this2.htmlText = imageText;\n            } // 按钮1文案\n\n\n            if (buttonWritingOne && buttonWritingOne.length) {\n              _this2.oneText = buttonWritingOne;\n              _this2.haveOption = true;\n            } // 按钮1跳转地址\n\n\n            if (buttonUrlOne && buttonUrlOne.length) {\n              _this2.oneLink = buttonUrlOne;\n            } // 按钮2文案\n\n\n            if (buttonWritingTwo && buttonWritingTwo.length) {\n              _this2.twoText = buttonWritingTwo;\n              _this2.haveTwo = true;\n              _this2.haveOption = true;\n            } // 按钮2跳转地址\n\n\n            if (buttonUrlTwo && buttonUrlTwo.length) {\n              _this2.twoLink = buttonUrlTwo;\n            }\n          }\n\n          var isLogin = _this2.$store.state.baseData.isLogin;\n          var flag = false;\n          _this2.nowId = \"\".concat(data.data.id, \"-\").concat(data.data.mtime);\n          var cookieArr = getCookie('homeAlertArr') ? JSON.parse(getCookie('homeAlertArr')) : [];\n          var cookieFlag = false;\n\n          if (cookieArr.indexOf(_this2.nowId) === -1) {\n            cookieFlag = true;\n          }\n\n          if (data.data.isLogin.toString() === '1' && isLogin) {\n            flag = true;\n          }\n\n          if (data.data.isLogin.toString() === '0') {\n            flag = true;\n          }\n\n          var time = new Date().getTime();\n\n          if (time > startTime && time < endTime && flag && cookieFlag) {\n            _this2.showFlag = true;\n          }\n        } else {// this.$bus.$emit('tip', { text: data.msg, type: 'error' });\n        }\n      });\n    },\n    setCookieArr: function setCookieArr() {\n      var cookieArr = getCookie('homeAlertArr') ? JSON.parse(getCookie('homeAlertArr')) : [];\n      cookieArr.push(this.nowId);\n      setCookie('homeAlertArr', JSON.stringify(cookieArr));\n    },\n    close: function close() {\n      this.showFlag = false;\n      this.setCookieArr();\n    },\n    oneClick: function oneClick() {\n      if (this.oneLink) {\n        window.location.href = this.oneLink;\n      } else {\n        this.showFlag = false;\n        this.setCookieArr();\n      }\n    },\n    twoClick: function twoClick() {\n      if (this.twoLink) {\n        window.location.href = this.twoLink;\n      } else {\n        this.showFlag = false;\n        this.setCookieArr();\n      }\n    },\n    imgClick: function imgClick() {\n      if (this.imgLink) {\n        window.location.href = this.imgLink;\n      } else {\n        this.showFlag = false;\n        this.setCookieArr();\n      }\n    }\n  }\n};",null]}