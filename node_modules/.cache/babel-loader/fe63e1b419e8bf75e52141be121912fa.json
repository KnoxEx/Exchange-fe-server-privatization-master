{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/vuex/future/future.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/vuex/future/future.js","mtime":1626169079000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\n// Created by 侯东东.\n//  云合约\nimport axios from '@/api/http/axios';\nimport { setCoMarket, myStorage, getDigit } from '@/utils';\nvar timer = null;\n\nvar setCoTypeSymbol = function setCoTypeSymbol(data) {\n  if (data) {\n    var arr = data.split('-');\n    return \"\".concat(arr[0], \"_\").concat(arr[1]).concat(arr[2]);\n  }\n\n  return null;\n};\n\nvar isIframe = false;\n/* eslint-disable */\n\nif (self !== top) {\n  isIframe = true;\n}\n\nexport default {\n  state: {\n    // 是否在iframe中\n    isIframe: isIframe,\n    // 合约列表\n    contractList: null,\n    // 合约列表 MAP\n    contractListMap: {},\n    // 合约币对列表\n    contractSymbolList: [],\n    // 存储当前合约信息\n    contractInfo: null,\n    // 前台公共实时信息\n    publicMarkertInfo: {},\n    // 存储当前合约名称\n    contractName: myStorage.get('contractName'),\n    // 存储当前合约币对\n    contractSymbol: null,\n    // 存储当前合约ID\n    contractId: myStorage.get('contractId'),\n    // 用户配置信息\n    futureUserConfig: null,\n    // 是否开通合约\n    openContract: true,\n    // 是否被冻结\n    transStatus: 0,\n    // 当前合约币对 小写带类型\n    coTypeSymbol: setCoTypeSymbol(myStorage.get('contractName')),\n    // 合约价格单位\n    priceUnit: '',\n    // 合约单位(标的货币||张)\n    coUnit: '',\n    // 合约单位类型 1标的货币, 2张 未登录默认是1\n    coUnitType: myStorage.get('coUnitType') || 2,\n    // 合约面值\n    multiplier: '',\n    // 服务器当前时间和本地时间的差\n    serveTimeDiff: 0,\n    // WS URL\n    wsUrl: null,\n    // 数量精度\n    volfix: 0,\n    // 价格精度\n    pricefix: 4,\n    // 保证金币种的精度\n    coinfix: 4,\n    // 合约资产\n    futureAccountBalance: {},\n    // 合约类型文案\n    contractTypeText: {\n      E: '永续',\n      W: '周',\n      N: '次周',\n      M: '月',\n      Q: '季度',\n      H: '混合'\n    },\n    // 合约保证金信息列表\n    marginCoinInfor: null,\n    // 持仓列表\n    positionList: null,\n    // 持仓列表\n    positionListNumber: null,\n    // 币种列表\n    marginCoinList: [],\n    // 可平数量列表 {BUY: 可凭多  SELL：可凭空}\n    activeCanClose: [],\n    // 当前委托列表\n    currentOrderLis: [],\n    // 当前普通单委托数量\n    orderCount: 0,\n    // 当前条件单委托数量\n    triggerOrderCount: 0\n  },\n  mutations: {\n    // 存储WS地址\n    WS_URL: function WS_URL(state, data) {\n      state.wsUrl = data;\n    },\n    // 存储合约列表\n    CO_PUBLIC_INFO: function CO_PUBLIC_INFO(state, data) {\n      state.contractList = data;\n    },\n    // 全部合约币对列表（发送WS send ）\n    CONTRACT_SYMBOL_LIST: function CONTRACT_SYMBOL_LIST(state, data) {\n      state.contractSymbolList = data;\n    },\n    //\n    SET_COUNIT_TYPE: function SET_COUNIT_TYPE(state, data) {\n      state.coUnitType = data;\n    },\n    SET_COUNIT_TEXT: function SET_COUNIT_TEXT(state, data) {\n      state.coUnit = data;\n    },\n    // 存储当前合约信息\n    ACTIVE_CONTRACT_DATA: function ACTIVE_CONTRACT_DATA(state, data) {\n      state.contractInfo = data; // 合约面值\n\n      state.multiplier = data.multiplier; // 数量精度 (合约面值后面的小数点的位数)\n\n      state.volfix = getDigit(data.multiplier); // 合约币对价格精度\n\n      state.pricefix = data.coinResultVo.symbolPricePrecision; // 保证金币种的精度\n\n      state.coinfix = data.coinResultVo.marginCoinPrecision; // 配置合约数量默认单位\n\n      if (!state.futureUserConfig) {\n        if (state.coUnitType === 1) {\n          state.coUnit = data.multiplierCoin;\n        } else {// state.coUnit = '张';\n        }\n      }\n\n      state.priceUnit = data.quote;\n    },\n    // 存储当前合约名称\n    CONTRACT_NAME: function CONTRACT_NAME(state, data) {\n      state.contractName = data;\n    },\n    // 存储当前合约币对\n    CONTRACT_SYMBOL: function CONTRACT_SYMBOL(state, data) {\n      state.contractSymbol = data;\n    },\n    // 存储当前合约ID\n    CONTRACT_ID: function CONTRACT_ID(state, data) {\n      state.contractId = data;\n    },\n    CONTRACT_TYPE_SYMBOL: function CONTRACT_TYPE_SYMBOL(state, data) {\n      state.coTypeSymbol = data;\n    },\n    // 存储用户配置信息\n    GET_USER_CONFIG: function GET_USER_CONFIG(state, data) {\n      // 是否开通了合约\n      state.openContract = !!data.openContract; // 是否被冻结\n\n      state.transStatus = data.transStatus; // 合约单位\n\n      state.coUnitType = data.coUnit;\n      myStorage.set('coUnitType', data.coUnit);\n\n      if (data.coUnit === 1) {\n        state.coUnit = data.multiplierCoin;\n      } else {// state.coUnit = '张';\n      } // 用户配置信息\n\n\n      state.futureUserConfig = data;\n    },\n    // 服务器当前时间和本地时间的差\n    SERVE_TIME_DIFF: function SERVE_TIME_DIFF(state, data) {\n      // 用户配置信息\n      state.serveTimeDiff = data;\n    },\n    // 前台公共实时信息\n    PUBLIC_MARKER_INFO: function PUBLIC_MARKER_INFO(state, data) {\n      state.publicMarkertInfo = data;\n    },\n    // 资产详情信息\n    ACCOUNT_BALANCE: function ACCOUNT_BALANCE(state, data) {\n      state.futureAccountBalance = data;\n    },\n    // 抽取 保证金币种信息列表\n    MARGIN_COIN_INFOR: function MARGIN_COIN_INFOR(state, data) {\n      state.marginCoinInfor = data;\n    },\n    POSITION_LIST: function POSITION_LIST(state, data) {\n      state.positionList = data;\n      state.positionListNumber = data ? data.length : 0;\n    },\n    // 币种列表\n    SYMBOL_LOST: function SYMBOL_LOST(state, data) {\n      state.marginCoinList = data;\n    },\n    // 可平数量列表\n    ACTIVE_CAN_CLOSE: function ACTIVE_CAN_CLOSE(state, data) {\n      state.activeCanClose = data;\n    },\n    // 合约列表信息 MAP\n    CONTRACT_LIST_MAP: function CONTRACT_LIST_MAP(state, data) {\n      state.contractListMap = data;\n    },\n    // 当前合约订单列表\n    CURRENT_OTDER_LIST: function CURRENT_OTDER_LIST(state, data) {\n      state.currentOrderLis = data;\n    },\n    // 当前普通单委托数量\n    ORDER_COUNT: function ORDER_COUNT(state, data) {\n      state.orderCount = data;\n    },\n    // 当前条件单委托数量\n    TRIGGER_ORDER_COUNT: function TRIGGER_ORDER_COUNT(state, data) {\n      state.triggerOrderCount = data;\n    }\n  },\n  actions: {\n    // 获取合约列表数据\n    getFutorePublicInfo: function getFutorePublicInfo(_ref) {\n      var commit = _ref.commit,\n          dispatch = _ref.dispatch;\n      axios({\n        url: this.state.url.futures.publicInfo,\n        method: 'post',\n        hostType: 'co'\n      }).then(function (rs) {\n        if (rs.code === '0') {\n          var _rs$data = rs.data,\n              contractList = _rs$data.contractList,\n              marginCoinList = _rs$data.marginCoinList;\n          setCoMarket(contractList); // 合约 ws地址 支持多域名\n\n          var tempDomain = document.domain.split('.').slice(-1).join();\n          var tempWs = rs.data.wsUrl.split('.').slice(-1).join().split('/').slice(0, 1);\n          var ws_url = rs.data.wsUrl.replace(new RegExp(tempWs, 'g'), tempDomain);\n          commit('WS_URL', ws_url); // 设置时间差\n\n          if (rs.data.currentTimeMillis) {\n            var now = new Date().getTime();\n            commit('SERVE_TIME_DIFF', rs.data.currentTimeMillis - now);\n          }\n\n          var contractListArr = [];\n\n          if (contractList && contractList.length) {\n            var symbolList = [];\n            var marginCoinInfor = {};\n            var contractListMap = {};\n            contractList.forEach(function (item) {\n              var dataItem = item;\n              var contractName = dataItem.contractName; // 发送WS send 的时候使用的币对名\n\n              var symbolArr = contractName.toLowerCase().split('-');\n              var symbol = \"\".concat(symbolArr[0], \"_\").concat(symbolArr[1]).concat(symbolArr[2]);\n              symbolList.push(symbol); // wsDatakey 接收WS 数据时 使用的Key\n\n              dataItem.wsDatakey = symbol;\n              contractListArr.push(dataItem);\n              contractListMap[contractName] = dataItem || {}; // 保证金币种精度\n\n              var _dataItem$coinResultV = dataItem.coinResultVo,\n                  marginCoinPrecision = _dataItem$coinResultV.marginCoinPrecision,\n                  symbolPricePrecision = _dataItem$coinResultV.symbolPricePrecision;\n              contractListMap[contractName].mCionFix = marginCoinPrecision; // 价格精度\n\n              contractListMap[contractName].priceFix = symbolPricePrecision; // 数量精度（标的货币时使用， 合约面值小数点后面的位数）\n\n              contractListMap[contractName].volfix = getDigit(dataItem.multiplier); // 抽取保证金币种信息\n\n              marginCoinInfor[dataItem.marginCoin] = {\n                // 保证金币种\n                marginCoin: dataItem.marginCoin,\n                // 保证金币种精度\n                marginCoinPrecision: dataItem.coinResultVo.marginCoinPrecision,\n                // 限制转入\n                fundsInStatus: dataItem.coinResultVo.fundsInStatus,\n                // 限制转出\n                fundsOutStatus: dataItem.coinResultVo.fundsOutStatus\n              };\n            }); // 全部合约列表\n\n            commit('CO_PUBLIC_INFO', contractListArr); // 全部合约币对列表（发送WS send ）\n\n            commit('CONTRACT_SYMBOL_LIST', symbolList); // 保存 保证金信息列表\n\n            commit('MARGIN_COIN_INFOR', marginCoinInfor); // 设置当前合约信息\n\n            dispatch('setActivePublicInfo'); // 币种列表\n\n            commit('SYMBOL_LOST', marginCoinList); // 合约列表信息 MAP\n\n            commit('CONTRACT_LIST_MAP', contractListMap);\n          }\n        }\n      });\n    },\n    // 存储当前合约信息\n    setActivePublicInfo: function setActivePublicInfo(_ref2) {\n      var commit = _ref2.commit,\n          state = _ref2.state,\n          dispatch = _ref2.dispatch;\n      var contractName = myStorage.get('contractName');\n      var contractList = state.contractList;\n      commit('CONTRACT_NAME', contractName);\n      contractList.forEach(function (item) {\n        if (contractName === item.contractName) {\n          // 当前合约ID\n          commit('CONTRACT_ID', item.id); // 当前合约币对大写 不带类型\n\n          commit('CONTRACT_SYMBOL', item.symbol.replace('-', '')); // 当前合约币对 小写加类型（WS的时候需要用到）\n\n          var coTypeSymbol = \"\".concat(item.contractType, \"_\").concat(item.symbol.replace('-', ''));\n          commit('CONTRACT_TYPE_SYMBOL', coTypeSymbol.toLowerCase()); // 当前合约信息\n\n          commit('ACTIVE_CONTRACT_DATA', item);\n          dispatch('getPublicMarkertInfo');\n        }\n      });\n    },\n    // 获取用户配置信息\n    getUserConfig: function getUserConfig(_ref3) {\n      var _this = this;\n\n      var commit = _ref3.commit,\n          state = _ref3.state;\n\n      if (!state.contractId) {\n        clearInterval(timer);\n        timer = setInterval(function () {\n          if (state.contractId) {\n            clearInterval(timer);\n            axios({\n              url: _this.state.url.futures.getUserConfig,\n              method: 'post',\n              hostType: 'co',\n              params: {\n                contractId: state.contractId\n              }\n            }).then(function (rs) {\n              if (rs.code === '0') {\n                console.log('bbb', rs.data);\n                commit('GET_USER_CONFIG', rs.data);\n              }\n            });\n          }\n        }, 500);\n      } else {\n        axios({\n          url: this.state.url.futures.getUserConfig,\n          method: 'post',\n          hostType: 'co',\n          params: {\n            contractId: state.contractId\n          }\n        }).then(function (rs) {\n          if (rs.code === '0') {\n            console.log('aaa', rs.data);\n            commit('GET_USER_CONFIG', rs.data);\n          }\n        });\n      }\n    },\n    // 获取前台公共实时信息\n    getPublicMarkertInfo: function getPublicMarkertInfo(_ref4) {\n      var commit = _ref4.commit,\n          state = _ref4.state;\n\n      if (state.contractId) {\n        axios({\n          url: this.state.url.futures.publicMarkertInfo,\n          method: 'post',\n          hostType: 'co',\n          params: {\n            contractId: state.contractId\n          }\n        }).then(function (rs) {\n          if (rs.code === '0') {\n            commit('PUBLIC_MARKER_INFO', rs.data);\n          }\n        });\n      }\n    },\n    // 请求合约资产\n    getAccountBalance: function getAccountBalance(_ref5) {\n      var commit = _ref5.commit,\n          state = _ref5.state;\n\n      if (state.contractInfo) {\n        axios({\n          url: this.state.url.futures.accountBalance,\n          method: 'post',\n          hostType: 'co',\n          params: {\n            marginCoin: state.contractInfo.marginCoin\n          }\n        }).then(function (rs) {\n          if (rs.code === '0') {\n            commit('ACCOUNT_BALANCE', rs.data.accounts[0]);\n          }\n        });\n      }\n    },\n    // 获取持仓列表+资产\n    getPositionList: function getPositionList(_ref6) {\n      var commit = _ref6.commit;\n      axios({\n        url: this.state.url.futures.getAssetsList,\n        method: 'post',\n        hostType: 'co',\n        params: {}\n      }).then(function (rs) {\n        if (rs.code === '0' && rs.data) {\n          var _rs$data2 = rs.data,\n              positionList = _rs$data2.positionList,\n              accountList = _rs$data2.accountList; // 资产列表\n\n          if (accountList && accountList.length) {\n            var data = {};\n            accountList.forEach(function (item) {\n              data[item.symbol] = item;\n            });\n            commit('ACCOUNT_BALANCE', data);\n          } else {\n            commit('ACCOUNT_BALANCE', null);\n          } // 持仓列表\n\n\n          commit('POSITION_LIST', positionList);\n\n          if (positionList && positionList.length) {\n            // 可平数量\n            var activeCanClose = {};\n            positionList.forEach(function (item) {\n              if (activeCanClose[item.contractName]) {\n                activeCanClose[item.contractName][item.orderSide] = item.canCloseVolume;\n              } else {\n                activeCanClose[item.contractName] = _defineProperty({}, item.orderSide, item.canCloseVolume);\n              }\n            }); // 可平数量\n\n            commit('ACTIVE_CAN_CLOSE', activeCanClose);\n          }\n        }\n      });\n    },\n    // 领取赠金\n    getReceiveCoupon: function getReceiveCoupon(_ref7) {\n      var dispatch = _ref7.dispatch;\n      axios({\n        url: this.state.url.futures.receiveCoupon,\n        method: 'post',\n        hostType: 'co',\n        params: {}\n      }).then(function (rs) {\n        if (rs.code === '0') {\n          dispatch('getUserConfig');\n        }\n      });\n    },\n    // 获取用户委托计数\n    getUserOrderCount: function getUserOrderCount(_ref8) {\n      var commit = _ref8.commit,\n          state = _ref8.state;\n      axios({\n        url: this.state.url.futures.getUserOrderCount,\n        method: 'post',\n        hostType: 'co',\n        params: {\n          contractId: state.contractId\n        }\n      }).then(function (rs) {\n        if (rs.code === '0') {\n          commit('ORDER_COUNT', rs.data.orderCount);\n          commit('TRIGGER_ORDER_COUNT', rs.data.triggerOrderCount);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/vuex/future/future.js"],"names":["axios","setCoMarket","myStorage","getDigit","timer","setCoTypeSymbol","data","arr","split","isIframe","self","top","state","contractList","contractListMap","contractSymbolList","contractInfo","publicMarkertInfo","contractName","get","contractSymbol","contractId","futureUserConfig","openContract","transStatus","coTypeSymbol","priceUnit","coUnit","coUnitType","multiplier","serveTimeDiff","wsUrl","volfix","pricefix","coinfix","futureAccountBalance","contractTypeText","E","W","N","M","Q","H","marginCoinInfor","positionList","positionListNumber","marginCoinList","activeCanClose","currentOrderLis","orderCount","triggerOrderCount","mutations","WS_URL","CO_PUBLIC_INFO","CONTRACT_SYMBOL_LIST","SET_COUNIT_TYPE","SET_COUNIT_TEXT","ACTIVE_CONTRACT_DATA","coinResultVo","symbolPricePrecision","marginCoinPrecision","multiplierCoin","quote","CONTRACT_NAME","CONTRACT_SYMBOL","CONTRACT_ID","CONTRACT_TYPE_SYMBOL","GET_USER_CONFIG","set","SERVE_TIME_DIFF","PUBLIC_MARKER_INFO","ACCOUNT_BALANCE","MARGIN_COIN_INFOR","POSITION_LIST","length","SYMBOL_LOST","ACTIVE_CAN_CLOSE","CONTRACT_LIST_MAP","CURRENT_OTDER_LIST","ORDER_COUNT","TRIGGER_ORDER_COUNT","actions","getFutorePublicInfo","commit","dispatch","url","futures","publicInfo","method","hostType","then","rs","code","tempDomain","document","domain","slice","join","tempWs","ws_url","replace","RegExp","currentTimeMillis","now","Date","getTime","contractListArr","symbolList","forEach","item","dataItem","symbolArr","toLowerCase","symbol","push","wsDatakey","mCionFix","priceFix","marginCoin","fundsInStatus","fundsOutStatus","setActivePublicInfo","id","contractType","getUserConfig","clearInterval","setInterval","params","console","log","getPublicMarkertInfo","getAccountBalance","accountBalance","accounts","getPositionList","getAssetsList","accountList","orderSide","canCloseVolume","getReceiveCoupon","receiveCoupon","getUserOrderCount"],"mappings":"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","sourcesContent":["// Created by 侯东东.\n//  云合约\nimport axios from '@/api/http/axios';\nimport { setCoMarket, myStorage, getDigit } from '@/utils';\n\nlet timer = null;\n\nconst setCoTypeSymbol = (data) => {\n  if (data) {\n    const arr = data.split('-');\n    return `${arr[0]}_${arr[1]}${arr[2]}`;\n  }\n  return null;\n};\nlet isIframe = false;\n/* eslint-disable */\nif (self !== top) {\n  isIframe = true;\n}\n\nexport default {\n  state: {\n    // 是否在iframe中\n    isIframe,\n    // 合约列表\n    contractList: null,\n    // 合约列表 MAP\n    contractListMap: {},\n    // 合约币对列表\n    contractSymbolList: [],\n    // 存储当前合约信息\n    contractInfo: null,\n    // 前台公共实时信息\n    publicMarkertInfo: {},\n    // 存储当前合约名称\n    contractName: myStorage.get('contractName'),\n    // 存储当前合约币对\n    contractSymbol: null,\n    // 存储当前合约ID\n    contractId: myStorage.get('contractId'),\n    // 用户配置信息\n    futureUserConfig: null,\n    // 是否开通合约\n    openContract: true,\n    // 是否被冻结\n    transStatus: 0,\n    // 当前合约币对 小写带类型\n    coTypeSymbol: setCoTypeSymbol(myStorage.get('contractName')),\n    // 合约价格单位\n    priceUnit: '',\n    // 合约单位(标的货币||张)\n    coUnit: '',\n    // 合约单位类型 1标的货币, 2张 未登录默认是1\n    coUnitType: myStorage.get('coUnitType') || 2,\n    // 合约面值\n    multiplier: '',\n    // 服务器当前时间和本地时间的差\n    serveTimeDiff: 0,\n    // WS URL\n    wsUrl: null,\n    // 数量精度\n    volfix: 0,\n    // 价格精度\n    pricefix: 4,\n    // 保证金币种的精度\n    coinfix: 4,\n    // 合约资产\n    futureAccountBalance: {},\n    // 合约类型文案\n    contractTypeText: {\n      E: '永续',\n      W: '周',\n      N: '次周',\n      M: '月',\n      Q: '季度',\n      H: '混合',\n    },\n    // 合约保证金信息列表\n    marginCoinInfor: null,\n    // 持仓列表\n    positionList: null,\n    // 持仓列表\n    positionListNumber: null,\n    // 币种列表\n    marginCoinList: [],\n    // 可平数量列表 {BUY: 可凭多  SELL：可凭空}\n    activeCanClose: [],\n    // 当前委托列表\n    currentOrderLis: [],\n    // 当前普通单委托数量\n    orderCount: 0,\n    // 当前条件单委托数量\n    triggerOrderCount: 0,\n  },\n  mutations: {\n    // 存储WS地址\n    WS_URL(state, data) {\n      state.wsUrl = data;\n    },\n    // 存储合约列表\n    CO_PUBLIC_INFO(state, data) {\n      state.contractList = data;\n    },\n    // 全部合约币对列表（发送WS send ）\n    CONTRACT_SYMBOL_LIST(state, data) {\n      state.contractSymbolList = data;\n    },\n    //\n    SET_COUNIT_TYPE(state, data) {\n      state.coUnitType = data;\n    },\n    SET_COUNIT_TEXT(state, data) {\n      state.coUnit = data;\n    },\n    // 存储当前合约信息\n    ACTIVE_CONTRACT_DATA(state, data) {\n      state.contractInfo = data;\n      // 合约面值\n      state.multiplier = data.multiplier;\n      // 数量精度 (合约面值后面的小数点的位数)\n      state.volfix = getDigit(data.multiplier);\n      // 合约币对价格精度\n      state.pricefix = data.coinResultVo.symbolPricePrecision;\n      // 保证金币种的精度\n      state.coinfix = data.coinResultVo.marginCoinPrecision;\n      // 配置合约数量默认单位\n      if (!state.futureUserConfig) {\n        if (state.coUnitType === 1) {\n          state.coUnit = data.multiplierCoin;\n        } else {\n          // state.coUnit = '张';\n        }\n      }\n      state.priceUnit = data.quote;\n    },\n    // 存储当前合约名称\n    CONTRACT_NAME(state, data) {\n      state.contractName = data;\n    },\n    // 存储当前合约币对\n    CONTRACT_SYMBOL(state, data) {\n      state.contractSymbol = data;\n    },\n    // 存储当前合约ID\n    CONTRACT_ID(state, data) {\n      state.contractId = data;\n    },\n    CONTRACT_TYPE_SYMBOL(state, data) {\n      state.coTypeSymbol = data;\n    },\n    // 存储用户配置信息\n    GET_USER_CONFIG(state, data) {\n      // 是否开通了合约\n      state.openContract = !!data.openContract;\n      // 是否被冻结\n      state.transStatus = data.transStatus;\n      // 合约单位\n      state.coUnitType = data.coUnit;\n      myStorage.set('coUnitType', data.coUnit);\n      if (data.coUnit === 1) {\n        state.coUnit = data.multiplierCoin;\n      } else {\n        // state.coUnit = '张';\n      }\n      // 用户配置信息\n      state.futureUserConfig = data;\n    },\n    // 服务器当前时间和本地时间的差\n    SERVE_TIME_DIFF(state, data) {\n      // 用户配置信息\n      state.serveTimeDiff = data;\n    },\n    // 前台公共实时信息\n    PUBLIC_MARKER_INFO(state, data) {\n      state.publicMarkertInfo = data;\n    },\n    // 资产详情信息\n    ACCOUNT_BALANCE(state, data) {\n      state.futureAccountBalance = data;\n    },\n    // 抽取 保证金币种信息列表\n    MARGIN_COIN_INFOR(state, data) {\n      state.marginCoinInfor = data;\n    },\n    POSITION_LIST(state, data) {\n      state.positionList = data;\n      state.positionListNumber = data ? data.length : 0;\n    },\n    // 币种列表\n    SYMBOL_LOST(state, data) {\n      state.marginCoinList = data;\n    },\n    // 可平数量列表\n    ACTIVE_CAN_CLOSE(state, data) {\n      state.activeCanClose = data;\n    },\n    // 合约列表信息 MAP\n    CONTRACT_LIST_MAP(state, data) {\n      state.contractListMap = data;\n    },\n    // 当前合约订单列表\n    CURRENT_OTDER_LIST(state, data) {\n      state.currentOrderLis = data;\n    },\n    // 当前普通单委托数量\n    ORDER_COUNT(state, data) {\n      state.orderCount = data;\n    },\n    // 当前条件单委托数量\n    TRIGGER_ORDER_COUNT(state, data) {\n      state.triggerOrderCount = data;\n    },\n  },\n  actions: {\n    // 获取合约列表数据\n    getFutorePublicInfo({ commit, dispatch }) {\n      axios({\n        url: this.state.url.futures.publicInfo,\n        method: 'post',\n        hostType: 'co',\n      }).then((rs) => {\n        if (rs.code === '0') {\n          const { contractList, marginCoinList } = rs.data;\n          setCoMarket(contractList);\n          // 合约 ws地址 支持多域名\n          const tempDomain = document.domain.split('.').slice(-1).join();\n          const tempWs = rs.data.wsUrl.split('.').slice(-1).join().split('/')\n            .slice(0, 1);\n          const ws_url = rs.data.wsUrl.replace(new RegExp(tempWs, 'g'), tempDomain);\n          commit('WS_URL', ws_url);\n          // 设置时间差\n          if (rs.data.currentTimeMillis) {\n            const now = new Date().getTime();\n            commit('SERVE_TIME_DIFF', rs.data.currentTimeMillis - now);\n          }\n          const contractListArr = [];\n          if (contractList && contractList.length) {\n            const symbolList = [];\n            const marginCoinInfor = {};\n            const contractListMap = {};\n            contractList.forEach((item) => {\n              const dataItem = item;\n              const { contractName } = dataItem;\n              // 发送WS send 的时候使用的币对名\n              const symbolArr = contractName.toLowerCase().split('-');\n              const symbol = `${symbolArr[0]}_${symbolArr[1]}${symbolArr[2]}`;\n              symbolList.push(symbol);\n              // wsDatakey 接收WS 数据时 使用的Key\n              dataItem.wsDatakey = symbol;\n              contractListArr.push(dataItem);\n\n              contractListMap[contractName] = dataItem || {};\n              // 保证金币种精度\n              const { marginCoinPrecision, symbolPricePrecision } = dataItem.coinResultVo;\n              contractListMap[contractName].mCionFix = marginCoinPrecision;\n              // 价格精度\n              contractListMap[contractName].priceFix = symbolPricePrecision;\n              // 数量精度（标的货币时使用， 合约面值小数点后面的位数）\n              contractListMap[contractName].volfix = getDigit(dataItem.multiplier);\n\n              // 抽取保证金币种信息\n              marginCoinInfor[dataItem.marginCoin] = {\n                // 保证金币种\n                marginCoin: dataItem.marginCoin,\n                // 保证金币种精度\n                marginCoinPrecision: dataItem.coinResultVo.marginCoinPrecision,\n                // 限制转入\n                fundsInStatus: dataItem.coinResultVo.fundsInStatus,\n                // 限制转出\n                fundsOutStatus: dataItem.coinResultVo.fundsOutStatus,\n              };\n            });\n            // 全部合约列表\n            commit('CO_PUBLIC_INFO', contractListArr);\n            // 全部合约币对列表（发送WS send ）\n            commit('CONTRACT_SYMBOL_LIST', symbolList);\n            // 保存 保证金信息列表\n            commit('MARGIN_COIN_INFOR', marginCoinInfor);\n            // 设置当前合约信息\n            dispatch('setActivePublicInfo');\n            // 币种列表\n            commit('SYMBOL_LOST', marginCoinList);\n            // 合约列表信息 MAP\n            commit('CONTRACT_LIST_MAP', contractListMap);\n          }\n        }\n      });\n    },\n    // 存储当前合约信息\n    setActivePublicInfo({ commit, state, dispatch }) {\n      const contractName = myStorage.get('contractName');\n      const { contractList } = state;\n      commit('CONTRACT_NAME', contractName);\n      contractList.forEach((item) => {\n        if (contractName === item.contractName) {\n          // 当前合约ID\n          commit('CONTRACT_ID', item.id);\n          // 当前合约币对大写 不带类型\n          commit('CONTRACT_SYMBOL', item.symbol.replace('-', ''));\n          // 当前合约币对 小写加类型（WS的时候需要用到）\n          const coTypeSymbol = `${item.contractType}_${item.symbol.replace('-', '')}`;\n          commit('CONTRACT_TYPE_SYMBOL', coTypeSymbol.toLowerCase());\n          // 当前合约信息\n          commit('ACTIVE_CONTRACT_DATA', item);\n          dispatch('getPublicMarkertInfo');\n        }\n      });\n    },\n    // 获取用户配置信息\n    getUserConfig({ commit, state }) {\n      if (!state.contractId) {\n        clearInterval(timer);\n        timer = setInterval(() => {\n          if (state.contractId) {\n            clearInterval(timer);\n            axios({\n              url: this.state.url.futures.getUserConfig,\n              method: 'post',\n              hostType: 'co',\n              params: {\n                contractId: state.contractId,\n              },\n            }).then((rs) => {\n              if (rs.code === '0') {\n                console.log('bbb',rs.data)\n                commit('GET_USER_CONFIG', rs.data);\n              }\n            });\n          }\n        }, 500);\n      } else {\n        axios({\n          url: this.state.url.futures.getUserConfig,\n          method: 'post',\n          hostType: 'co',\n          params: {\n            contractId: state.contractId,\n          },\n        }).then((rs) => {\n          if (rs.code === '0') {\n            console.log('aaa',rs.data)\n            commit('GET_USER_CONFIG', rs.data);\n          }\n        });\n      }\n    },\n    // 获取前台公共实时信息\n    getPublicMarkertInfo({ commit, state }) {\n      if (state.contractId) {\n        axios({\n          url: this.state.url.futures.publicMarkertInfo,\n          method: 'post',\n          hostType: 'co',\n          params: {\n            contractId: state.contractId,\n          },\n        }).then((rs) => {\n          if (rs.code === '0') {\n            commit('PUBLIC_MARKER_INFO', rs.data);\n          }\n        });\n      }\n    },\n    // 请求合约资产\n    getAccountBalance({ commit, state }) {\n      if (state.contractInfo) {\n        axios({\n          url: this.state.url.futures.accountBalance,\n          method: 'post',\n          hostType: 'co',\n          params: {\n            marginCoin: state.contractInfo.marginCoin,\n          },\n        }).then((rs) => {\n          if (rs.code === '0') {\n            commit('ACCOUNT_BALANCE', rs.data.accounts[0]);\n          }\n        });\n      }\n    },\n    // 获取持仓列表+资产\n    getPositionList({ commit }) {\n      axios({\n        url: this.state.url.futures.getAssetsList,\n        method: 'post',\n        hostType: 'co',\n        params: {},\n      }).then((rs) => {\n        if (rs.code === '0' && rs.data) {\n          const { positionList, accountList } = rs.data;\n          // 资产列表\n          if (accountList && accountList.length) {\n            const data = {};\n            accountList.forEach((item) => {\n              data[item.symbol] = item;\n            });\n            commit('ACCOUNT_BALANCE', data);\n          } else {\n            commit('ACCOUNT_BALANCE', null);\n          }\n\n          // 持仓列表\n          commit('POSITION_LIST', positionList);\n          if (positionList && positionList.length) {\n            // 可平数量\n            const activeCanClose = {};\n            positionList.forEach((item) => {\n              if (activeCanClose[item.contractName]) {\n                activeCanClose[item.contractName][item.orderSide] = item.canCloseVolume;\n              } else {\n                activeCanClose[item.contractName] = {\n                  [item.orderSide]: item.canCloseVolume,\n                };\n              }\n            });\n            // 可平数量\n            commit('ACTIVE_CAN_CLOSE', activeCanClose);\n          }\n        }\n      });\n    },\n    // 领取赠金\n    getReceiveCoupon({ dispatch }) {\n      axios({\n        url: this.state.url.futures.receiveCoupon,\n        method: 'post',\n        hostType: 'co',\n        params: {},\n      }).then((rs) => {\n        if (rs.code === '0') {\n          dispatch('getUserConfig');\n        }\n      });\n    },\n    // 获取用户委托计数\n    getUserOrderCount({ commit, state }) {\n      axios({\n        url: this.state.url.futures.getUserOrderCount,\n        method: 'post',\n        hostType: 'co',\n        params: {\n          contractId: state.contractId,\n        },\n      }).then((rs) => {\n        if (rs.code === '0') {\n          commit('ORDER_COUNT', rs.data.orderCount);\n          commit('TRIGGER_ORDER_COUNT', rs.data.triggerOrderCount);\n        }\n      });\n    },\n\n  },\n\n};\n"]}]}