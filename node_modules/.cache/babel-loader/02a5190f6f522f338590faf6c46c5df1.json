{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/personal/broker/broker/broker.js","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/personal/broker/broker/broker.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport { fixD, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'broker',\n  data: function data() {\n    return {\n      headClasses: '',\n      bodyClasses: '',\n      tableLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      backgroundImg: \"background: url(\".concat(imgMap.jjrNeaderBg, \")  center bottom no-repeat #0E1A2E\"),\n      backgroundImg2: \"background: url(\".concat(imgMap.broker_title_bg, \") center bottom no-repeat #0E1A2E;background-size: 100% 70%;\"),\n      tableData: {},\n      tableType: 'agent_data',\n      searchValue: '',\n      calendarData: null,\n      // 筛选币种\n      coinValue: '',\n      typeValue: null,\n      // 直接邀请人数\n      userCount: 0,\n      // 间接邀请人数\n      indirect: 0,\n      isDiractShow: false,\n      // 本月总收入\n      allBonusAmount: null,\n      allBonusCoin: 'BTC',\n      errorHave: false,\n      pagination: {\n        // 翻页数据\n        count: 0,\n        // 总数量\n        pageSize: 10,\n        // 每页显示条数\n        page: 1 // 当前页数\n\n      },\n      symbolType: this.$t('broker.symbolType'),\n      type: this.$t('broker.type'),\n      vuserName: '' // 用户名称\n\n    };\n  },\n  watch: {\n    userInfo: {\n      immediate: true,\n      handler: function handler(v) {\n        if (v) {\n          this.userInfoReady();\n        }\n      }\n    },\n    // isLogin(val) {\n    //   if (val) {\n    //     this.getData();\n    //   }\n    // },\n    coinOPtion: function coinOPtion(value) {\n      if (value.length) {\n        this.coinValue = 'USDT';\n      }\n    },\n    coinValue: function coinValue(value) {\n      if (value) {\n        this.getData();\n      }\n    },\n    typeValue: function typeValue(value) {\n      if (value && this.searchValue) {\n        this.getData();\n      }\n    }\n  },\n  computed: {\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo;\n    },\n    promptText: function promptText() {\n      switch (this.typeValue) {\n        case 1:\n          return this.$t('broker.promptText1');\n        // '请输入UID';\n\n        case 2:\n          return this.$t('broker.promptText2');\n        // '请输入手机号';\n\n        default:\n          return this.$t('broker.promptText3');\n        // '请输入邮箱';\n      }\n    },\n    timeText: function timeText() {\n      return this.$t('broker.time');\n    },\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    username: function username() {\n      if (this.$store.state.baseData.userInfo) {\n        return this.$store.state.baseData.userInfo.agentRoleName;\n      }\n\n      return false;\n    },\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    coinOPtion: function coinOPtion() {\n      var _this = this;\n\n      var arr = [];\n\n      if (this.coinList) {\n        var coinList = Object.keys(this.coinList);\n        coinList.forEach(function (item) {\n          arr.push({\n            value: getCoinShowName(_this.coinList[item].name, _this.coinList),\n            code: _this.coinList[item].name\n          });\n        });\n        return arr;\n      }\n\n      return [];\n    },\n    typeOption: function typeOption() {\n      return [{\n        value: 'UID',\n        code: 1\n      }, {\n        value: this.$t('broker.phoneeNumber'),\n        code: 2\n      }, {\n        value: this.$t('broker.email'),\n        code: 3\n      }];\n    },\n    tabList: function tabList() {\n      return [{\n        key: 'agent_data',\n        text: this.$t('broker.remaid')\n      }, {\n        key: 'agent_account',\n        text: this.$t('broker.agentAccount')\n      }];\n    },\n    columns: function columns() {\n      if (this.tableType === 'agent_data') {\n        return [{\n          title: 'UID',\n          width: '100px'\n        }, {\n          title: this.$t('broker.phoneeNumber'),\n          width: '260px'\n        }, {\n          title: this.$t('broker.email'),\n          width: '260px'\n        }, {\n          title: this.$t('broker.tier'),\n          width: '100px'\n        }, {\n          title: \"\".concat(this.$t('broker.fee'), \"(\").concat(getCoinShowName(this.coinValue, this.coinList), \")\"),\n          width: '150px'\n        }, {\n          title: \"\".concat(this.$t('broker.amount'), \"(\").concat(getCoinShowName(this.allBonusCoin, this.coinList), \")\"),\n          width: '150px'\n        }, {\n          title: this.$t('broker.opera'),\n          width: '160px',\n          classes: 'lastTh'\n        }];\n      }\n\n      return [{\n        title: 'UID',\n        width: '8%'\n      }, {\n        title: this.$t('broker.phoneeNumber'),\n        width: '22%'\n      }, {\n        title: this.$t('broker.email'),\n        width: '26%'\n      }, {\n        title: this.$t('broker.tier'),\n        width: '22%'\n      }, {\n        title: \"\".concat(this.$t('broker.ccNumber'), \"(\").concat(getCoinShowName(this.coinValue, this.coinList), \")\"),\n        width: '22%'\n      }];\n    },\n    dataList: function dataList() {\n      var _this2 = this;\n\n      if (this.tableData && this.tableData.length) {\n        var dataArr = [];\n        this.tableData.forEach(function (item) {\n          if (_this2.tableType === 'agent_data') {\n            dataArr.push({\n              id: item.uid,\n              data: [item.uid, !item.mobileNumber ? '/' : item.mobileNumber, !item.email ? '/' : item.email, item.level, _this2.fixDFun(item.feeAmount, _this2.coinValue), _this2.fixDFun(item.bonusAmount, _this2.coinValue), [{\n                type: 'button',\n                text: _this2.$t('broker.view'),\n                iconClass: [''],\n                eventType: 'view',\n                classes: []\n              }]]\n            });\n          } else {\n            dataArr.push({\n              id: item.uid,\n              data: [item.uid, // UID\n              !item.mobileNumber ? '/' : item.mobileNumber, // 手机号\n              !item.email ? '/' : item.email, // 邮箱\n              item.level, // 层级\n              _this2.fixDFun(item.amount, _this2.coinValue) // 持仓量\n              ]\n            });\n          }\n        });\n        return dataArr;\n      }\n\n      return [];\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.coinOPtion) {\n        this.coinValue = 'USDT';\n      }\n\n      this.getData();\n    },\n    fixDFun: function fixDFun(val, symbol) {\n      if (this.showPrecision(symbol)) {\n        return fixD(val, this.showPrecision(symbol));\n      }\n\n      return val;\n    },\n    showPrecision: function showPrecision(symbol) {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        var coinList = this.$store.state.baseData.market.coinList;\n\n        if (coinList[symbol]) {\n          var precision = coinList[symbol].showPrecision;\n\n          if (precision) {\n            return precision;\n          }\n        }\n      }\n\n      return 4;\n    },\n    userInfoReady: function userInfoReady() {\n      this.vuserName = this.userInfo.mobileNumber !== '' ? this.userInfo.mobileNumber : this.userInfo.email; // 有电话号码显示电话号码,无则显示邮箱\n    },\n    // 翻页事件\n    pagechange: function pagechange(num) {\n      this.pagination.page = num;\n      this.getData();\n    },\n    // 请求数据\n    getData: function getData(search) {\n      var _this3 = this;\n\n      if (search) {\n        this.pagination.page = 1;\n      }\n\n      this.tableLoading = true;\n      var url = this.$store.state.url.common.agent_data_query;\n      var params = {\n        pageNum: this.pagination.page,\n        coinName: this.coinValue || 'USDT',\n        keyword_type: this.typeValue || 1,\n        keyword: this.searchValue\n      };\n\n      if (this.tableType === 'agent_account') {\n        url = this.$store.state.url.common.agent_account_query;\n        params.dayTime = this.calendarData.replace(/\\//g, '-');\n      }\n\n      this.axios({\n        url: url,\n        params: params,\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          _this3.tableData = data.data.mapList;\n          _this3.pagination.count = data.data.count;\n\n          if (_this3.tableType === 'agent_data') {\n            _this3.userCount = data.data.userCount;\n\n            if (data.data.inviteNum || data.data.inviteNum === 0) {\n              if (data.data.inviteNum !== -1) {\n                _this3.indirect = data.data.inviteNum;\n                _this3.isDiractShow = true;\n              }\n            }\n\n            _this3.allBonusAmount = data.data.allBonusAmount;\n            _this3.allBonusCoin = data.data.allBonusCoin;\n          }\n        }\n\n        _this3.tableLoading = false;\n      });\n    },\n    // 切换类型\n    switcherType: function switcherType(type) {\n      this.tableType = type;\n      this.typeValue = '';\n      this.searchValue = '';\n      this.coinValue = 'USDT';\n      this.calendarData = '';\n      this.pagination.page = 1;\n      this.getData();\n    },\n    // 搜索输入事件\n    inputLineChange: function inputLineChange(value, name) {\n      this[name] = value;\n\n      if (this.typeValue) {\n        this.getData(true);\n      }\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          return v[j];\n        });\n      });\n    },\n    // 搜索输入框回车事件\n\n    /*      inputKeyup() {\r\n        if (this.typeValue) {\r\n          this.getData(true);\r\n        }\r\n      }, */\n    // 选择时间\n    onChangeCalendar: function onChangeCalendar(data) {\n      this.calendarData = data;\n    },\n    // select 选择事件\n    selectOnChange: function selectOnChange(data, name) {\n      this[name] = data.code;\n    },\n    goViewPage: function goViewPage(type, data) {\n      this.$router.push(\"/broker/\".concat(data));\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/personal/broker/broker/broker.js"],"names":["fixD","getCoinShowName","colorMap","imgMap","name","data","headClasses","bodyClasses","tableLoading","backgroundImg","jjrNeaderBg","backgroundImg2","broker_title_bg","tableData","tableType","searchValue","calendarData","coinValue","typeValue","userCount","indirect","isDiractShow","allBonusAmount","allBonusCoin","errorHave","pagination","count","pageSize","page","symbolType","$t","type","vuserName","watch","userInfo","immediate","handler","v","userInfoReady","coinOPtion","value","length","getData","computed","$store","state","baseData","promptText","timeText","isLogin","username","agentRoleName","coinList","market","arr","Object","keys","forEach","item","push","code","typeOption","tabList","key","text","columns","title","width","classes","dataList","dataArr","id","uid","mobileNumber","email","level","fixDFun","feeAmount","bonusAmount","iconClass","eventType","amount","methods","init","val","symbol","showPrecision","precision","pagechange","num","search","url","common","agent_data_query","params","pageNum","coinName","keyword_type","keyword","agent_account_query","dayTime","replace","axios","method","then","mapList","inviteNum","switcherType","inputLineChange","formatJson","filterVal","jsonData","map","j","onChangeCalendar","selectOnChange","goViewPage","$router"],"mappings":";;;;AAAA,SACEA,IADF,EAEEC,eAFF,EAGEC,QAHF,EAIEC,MAJF,QAKO,SALP;AAQA,eAAe;AACbC,EAAAA,IAAI,EAAE,QADO;AAEbC,EAAAA,IAFa,kBAEN;AACL,WAAO;AACLC,MAAAA,WAAW,EAAE,EADR;AAELC,MAAAA,WAAW,EAAE,EAFR;AAGLC,MAAAA,YAAY,EAAE,IAHT;AAILL,MAAAA,MAAM,EAANA,MAJK;AAKLD,MAAAA,QAAQ,EAARA,QALK;AAMLO,MAAAA,aAAa,4BAAqBN,MAAM,CAACO,WAA5B,uCANR;AAOLC,MAAAA,cAAc,4BAAqBR,MAAM,CAACS,eAA5B,iEAPT;AAQLC,MAAAA,SAAS,EAAE,EARN;AASLC,MAAAA,SAAS,EAAE,YATN;AAULC,MAAAA,WAAW,EAAE,EAVR;AAWLC,MAAAA,YAAY,EAAE,IAXT;AAYL;AACAC,MAAAA,SAAS,EAAE,EAbN;AAcLC,MAAAA,SAAS,EAAE,IAdN;AAeL;AACAC,MAAAA,SAAS,EAAE,CAhBN;AAiBL;AACAC,MAAAA,QAAQ,EAAE,CAlBL;AAmBLC,MAAAA,YAAY,EAAE,KAnBT;AAoBL;AACAC,MAAAA,cAAc,EAAE,IArBX;AAsBLC,MAAAA,YAAY,EAAE,KAtBT;AAuBLC,MAAAA,SAAS,EAAE,KAvBN;AAwBLC,MAAAA,UAAU,EAAE;AAAE;AACZC,QAAAA,KAAK,EAAE,CADG;AACA;AACVC,QAAAA,QAAQ,EAAE,EAFA;AAEI;AACdC,QAAAA,IAAI,EAAE,CAHI,CAGD;;AAHC,OAxBP;AA6BLC,MAAAA,UAAU,EAAE,KAAKC,EAAL,CAAQ,mBAAR,CA7BP;AA8BLC,MAAAA,IAAI,EAAE,KAAKD,EAAL,CAAQ,aAAR,CA9BD;AA+BLE,MAAAA,SAAS,EAAE,EA/BN,CA+BU;;AA/BV,KAAP;AAiCD,GApCY;AAqCbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,SAAS,EAAE,IADH;AAERC,MAAAA,OAFQ,mBAEAC,CAFA,EAEG;AACT,YAAIA,CAAJ,EAAO;AACL,eAAKC,aAAL;AACD;AACF;AANO,KADL;AASL;AACA;AACA;AACA;AACA;AACAC,IAAAA,UAdK,sBAcMC,KAdN,EAca;AAChB,UAAIA,KAAK,CAACC,MAAV,EAAkB;AAChB,aAAKxB,SAAL,GAAiB,MAAjB;AACD;AACF,KAlBI;AAmBLA,IAAAA,SAnBK,qBAmBKuB,KAnBL,EAmBY;AACf,UAAIA,KAAJ,EAAW;AACT,aAAKE,OAAL;AACD;AACF,KAvBI;AAwBLxB,IAAAA,SAxBK,qBAwBKsB,KAxBL,EAwBY;AACf,UAAIA,KAAK,IAAI,KAAKzB,WAAlB,EAA+B;AAC7B,aAAK2B,OAAL;AACD;AACF;AA5BI,GArCM;AAmEbC,EAAAA,QAAQ,EAAE;AACRT,IAAAA,QADQ,sBACG;AACT,aAAO,KAAKU,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BZ,QAAlC;AACD,KAHO;AAIRa,IAAAA,UAJQ,wBAIK;AACX,cAAQ,KAAK7B,SAAb;AACE,aAAK,CAAL;AACE,iBAAO,KAAKY,EAAL,CAAQ,oBAAR,CAAP;AAAsC;;AACxC,aAAK,CAAL;AACE,iBAAO,KAAKA,EAAL,CAAQ,oBAAR,CAAP;AAAsC;;AACxC;AACE,iBAAO,KAAKA,EAAL,CAAQ,oBAAR,CAAP;AAAsC;AAN1C;AAQD,KAbO;AAcRkB,IAAAA,QAdQ,sBAcG;AACT,aAAO,KAAKlB,EAAL,CAAQ,aAAR,CAAP;AACD,KAhBO;AAiBRmB,IAAAA,OAjBQ,qBAiBE;AACR,aAAO,KAAKL,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BG,OAAlC;AACD,KAnBO;AAoBRC,IAAAA,QApBQ,sBAoBG;AACT,UAAI,KAAKN,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BZ,QAA/B,EAAyC;AACvC,eAAO,KAAKU,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BZ,QAA3B,CAAoCiB,aAA3C;AACD;;AACD,aAAO,KAAP;AACD,KAzBO;AA0BRC,IAAAA,QA1BQ,sBA0BG;AACT,UAAI,KAAKR,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BO,MAA/B,EAAuC;AACrC,eAAO,KAAKT,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BO,MAA3B,CAAkCD,QAAzC;AACD;;AACD,aAAO,IAAP;AACD,KA/BO;AAgCRb,IAAAA,UAhCQ,wBAgCK;AAAA;;AACX,UAAMe,GAAG,GAAG,EAAZ;;AACA,UAAI,KAAKF,QAAT,EAAmB;AACjB,YAAMA,QAAQ,GAAGG,MAAM,CAACC,IAAP,CAAY,KAAKJ,QAAjB,CAAjB;AACAA,QAAAA,QAAQ,CAACK,OAAT,CAAiB,UAACC,IAAD,EAAU;AACzBJ,UAAAA,GAAG,CAACK,IAAJ,CAAS;AACPnB,YAAAA,KAAK,EAAEvC,eAAe,CAAC,KAAI,CAACmD,QAAL,CAAcM,IAAd,EAAoBtD,IAArB,EAA2B,KAAI,CAACgD,QAAhC,CADf;AAEPQ,YAAAA,IAAI,EAAE,KAAI,CAACR,QAAL,CAAcM,IAAd,EAAoBtD;AAFnB,WAAT;AAID,SALD;AAMA,eAAOkD,GAAP;AACD;;AACD,aAAO,EAAP;AACD,KA7CO;AA8CRO,IAAAA,UA9CQ,wBA8CK;AACX,aAAO,CACL;AACErB,QAAAA,KAAK,EAAE,KADT;AAEEoB,QAAAA,IAAI,EAAE;AAFR,OADK,EAKL;AACEpB,QAAAA,KAAK,EAAE,KAAKV,EAAL,CAAQ,qBAAR,CADT;AAEE8B,QAAAA,IAAI,EAAE;AAFR,OALK,EASL;AACEpB,QAAAA,KAAK,EAAE,KAAKV,EAAL,CAAQ,cAAR,CADT;AAEE8B,QAAAA,IAAI,EAAE;AAFR,OATK,CAAP;AAcD,KA7DO;AA8DRE,IAAAA,OA9DQ,qBA8DE;AACR,aAAO,CACL;AACEC,QAAAA,GAAG,EAAE,YADP;AAEEC,QAAAA,IAAI,EAAE,KAAKlC,EAAL,CAAQ,eAAR;AAFR,OADK,EAKL;AACEiC,QAAAA,GAAG,EAAE,eADP;AAEEC,QAAAA,IAAI,EAAE,KAAKlC,EAAL,CAAQ,qBAAR;AAFR,OALK,CAAP;AAUD,KAzEO;AA0ERmC,IAAAA,OA1EQ,qBA0EE;AACR,UAAI,KAAKnD,SAAL,KAAmB,YAAvB,EAAqC;AACnC,eAAO,CACL;AACEoD,UAAAA,KAAK,EAAE,KADT;AAEEC,UAAAA,KAAK,EAAE;AAFT,SADK,EAKL;AACED,UAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,qBAAR,CADT;AAEEqC,UAAAA,KAAK,EAAE;AAFT,SALK,EASL;AACED,UAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,cAAR,CADT;AAEEqC,UAAAA,KAAK,EAAE;AAFT,SATK,EAaL;AACED,UAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,aAAR,CADT;AAEEqC,UAAAA,KAAK,EAAE;AAFT,SAbK,EAiBL;AACED,UAAAA,KAAK,YAAK,KAAKpC,EAAL,CAAQ,YAAR,CAAL,cAA8B7B,eAAe,CAAC,KAAKgB,SAAN,EAAiB,KAAKmC,QAAtB,CAA7C,MADP;AAEEe,UAAAA,KAAK,EAAE;AAFT,SAjBK,EAqBL;AACED,UAAAA,KAAK,YAAK,KAAKpC,EAAL,CAAQ,eAAR,CAAL,cAAiC7B,eAAe,CAAC,KAAKsB,YAAN,EAAoB,KAAK6B,QAAzB,CAAhD,MADP;AAEEe,UAAAA,KAAK,EAAE;AAFT,SArBK,EAyBL;AACED,UAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,cAAR,CADT;AAEEqC,UAAAA,KAAK,EAAE,OAFT;AAGEC,UAAAA,OAAO,EAAE;AAHX,SAzBK,CAAP;AA+BD;;AACD,aAAO,CACL;AACEF,QAAAA,KAAK,EAAE,KADT;AAEEC,QAAAA,KAAK,EAAE;AAFT,OADK,EAKL;AACED,QAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,qBAAR,CADT;AAEEqC,QAAAA,KAAK,EAAE;AAFT,OALK,EASL;AACED,QAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,cAAR,CADT;AAEEqC,QAAAA,KAAK,EAAE;AAFT,OATK,EAaL;AACED,QAAAA,KAAK,EAAE,KAAKpC,EAAL,CAAQ,aAAR,CADT;AAEEqC,QAAAA,KAAK,EAAE;AAFT,OAbK,EAiBL;AACED,QAAAA,KAAK,YAAK,KAAKpC,EAAL,CAAQ,iBAAR,CAAL,cAAmC7B,eAAe,CAAC,KAAKgB,SAAN,EAAiB,KAAKmC,QAAtB,CAAlD,MADP;AAEEe,QAAAA,KAAK,EAAE;AAFT,OAjBK,CAAP;AAsBD,KAlIO;AAmIRE,IAAAA,QAnIQ,sBAmIG;AAAA;;AACT,UAAI,KAAKxD,SAAL,IAAkB,KAAKA,SAAL,CAAe4B,MAArC,EAA6C;AAC3C,YAAM6B,OAAO,GAAG,EAAhB;AACA,aAAKzD,SAAL,CAAe4C,OAAf,CAAuB,UAACC,IAAD,EAAU;AAC/B,cAAI,MAAI,CAAC5C,SAAL,KAAmB,YAAvB,EAAqC;AACnCwD,YAAAA,OAAO,CAACX,IAAR,CAAa;AACXY,cAAAA,EAAE,EAAEb,IAAI,CAACc,GADE;AAEXnE,cAAAA,IAAI,EAAE,CACJqD,IAAI,CAACc,GADD,EAEJ,CAACd,IAAI,CAACe,YAAN,GAAqB,GAArB,GAA2Bf,IAAI,CAACe,YAF5B,EAGJ,CAACf,IAAI,CAACgB,KAAN,GAAc,GAAd,GAAoBhB,IAAI,CAACgB,KAHrB,EAIJhB,IAAI,CAACiB,KAJD,EAKJ,MAAI,CAACC,OAAL,CAAalB,IAAI,CAACmB,SAAlB,EAA6B,MAAI,CAAC5D,SAAlC,CALI,EAMJ,MAAI,CAAC2D,OAAL,CAAalB,IAAI,CAACoB,WAAlB,EAA+B,MAAI,CAAC7D,SAApC,CANI,EAOJ,CACE;AACEc,gBAAAA,IAAI,EAAE,QADR;AAEEiC,gBAAAA,IAAI,EAAE,MAAI,CAAClC,EAAL,CAAQ,aAAR,CAFR;AAGEiD,gBAAAA,SAAS,EAAE,CAAC,EAAD,CAHb;AAIEC,gBAAAA,SAAS,EAAE,MAJb;AAKEZ,gBAAAA,OAAO,EAAE;AALX,eADF,CAPI;AAFK,aAAb;AAoBD,WArBD,MAqBO;AACLE,YAAAA,OAAO,CAACX,IAAR,CAAa;AACXY,cAAAA,EAAE,EAAEb,IAAI,CAACc,GADE;AAEXnE,cAAAA,IAAI,EAAE,CACJqD,IAAI,CAACc,GADD,EACM;AACV,eAACd,IAAI,CAACe,YAAN,GAAqB,GAArB,GAA2Bf,IAAI,CAACe,YAF5B,EAE0C;AAC9C,eAACf,IAAI,CAACgB,KAAN,GAAc,GAAd,GAAoBhB,IAAI,CAACgB,KAHrB,EAG4B;AAChChB,cAAAA,IAAI,CAACiB,KAJD,EAIQ;AACZ,cAAA,MAAI,CAACC,OAAL,CAAalB,IAAI,CAACuB,MAAlB,EAA0B,MAAI,CAAChE,SAA/B,CALI,CAKuC;AALvC;AAFK,aAAb;AAUD;AACF,SAlCD;AAmCA,eAAOqD,OAAP;AACD;;AACD,aAAO,EAAP;AACD;AA5KO,GAnEG;AAiPbY,EAAAA,OAAO,EAAE;AACPC,IAAAA,IADO,kBACA;AACL,UAAI,KAAK5C,UAAT,EAAqB;AACnB,aAAKtB,SAAL,GAAiB,MAAjB;AACD;;AACD,WAAKyB,OAAL;AACD,KANM;AAOPkC,IAAAA,OAPO,mBAOCQ,GAPD,EAOMC,MAPN,EAOc;AACnB,UAAI,KAAKC,aAAL,CAAmBD,MAAnB,CAAJ,EAAgC;AAC9B,eAAOrF,IAAI,CAACoF,GAAD,EAAM,KAAKE,aAAL,CAAmBD,MAAnB,CAAN,CAAX;AACD;;AACD,aAAOD,GAAP;AACD,KAZM;AAaPE,IAAAA,aAbO,yBAaOD,MAbP,EAae;AACpB,UAAI,KAAKzC,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,IAA8B,KAAKF,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BO,MAA7D,EAAqE;AACnE,YAAQD,QAAR,GAAqB,KAAKR,MAAL,CAAYC,KAAZ,CAAkBC,QAAlB,CAA2BO,MAAhD,CAAQD,QAAR;;AACA,YAAIA,QAAQ,CAACiC,MAAD,CAAZ,EAAsB;AACpB,cAAME,SAAS,GAAGnC,QAAQ,CAACiC,MAAD,CAAR,CAAiBC,aAAnC;;AACA,cAAIC,SAAJ,EAAe;AACb,mBAAOA,SAAP;AACD;AACF;AACF;;AACD,aAAO,CAAP;AACD,KAxBM;AAyBPjD,IAAAA,aAzBO,2BAyBS;AACd,WAAKN,SAAL,GAAkB,KAAKE,QAAL,CAAcuC,YAAd,KAA+B,EAAhC,GAAsC,KAAKvC,QAAL,CAAcuC,YAApD,GAAmE,KAAKvC,QAAL,CAAcwC,KAAlG,CADc,CAC0F;AACzG,KA3BM;AA4BP;AACAc,IAAAA,UA7BO,sBA6BIC,GA7BJ,EA6BS;AACd,WAAKhE,UAAL,CAAgBG,IAAhB,GAAuB6D,GAAvB;AACA,WAAK/C,OAAL;AACD,KAhCM;AAiCP;AACAA,IAAAA,OAlCO,mBAkCCgD,MAlCD,EAkCS;AAAA;;AACd,UAAIA,MAAJ,EAAY;AACV,aAAKjE,UAAL,CAAgBG,IAAhB,GAAuB,CAAvB;AACD;;AACD,WAAKpB,YAAL,GAAoB,IAApB;AACA,UAAImF,GAAG,GAAG,KAAK/C,MAAL,CAAYC,KAAZ,CAAkB8C,GAAlB,CAAsBC,MAAtB,CAA6BC,gBAAvC;AACA,UAAMC,MAAM,GAAG;AACbC,QAAAA,OAAO,EAAE,KAAKtE,UAAL,CAAgBG,IADZ;AAEboE,QAAAA,QAAQ,EAAE,KAAK/E,SAAL,IAAkB,MAFf;AAGbgF,QAAAA,YAAY,EAAE,KAAK/E,SAAL,IAAkB,CAHnB;AAIbgF,QAAAA,OAAO,EAAE,KAAKnF;AAJD,OAAf;;AAMA,UAAI,KAAKD,SAAL,KAAmB,eAAvB,EAAwC;AACtC6E,QAAAA,GAAG,GAAG,KAAK/C,MAAL,CAAYC,KAAZ,CAAkB8C,GAAlB,CAAsBC,MAAtB,CAA6BO,mBAAnC;AACAL,QAAAA,MAAM,CAACM,OAAP,GAAiB,KAAKpF,YAAL,CAAkBqF,OAAlB,CAA0B,KAA1B,EAAiC,GAAjC,CAAjB;AACD;;AACD,WAAKC,KAAL,CAAW;AACTX,QAAAA,GAAG,EAAHA,GADS;AAETG,QAAAA,MAAM,EAANA,MAFS;AAGTS,QAAAA,MAAM,EAAE;AAHC,OAAX,EAIGC,IAJH,CAIQ,UAACnG,IAAD,EAAU;AAChB,YAAIA,IAAI,CAACuD,IAAL,KAAc,GAAlB,EAAuB;AACrB,UAAA,MAAI,CAAC/C,SAAL,GAAiBR,IAAI,CAACA,IAAL,CAAUoG,OAA3B;AACA,UAAA,MAAI,CAAChF,UAAL,CAAgBC,KAAhB,GAAwBrB,IAAI,CAACA,IAAL,CAAUqB,KAAlC;;AACA,cAAI,MAAI,CAACZ,SAAL,KAAmB,YAAvB,EAAqC;AACnC,YAAA,MAAI,CAACK,SAAL,GAAiBd,IAAI,CAACA,IAAL,CAAUc,SAA3B;;AACA,gBAAId,IAAI,CAACA,IAAL,CAAUqG,SAAV,IAAuBrG,IAAI,CAACA,IAAL,CAAUqG,SAAV,KAAwB,CAAnD,EAAsD;AACpD,kBAAIrG,IAAI,CAACA,IAAL,CAAUqG,SAAV,KAAwB,CAAC,CAA7B,EAAgC;AAC9B,gBAAA,MAAI,CAACtF,QAAL,GAAgBf,IAAI,CAACA,IAAL,CAAUqG,SAA1B;AACA,gBAAA,MAAI,CAACrF,YAAL,GAAoB,IAApB;AACD;AACF;;AACD,YAAA,MAAI,CAACC,cAAL,GAAsBjB,IAAI,CAACA,IAAL,CAAUiB,cAAhC;AACA,YAAA,MAAI,CAACC,YAAL,GAAoBlB,IAAI,CAACA,IAAL,CAAUkB,YAA9B;AACD;AACF;;AACD,QAAA,MAAI,CAACf,YAAL,GAAoB,KAApB;AACD,OArBD;AAsBD,KAxEM;AAyEP;AACAmG,IAAAA,YA1EO,wBA0EM5E,IA1EN,EA0EY;AACjB,WAAKjB,SAAL,GAAiBiB,IAAjB;AACA,WAAKb,SAAL,GAAiB,EAAjB;AACA,WAAKH,WAAL,GAAmB,EAAnB;AACA,WAAKE,SAAL,GAAiB,MAAjB;AACA,WAAKD,YAAL,GAAoB,EAApB;AACA,WAAKS,UAAL,CAAgBG,IAAhB,GAAuB,CAAvB;AACA,WAAKc,OAAL;AACD,KAlFM;AAmFP;AACAkE,IAAAA,eApFO,2BAoFSpE,KApFT,EAoFgBpC,IApFhB,EAoFsB;AAC3B,WAAKA,IAAL,IAAaoC,KAAb;;AACA,UAAI,KAAKtB,SAAT,EAAoB;AAClB,aAAKwB,OAAL,CAAa,IAAb;AACD;AACF,KAzFM;AA0FPmE,IAAAA,UA1FO,sBA0FIC,SA1FJ,EA0FeC,QA1Ff,EA0FyB;AAC9B,aAAOA,QAAQ,CAACC,GAAT,CAAa,UAAC3E,CAAD;AAAA,eAAOyE,SAAS,CAACE,GAAV,CAAc,UAACC,CAAD;AAAA,iBAAO5E,CAAC,CAAC4E,CAAD,CAAR;AAAA,SAAd,CAAP;AAAA,OAAb,CAAP;AACD,KA5FM;AA6FP;;AACA;AACJ;AACA;AACA;AACA;AACI;AACAC,IAAAA,gBApGO,4BAoGU7G,IApGV,EAoGgB;AACrB,WAAKW,YAAL,GAAoBX,IAApB;AACD,KAtGM;AAuGP;AACA8G,IAAAA,cAxGO,0BAwGQ9G,IAxGR,EAwGcD,IAxGd,EAwGoB;AACzB,WAAKA,IAAL,IAAaC,IAAI,CAACuD,IAAlB;AACD,KA1GM;AA2GPwD,IAAAA,UA3GO,sBA2GIrF,IA3GJ,EA2GU1B,IA3GV,EA2GgB;AACrB,WAAKgH,OAAL,CAAa1D,IAAb,mBAA6BtD,IAA7B;AACD;AA7GM;AAjPI,CAAf","sourcesContent":["import {\r\n  fixD,\r\n  getCoinShowName,\r\n  colorMap,\r\n  imgMap,\r\n} from '@/utils';\r\n\r\n\r\nexport default {\r\n  name: 'broker',\r\n  data() {\r\n    return {\r\n      headClasses: '',\r\n      bodyClasses: '',\r\n      tableLoading: true,\r\n      imgMap,\r\n      colorMap,\r\n      backgroundImg: `background: url(${imgMap.jjrNeaderBg})  center bottom no-repeat #0E1A2E`,\r\n      backgroundImg2: `background: url(${imgMap.broker_title_bg}) center bottom no-repeat #0E1A2E;background-size: 100% 70%;`,\r\n      tableData: {},\r\n      tableType: 'agent_data',\r\n      searchValue: '',\r\n      calendarData: null,\r\n      // 筛选币种\r\n      coinValue: '',\r\n      typeValue: null,\r\n      // 直接邀请人数\r\n      userCount: 0,\r\n      // 间接邀请人数\r\n      indirect: 0,\r\n      isDiractShow: false,\r\n      // 本月总收入\r\n      allBonusAmount: null,\r\n      allBonusCoin: 'BTC',\r\n      errorHave: false,\r\n      pagination: { // 翻页数据\r\n        count: 0, // 总数量\r\n        pageSize: 10, // 每页显示条数\r\n        page: 1, // 当前页数\r\n      },\r\n      symbolType: this.$t('broker.symbolType'),\r\n      type: this.$t('broker.type'),\r\n      vuserName: '', // 用户名称\r\n    };\r\n  },\r\n  watch: {\r\n    userInfo: {\r\n      immediate: true,\r\n      handler(v) {\r\n        if (v) {\r\n          this.userInfoReady();\r\n        }\r\n      },\r\n    },\r\n    // isLogin(val) {\r\n    //   if (val) {\r\n    //     this.getData();\r\n    //   }\r\n    // },\r\n    coinOPtion(value) {\r\n      if (value.length) {\r\n        this.coinValue = 'USDT';\r\n      }\r\n    },\r\n    coinValue(value) {\r\n      if (value) {\r\n        this.getData();\r\n      }\r\n    },\r\n    typeValue(value) {\r\n      if (value && this.searchValue) {\r\n        this.getData();\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.state.baseData.userInfo;\r\n    },\r\n    promptText() {\r\n      switch (this.typeValue) {\r\n        case 1:\r\n          return this.$t('broker.promptText1'); // '请输入UID';\r\n        case 2:\r\n          return this.$t('broker.promptText2'); // '请输入手机号';\r\n        default:\r\n          return this.$t('broker.promptText3'); // '请输入邮箱';\r\n      }\r\n    },\r\n    timeText() {\r\n      return this.$t('broker.time');\r\n    },\r\n    isLogin() {\r\n      return this.$store.state.baseData.isLogin;\r\n    },\r\n    username() {\r\n      if (this.$store.state.baseData.userInfo) {\r\n        return this.$store.state.baseData.userInfo.agentRoleName;\r\n      }\r\n      return false;\r\n    },\r\n    coinList() {\r\n      if (this.$store.state.baseData.market) {\r\n        return this.$store.state.baseData.market.coinList;\r\n      }\r\n      return null;\r\n    },\r\n    coinOPtion() {\r\n      const arr = [];\r\n      if (this.coinList) {\r\n        const coinList = Object.keys(this.coinList);\r\n        coinList.forEach((item) => {\r\n          arr.push({\r\n            value: getCoinShowName(this.coinList[item].name, this.coinList),\r\n            code: this.coinList[item].name,\r\n          });\r\n        });\r\n        return arr;\r\n      }\r\n      return [];\r\n    },\r\n    typeOption() {\r\n      return [\r\n        {\r\n          value: 'UID',\r\n          code: 1,\r\n        },\r\n        {\r\n          value: this.$t('broker.phoneeNumber'),\r\n          code: 2,\r\n        },\r\n        {\r\n          value: this.$t('broker.email'),\r\n          code: 3,\r\n        },\r\n      ];\r\n    },\r\n    tabList() {\r\n      return [\r\n        {\r\n          key: 'agent_data',\r\n          text: this.$t('broker.remaid'),\r\n        },\r\n        {\r\n          key: 'agent_account',\r\n          text: this.$t('broker.agentAccount'),\r\n        },\r\n      ];\r\n    },\r\n    columns() {\r\n      if (this.tableType === 'agent_data') {\r\n        return [\r\n          {\r\n            title: 'UID',\r\n            width: '100px',\r\n          },\r\n          {\r\n            title: this.$t('broker.phoneeNumber'),\r\n            width: '260px',\r\n          },\r\n          {\r\n            title: this.$t('broker.email'),\r\n            width: '260px',\r\n          },\r\n          {\r\n            title: this.$t('broker.tier'),\r\n            width: '100px',\r\n          },\r\n          {\r\n            title: `${this.$t('broker.fee')}(${getCoinShowName(this.coinValue, this.coinList)})`,\r\n            width: '150px',\r\n          },\r\n          {\r\n            title: `${this.$t('broker.amount')}(${getCoinShowName(this.allBonusCoin, this.coinList)})`,\r\n            width: '150px',\r\n          },\r\n          {\r\n            title: this.$t('broker.opera'),\r\n            width: '160px',\r\n            classes: 'lastTh',\r\n          },\r\n        ];\r\n      }\r\n      return [\r\n        {\r\n          title: 'UID',\r\n          width: '8%',\r\n        },\r\n        {\r\n          title: this.$t('broker.phoneeNumber'),\r\n          width: '22%',\r\n        },\r\n        {\r\n          title: this.$t('broker.email'),\r\n          width: '26%',\r\n        },\r\n        {\r\n          title: this.$t('broker.tier'),\r\n          width: '22%',\r\n        },\r\n        {\r\n          title: `${this.$t('broker.ccNumber')}(${getCoinShowName(this.coinValue, this.coinList)})`,\r\n          width: '22%',\r\n        },\r\n      ];\r\n    },\r\n    dataList() {\r\n      if (this.tableData && this.tableData.length) {\r\n        const dataArr = [];\r\n        this.tableData.forEach((item) => {\r\n          if (this.tableType === 'agent_data') {\r\n            dataArr.push({\r\n              id: item.uid,\r\n              data: [\r\n                item.uid,\r\n                !item.mobileNumber ? '/' : item.mobileNumber,\r\n                !item.email ? '/' : item.email,\r\n                item.level,\r\n                this.fixDFun(item.feeAmount, this.coinValue),\r\n                this.fixDFun(item.bonusAmount, this.coinValue),\r\n                [\r\n                  {\r\n                    type: 'button',\r\n                    text: this.$t('broker.view'),\r\n                    iconClass: [''],\r\n                    eventType: 'view',\r\n                    classes: [],\r\n                  },\r\n                ],\r\n              ],\r\n            });\r\n          } else {\r\n            dataArr.push({\r\n              id: item.uid,\r\n              data: [\r\n                item.uid, // UID\r\n                !item.mobileNumber ? '/' : item.mobileNumber, // 手机号\r\n                !item.email ? '/' : item.email, // 邮箱\r\n                item.level, // 层级\r\n                this.fixDFun(item.amount, this.coinValue), // 持仓量\r\n              ],\r\n            });\r\n          }\r\n        });\r\n        return dataArr;\r\n      }\r\n      return [];\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.coinOPtion) {\r\n        this.coinValue = 'USDT';\r\n      }\r\n      this.getData();\r\n    },\r\n    fixDFun(val, symbol) {\r\n      if (this.showPrecision(symbol)) {\r\n        return fixD(val, this.showPrecision(symbol));\r\n      }\r\n      return val;\r\n    },\r\n    showPrecision(symbol) {\r\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\r\n        const { coinList } = this.$store.state.baseData.market;\r\n        if (coinList[symbol]) {\r\n          const precision = coinList[symbol].showPrecision;\r\n          if (precision) {\r\n            return precision;\r\n          }\r\n        }\r\n      }\r\n      return 4;\r\n    },\r\n    userInfoReady() {\r\n      this.vuserName = (this.userInfo.mobileNumber !== '') ? this.userInfo.mobileNumber : this.userInfo.email;// 有电话号码显示电话号码,无则显示邮箱\r\n    },\r\n    // 翻页事件\r\n    pagechange(num) {\r\n      this.pagination.page = num;\r\n      this.getData();\r\n    },\r\n    // 请求数据\r\n    getData(search) {\r\n      if (search) {\r\n        this.pagination.page = 1;\r\n      }\r\n      this.tableLoading = true;\r\n      let url = this.$store.state.url.common.agent_data_query;\r\n      const params = {\r\n        pageNum: this.pagination.page,\r\n        coinName: this.coinValue || 'USDT',\r\n        keyword_type: this.typeValue || 1,\r\n        keyword: this.searchValue,\r\n      };\r\n      if (this.tableType === 'agent_account') {\r\n        url = this.$store.state.url.common.agent_account_query;\r\n        params.dayTime = this.calendarData.replace(/\\//g, '-');\r\n      }\r\n      this.axios({\r\n        url,\r\n        params,\r\n        method: 'post',\r\n      }).then((data) => {\r\n        if (data.code === '0') {\r\n          this.tableData = data.data.mapList;\r\n          this.pagination.count = data.data.count;\r\n          if (this.tableType === 'agent_data') {\r\n            this.userCount = data.data.userCount;\r\n            if (data.data.inviteNum || data.data.inviteNum === 0) {\r\n              if (data.data.inviteNum !== -1) {\r\n                this.indirect = data.data.inviteNum;\r\n                this.isDiractShow = true;\r\n              }\r\n            }\r\n            this.allBonusAmount = data.data.allBonusAmount;\r\n            this.allBonusCoin = data.data.allBonusCoin;\r\n          }\r\n        }\r\n        this.tableLoading = false;\r\n      });\r\n    },\r\n    // 切换类型\r\n    switcherType(type) {\r\n      this.tableType = type;\r\n      this.typeValue = '';\r\n      this.searchValue = '';\r\n      this.coinValue = 'USDT';\r\n      this.calendarData = '';\r\n      this.pagination.page = 1;\r\n      this.getData();\r\n    },\r\n    // 搜索输入事件\r\n    inputLineChange(value, name) {\r\n      this[name] = value;\r\n      if (this.typeValue) {\r\n        this.getData(true);\r\n      }\r\n    },\r\n    formatJson(filterVal, jsonData) {\r\n      return jsonData.map((v) => filterVal.map((j) => v[j]));\r\n    },\r\n    // 搜索输入框回车事件\r\n    /*      inputKeyup() {\r\n        if (this.typeValue) {\r\n          this.getData(true);\r\n        }\r\n      }, */\r\n    // 选择时间\r\n    onChangeCalendar(data) {\r\n      this.calendarData = data;\r\n    },\r\n    // select 选择事件\r\n    selectOnChange(data, name) {\r\n      this[name] = data.code;\r\n    },\r\n    goViewPage(type, data) {\r\n      this.$router.push(`/broker/${data}`);\r\n    },\r\n  },\r\n};\r\n"]}]}