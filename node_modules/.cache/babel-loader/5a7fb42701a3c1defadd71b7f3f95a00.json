{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/b2cRecrgeHis/b2cRecrgeHis.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/b2cRecrgeHis/b2cRecrgeHis.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, formatTime, colorMap } from '@/utils';\nexport default {\n  name: 'b2cRecrgeHis',\n  props: {\n    symbol: {\n      default: '',\n      type: String\n    },\n    // 是否为最近\n    lately: {\n      default: false,\n      type: Boolean\n    }\n  },\n  data: function data() {\n    return {\n      colorMap: colorMap,\n      revokeList: [],\n      // 撤销队列\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      tabelLoading: true,\n      tabelList: [],\n      // 提现记录\n      subTableData: [],\n      // 提现记录详情\n      subTableDataId: null,\n      // 提现记录详情ID\n      financeListData: [],\n      imgUrl: '',\n      QRflag: false\n    };\n  },\n  watch: {\n    symbol: function symbol(v) {\n      if (v && this.market) {\n        this.getTableList();\n      }\n    },\n    market: function market(v) {\n      if (v && this.symbol) {\n        this.getTableList();\n      }\n    },\n    paginationObjCurrentPage: function paginationObjCurrentPage() {\n      this.getTableList();\n    }\n  },\n  computed: {\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    paginationObjCurrentPage: function paginationObjCurrentPage() {\n      return this.paginationObj.currentPage;\n    },\n    columns: function columns() {\n      return [{\n        title: this.$t('assets.recharge.RechargeTime'),\n        width: '15%'\n      }, // 提现时间\n      {\n        title: this.$t('assets.recharge.RechargeCoin'),\n        width: '10%'\n      }, // 币种\n      {\n        title: this.$t('assets.b2c.b2cRecrgeHisList1'),\n        width: '18%'\n      }, // 申请数量\n      {\n        title: this.$t('assets.b2c.b2cRecrgeHisList2'),\n        width: '18%'\n      }, // 实际到账\n      {\n        title: this.$t('assets.withdraw.withdrawStatus'),\n        width: '14%'\n      }, // 状态\n      {\n        title: this.$t('assets.withdraw.withdrawOptions'),\n        width: '25%'\n      } // 操作\n      ];\n    },\n    subColumns: function subColumns() {\n      return [this.$t('assets.b2c.b2cRecrgeHisList3'), // 处理时间\n      this.$t('assets.b2c.firstWay'), // 收款方式\n      this.$t('assets.b2c.addressUserName') // 收款人\n      ];\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      if (this.symbol && this.market) {\n        this.getTableList();\n      }\n\n      this.$bus.$on('b2cRecrgeHisGet', function () {\n        _this.tabelLoading = true;\n        _this.paginationObj.currentPage = 1;\n\n        _this.getTableList();\n      });\n    },\n    QRcodeClick: function QRcodeClick() {\n      this.QRflag = false;\n    },\n    showPrecision: function showPrecision(symbol) {\n      var v = 0;\n      var market = this.$store.state.baseData.market;\n\n      if (market && market.coinList && market.coinList[symbol]) {\n        v = market.coinList[symbol].showPrecision;\n      }\n\n      return v;\n    },\n    // 分页器\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n    },\n    // 撤销操作\n    tableClick: function tableClick(type, id) {\n      var _this2 = this;\n\n      if (type === 'revoke') {\n        var even = {};\n        this.tabelList.forEach(function (item) {\n          if (item.id === id) {\n            even = item;\n          }\n        });\n\n        if (this.revokeList.indexOf(even.id) === -1) {\n          this.revokeList.push(even.id);\n          this.axios({\n            url: '/fiat/cancel_deposit',\n            headers: {},\n            params: {\n              id: even.id\n            },\n            method: 'post'\n          }).then(function (data) {\n            var ind = _this2.revokeList.indexOf(even.id);\n\n            _this2.revokeList.splice(ind, 1);\n\n            if (data.code.toString() === '0') {\n              _this2.getTableList();\n\n              _this2.$bus.$emit('tip', {\n                text: data.msg,\n                type: 'success'\n              });\n            } else {\n              _this2.$bus.$emit('tip', {\n                text: data.msg,\n                type: 'error'\n              });\n            }\n          });\n        }\n      }\n\n      if (type === 'subView') {\n        this.subTableDataId = id.id;\n        this.subTableData = [];\n        this.financeListData.forEach(function (item) {\n          if (item.id === _this2.subTableDataId) {\n            _this2.subTableData.push([item.updatedAt ? formatTime(item.updatedAt) : '--', _this2.$t('assets.b2c.bankCard'), // '银行卡',\n            item.userName]);\n          }\n        });\n      }\n\n      if (type === 'seePz') {\n        var _even = {};\n        this.tabelList.forEach(function (item) {\n          if (item.id === id) {\n            _even = item;\n          }\n        });\n        this.imgUrl = _even.transferVoucher;\n        this.QRflag = true;\n      }\n    },\n    handleButton: function handleButton(item) {\n      var arr = [];\n\n      if (item.transferVoucher) {\n        arr.push({\n          type: 'button',\n          // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n          text: this.$t('assets.b2c.seePz'),\n          iconClass: [''],\n          eventType: 'seePz'\n        });\n      }\n\n      if (item.status === 0) {\n        arr.push({\n          type: 'button',\n          // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n          text: this.$t('assets.flowingWater.Cancel'),\n          iconClass: [''],\n          eventType: 'revoke'\n        });\n      }\n\n      arr.push({\n        type: 'subTable',\n        text: this.$t('trade.view'),\n        // 详情\n        eventType: 'subView'\n      });\n      return arr;\n    },\n    getTableList: function getTableList() {\n      var _this3 = this;\n\n      this.axios({\n        // url: '/fiat/deposit/list',\n        url: '/fiat/deposit/list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          symbol: this.symbol === 'all' ? undefined : this.symbol\n        }\n      }).then(function (data) {\n        _this3.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n          _this3.financeListData = data.data.financeList;\n          data.data.financeList.forEach(function (item) {\n            var isOther = item.symbol === 'AIKRW';\n\n            var showPrecision = _this3.showPrecision(item.symbol);\n\n            list.push({\n              id: item.id,\n              transferVoucher: item.transferVoucher,\n              data: [formatTime(item.createdAt), // 时间\n              item.symbol, fixD(item.amount, showPrecision) + (isOther ? ' KRW' : \" \".concat(item.symbol)), // 申请数量\n              \"\".concat(fixD(item.settledAmount, showPrecision), \" \").concat(item.symbol), // 实际到账\n              item.statusText, // 状态\n              _this3.handleButton(item)]\n            });\n          });\n          _this3.tabelList = list; // this.paginationObj.total = data.data.count;\n\n          _this3.paginationObj.total = _this3.lately && data.data.count > 30 ? 30 : data.data.count;\n        }\n      });\n    }\n  }\n};",null]}