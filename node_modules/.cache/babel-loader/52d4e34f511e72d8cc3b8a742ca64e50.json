{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/otcFlowingWater/otcFlowingWater.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/otcFlowingWater/otcFlowingWater.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, colorMap, imgMap, getCoinShowName } from '@/utils';\nexport default {\n  name: 'page-flowingWater',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      type: 'all',\n      // 当前类型\n      symbol: '',\n      // 当前币种\n      tabelList: [],\n      // table数据列表\n      symbolList: [],\n      // 币种选择列表\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      }\n    };\n  },\n  computed: {\n    typeList: function typeList() {\n      return [{\n        code: 'all',\n        value: this.$t('assets.otcFlowingWater.all')\n      }, // 全部\n      {\n        code: '1',\n        value: this.$t('assets.otcFlowingWater.inOtc')\n      }, // 转入场外\n      {\n        code: '2',\n        value: this.$t('assets.otcFlowingWater.outOtc')\n      } // 转出场外\n      ];\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [{\n        title: this.$t('assets.otcFlowingWater.listTime'),\n        width: '20%'\n      }, // 时间\n      {\n        title: this.$t('assets.otcFlowingWater.listCoin'),\n        width: '20%'\n      }, // 币种\n      {\n        title: this.$t('assets.otcFlowingWater.listType'),\n        width: '20%'\n      }, // 类型\n      {\n        title: this.$t('assets.otcFlowingWater.listVolume'),\n        width: '40%'\n      } // 数量\n      ];\n      return list;\n    },\n    // 用于axios的symbol\n    axiosSymbol: function axiosSymbol() {\n      if (this.symbol === 'all') {\n        return null;\n      }\n\n      return this.symbol;\n    },\n    // 用于axios的type\n    axiosType: function axiosType() {\n      if (this.type === 'all') {\n        return null;\n      }\n\n      return this.type;\n    }\n  },\n  watch: {\n    market: function market(v) {\n      if (v) {\n        this.setData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.market) {\n        this.setData();\n      }\n    },\n    symbolChange: function symbolChange(item) {\n      this.symbol = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    typeChange: function typeChange(item) {\n      this.type = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    setData: function setData() {\n      var _this = this;\n\n      var list = [{\n        code: 'all',\n        value: this.$t('assets.otcFlowingWater.allCoin')\n      }];\n      Object.keys(this.market.coinList).forEach(function (item) {\n        if (_this.market.coinList[item].otcOpen === 1) {\n          list.push({\n            value: getCoinShowName(item, _this.market.coinList),\n            code: item\n          });\n        }\n      });\n      this.symbolList = list;\n      this.symbol = 'all';\n      this.getData();\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      this.axios({\n        url: '/record/otc_transfer_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          coinSymbol: this.axiosSymbol,\n          transactionType: this.axiosType\n        }\n      }).then(function (data) {\n        _this2.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n          data.data.financeList.forEach(function (item, index) {\n            var coinList = _this2.market.coinList;\n            var fix = coinList[item.coinSymbol] && coinList[item.coinSymbol].showPrecision || 0;\n            list.push({\n              id: index,\n              data: [item.createTime, // 时间\n              getCoinShowName(item.coinSymbol, coinList), // 币种\n              item.transactionType_text, // 类型\n              fixD(item.amount, fix) // 充值数量\n              ]\n            });\n          });\n          _this2.tabelList = list;\n          _this2.paginationObj.total = data.data.count;\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getData();\n    }\n  }\n};",null]}