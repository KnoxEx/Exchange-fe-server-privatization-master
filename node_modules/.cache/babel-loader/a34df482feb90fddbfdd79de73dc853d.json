{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/lever/lever.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/lever/lever.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { fixInput, nul, division, fixD, thousandsComma as _thousandsComma } from '@/utils';\nexport default {\n  name: 'lever',\n  data: function data() {\n    return {\n      stepPosition: 1,\n      currenttage: 1,\n      movement: 0,\n      // 是否加载成功\n      dialogConfirmLoading: false,\n      // 是否禁止提交\n      dialogConfirmDisabled: false,\n      // 是否禁止输入\n      inputDisabled: false,\n      // 杠杆输入框选中Class\n      inputActiveClass: '',\n      // 杠杆值\n      leverage: 0,\n      // 最小杠杆倍数\n      minLeverage: 1,\n      // 最大杠杆倍数\n      maxLeverage: 100,\n      // 开关\n      levelSwitch: true,\n      // 当前杠杆最高可持有仓位上限\n      maxNumber: 0,\n      isShowUserMaxLevel: false\n    };\n  },\n  props: {\n    isShow: {\n      default: false,\n      type: Boolean\n    },\n    close: {\n      default: function _default() {},\n      type: Function\n    }\n  },\n  computed: {\n    lanText: function lanText() {\n      return {\n        text1: this.$t('futures.lever.text1'),\n        // 杠杆倍数\n        text2: this.$t('futures.lever.text2'),\n        // 当前持仓最高支持杠杆\n        text3: this.$t('futures.lever.text3'),\n        // 当前杠杆最高可持有仓位上限约\n        text4: this.$t('futures.lever.text4'),\n        // 确认\n        text5: this.$t('futures.lever.text5'),\n        // 请登录后再进行操作\n        text6: this.$t('futures.lever.text6'),\n        // 本合约有委托单不可调整杠杆\n        text7: this.$t('futures.lever.text7'),\n        // 合约杠杆\n        text8: this.$t('futures.lever.text8') // 杠杆倍数最小不能低于\n\n      };\n    },\n    itemLvaue: function itemLvaue() {\n      return division(this.maxLeverage, 5);\n    },\n    feeValue: function feeValue() {\n      return division(this.maxLeverage, 100);\n    },\n    // 提交保证金按钮文案\n    confirmText: function confirmText() {\n      var text = this.lanText.text4; // '确认';\n\n      if (!this.isLogin) {\n        text = this.lanText.text5; // '请登录后再进行操作';\n      }\n\n      if (!this.levelSwitch) {\n        text = this.lanText.text6; // '本合约有委托单不可调整杠杆';\n\n        this.dialogConfirmDisabled = true;\n      }\n\n      return text;\n    },\n    // 是否Login\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    // 用户配置信息\n    userConfig: function userConfig() {\n      return this.$store.state.future.futureUserConfig;\n    },\n    // 用户信息配置-可持有仓位上限\n    leverCeiling: function leverCeiling() {\n      if (this.userConfig) {\n        return this.userConfig.leverCeiling;\n      }\n\n      return null;\n    },\n    // 用户最大可选择杠杆\n    userMaxLevel: function userMaxLevel() {\n      return this.userConfig ? this.userConfig.userMaxLevel : 0;\n    },\n    // 当前合约ID\n    contractId: function contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 数量单位\n    coUnit: function coUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 当前合约面值\n    multiplier: function multiplier() {\n      return Number(this.$store.state.future.multiplier);\n    },\n    // 当前合约数量精度\n    volfix: function volfix() {\n      return this.$store.state.future.volfix;\n    },\n    // 数量单位类型Number\n    coUnitType: function coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 当前合约信息\n    contractInfo: function contractInfo() {\n      return this.$store.state.future.contractInfo;\n    },\n    // 当前合约名称\n    activeContractName: function activeContractName() {\n      var name = '';\n      var text = '';\n\n      if (this.contractInfo) {\n        var nameText = this.contractInfo.symbol ? this.contractInfo.symbol.replace('-', '') : '';\n\n        if (this.contractInfo.contractType !== 'E') {\n          text = \"-\".concat(this.contractInfo.marginCoin);\n        }\n\n        name = \"\".concat(nameText).concat(text);\n      }\n\n      return name;\n    },\n    // 弹窗标题\n    dialogTitle: function dialogTitle() {\n      return \"\".concat(this.activeContractName, \" \").concat(this.lanText.text7); // 合约杠杆\n    }\n  },\n  watch: {\n    currenttage: function currenttage(val) {\n      if (val || val === 0) {\n        if (val > 100) {\n          this.currenttage = 100;\n        }\n\n        if (val < 2) {\n          this.leverage = 1;\n        } else {\n          this.leverage = Math.round(nul(this.currenttage, this.feeValue));\n        }\n      } else {\n        this.leverage = '';\n      }\n    },\n    leverage: function leverage(val, old) {\n      var _this = this;\n\n      if (val) {\n        // console.log(val);\n        if (Number(val) > this.userMaxLevel) {\n          this.isShowUserMaxLevel = true;\n          setTimeout(function () {\n            _this.leverage = _this.userMaxLevel;\n          }, 100);\n        } else {\n          this.leverage = fixInput(val, 0);\n\n          if (old && Number(old) <= this.userMaxLevel && Number(val) < Number(old)) {\n            this.isShowUserMaxLevel = false;\n          }\n\n          if (this.userMaxLevel && Number(val) > this.userMaxLevel) {\n            this.dialogConfirmDisabled = true;\n          } else {\n            this.dialogConfirmDisabled = false;\n          }\n\n          if (Number(val) > this.maxLeverage) {\n            this.leverage = this.maxLeverage;\n          }\n\n          this.setPosition();\n          this.setMaxNumber();\n        }\n      }\n    },\n    userConfig: function userConfig(val) {\n      if (val) {\n        this.levelSwitch = !!this.userConfig.levelCanSwitch;\n        this.minLeverage = this.userConfig.minLevel;\n        this.maxLeverage = this.userConfig.maxLevel;\n        this.dialogConfirmDisabled = !this.levelSwitch;\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.userConfig) {\n        this.leverage = this.userConfig.nowLevel;\n        this.minLeverage = this.userConfig.minLevel;\n        this.maxLeverage = this.userConfig.maxLevel;\n        this.levelSwitch = !!this.userConfig.levelCanSwitch;\n        this.dialogConfirmDisabled = !this.levelSwitch;\n      } else {\n        this.leverage = 20;\n      }\n\n      document.onmouseup = function () {\n        document.onmousemove = null;\n      };\n    },\n    // 设置最大持仓上限\n    setMaxNumber: function setMaxNumber() {\n      var num = 0;\n\n      if (this.leverCeiling) {\n        var keyArr = Object.keys(this.leverCeiling);\n        keyArr.sort(function (a, b) {\n          return parseFloat(a) - parseFloat(b);\n        });\n        var nextL = 0;\n\n        for (var index = 0; index < keyArr.length; index += 1) {\n          if (Number(this.leverage) > nextL && Number(this.leverage) <= keyArr[index]) {\n            num = this.leverCeiling[keyArr[index]];\n          }\n\n          nextL = keyArr[index];\n        } // 标的货币\n\n\n        if (this.coUnitType === 1) {\n          this.maxNumber = fixD(num, this.volfix);\n        } // 张\n\n\n        if (this.coUnitType === 2) {\n          this.maxNumber = fixD(division(num, this.multiplier), 0);\n        }\n      }\n    },\n    // 设置滑竿位置\n    setPosition: function setPosition() {\n      if (this.leverage) {\n        if (this.leverage < 2) {\n          this.stepPosition = 0;\n        } else {\n          this.stepPosition = division(this.leverage, this.feeValue);\n        }\n      } else {\n        this.stepPosition = 1;\n      }\n    },\n    onmousedownCick: function onmousedownCick(e) {\n      if (this.levelSwitch) {\n        var bar = this.$refs.dragStepWrap;\n        var barLeft = bar.getBoundingClientRect().x;\n        var oevent = e || window.event;\n        var leftVal = oevent.clientX - barLeft;\n        var stepPosition = parseInt(nul(division(leftVal, bar.offsetWidth), 100), 0);\n        this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n      }\n    },\n    // 杠杆滑动\n    onmousedown: function onmousedown(event) {\n      var _this2 = this;\n\n      if (this.levelSwitch) {\n        var oevent = event || window.event;\n        var self = this.$refs.dragStep;\n        var bar = this.$refs.dragStepWrap;\n        var leftVal = oevent.clientX - self.offsetLeft;\n\n        document.onmousemove = function (e) {\n          oevent = e || window.event;\n          var movement = oevent.clientX - leftVal;\n\n          if (movement < 0) {\n            movement = 0;\n          } else if (movement > bar.offsetWidth) {\n            movement = bar.offsetWidth;\n          }\n\n          var stepPosition = parseInt(nul(division(movement, bar.offsetWidth), 100), 0);\n          _this2.currenttage = stepPosition < 1 ? 1 : stepPosition;\n\n          document.onmouseup = function () {\n            document.onmousemove = null;\n          };\n        };\n\n        document.onmouseup = function () {\n          document.onmousemove = null;\n        };\n      }\n    },\n    // 点击 滑动到指定倍数位置\n    dragStep: function dragStep(index) {\n      if (this.levelSwitch) {\n        // this.stepPosition = nul(index, 20);\n        this.currenttage = nul(index, 20);\n        this.$emit('levelChange', index);\n      }\n    },\n    // 乘法\n    nulFun: function nulFun(val1, val2) {\n      return Math.round(nul(val1, val2));\n    },\n    // 加\n    add: function add() {\n      this.isClickAddOrSub = true;\n\n      if (this.levelSwitch) {\n        if (Number(this.leverage) < Number(this.maxLeverage) && Number(this.leverage) < Number(this.userMaxLevel)) {\n          var leverage = Number(this.leverage) + 1;\n          this.leverage = leverage;\n          this.isShowUserMaxLevel = false;\n        } else {\n          this.isShowUserMaxLevel = true;\n        }\n      }\n    },\n    // 减\n    subtract: function subtract() {\n      if (this.levelSwitch) {\n        this.isClickAddOrSub = true;\n\n        if (Number(this.leverage) > 1) {\n          var leverage = Number(this.leverage) - 1;\n          this.leverage = leverage;\n          this.isShowUserMaxLevel = false;\n        } else {\n          this.isShowUserMaxLevel = true;\n        }\n      }\n    },\n    // 提交杠杆倍数\n    submitLeverage: function submitLeverage() {\n      var _this3 = this;\n\n      if (!this.isLogin) {\n        this.$router.push('/login');\n        return false;\n      }\n\n      if (this.minLeverage > this.leverage) {\n        // 杠杆倍数最小不能低于\n        this.$bus.$emit('tip', {\n          text: \"\".concat(this.lanText.text8).concat(this.minLeverage),\n          type: 'error'\n        });\n      }\n\n      if (this.userConfig) {\n        this.dialogConfirmLoading = true;\n        this.axios({\n          url: this.$store.state.url.futures.levelEdit,\n          hostType: 'co',\n          method: 'post',\n          params: {\n            nowLevel: this.leverage,\n            contractId: this.contractId\n          }\n        }).then(function (_ref) {\n          var code = _ref.code,\n              msg = _ref.msg;\n\n          if (code.toString() === '0') {\n            _this3.$store.dispatch('getUserConfig');\n\n            _this3.close();\n\n            _this3.$bus.$emit('tip', {\n              text: msg,\n              type: 'success'\n            });\n          } else {\n            _this3.$bus.$emit('tip', {\n              text: msg,\n              type: 'error'\n            });\n          }\n\n          _this3.dialogConfirmLoading = false;\n        });\n      }\n\n      return false;\n    },\n    thousandsComma: function thousandsComma(num) {\n      if (num) {\n        return _thousandsComma(num);\n      }\n\n      return num;\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/lever/lever.js"],"names":["fixInput","nul","division","fixD","thousandsComma","name","data","stepPosition","currenttage","movement","dialogConfirmLoading","dialogConfirmDisabled","inputDisabled","inputActiveClass","leverage","minLeverage","maxLeverage","levelSwitch","maxNumber","isShowUserMaxLevel","props","isShow","default","type","Boolean","close","Function","computed","lanText","text1","$t","text2","text3","text4","text5","text6","text7","text8","itemLvaue","feeValue","confirmText","text","isLogin","$store","state","baseData","userConfig","future","futureUserConfig","leverCeiling","userMaxLevel","contractId","coUnit","multiplier","Number","volfix","coUnitType","contractInfo","activeContractName","nameText","symbol","replace","contractType","marginCoin","dialogTitle","watch","val","Math","round","old","setTimeout","setPosition","setMaxNumber","levelCanSwitch","minLevel","maxLevel","methods","init","nowLevel","document","onmouseup","onmousemove","num","keyArr","Object","keys","sort","a","b","parseFloat","nextL","index","length","onmousedownCick","e","bar","$refs","dragStepWrap","barLeft","getBoundingClientRect","x","oevent","window","event","leftVal","clientX","parseInt","offsetWidth","onmousedown","self","dragStep","offsetLeft","$emit","nulFun","val1","val2","add","isClickAddOrSub","subtract","submitLeverage","$router","push","$bus","axios","url","futures","levelEdit","hostType","method","params","then","code","msg","toString","dispatch"],"mappings":"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","sourcesContent":["import {\n  fixInput, nul, division, fixD, thousandsComma,\n} from '@/utils';\n\nexport default {\n  name: 'lever',\n  data() {\n    return {\n      stepPosition: 1,\n      currenttage: 1,\n      movement: 0,\n      // 是否加载成功\n      dialogConfirmLoading: false,\n      // 是否禁止提交\n      dialogConfirmDisabled: false,\n      // 是否禁止输入\n      inputDisabled: false,\n      // 杠杆输入框选中Class\n      inputActiveClass: '',\n      // 杠杆值\n      leverage: 0,\n      // 最小杠杆倍数\n      minLeverage: 1,\n      // 最大杠杆倍数\n      maxLeverage: 100,\n      // 开关\n      levelSwitch: true,\n      // 当前杠杆最高可持有仓位上限\n      maxNumber: 0,\n      isShowUserMaxLevel: false,\n    };\n  },\n  props: {\n    isShow: {\n      default: false,\n      type: Boolean,\n    },\n    close: {\n      default() {},\n      type: Function,\n    },\n  },\n  computed: {\n    lanText() {\n      return {\n        text1: this.$t('futures.lever.text1'), // 杠杆倍数\n        text2: this.$t('futures.lever.text2'), // 当前持仓最高支持杠杆\n        text3: this.$t('futures.lever.text3'), // 当前杠杆最高可持有仓位上限约\n        text4: this.$t('futures.lever.text4'), // 确认\n        text5: this.$t('futures.lever.text5'), // 请登录后再进行操作\n        text6: this.$t('futures.lever.text6'), // 本合约有委托单不可调整杠杆\n        text7: this.$t('futures.lever.text7'), // 合约杠杆\n        text8: this.$t('futures.lever.text8'), // 杠杆倍数最小不能低于\n      };\n    },\n    itemLvaue() {\n      return division(this.maxLeverage, 5);\n    },\n    feeValue() {\n      return division(this.maxLeverage, 100);\n    },\n    // 提交保证金按钮文案\n    confirmText() {\n      let text = this.lanText.text4; // '确认';\n      if (!this.isLogin) {\n        text = this.lanText.text5; // '请登录后再进行操作';\n      }\n      if (!this.levelSwitch) {\n        text = this.lanText.text6; // '本合约有委托单不可调整杠杆';\n        this.dialogConfirmDisabled = true;\n      }\n      return text;\n    },\n    // 是否Login\n    isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    // 用户配置信息\n    userConfig() {\n      return this.$store.state.future.futureUserConfig;\n    },\n    // 用户信息配置-可持有仓位上限\n    leverCeiling() {\n      if (this.userConfig) {\n        return this.userConfig.leverCeiling;\n      }\n      return null;\n    },\n    // 用户最大可选择杠杆\n    userMaxLevel() {\n      return this.userConfig ? this.userConfig.userMaxLevel : 0;\n    },\n    // 当前合约ID\n    contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 数量单位\n    coUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 当前合约面值\n    multiplier() {\n      return Number(this.$store.state.future.multiplier);\n    },\n    // 当前合约数量精度\n    volfix() {\n      return this.$store.state.future.volfix;\n    },\n    // 数量单位类型Number\n    coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 当前合约信息\n    contractInfo() {\n      return this.$store.state.future.contractInfo;\n    },\n    // 当前合约名称\n    activeContractName() {\n      let name = '';\n      let text = '';\n      if (this.contractInfo) {\n        const nameText = this.contractInfo.symbol ? this.contractInfo.symbol.replace('-', '') : '';\n        if (this.contractInfo.contractType !== 'E') {\n          text = `-${this.contractInfo.marginCoin}`;\n        }\n        name = `${nameText}${text}`;\n      }\n      return name;\n    },\n    // 弹窗标题\n    dialogTitle() {\n      return `${this.activeContractName} ${this.lanText.text7}`; // 合约杠杆\n    },\n  },\n  watch: {\n    currenttage(val) {\n      if (val || val === 0) {\n        if (val > 100) {\n          this.currenttage = 100;\n        }\n        if (val < 2) {\n          this.leverage = 1;\n        } else {\n          this.leverage = Math.round(nul(this.currenttage, this.feeValue));\n        }\n      } else {\n        this.leverage = '';\n      }\n    },\n    leverage(val, old) {\n      if (val) {\n        // console.log(val);\n        if (Number(val) > this.userMaxLevel) {\n          this.isShowUserMaxLevel = true;\n          setTimeout(() => {\n            this.leverage = this.userMaxLevel;\n          }, 100);\n        } else {\n          this.leverage = fixInput(val, 0);\n          if (old && Number(old) <= this.userMaxLevel && Number(val) < Number(old)) {\n            this.isShowUserMaxLevel = false;\n          }\n          if (this.userMaxLevel && Number(val) > this.userMaxLevel) {\n            this.dialogConfirmDisabled = true;\n          } else {\n            this.dialogConfirmDisabled = false;\n          }\n\n          if (Number(val) > this.maxLeverage) {\n            this.leverage = this.maxLeverage;\n          }\n\n          this.setPosition();\n          this.setMaxNumber();\n        }\n      }\n    },\n    userConfig(val) {\n      if (val) {\n        this.levelSwitch = !!this.userConfig.levelCanSwitch;\n        this.minLeverage = this.userConfig.minLevel;\n        this.maxLeverage = this.userConfig.maxLevel;\n        this.dialogConfirmDisabled = !this.levelSwitch;\n      }\n    },\n  },\n  methods: {\n    init() {\n      if (this.userConfig) {\n        this.leverage = this.userConfig.nowLevel;\n        this.minLeverage = this.userConfig.minLevel;\n        this.maxLeverage = this.userConfig.maxLevel;\n        this.levelSwitch = !!this.userConfig.levelCanSwitch;\n        this.dialogConfirmDisabled = !this.levelSwitch;\n      } else {\n        this.leverage = 20;\n      }\n      document.onmouseup = () => {\n        document.onmousemove = null;\n      };\n    },\n    // 设置最大持仓上限\n    setMaxNumber() {\n      let num = 0;\n      if (this.leverCeiling) {\n        const keyArr = Object.keys(this.leverCeiling);\n        keyArr.sort((a, b) => parseFloat(a) - parseFloat(b));\n        let nextL = 0;\n        for (let index = 0; index < keyArr.length; index += 1) {\n          if (Number(this.leverage) > nextL && Number(this.leverage) <= keyArr[index]) {\n            num = this.leverCeiling[keyArr[index]];\n          }\n          nextL = keyArr[index];\n        }\n        // 标的货币\n        if (this.coUnitType === 1) {\n          this.maxNumber = fixD(num, this.volfix);\n        }\n        // 张\n        if (this.coUnitType === 2) {\n          this.maxNumber = fixD(division(num, this.multiplier), 0);\n        }\n      }\n    },\n    // 设置滑竿位置\n    setPosition() {\n      if (this.leverage) {\n        if (this.leverage < 2) {\n          this.stepPosition = 0;\n        } else {\n          this.stepPosition = division(this.leverage, this.feeValue);\n        }\n      } else {\n        this.stepPosition = 1;\n      }\n    },\n    onmousedownCick(e) {\n      if (this.levelSwitch) {\n        const bar = this.$refs.dragStepWrap;\n        const barLeft = bar.getBoundingClientRect().x;\n        const oevent = e || window.event;\n        const leftVal = oevent.clientX - barLeft;\n        const stepPosition = parseInt(nul(division(leftVal, bar.offsetWidth), 100), 0);\n        this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n      }\n    },\n    // 杠杆滑动\n    onmousedown(event) {\n      if (this.levelSwitch) {\n        let oevent = event || window.event;\n        const self = this.$refs.dragStep;\n        const bar = this.$refs.dragStepWrap;\n        const leftVal = oevent.clientX - self.offsetLeft;\n        document.onmousemove = (e) => {\n          oevent = e || window.event;\n          let movement = oevent.clientX - leftVal;\n          if (movement < 0) {\n            movement = 0;\n          } else if (movement > bar.offsetWidth) {\n            movement = bar.offsetWidth;\n          }\n          const stepPosition = parseInt(nul(division(movement, bar.offsetWidth), 100), 0);\n          this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n          document.onmouseup = () => {\n            document.onmousemove = null;\n          };\n        };\n        document.onmouseup = () => {\n          document.onmousemove = null;\n        };\n      }\n    },\n    // 点击 滑动到指定倍数位置\n    dragStep(index) {\n      if (this.levelSwitch) {\n        // this.stepPosition = nul(index, 20);\n        this.currenttage = nul(index, 20);\n        this.$emit('levelChange', index);\n      }\n    },\n    // 乘法\n    nulFun(val1, val2) {\n      return Math.round(nul(val1, val2));\n    },\n    // 加\n    add() {\n      this.isClickAddOrSub = true;\n      if (this.levelSwitch) {\n        if (Number(this.leverage) < Number(this.maxLeverage)\n          && Number(this.leverage) < Number(this.userMaxLevel)) {\n          const leverage = Number(this.leverage) + 1;\n          this.leverage = leverage;\n          this.isShowUserMaxLevel = false;\n        } else {\n          this.isShowUserMaxLevel = true;\n        }\n      }\n    },\n    // 减\n    subtract() {\n      if (this.levelSwitch) {\n        this.isClickAddOrSub = true;\n        if (Number(this.leverage) > 1) {\n          const leverage = Number(this.leverage) - 1;\n          this.leverage = leverage;\n          this.isShowUserMaxLevel = false;\n        } else {\n          this.isShowUserMaxLevel = true;\n        }\n      }\n    },\n    // 提交杠杆倍数\n    submitLeverage() {\n      if (!this.isLogin) {\n        this.$router.push('/login');\n        return false;\n      }\n      if (this.minLeverage > this.leverage) {\n        // 杠杆倍数最小不能低于\n        this.$bus.$emit('tip', { text: `${this.lanText.text8}${this.minLeverage}`, type: 'error' });\n      }\n      if (this.userConfig) {\n        this.dialogConfirmLoading = true;\n        this.axios({\n          url: this.$store.state.url.futures.levelEdit,\n          hostType: 'co',\n          method: 'post',\n          params: {\n            nowLevel: this.leverage,\n            contractId: this.contractId,\n          },\n        }).then(({ code, msg }) => {\n          if (code.toString() === '0') {\n            this.$store.dispatch('getUserConfig');\n            this.close();\n            this.$bus.$emit('tip', { text: msg, type: 'success' });\n          } else {\n            this.$bus.$emit('tip', { text: msg, type: 'error' });\n          }\n          this.dialogConfirmLoading = false;\n        });\n      }\n      return false;\n    },\n    thousandsComma(num) {\n      if (num) {\n        return thousandsComma(num);\n      }\n      return num;\n    },\n  },\n};\n"]}]}