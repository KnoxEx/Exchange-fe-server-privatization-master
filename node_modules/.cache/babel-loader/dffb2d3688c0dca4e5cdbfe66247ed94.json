{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/otcDetailOrder/index/index.js","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/otcDetailOrder/index/index.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { fixD, imgMap, colorMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      timer: null,\n      orderIsReady: false,\n      orderId: '',\n      axiosData: {},\n      payObj: {},\n      // 买家支付时，选择的支付方式对象\n      cancelOrderFlag: false,\n      // 取消订单 开关变量 -- 用于买1\n      cancelOrderCheck: false,\n      // 取消订单 checkout\n      cancelOrderLoading: false,\n      // 取消订单 loading\n      goPayFlag: false,\n      // 确认付款弹窗 开关变量 -- 用于买1\n      gopayConfirmLoading: false,\n      // 确认付款弹窗 -- loading 用于买1\n      releaseFlag: false,\n      // 确认放行弹窗 开关变量\n      passValue: '',\n      // 资金密码 -- 用于卖2\n      passCheck: false,\n      // 资金密码 checkout -- 用于卖2\n      releaseConfirmLoading: false,\n      // 确认放币弹窗 确认按钮loading -- 用于卖2\n      appealFlag: false,\n      // 申诉弹窗 -- 用于买2/卖2\n      appealValue: '',\n      // 申诉内容 -- 用于买2/卖2\n      appealLoading: false,\n      // 申诉弹窗 确认按钮loading -- 用于买2/卖2\n      cancelAppealFlag: false,\n      // 取消申诉弹窗\n      cancelAppealLoading: false,\n      // 取消申诉的loading\n      chatTop: 0,\n      // chatHeight: 0,\n      maxEvmFlag: false,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      identificationShow: false\n    };\n  },\n  watch: {\n    status: function status(v) {\n      var _this = this;\n\n      if (v) {\n        this.$nextTick(function () {\n          var title = _this.$refs.title;\n          _this.chatTop = title.$el.offsetHeight;\n        });\n      }\n    }\n  },\n  computed: {\n    identificationInfo: function identificationInfo() {\n      var obj = {};\n      var sideMap = {\n        SELL: 'buyer',\n        BUY: 'seller'\n      };\n\n      if (this.commonData.side) {\n        var commonData = this.commonData[sideMap[this.commonData.side]];\n\n        if (commonData) {\n          obj.realName = commonData.realName;\n          obj.mobileNumber = commonData.mobileNumber;\n          obj.email = commonData.email;\n          obj.isTwoMin = Number(this.commonData.isTwoMin);\n        }\n      }\n\n      return obj;\n    },\n    goPayText: function goPayText() {\n      var price = '';\n      var id = '';\n      var _this$commonData = this.commonData,\n          sequence = _this$commonData.sequence,\n          totalPrice = _this$commonData.totalPrice,\n          paycoin = _this$commonData.paycoin;\n\n      if (sequence) {\n        id = sequence.substring(sequence.length - 6);\n      }\n\n      if (totalPrice && paycoin) {\n        price = \"\".concat(totalPrice, \" \").concat(paycoin);\n      }\n\n      return {\n        id: id,\n        price: price\n      };\n    },\n    // buy 1 去支付按钮 disabled\n    goPayDisabled: function goPayDisabled() {\n      var flag = true;\n\n      if (this.payObj.payment) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    // 资金密码 是否复合正则验证 卖2\n    passFlag: function passFlag() {\n      return this.$store.state.regExp.passWord.test(this.passValue);\n    },\n    // 资金密码 是否为错误状态 卖2\n    passErrorFlag: function passErrorFlag() {\n      if (this.passValue.length !== 0 && !this.passFlag) return true;\n      return false;\n    },\n    // 确认放币弹窗 确定按钮 禁用  卖2\n    releaseConfirmDisbale: function releaseConfirmDisbale() {\n      var flag = true;\n\n      if (this.passCheck && this.passFlag || this.releaseConfirmLoading) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    // 申诉弹窗 确定按钮 禁用 买2/卖2\n    appealConfirmDisabled: function appealConfirmDisabled() {\n      var flag = true;\n\n      if (this.appealValue.length || this.appealLoading) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    // 取消订单 确定按钮 禁用\n    cancelOrderConfirmDisabled: function cancelOrderConfirmDisabled() {\n      var flag = true;\n\n      if (this.cancelOrderCheck || this.cancelOrderLoading) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    status: function status() {\n      if (this.commonData.status) {\n        return this.commonData.status.toString();\n      }\n\n      return '0';\n    },\n    baseData: function baseData() {\n      return this.$store.state.baseData;\n    },\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo;\n    },\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    // 传给子组件是否准备就绪 必须订单接口和user_info请求成功\n    isReady: function isReady() {\n      var flag = false;\n\n      if (this.isLogin && this.orderIsReady) {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // 传给子组件的数据 axios返回的订单数据 + 自己算出的方向\n    commonData: function commonData() {\n      var obj = {};\n\n      if (this.isReady) {\n        if (this.userInfo.id && this.axiosData.seller && this.axiosData.seller.uid) {\n          var side = this.userInfo.id.toString() === this.axiosData.seller.uid.toString() ? 'SELL' : 'BUY';\n          obj = _objectSpread(_objectSpread({}, this.axiosData), {\n            side: side\n          });\n        }\n      }\n\n      return obj;\n    },\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    priceFix: function priceFix() {\n      var fix = this.$store.state.baseData.defaultFiatPrecision;\n      var _this$commonData2 = this.commonData,\n          coin = _this$commonData2.coin,\n          paycoin = _this$commonData2.paycoin;\n\n      if (this.market && this.market.coinList[coin] && this.market.coinList[coin].fiatPrecision && this.market.coinList[coin].fiatPrecision[paycoin.toLowerCase()]) {\n        fix = this.market.coinList[coin].fiatPrecision[paycoin.toLowerCase()];\n      }\n\n      return Number(fix);\n    },\n    volumeFix: function volumeFix() {\n      var fix = '';\n      var coin = this.commonData.coin;\n\n      if (this.market && coin && this.market.coinList[coin] && this.market.coinList[coin].showPrecision) {\n        fix = this.market.coinList[coin].showPrecision;\n      }\n\n      return Number(fix);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  methods: {\n    init: function init() {\n      var orderId = this.$route.query.orderId;\n\n      if (orderId) {\n        this.orderId = orderId;\n        this.getData();\n      }\n    },\n    maxEvm: function maxEvm(v) {\n      this.maxEvmFlag = v;\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      clearInterval(this.timer);\n      this.timer = setInterval(function () {\n        _this2.initOrder(true);\n      }, 10000);\n      this.initOrder();\n    },\n    // 获取订单数据\n    initOrder: function initOrder(auto) {\n      var _this3 = this;\n\n      var headers = {};\n\n      if (auto) {\n        headers['exchange-auto'] = '1';\n      }\n\n      this.axios({\n        url: 'v4/otc/order_detail',\n        params: {\n          sequence: this.orderId,\n          headers: headers\n        },\n        hostType: 'otc'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this3.orderIsReady = true;\n          _this3.axiosData = data.data;\n          _this3.axiosData.price = fixD(_this3.axiosData.price, _this3.priceFix);\n          _this3.axiosData.totalPrice = fixD(_this3.axiosData.totalPrice, _this3.priceFix);\n          _this3.axiosData.volume = fixD(_this3.axiosData.volume, _this3.volumeFix);\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 买家支付时，修改选择的支付方式对象\n    setPayObj: function setPayObj(v) {\n      this.payObj = v;\n    },\n    // 买1 去支付按钮\n    goPayClick: function goPayClick() {\n      this.goPayFlag = true;\n    },\n    // 买1 确认付款碳层 close\n    goPayClose: function goPayClose() {\n      this.goPayFlag = false;\n    },\n    // 买1 标记为已付款 confirm\n    gopayConfirm: function gopayConfirm() {\n      var _this4 = this;\n\n      this.gopayConfirmLoading = true;\n      this.axios({\n        url: '/v4/otc/order_payed',\n        hostType: 'otc',\n        params: {\n          sequence: this.orderId,\n          payment: this.payObj.payment\n        }\n      }).then(function (data) {\n        _this4.gopayConfirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this4.getData();\n\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this4.goPayFlag = false;\n        } else {\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 卖2 确认收款并放币\n    releaseClick: function releaseClick() {\n      this.releaseFlag = true;\n    },\n    // 卖2 checkout点击\n    passCheckClick: function passCheckClick() {\n      this.passCheck = !this.passCheck;\n    },\n    // 卖2 关闭确认放行弹窗\n    releaseClose: function releaseClose() {\n      this.releaseFlag = false; // 关闭弹窗\n\n      this.passValue = ''; // 清空资金密码\n\n      this.passCheck = false; // 取消checkout\n    },\n    // 卖2 确认放行弹窗 确定\n    releaseConfirm: function releaseConfirm() {\n      var _this5 = this;\n\n      this.releaseConfirmLoading = true;\n      var url = 'otc/confirm_order';\n      this.axios({\n        url: url,\n        hostType: 'otc',\n        params: {\n          sequence: this.orderId,\n          capitalPword: this.passValue\n        }\n      }).then(function (data) {\n        _this5.releaseConfirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this5.getData();\n\n          _this5.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this5.releaseClose();\n        } else {\n          _this5.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 申诉按钮点击 买2 / 卖2\n    appealClick: function appealClick() {\n      var nowTime = new Date().getTime();\n      var spk = nowTime - this.axiosData.payTime;\n\n      if (spk <= 300000) {\n        // 确认付款5分钟后才可提交申诉\n        this.$bus.$emit('tip', {\n          text: this.$t('otcDetailOrder.AppealTitleFive'),\n          type: 'warning'\n        });\n      } else {\n        this.appealFlag = true;\n      }\n    },\n    // 申诉弹窗 关闭按钮\n    appealClose: function appealClose() {\n      this.appealFlag = false;\n      this.appealValue = '';\n    },\n    // 申诉弹窗 确认按钮\n    appealConfirm: function appealConfirm() {\n      var _this6 = this;\n\n      this.appealLoading = true;\n      this.axios({\n        url: '/question/create_problem',\n        params: {\n          rqType: this.commonData.side === 'BUY' ? 8 : 9,\n          rqDescribe: this.appealValue\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var url = 'otc/complain_order';\n\n          _this6.axios({\n            url: url,\n            hostType: 'otc',\n            params: {\n              sequence: _this6.orderId,\n              complainId: data.data.complainId\n            }\n          }).then(function (cdata) {\n            _this6.appealLoading = false;\n\n            if (cdata.code.toString() === '0') {\n              _this6.getData();\n\n              _this6.appealClose();\n\n              _this6.$bus.$emit('tip', {\n                text: cdata.msg,\n                type: 'success'\n              });\n            } else {\n              _this6.$bus.$emit('tip', {\n                text: cdata.msg,\n                type: 'error'\n              });\n            }\n          });\n        } else {\n          _this6.appealLoading = false;\n\n          _this6.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 取消申诉 点击\n    cancelAppealClick: function cancelAppealClick() {\n      this.cancelAppealFlag = true;\n    },\n    // 取消申诉弹窗 关闭按钮\n    cancelAppealClose: function cancelAppealClose() {\n      this.cancelAppealFlag = false;\n    },\n    // 取消申诉弹窗 确定按钮\n    cancelAppealConfirm: function cancelAppealConfirm() {\n      var _this7 = this;\n\n      this.cancelAppealLoading = true;\n      var url = 'otc/complain_cancel';\n      this.axios({\n        hostType: 'otc',\n        url: url,\n        params: {\n          sequence: this.orderId\n        }\n      }).then(function (data) {\n        _this7.cancelAppealLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this7.getData();\n\n          _this7.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this7.cancelAppealClose();\n        } else {\n          _this7.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // ---------- 取消订单 -----------\n    // 取消订单 click\n    cancelOrderClick: function cancelOrderClick() {\n      this.cancelOrderFlag = true;\n    },\n    // 取消订单 checkout点击\n    cancelOrderCheckClick: function cancelOrderCheckClick() {\n      this.cancelOrderCheck = !this.cancelOrderCheck;\n    },\n    // 取消订单 弹窗关闭\n    cancelOrderClose: function cancelOrderClose() {\n      this.cancelOrderFlag = false;\n      this.cancelOrderCheck = false;\n    },\n    // 取消订单 确认按钮\n    cancelOrderConfirm: function cancelOrderConfirm() {\n      var _this8 = this;\n\n      this.cancelOrderLoading = true;\n      var url = 'otc/order_cancel';\n      this.axios({\n        url: url,\n        hostType: 'otc',\n        params: {\n          sequence: this.orderId\n        }\n      }).then(function (data) {\n        _this8.cancelOrderLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this8.getData();\n\n          _this8.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this8.cancelOrderClose();\n        } else {\n          _this8.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    inputLineChange: function inputLineChange(value, name) {\n      this[name] = value;\n    },\n    // 前往广告大厅\n    goHall: function goHall() {\n      this.$router.push('/');\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/otcDetailOrder/index/index.js"],"names":["fixD","imgMap","colorMap","data","timer","orderIsReady","orderId","axiosData","payObj","cancelOrderFlag","cancelOrderCheck","cancelOrderLoading","goPayFlag","gopayConfirmLoading","releaseFlag","passValue","passCheck","releaseConfirmLoading","appealFlag","appealValue","appealLoading","cancelAppealFlag","cancelAppealLoading","chatTop","maxEvmFlag","identificationShow","watch","status","v","$nextTick","title","$refs","$el","offsetHeight","computed","identificationInfo","obj","sideMap","SELL","BUY","commonData","side","realName","mobileNumber","email","isTwoMin","Number","goPayText","price","id","sequence","totalPrice","paycoin","substring","length","goPayDisabled","flag","payment","passFlag","$store","state","regExp","passWord","test","passErrorFlag","releaseConfirmDisbale","appealConfirmDisabled","cancelOrderConfirmDisabled","toString","baseData","userInfo","isLogin","isReady","seller","uid","market","priceFix","fix","defaultFiatPrecision","coin","coinList","fiatPrecision","toLowerCase","volumeFix","showPrecision","beforeDestroy","clearInterval","methods","init","$route","query","getData","maxEvm","setInterval","initOrder","auto","headers","axios","url","params","hostType","then","code","volume","$bus","$emit","text","msg","type","setPayObj","goPayClick","goPayClose","gopayConfirm","releaseClick","passCheckClick","releaseClose","releaseConfirm","capitalPword","appealClick","nowTime","Date","getTime","spk","payTime","$t","appealClose","appealConfirm","rqType","rqDescribe","complainId","cdata","cancelAppealClick","cancelAppealClose","cancelAppealConfirm","cancelOrderClick","cancelOrderCheckClick","cancelOrderClose","cancelOrderConfirm","inputLineChange","value","name","goHall","$router","push"],"mappings":"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","sourcesContent":["\r\nimport { fixD, imgMap, colorMap } from '@/utils';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      timer: null,\r\n      orderIsReady: false,\r\n      orderId: '',\r\n      axiosData: {},\r\n      payObj: {}, // 买家支付时，选择的支付方式对象\r\n      cancelOrderFlag: false, // 取消订单 开关变量 -- 用于买1\r\n      cancelOrderCheck: false, // 取消订单 checkout\r\n      cancelOrderLoading: false, // 取消订单 loading\r\n      goPayFlag: false, // 确认付款弹窗 开关变量 -- 用于买1\r\n      gopayConfirmLoading: false, // 确认付款弹窗 -- loading 用于买1\r\n      releaseFlag: false, // 确认放行弹窗 开关变量\r\n      passValue: '', // 资金密码 -- 用于卖2\r\n      passCheck: false, // 资金密码 checkout -- 用于卖2\r\n      releaseConfirmLoading: false, // 确认放币弹窗 确认按钮loading -- 用于卖2\r\n      appealFlag: false, // 申诉弹窗 -- 用于买2/卖2\r\n      appealValue: '', // 申诉内容 -- 用于买2/卖2\r\n      appealLoading: false, // 申诉弹窗 确认按钮loading -- 用于买2/卖2\r\n      cancelAppealFlag: false, // 取消申诉弹窗\r\n      cancelAppealLoading: false, // 取消申诉的loading\r\n      chatTop: 0,\r\n      // chatHeight: 0,\r\n      maxEvmFlag: false,\r\n      imgMap,\r\n      colorMap,\r\n      identificationShow: false,\r\n    };\r\n  },\r\n  watch: {\r\n    status(v) {\r\n      if (v) {\r\n        this.$nextTick(() => {\r\n          const { title } = this.$refs;\r\n          this.chatTop = title.$el.offsetHeight;\r\n        });\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    identificationInfo() {\r\n      const obj = {};\r\n      const sideMap = {\r\n        SELL: 'buyer',\r\n        BUY: 'seller',\r\n      };\r\n      if (this.commonData.side) {\r\n        const commonData = this.commonData[sideMap[this.commonData.side]];\r\n        if (commonData) {\r\n          obj.realName = commonData.realName;\r\n          obj.mobileNumber = commonData.mobileNumber;\r\n          obj.email = commonData.email;\r\n          obj.isTwoMin = Number(this.commonData.isTwoMin);\r\n        }\r\n      }\r\n      return obj;\r\n    },\r\n    goPayText() {\r\n      let price = '';\r\n      let id = '';\r\n      const { sequence, totalPrice, paycoin } = this.commonData;\r\n      if (sequence) {\r\n        id = sequence.substring(sequence.length - 6);\r\n      }\r\n      if (totalPrice && paycoin) {\r\n        price = `${totalPrice} ${paycoin}`;\r\n      }\r\n      return {\r\n        id,\r\n        price,\r\n      };\r\n    },\r\n    // buy 1 去支付按钮 disabled\r\n    goPayDisabled() {\r\n      let flag = true;\r\n      if (this.payObj.payment) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    // 资金密码 是否复合正则验证 卖2\r\n    passFlag() { return this.$store.state.regExp.passWord.test(this.passValue); },\r\n    // 资金密码 是否为错误状态 卖2\r\n    passErrorFlag() {\r\n      if (this.passValue.length !== 0 && !this.passFlag) return true;\r\n      return false;\r\n    },\r\n    // 确认放币弹窗 确定按钮 禁用  卖2\r\n    releaseConfirmDisbale() {\r\n      let flag = true;\r\n      if ((this.passCheck && this.passFlag) || this.releaseConfirmLoading) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    // 申诉弹窗 确定按钮 禁用 买2/卖2\r\n    appealConfirmDisabled() {\r\n      let flag = true;\r\n      if (this.appealValue.length || this.appealLoading) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    // 取消订单 确定按钮 禁用\r\n    cancelOrderConfirmDisabled() {\r\n      let flag = true;\r\n      if (this.cancelOrderCheck || this.cancelOrderLoading) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    status() {\r\n      if (this.commonData.status) {\r\n        return this.commonData.status.toString();\r\n      }\r\n      return '0';\r\n    },\r\n    baseData() {\r\n      return this.$store.state.baseData;\r\n    },\r\n    userInfo() { return this.$store.state.baseData.userInfo; },\r\n    isLogin() { return this.$store.state.baseData.isLogin; },\r\n    // 传给子组件是否准备就绪 必须订单接口和user_info请求成功\r\n    isReady() {\r\n      let flag = false;\r\n      if (this.isLogin && this.orderIsReady) {\r\n        flag = true;\r\n      }\r\n      return flag;\r\n    },\r\n    // 传给子组件的数据 axios返回的订单数据 + 自己算出的方向\r\n    commonData() {\r\n      let obj = {};\r\n      if (this.isReady) {\r\n        if (this.userInfo.id && this.axiosData.seller && this.axiosData.seller.uid) {\r\n          const side = this.userInfo.id.toString() === this.axiosData.seller.uid.toString() ? 'SELL' : 'BUY';\r\n          obj = { ...this.axiosData, ...{ side } };\r\n        }\r\n      }\r\n      return obj;\r\n    },\r\n    market() { return this.$store.state.baseData.market; },\r\n    priceFix() {\r\n      let fix = this.$store.state.baseData.defaultFiatPrecision;\r\n      const { coin, paycoin } = this.commonData;\r\n      if (this.market\r\n        && this.market.coinList[coin]\r\n        && this.market.coinList[coin].fiatPrecision\r\n        && this.market.coinList[coin].fiatPrecision[paycoin.toLowerCase()]) {\r\n        fix = this.market.coinList[coin].fiatPrecision[paycoin.toLowerCase()];\r\n      }\r\n      return Number(fix);\r\n    },\r\n    volumeFix() {\r\n      let fix = '';\r\n      const { coin } = this.commonData;\r\n      if (this.market && coin\r\n        && this.market.coinList[coin]\r\n        && this.market.coinList[coin].showPrecision) {\r\n        fix = this.market.coinList[coin].showPrecision;\r\n      }\r\n      return Number(fix);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    init() {\r\n      const { orderId } = this.$route.query;\r\n      if (orderId) {\r\n        this.orderId = orderId;\r\n        this.getData();\r\n      }\r\n    },\r\n    maxEvm(v) {\r\n      this.maxEvmFlag = v;\r\n    },\r\n    getData() {\r\n      clearInterval(this.timer);\r\n      this.timer = setInterval(() => {\r\n        this.initOrder(true);\r\n      }, 10000);\r\n      this.initOrder();\r\n    },\r\n    // 获取订单数据\r\n    initOrder(auto) {\r\n      const headers = {};\r\n      if (auto) {\r\n        headers['exchange-auto'] = '1';\r\n      }\r\n      this.axios({\r\n        url: 'v4/otc/order_detail',\r\n        params: {\r\n          sequence: this.orderId,\r\n          headers,\r\n        },\r\n        hostType: 'otc',\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.orderIsReady = true;\r\n          this.axiosData = data.data;\r\n          this.axiosData.price = fixD(this.axiosData.price, this.priceFix);\r\n          this.axiosData.totalPrice = fixD(this.axiosData.totalPrice, this.priceFix);\r\n          this.axiosData.volume = fixD(this.axiosData.volume, this.volumeFix);\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 买家支付时，修改选择的支付方式对象\r\n    setPayObj(v) {\r\n      this.payObj = v;\r\n    },\r\n    // 买1 去支付按钮\r\n    goPayClick() {\r\n      this.goPayFlag = true;\r\n    },\r\n    // 买1 确认付款碳层 close\r\n    goPayClose() {\r\n      this.goPayFlag = false;\r\n    },\r\n    // 买1 标记为已付款 confirm\r\n    gopayConfirm() {\r\n      this.gopayConfirmLoading = true;\r\n      this.axios({\r\n        url: '/v4/otc/order_payed',\r\n        hostType: 'otc',\r\n        params: {\r\n          sequence: this.orderId,\r\n          payment: this.payObj.payment,\r\n        },\r\n      }).then((data) => {\r\n        this.gopayConfirmLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.getData();\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.goPayFlag = false;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 卖2 确认收款并放币\r\n    releaseClick() {\r\n      this.releaseFlag = true;\r\n    },\r\n    // 卖2 checkout点击\r\n    passCheckClick() {\r\n      this.passCheck = !this.passCheck;\r\n    },\r\n    // 卖2 关闭确认放行弹窗\r\n    releaseClose() {\r\n      this.releaseFlag = false; // 关闭弹窗\r\n      this.passValue = ''; // 清空资金密码\r\n      this.passCheck = false; // 取消checkout\r\n    },\r\n    // 卖2 确认放行弹窗 确定\r\n    releaseConfirm() {\r\n      this.releaseConfirmLoading = true;\r\n      const url = 'otc/confirm_order';\r\n      this.axios({\r\n        url,\r\n        hostType: 'otc',\r\n        params: {\r\n          sequence: this.orderId,\r\n          capitalPword: this.passValue,\r\n        },\r\n      }).then((data) => {\r\n        this.releaseConfirmLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.getData();\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.releaseClose();\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 申诉按钮点击 买2 / 卖2\r\n    appealClick() {\r\n      const nowTime = new Date().getTime();\r\n      const spk = nowTime - this.axiosData.payTime;\r\n      if (spk <= 300000) {\r\n        // 确认付款5分钟后才可提交申诉\r\n        this.$bus.$emit('tip', {\r\n          text: this.$t('otcDetailOrder.AppealTitleFive'),\r\n          type: 'warning',\r\n        });\r\n      } else {\r\n        this.appealFlag = true;\r\n      }\r\n    },\r\n    // 申诉弹窗 关闭按钮\r\n    appealClose() {\r\n      this.appealFlag = false;\r\n      this.appealValue = '';\r\n    },\r\n    // 申诉弹窗 确认按钮\r\n    appealConfirm() {\r\n      this.appealLoading = true;\r\n      this.axios({\r\n        url: '/question/create_problem',\r\n        params: {\r\n          rqType: this.commonData.side === 'BUY' ? 8 : 9,\r\n          rqDescribe: this.appealValue,\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          const url = 'otc/complain_order';\r\n          this.axios({\r\n            url,\r\n            hostType: 'otc',\r\n            params: {\r\n              sequence: this.orderId,\r\n              complainId: data.data.complainId,\r\n            },\r\n          }).then((cdata) => {\r\n            this.appealLoading = false;\r\n            if (cdata.code.toString() === '0') {\r\n              this.getData();\r\n              this.appealClose();\r\n              this.$bus.$emit('tip', { text: cdata.msg, type: 'success' });\r\n            } else {\r\n              this.$bus.$emit('tip', { text: cdata.msg, type: 'error' });\r\n            }\r\n          });\r\n        } else {\r\n          this.appealLoading = false;\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 取消申诉 点击\r\n    cancelAppealClick() {\r\n      this.cancelAppealFlag = true;\r\n    },\r\n    // 取消申诉弹窗 关闭按钮\r\n    cancelAppealClose() {\r\n      this.cancelAppealFlag = false;\r\n    },\r\n    // 取消申诉弹窗 确定按钮\r\n    cancelAppealConfirm() {\r\n      this.cancelAppealLoading = true;\r\n      const url = 'otc/complain_cancel';\r\n      this.axios({\r\n        hostType: 'otc',\r\n        url,\r\n        params: {\r\n          sequence: this.orderId,\r\n        },\r\n      }).then((data) => {\r\n        this.cancelAppealLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.getData();\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.cancelAppealClose();\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // ---------- 取消订单 -----------\r\n    // 取消订单 click\r\n    cancelOrderClick() {\r\n      this.cancelOrderFlag = true;\r\n    },\r\n    // 取消订单 checkout点击\r\n    cancelOrderCheckClick() {\r\n      this.cancelOrderCheck = !this.cancelOrderCheck;\r\n    },\r\n    // 取消订单 弹窗关闭\r\n    cancelOrderClose() {\r\n      this.cancelOrderFlag = false;\r\n      this.cancelOrderCheck = false;\r\n    },\r\n    // 取消订单 确认按钮\r\n    cancelOrderConfirm() {\r\n      this.cancelOrderLoading = true;\r\n      const url = 'otc/order_cancel';\r\n      this.axios({\r\n        url,\r\n        hostType: 'otc',\r\n        params: {\r\n          sequence: this.orderId,\r\n        },\r\n      }).then((data) => {\r\n        this.cancelOrderLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.getData();\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.cancelOrderClose();\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    inputLineChange(value, name) {\r\n      this[name] = value;\r\n    },\r\n    // 前往广告大厅\r\n    goHall() {\r\n      this.$router.push('/');\r\n    },\r\n  },\r\n};\r\n"]}]}