{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/components/calculator/calculator.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/components/calculator/calculator.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\n\n/*\n@ 计算器\n@author HDD */\nimport { imgMap, colorMap, division, nul, fixD, fixInput, add, cut, thousandsComma as _thousandsComma } from '@/utils';\nexport default {\n  name: 'calculatorMode',\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      colorMap: colorMap,\n      marginModel: 1,\n      // 隐藏底部按钮\n      haveOption: false,\n      tableLoading: false,\n      // 是否加载成功\n      dialogConfirmLoading: false,\n      //  表格数据\n      tableDataList: [],\n      // 选中的类型\n      categoryType: 1,\n      // 下单方向\n      sideType: 1,\n      // 表单\n      formData_1: {\n        title: '',\n        units: this.priceUnit,\n        fix: 8,\n        errorText: null,\n        value: null,\n        isShow: true\n      },\n      formData_2: {\n        title: '',\n        units: this.priceUnit,\n        fix: 8,\n        errorText: null,\n        value: null,\n        isShow: true\n      },\n      formData_3: {\n        title: '',\n        units: '',\n        fix: 8,\n        errorText: null,\n        value: null,\n        isShow: true\n      },\n      // 杠杆\n      stepPosition: 1,\n      currenttage: 1,\n      movement: 0,\n      // 杠杆值\n      leverage: 0,\n      // 最小杠杆倍数\n      minLeverage: 1,\n      // 最大杠杆倍数\n      maxLeverage: 100,\n      // 当前杠杆最高可持有仓位上限\n      maxNumber: 0,\n      // 开仓保证金\n      openMargin: 0.00,\n      openMargin_opi: 0,\n      openMarginClass: '',\n      // 收益额\n      revenue: 0.00,\n      revenue_opi: 0,\n      revenueClass: '',\n      // 平仓价格\n      closePrice: 0.00,\n      closePriceClass: '',\n      // 强平价格\n      forceClosePrice: 0.00,\n      forceClosePriceClass: '',\n      forceClosePriceNUm: true,\n      // 维持保证金率列表\n      ladderList: [],\n      // 头寸列表\n      leverCeiling: {},\n      // 杠杆输入框选中Class\n      inputActiveClass: ''\n    };\n  },\n  props: {\n    isShow: {\n      default: false,\n      type: Boolean\n    },\n    close: {\n      default: function _default() {},\n      type: Function\n    },\n    dataInfo: {\n      default: function _default() {},\n      type: Object\n    }\n  },\n  computed: {\n    lanText: function lanText() {\n      return {\n        text1: this.$t('futures.calculator.text1'),\n        // 计算器\"\n        text2: this.$t('futures.calculator.text2'),\n        // 杠杆\"\n        text3: this.$t('futures.calculator.text3'),\n        // 当前杠杆最高可持有头寸数\"\n        text4: this.$t('futures.calculator.text4'),\n        // 计算\"\n        text5: this.$t('futures.calculator.text5'),\n        // 计算结果\"\n        text6: this.$t('futures.calculator.text6'),\n        // 开仓保证金\"\n        text7: this.$t('futures.calculator.text7'),\n        // 收益额\"\n        text8: this.$t('futures.calculator.text8'),\n        // 回报率\"\n        text9: this.$t('futures.calculator.text9'),\n        // 平仓价格\"\n        text10: this.$t('futures.calculator.text10'),\n        // 无法达到该收益率\"\n        text11: this.$t('futures.calculator.text11'),\n        // 强平价格\"\n        text12: this.$t('futures.calculator.text12'),\n        // 开仓价格\"\n        text13: this.$t('futures.calculator.text13'),\n        // 平仓价格\"\n        text14: this.$t('futures.calculator.text14'),\n        // 数量\"\n        text15: this.$t('futures.calculator.text15'),\n        // 张\"\n        text16: this.$t('futures.calculator.text16'),\n        // 收益\"\n        text17: this.$t('futures.calculator.text17'),\n        // 多仓\"\n        text18: this.$t('futures.calculator.text18'),\n        // 空仓\"\n        text19: this.$t('futures.calculator.text19'),\n        // 买入做多\"\n        text20: this.$t('futures.calculator.text20'),\n        // 卖出做空\"\n        text21: this.$t('futures.calculator.text21'),\n        // 仓位数量\"\n        text22: this.$t('futures.calculator.text22'),\n        // 保证金数量\"\n        text23: this.$t('futures.calculator.text23'),\n        // 保证金不足以开仓\n        text24: this.$t('futures.calculator.text24') // 不会被强制平仓\n\n      };\n    },\n    // 用户配置信息\n    userConfig: function userConfig() {\n      return this.$store.state.future.futureUserConfig;\n    },\n    // 当前合约信息\n    contractInfo: function contractInfo() {\n      return this.$store.state.future.contractInfo;\n    },\n    // 当前合约ID\n    contractId: function contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 当前合约方向（1正向、0反向）\n    contractSide: function contractSide() {\n      if (this.contractInfo) {\n        return this.contractInfo.contractSide;\n      }\n\n      return 1;\n    },\n    // 当前合约保证金汇率\n    marginRate: function marginRate() {\n      if (this.contractInfo) {\n        return this.contractInfo.marginRate;\n      }\n\n      return 1;\n    },\n    // 数量单位类型Number(1标的货币 2张)\n    coUnitType: function coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 合约数量单位\n    volUnit: function volUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 当前合约数量精度\n    volfix: function volfix() {\n      if (this.coUnitType === 1) {\n        return this.$store.state.future.volfix;\n      }\n\n      return 0;\n    },\n    volfix_two: function volfix_two() {\n      return this.$store.state.future.volfix;\n    },\n    // *\n    // 当前合约价格单位\n    priceUnit: function priceUnit() {\n      return this.$store.state.future.priceUnit;\n    },\n    // 当前合约面值\n    multiplier: function multiplier() {\n      return Number(this.$store.state.future.multiplier) || 1;\n    },\n    // 当前合约价格精度\n    pricefix: function pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    // 当前合约保证金币种\n    marginCoin: function marginCoin() {\n      if (this.contractInfo) {\n        return this.contractInfo.marginCoin;\n      }\n\n      return '';\n    },\n    // 当前合约保证金币种精度\n    marginCoinFix: function marginCoinFix() {\n      if (this.contractInfo && this.contractInfo.coinResultVo) {\n        return this.contractInfo.coinResultVo.marginCoinPrecision;\n      }\n\n      return 4;\n    },\n    // 用户信息配置-可持有仓位上限\n    // leverCeiling() {\n    //   if (this.userConfig) {\n    //     return this.userConfig.leverCeiling;\n    //   }\n    //   return null;\n    // },\n    // 类型（收益，平仓价格， 强平价格）\n    categoryTypeList: function categoryTypeList() {\n      return [{\n        id: 1,\n        text: this.lanText.text16,\n        // '收益',\n        classes: this.categoryType === 1 ? 'u-8-bg' : 'a-3-bg'\n      }, {\n        id: 2,\n        text: this.lanText.text13,\n        // '平仓价格',\n        classes: this.categoryType === 2 ? 'u-8-bg' : 'a-3-bg'\n      }, {\n        id: 3,\n        text: this.lanText.text11,\n        // '强平价格',\n        classes: this.categoryType === 3 ? 'u-8-bg' : 'a-3-bg'\n      }];\n    },\n    // 类型（收益，平仓价格， 强平价格）\n    sideTypeList: function sideTypeList() {\n      if (this.categoryType === 3) {\n        return [{\n          id: 1,\n          text: this.lanText.text17,\n          // '多仓',\n          classes: this.sideType === 1 ? 'u-1-bg' : 'a-3-bg'\n        }, {\n          id: 2,\n          text: this.lanText.text18,\n          // '空仓',\n          classes: this.sideType === 2 ? 'u-4-bg' : 'a-3-bg'\n        }];\n      }\n\n      return [{\n        id: 1,\n        text: this.lanText.text19,\n        // '买入做多',\n        classes: this.sideType === 1 ? 'u-1-bg' : 'a-3-bg'\n      }, {\n        id: 2,\n        text: this.lanText.text20,\n        // '卖出做空',\n        classes: this.sideType === 2 ? 'u-4-bg' : 'a-3-bg'\n      }];\n    },\n    // 杠杆选项\n    itemLvaue: function itemLvaue() {\n      return division(this.maxLeverage, 5);\n    },\n    // 杠杆\n    feeValue: function feeValue() {\n      return division(this.maxLeverage, 100);\n    },\n    // 是否禁止提交\n    dialogConfirmDisabled: function dialogConfirmDisabled() {\n      return !this.formVerify();\n    },\n    // 回报率\n    reportRate: function reportRate() {\n      // 回报率 = 收益额 / 保证金 * 100%\n      if (this.openMargin_opi && this.revenue_opi) {\n        return fixD(this.revenue_opi / this.openMargin_opi * 100, 2);\n      }\n\n      return 0;\n    },\n    reportRateClass: function reportRateClass() {\n      if (this.reportRate) {\n        if (Number(this.reportRate) > 0) {\n          return 'u-1-cl';\n        }\n\n        if (Number(this.reportRate) < 0) {\n          return 'u-4-cl';\n        }\n      }\n\n      return '';\n    },\n    // 标记价格\n    tagPrice: function tagPrice() {\n      var publicMarkertInfo = this.$store.state.future.publicMarkertInfo;\n\n      if (publicMarkertInfo) {\n        // 标记价格\n        return publicMarkertInfo.tagPrice;\n      }\n\n      return 0;\n    }\n  },\n  watch: {\n    dataInfo: function dataInfo(val) {\n      if (val.brokerId) {\n        this.getStopList();\n        this.initForm();\n      }\n    },\n    isShow: function isShow(val) {\n      if (val) {\n        this.init();\n      }\n\n      this.initForm();\n    },\n    'formData_1.value': function formData1(value) {\n      if (value && Number(value)) {\n        this.formData_1.errorText = null;\n      }\n    },\n    'formData_2.value': function formData2(value) {\n      if (value && Number(value)) {\n        this.formData_2.errorText = null;\n      }\n    },\n    'formData_3.value': function formData3(value) {\n      if (value && Number(value)) {\n        this.formData_3.errorText = null;\n      }\n    },\n    currenttage: function currenttage(val) {\n      if (val || val === 0) {\n        if (val > 100) {\n          this.currenttage = 100;\n        }\n\n        if (val < 2) {\n          this.leverage = 1;\n        } else {\n          this.leverage = Math.round(nul(this.currenttage, this.feeValue));\n        }\n      } else {\n        this.leverage = '';\n      }\n    },\n    leverage: function leverage(val) {\n      if (val) {\n        this.leverage = fixInput(val, 0);\n\n        if (Number(val) > this.maxLeverage) {\n          this.leverage = this.maxLeverage;\n        }\n\n        this.setPosition();\n        this.setMaxNumber();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      // 初始化表单\n      this.initForm(); // 获取阶梯设置\n\n      this.getladderList();\n\n      if (this.userConfig) {\n        this.leverage = this.userConfig.nowLevel;\n        this.minLeverage = this.userConfig.minLevel;\n        this.maxLeverage = this.userConfig.maxLevel;\n      } else {\n        this.leverage = 20;\n      }\n\n      document.onmouseup = function () {\n        document.onmousemove = null;\n      };\n    },\n    // 设置表单参数\n    initForm: function initForm() {\n      this.openMargin = 0.00;\n      this.revenue = 0.00;\n      this.closePrice = 0.00;\n      this.forceClosePrice = 0.00;\n      this.openMarginClass = '';\n      this.revenueClass = '';\n      this.closePriceClass = '';\n      this.forceClosePriceClass = ''; //\n\n      this.formData_1.value = null;\n      this.formData_2.value = null;\n      this.formData_3.value = null;\n      this.formData_1.errorText = null;\n      this.formData_2.errorText = null;\n      this.formData_3.errorText = null;\n      this.formData_1.title = this.lanText.text12; // '开仓价格';\n\n      this.formData_2.title = this.lanText.text13; // '平仓价格';\n\n      this.formData_3.title = this.lanText.text14; // '数量';\n\n      this.formData_1.units = this.priceUnit;\n      this.formData_2.units = this.priceUnit;\n      this.formData_3.units = this.volUnit;\n      this.formData_1.fix = this.pricefix;\n      this.formData_2.fix = this.pricefix;\n      this.formData_3.fix = this.volfix;\n      this.formData_3.isShow = true;\n\n      if (this.categoryType === 2) {\n        this.formData_2.title = this.lanText.text8; // '回报率';\n\n        this.formData_2.units = '%';\n        this.formData_2.fix = 2;\n        this.formData_3.isShow = false;\n      }\n\n      if (this.categoryType === 3) {\n        this.formData_2.title = this.lanText.text21; // '仓位数量';\n\n        this.formData_3.title = this.lanText.text22; // '保证金数量';\n\n        this.formData_2.units = this.volUnit;\n        this.formData_3.units = this.marginCoin;\n        this.formData_2.fix = this.volfix;\n        this.formData_3.fix = this.marginCoinFix;\n      }\n    },\n    // 表单输入事件\n    changeInput: function changeInput(type, value) {\n      this[type].value = value;\n    },\n    // 表单验证\n    formVerify: function formVerify() {\n      if (!this.formData_1.value || !this.formData_2.value) {\n        return false;\n      }\n\n      if (this.categoryType !== 2 && !this.formData_3.value) {\n        return false;\n      }\n\n      return true;\n    },\n    // 提交订单\n    submit: function submit() {\n      if (!this.formVerify()) return; // 计算收益\n\n      var openPrice = this.formData_1.value; // 开仓价格\n\n      var closePrice = this.formData_2.value; // 平仓价格 || 回报率 || 3:仓位数量\n\n      var volume = this.setNumber(this.formData_3.value); // 数量 || 3:保证金数量\n\n      if (this.categoryType === 1) {\n        // 开仓保证金**（this.contractSide 1：正向  0：反向）\n        // 正向合约：所需保证金=初始保证金 = 数量 * 开仓价格 / 杠杆 / 保证金汇率\n        // 反向合约：所需保证金=初始保证金 = 数量 / 开仓价格 / 杠杆 / 保证金汇率\n        var v1 = this.contractSide === 1 ? nul(volume, openPrice) : division(volume, openPrice);\n        var v2 = division(division(v1, this.leverage), this.marginRate);\n        this.openMargin_opi = v2;\n        this.openMargin = fixD(v2, this.marginCoinFix);\n\n        if (Number(this.openMargin) > 0) {\n          this.openMarginClass = 'u-1-cl';\n        }\n\n        if (Number(this.openMargin) < 0) {\n          this.openMarginClass = 'u-4-cl';\n        } // 收益额\n        // 正向合约：\n        //   买入做多 收益额=（平仓价格 - 开仓价格）* 数量 / 保证金汇率\n        //   卖出做空 收益额=（平仓价格 - 开仓价格）* 数量 / 保证金汇率 * -1\n        // 反向合约：\n        //   买入做多 收益额=（1/平仓价格 - 1/开仓价格）* 数量 / 保证金汇率 * -1\n        //   卖出做空 收益额=（1/平仓价格 - 1/开仓价格）* 数量 / 保证金汇率\n\n\n        var n2;\n\n        if (this.contractSide === 1) {\n          n2 = closePrice - openPrice;\n        } else {\n          n2 = division(1, closePrice) - division(1, openPrice);\n        }\n\n        var n3 = division(nul(n2, volume), this.marginRate); // 买入做多\n\n        var revenue = this.contractSide === 1 ? n3 : n3 * -1;\n\n        if (this.sideType === 2) {\n          // 卖出做空\n          revenue = this.contractSide === 1 ? n3 * -1 : n3;\n        }\n\n        this.revenue_opi = revenue;\n        this.revenue = fixD(revenue, this.marginCoinFix);\n\n        if (Number(this.revenue) > 0) {\n          this.revenueClass = 'u-1-cl';\n        }\n\n        if (Number(this.revenue) < 0) {\n          this.revenueClass = 'u-4-cl';\n        } // this.contractSide === 1\n\n      } // 计算平仓价格\n\n\n      if (this.categoryType === 2) {\n        // 平仓价格\n        // （单位：计价货币）\n        // 正向合约：\n        // 买入做多 平仓价格 = 开仓价格 *（杠杆 + 回报率） / 杠杆\n        // 卖出做空 平仓价格 = 开仓价格 *（杠杆 - 回报率） / 杠杆\n        // 反向合约：\n        // 买入做多 平仓价格 = 开仓价格 * 杠杆  /  （杠杆 - 回报率）\n        // 卖出做空 平仓价格 = 开仓价格 * 杠杆  /  （杠杆 + 回报率）\n        var reportRate = division(closePrice, 100); // 杠杆 + 回报率\n\n        var M1 = add(this.leverage, reportRate); // 杠杆 - 回报率\n\n        if (this.contractSide === 1 && this.sideType === 2 || this.contractSide === 0 && this.sideType === 1) {\n          M1 = cut(this.leverage, reportRate);\n        }\n\n        var value; // 正向\n\n        if (this.contractSide === 1) {\n          value = division(nul(openPrice, M1), this.leverage);\n        } else {\n          value = division(nul(openPrice, this.leverage), M1);\n        }\n\n        if (value <= 0) {\n          this.closePrice = 'none';\n        } else {\n          this.closePrice = fixD(value, this.pricefix);\n\n          if (Number(this.closePrice) > 0) {\n            this.closePriceClass = 'u-1-cl';\n          }\n\n          if (Number(this.closePrice) < 0) {\n            this.closePriceClass = 'u-4-cl';\n          }\n        }\n      }\n\n      if (this.categoryType === 3) {\n        // 强平价格\n        // （单位：计价货币）\n        // 正向合约：\n        // 多仓 强平价格 = （保证金数量 / 保证金汇率 - 仓位数量 * 开仓价格） / （（维持保证金率 + 手续费率 - 1）* 仓位数量）\n        // 空仓 强平价格 = （保证金数量 / 保证金汇率 + 仓位数量 * 开仓价格） / （（维持保证金率 + 手续费率 + 1）* 仓位数量 ）\n        // 反向合约：\n        // 多仓 强平价格 = （（维持保证金率 + 手续费率 + 1）* 仓位数量）/ （保证金数量 / 保证金汇率 - 仓位数量 / 开仓价格）\n        // 空仓 强平价格 = （（维持保证金率 + 手续费率 - 1）* 仓位数量）/ （保证金数量 / 保证金汇率 + 仓位数量 / 开仓价格）\n        // 维持保证金率 = （仓位数量 * 标记价格）所在的挡位的维持保证金率\n        // 手续费=0.00075\n        // this.marginRate  保证金汇率\n        closePrice = this.setNumber(this.formData_2.value); // 3:仓位数量\n\n        volume = this.formData_3.value; // 3:保证金数量\n\n        var sRate = 0.00075; // 手续费\n\n        var Y1 = closePrice * this.tagPrice; // 仓位数量 * 标记价格\n\n        var mRate = this.getladderValue(Y1); // 获取维持保证金率\n        // 保证金数量 / 保证金汇率\n\n        var Y2 = division(volume, this.marginRate); // 正向 = 仓位数量 * 开仓价格\n        // 反向 = 仓位数量 / 开仓价格\n\n        var Y3 = this.contractSide === 1 ? nul(closePrice, openPrice) : division(closePrice, openPrice); // 正向 多仓 || 反向 空仓 = 保证金数量 / 保证金汇率 - 仓位数量 * 开仓价格 :\n\n        var Y4 = cut(Y2, Y3); // 正向 多仓 || 反向 空仓 = （维持保证金率 + 手续费率 - 1）\n\n        var Y5 = cut(add(mRate, sRate), 1); //  正向 空仓 || 反向 多仓\n\n        if (this.contractSide === 1 && this.sideType === 2 || this.contractSide === 0 && this.sideType === 1) {\n          // 保证金数量 / 保证金汇率 + 仓位数量 * 开仓价格\n          Y4 = add(Y2, Y3); // 维持保证金率 + 手续费率 + 1\n\n          Y5 = add(add(mRate, sRate), 1);\n        } // Y5 * 仓位数量\n\n\n        var Y6 = nul(Y5, closePrice);\n\n        var _value = this.contractSide === 1 ? division(Y4, Y6) : division(Y6, Y4); // 多仓：强平价格>开仓价格 时 不显示强平价格，显示：保证金不足以开仓！\n\n\n        if (this.sideType === 1 && _value > openPrice) {\n          this.forceClosePrice = this.lanText.text23; // '保证金不足以开仓';\n\n          this.forceClosePriceNUm = false;\n          this.forceClosePriceClass = 'u-4-cl';\n        } else if (this.sideType === 2 && _value < openPrice) {\n          this.forceClosePrice = this.lanText.text23; // '保证金不足以开仓';\n\n          this.forceClosePriceNUm = false;\n          this.forceClosePriceClass = 'u-4-cl';\n        } else {\n          this.forceClosePrice = this.thousandsComma(fixD(_value, this.pricefix));\n          this.forceClosePriceNUm = true;\n\n          if (Number(_value) > 0) {\n            this.forceClosePriceClass = 'u-1-cl';\n          }\n\n          if (Number(_value) < 0) {\n            // 不会被强制平仓\n            this.forceClosePrice = this.lanText.text24;\n            this.forceClosePriceNUm = false;\n            this.forceClosePriceClass = 'u-4-cl';\n          }\n        }\n      }\n    },\n    // 设置数量（把张换成量）\n    setNumber: function setNumber(volume) {\n      // 如果当前数量单位是张\n      if (this.coUnitType === 2 && volume && this.multiplier) {\n        return fixD(nul(volume, this.multiplier), this.volfix_two);\n      }\n\n      return volume;\n    },\n    // 切换 /收益/平仓价格/强平价格\n    switchType: function switchType(type, id) {\n      if (this[type] !== id) {\n        this[type] = id;\n        this.initForm();\n        this.openMargin_opi = 0;\n        this.revenue_opi = 0;\n      }\n    },\n    // 设置最大持仓上限\n    setMaxNumber: function setMaxNumber() {\n      var num = 0;\n\n      if (this.leverCeiling) {\n        var keyArr = Object.keys(this.leverCeiling);\n        keyArr.sort(function (a, b) {\n          return parseFloat(a) - parseFloat(b);\n        });\n        var nextL = 0;\n\n        for (var index = 0; index < keyArr.length; index += 1) {\n          if (Number(this.leverage) > nextL && Number(this.leverage) <= keyArr[index]) {\n            num = this.leverCeiling[keyArr[index]];\n          }\n\n          nextL = keyArr[index];\n        } // 标的货币\n\n\n        if (this.coUnitType === 1) {\n          this.maxNumber = fixD(num, this.volfix);\n        } // 张\n\n\n        if (this.coUnitType === 2) {\n          this.maxNumber = fixD(division(num, this.multiplier), 0);\n        }\n      }\n    },\n    // 设置滑竿位置\n    setPosition: function setPosition() {\n      if (this.leverage) {\n        if (this.leverage < 2) {\n          this.stepPosition = 0;\n        } else {\n          this.stepPosition = division(this.leverage, this.feeValue);\n        }\n      } else {\n        this.stepPosition = 1;\n      }\n    },\n    onmousedownCick: function onmousedownCick(e) {\n      var bar = this.$refs.dragStepWrap;\n      var barLeft = bar.getBoundingClientRect().x;\n      var oevent = e || window.event;\n      var leftVal = oevent.clientX - barLeft;\n      var stepPosition = parseInt(nul(division(leftVal, bar.offsetWidth), 100), 0);\n      this.stepPosition = stepPosition < 1 ? 1 : stepPosition;\n      this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n    },\n    // 杠杆滑动\n    onmousedown: function onmousedown(event) {\n      var _this = this;\n\n      var oevent = event || window.event;\n      var self = this.$refs.dragStep;\n      var bar = this.$refs.dragStepWrap;\n      var leftVal = oevent.clientX - self.offsetLeft;\n\n      document.onmousemove = function (e) {\n        oevent = e || window.event;\n        var movement = oevent.clientX - leftVal;\n\n        if (movement < 0) {\n          movement = 0;\n        } else if (movement > bar.offsetWidth) {\n          movement = bar.offsetWidth;\n        }\n\n        var stepPosition = parseInt(nul(division(movement, bar.offsetWidth), 100), 0);\n        _this.stepPosition = stepPosition < 1 ? 1 : stepPosition;\n        _this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n\n        document.onmouseup = function () {\n          document.onmousemove = null;\n        };\n      };\n\n      document.onmouseup = function () {\n        document.onmousemove = null;\n      };\n    },\n    // 点击 滑动到指定倍数位置\n    dragStep: function dragStep(index) {\n      this.stepPosition = nul(index, 20);\n      this.currenttage = nul(index, 20);\n      this.$emit('levelChange', index);\n    },\n    // 乘法\n    nulFun: function nulFun(val1, val2) {\n      return Math.round(nul(val1, val2));\n    },\n    // 获取当前维持保证金率的值\n    getladderValue: function getladderValue(value) {\n      var rate = 0;\n\n      if (this.ladderList && this.ladderList.length) {\n        rate = this.ladderList[this.ladderList.length - 1].minMarginRate;\n\n        if (value === 0) {\n          rate = this.ladderList[0].minMarginRate;\n        } else {\n          this.ladderList.forEach(function (item) {\n            if (value > item.minPositionValue && value <= item.maxPositionValue) {\n              rate = item.minMarginRate;\n            }\n          });\n        }\n      }\n\n      return rate;\n    },\n    // 获取阶梯设置列表\n    getladderList: function getladderList() {\n      var _this2 = this;\n\n      this.axios({\n        url: this.$store.state.url.futures.getLadderInfo,\n        method: 'post',\n        hostType: 'co',\n        params: {\n          contractId: this.contractId\n        }\n      }).then(function (rs) {\n        _this2.tableLoading = false;\n\n        if (rs.code === '0' && rs.data) {\n          if (rs.data.ladderList) {\n            _this2.ladderList = rs.data.ladderList.ladderList || [];\n          }\n\n          if (rs.data.leverList) {\n            var leverListInfor = rs.data.leverList;\n            _this2.minLeverage = leverListInfor.minLever;\n            _this2.maxLeverage = leverListInfor.maxLever;\n          }\n\n          if (rs.data.leverCeiling) {\n            _this2.leverCeiling = rs.data.leverCeiling;\n          }\n\n          if (!_this2.userConfig) {\n            _this2.leverage = 20;\n          }\n        }\n      });\n    },\n    // 加\n    add: function add() {\n      if (Number(this.leverage) < Number(this.maxLeverage)) {\n        var leverage = Number(this.leverage) + 1;\n        this.leverage = leverage;\n      }\n    },\n    // 减\n    subtract: function subtract() {\n      if (Number(this.leverage) > 1) {\n        var leverage = Number(this.leverage) - 1;\n        this.leverage = leverage;\n      }\n    },\n    thousandsComma: function thousandsComma(num) {\n      if (num) {\n        return _thousandsComma(num);\n      }\n\n      return num;\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/components/calculator/calculator.js"],"names":["imgMap","colorMap","division","nul","fixD","fixInput","add","cut","thousandsComma","name","data","marginModel","haveOption","tableLoading","dialogConfirmLoading","tableDataList","categoryType","sideType","formData_1","title","units","priceUnit","fix","errorText","value","isShow","formData_2","formData_3","stepPosition","currenttage","movement","leverage","minLeverage","maxLeverage","maxNumber","openMargin","openMargin_opi","openMarginClass","revenue","revenue_opi","revenueClass","closePrice","closePriceClass","forceClosePrice","forceClosePriceClass","forceClosePriceNUm","ladderList","leverCeiling","inputActiveClass","props","default","type","Boolean","close","Function","dataInfo","Object","computed","lanText","text1","$t","text2","text3","text4","text5","text6","text7","text8","text9","text10","text11","text12","text13","text14","text15","text16","text17","text18","text19","text20","text21","text22","text23","text24","userConfig","$store","state","future","futureUserConfig","contractInfo","contractId","contractSide","marginRate","coUnitType","volUnit","coUnit","volfix","volfix_two","multiplier","Number","pricefix","marginCoin","marginCoinFix","coinResultVo","marginCoinPrecision","categoryTypeList","id","text","classes","sideTypeList","itemLvaue","feeValue","dialogConfirmDisabled","formVerify","reportRate","reportRateClass","tagPrice","publicMarkertInfo","watch","val","brokerId","getStopList","initForm","init","formData1","formData2","formData3","Math","round","setPosition","setMaxNumber","methods","getladderList","nowLevel","minLevel","maxLevel","document","onmouseup","onmousemove","changeInput","submit","openPrice","volume","setNumber","v1","v2","n2","n3","M1","sRate","Y1","mRate","getladderValue","Y2","Y3","Y4","Y5","Y6","switchType","num","keyArr","keys","sort","a","b","parseFloat","nextL","index","length","onmousedownCick","e","bar","$refs","dragStepWrap","barLeft","getBoundingClientRect","x","oevent","window","event","leftVal","clientX","parseInt","offsetWidth","onmousedown","self","dragStep","offsetLeft","$emit","nulFun","val1","val2","rate","minMarginRate","forEach","item","minPositionValue","maxPositionValue","axios","url","futures","getLadderInfo","method","hostType","params","then","rs","code","leverList","leverListInfor","minLever","maxLever","subtract"],"mappings":"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","sourcesContent":["/*\n@ 计算器\n@author HDD */\nimport {\n  imgMap,\n  colorMap,\n  division,\n  nul,\n  fixD,\n  fixInput,\n  add,\n  cut,\n  thousandsComma,\n} from '@/utils';\n\nexport default {\n  name: 'calculatorMode',\n  data() {\n    return {\n      imgMap,\n      colorMap,\n      marginModel: 1,\n      // 隐藏底部按钮\n      haveOption: false,\n      tableLoading: false,\n      // 是否加载成功\n      dialogConfirmLoading: false,\n      //  表格数据\n      tableDataList: [],\n      // 选中的类型\n      categoryType: 1,\n      // 下单方向\n      sideType: 1,\n      // 表单\n      formData_1: {\n        title: '',\n        units: this.priceUnit,\n        fix: 8,\n        errorText: null,\n        value: null,\n        isShow: true,\n      },\n      formData_2: {\n        title: '',\n        units: this.priceUnit,\n        fix: 8,\n        errorText: null,\n        value: null,\n        isShow: true,\n      },\n      formData_3: {\n        title: '',\n        units: '',\n        fix: 8,\n        errorText: null,\n        value: null,\n        isShow: true,\n      },\n      // 杠杆\n      stepPosition: 1,\n      currenttage: 1,\n      movement: 0,\n      // 杠杆值\n      leverage: 0,\n      // 最小杠杆倍数\n      minLeverage: 1,\n      // 最大杠杆倍数\n      maxLeverage: 100,\n      // 当前杠杆最高可持有仓位上限\n      maxNumber: 0,\n      // 开仓保证金\n      openMargin: 0.00,\n      openMargin_opi: 0,\n      openMarginClass: '',\n      // 收益额\n      revenue: 0.00,\n      revenue_opi: 0,\n      revenueClass: '',\n      // 平仓价格\n      closePrice: 0.00,\n      closePriceClass: '',\n      // 强平价格\n      forceClosePrice: 0.00,\n      forceClosePriceClass: '',\n      forceClosePriceNUm: true,\n      // 维持保证金率列表\n      ladderList: [],\n      // 头寸列表\n      leverCeiling: {},\n      // 杠杆输入框选中Class\n      inputActiveClass: '',\n\n    };\n  },\n  props: {\n    isShow: {\n      default: false,\n      type: Boolean,\n    },\n    close: {\n      default() {},\n      type: Function,\n    },\n    dataInfo: {\n      default: () => {},\n      type: Object,\n    },\n  },\n  computed: {\n    lanText() {\n      return {\n        text1: this.$t('futures.calculator.text1'), // 计算器\"\n        text2: this.$t('futures.calculator.text2'), // 杠杆\"\n        text3: this.$t('futures.calculator.text3'), // 当前杠杆最高可持有头寸数\"\n        text4: this.$t('futures.calculator.text4'), // 计算\"\n        text5: this.$t('futures.calculator.text5'), // 计算结果\"\n        text6: this.$t('futures.calculator.text6'), // 开仓保证金\"\n        text7: this.$t('futures.calculator.text7'), // 收益额\"\n        text8: this.$t('futures.calculator.text8'), // 回报率\"\n        text9: this.$t('futures.calculator.text9'), // 平仓价格\"\n        text10: this.$t('futures.calculator.text10'), // 无法达到该收益率\"\n        text11: this.$t('futures.calculator.text11'), // 强平价格\"\n        text12: this.$t('futures.calculator.text12'), // 开仓价格\"\n        text13: this.$t('futures.calculator.text13'), // 平仓价格\"\n        text14: this.$t('futures.calculator.text14'), // 数量\"\n        text15: this.$t('futures.calculator.text15'), // 张\"\n        text16: this.$t('futures.calculator.text16'), // 收益\"\n        text17: this.$t('futures.calculator.text17'), // 多仓\"\n        text18: this.$t('futures.calculator.text18'), // 空仓\"\n        text19: this.$t('futures.calculator.text19'), // 买入做多\"\n        text20: this.$t('futures.calculator.text20'), // 卖出做空\"\n        text21: this.$t('futures.calculator.text21'), // 仓位数量\"\n        text22: this.$t('futures.calculator.text22'), // 保证金数量\"\n        text23: this.$t('futures.calculator.text23'), // 保证金不足以开仓\n        text24: this.$t('futures.calculator.text24'), // 不会被强制平仓\n      };\n    },\n    // 用户配置信息\n    userConfig() {\n      return this.$store.state.future.futureUserConfig;\n    },\n    // 当前合约信息\n    contractInfo() {\n      return this.$store.state.future.contractInfo;\n    },\n    // 当前合约ID\n    contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 当前合约方向（1正向、0反向）\n    contractSide() {\n      if (this.contractInfo) {\n        return this.contractInfo.contractSide;\n      }\n      return 1;\n    },\n    // 当前合约保证金汇率\n    marginRate() {\n      if (this.contractInfo) {\n        return this.contractInfo.marginRate;\n      }\n      return 1;\n    },\n    // 数量单位类型Number(1标的货币 2张)\n    coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 合约数量单位\n    volUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 当前合约数量精度\n    volfix() {\n      if (this.coUnitType === 1) {\n        return this.$store.state.future.volfix;\n      }\n      return 0;\n    },\n    volfix_two() {\n      return this.$store.state.future.volfix;\n    },\n    // *\n    // 当前合约价格单位\n    priceUnit() {\n      return this.$store.state.future.priceUnit;\n    },\n    // 当前合约面值\n    multiplier() {\n      return Number(this.$store.state.future.multiplier) || 1;\n    },\n    // 当前合约价格精度\n    pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    // 当前合约保证金币种\n    marginCoin() {\n      if (this.contractInfo) {\n        return this.contractInfo.marginCoin;\n      }\n      return '';\n    },\n    // 当前合约保证金币种精度\n    marginCoinFix() {\n      if (this.contractInfo && this.contractInfo.coinResultVo) {\n        return this.contractInfo.coinResultVo.marginCoinPrecision;\n      }\n      return 4;\n    },\n    // 用户信息配置-可持有仓位上限\n    // leverCeiling() {\n    //   if (this.userConfig) {\n    //     return this.userConfig.leverCeiling;\n    //   }\n    //   return null;\n    // },\n    // 类型（收益，平仓价格， 强平价格）\n    categoryTypeList() {\n      return [\n        {\n          id: 1,\n          text: this.lanText.text16, // '收益',\n          classes: this.categoryType === 1 ? 'u-8-bg' : 'a-3-bg',\n        },\n        {\n          id: 2,\n          text: this.lanText.text13, // '平仓价格',\n          classes: this.categoryType === 2 ? 'u-8-bg' : 'a-3-bg',\n        },\n        {\n          id: 3,\n          text: this.lanText.text11, // '强平价格',\n          classes: this.categoryType === 3 ? 'u-8-bg' : 'a-3-bg',\n        },\n      ];\n    },\n    // 类型（收益，平仓价格， 强平价格）\n    sideTypeList() {\n      if (this.categoryType === 3) {\n        return [\n          {\n            id: 1,\n            text: this.lanText.text17, // '多仓',\n            classes: this.sideType === 1 ? 'u-1-bg' : 'a-3-bg',\n          },\n          {\n            id: 2,\n            text: this.lanText.text18, // '空仓',\n            classes: this.sideType === 2 ? 'u-4-bg' : 'a-3-bg',\n          },\n        ];\n      }\n      return [\n        {\n          id: 1,\n          text: this.lanText.text19, // '买入做多',\n          classes: this.sideType === 1 ? 'u-1-bg' : 'a-3-bg',\n        },\n        {\n          id: 2,\n          text: this.lanText.text20, // '卖出做空',\n          classes: this.sideType === 2 ? 'u-4-bg' : 'a-3-bg',\n        },\n      ];\n    },\n    // 杠杆选项\n    itemLvaue() {\n      return division(this.maxLeverage, 5);\n    },\n    // 杠杆\n    feeValue() {\n      return division(this.maxLeverage, 100);\n    },\n    // 是否禁止提交\n    dialogConfirmDisabled() {\n      return !this.formVerify();\n    },\n    // 回报率\n    reportRate() {\n      // 回报率 = 收益额 / 保证金 * 100%\n      if (this.openMargin_opi && this.revenue_opi) {\n        return fixD((this.revenue_opi / this.openMargin_opi) * 100, 2);\n      }\n      return 0;\n    },\n    reportRateClass() {\n      if (this.reportRate) {\n        if (Number(this.reportRate) > 0) {\n          return 'u-1-cl';\n        }\n        if (Number(this.reportRate) < 0) {\n          return 'u-4-cl';\n        }\n      }\n      return '';\n    },\n    // 标记价格\n    tagPrice() {\n      const { publicMarkertInfo } = this.$store.state.future;\n      if (publicMarkertInfo) {\n        // 标记价格\n        return publicMarkertInfo.tagPrice;\n      }\n      return 0;\n    },\n\n  },\n  watch: {\n    dataInfo(val) {\n      if (val.brokerId) {\n        this.getStopList();\n        this.initForm();\n      }\n    },\n    isShow(val) {\n      if (val) {\n        this.init();\n      }\n      this.initForm();\n    },\n    'formData_1.value': function formData1(value) {\n      if (value && Number(value)) {\n        this.formData_1.errorText = null;\n      }\n    },\n    'formData_2.value': function formData2(value) {\n      if (value && Number(value)) {\n        this.formData_2.errorText = null;\n      }\n    },\n    'formData_3.value': function formData3(value) {\n      if (value && Number(value)) {\n        this.formData_3.errorText = null;\n      }\n    },\n\n    currenttage(val) {\n      if (val || val === 0) {\n        if (val > 100) {\n          this.currenttage = 100;\n        }\n        if (val < 2) {\n          this.leverage = 1;\n        } else {\n          this.leverage = Math.round(nul(this.currenttage, this.feeValue));\n        }\n      } else {\n        this.leverage = '';\n      }\n    },\n    leverage(val) {\n      if (val) {\n        this.leverage = fixInput(val, 0);\n        if (Number(val) > this.maxLeverage) {\n          this.leverage = this.maxLeverage;\n        }\n        this.setPosition();\n        this.setMaxNumber();\n      }\n    },\n\n  },\n  methods: {\n    init() {\n      // 初始化表单\n      this.initForm();\n      // 获取阶梯设置\n      this.getladderList();\n      if (this.userConfig) {\n        this.leverage = this.userConfig.nowLevel;\n        this.minLeverage = this.userConfig.minLevel;\n        this.maxLeverage = this.userConfig.maxLevel;\n      } else {\n        this.leverage = 20;\n      }\n      document.onmouseup = () => {\n        document.onmousemove = null;\n      };\n    },\n    // 设置表单参数\n    initForm() {\n      this.openMargin = 0.00;\n      this.revenue = 0.00;\n      this.closePrice = 0.00;\n      this.forceClosePrice = 0.00;\n      this.openMarginClass = '';\n      this.revenueClass = '';\n      this.closePriceClass = '';\n      this.forceClosePriceClass = '';\n      //\n      this.formData_1.value = null;\n      this.formData_2.value = null;\n      this.formData_3.value = null;\n\n      this.formData_1.errorText = null;\n      this.formData_2.errorText = null;\n      this.formData_3.errorText = null;\n\n      this.formData_1.title = this.lanText.text12; // '开仓价格';\n      this.formData_2.title = this.lanText.text13; // '平仓价格';\n      this.formData_3.title = this.lanText.text14; // '数量';\n\n      this.formData_1.units = this.priceUnit;\n      this.formData_2.units = this.priceUnit;\n      this.formData_3.units = this.volUnit;\n\n      this.formData_1.fix = this.pricefix;\n      this.formData_2.fix = this.pricefix;\n      this.formData_3.fix = this.volfix;\n\n      this.formData_3.isShow = true;\n\n      if (this.categoryType === 2) {\n        this.formData_2.title = this.lanText.text8; // '回报率';\n        this.formData_2.units = '%';\n        this.formData_2.fix = 2;\n\n        this.formData_3.isShow = false;\n      }\n      if (this.categoryType === 3) {\n        this.formData_2.title = this.lanText.text21; // '仓位数量';\n        this.formData_3.title = this.lanText.text22; // '保证金数量';\n\n        this.formData_2.units = this.volUnit;\n        this.formData_3.units = this.marginCoin;\n\n        this.formData_2.fix = this.volfix;\n        this.formData_3.fix = this.marginCoinFix;\n      }\n    },\n    // 表单输入事件\n    changeInput(type, value) {\n      this[type].value = value;\n    },\n    // 表单验证\n    formVerify() {\n      if (!this.formData_1.value || !this.formData_2.value) {\n        return false;\n      }\n      if (this.categoryType !== 2 && !this.formData_3.value) {\n        return false;\n      }\n      return true;\n    },\n    // 提交订单\n    submit() {\n      if (!this.formVerify()) return;\n      // 计算收益\n      const openPrice = this.formData_1.value; // 开仓价格\n      let closePrice = this.formData_2.value; // 平仓价格 || 回报率 || 3:仓位数量\n      let volume = this.setNumber(this.formData_3.value); // 数量 || 3:保证金数量\n      if (this.categoryType === 1) {\n        // 开仓保证金**（this.contractSide 1：正向  0：反向）\n        // 正向合约：所需保证金=初始保证金 = 数量 * 开仓价格 / 杠杆 / 保证金汇率\n        // 反向合约：所需保证金=初始保证金 = 数量 / 开仓价格 / 杠杆 / 保证金汇率\n        const v1 = this.contractSide === 1 ? nul(volume, openPrice) : division(volume, openPrice);\n        const v2 = division(division(v1, this.leverage), this.marginRate);\n        this.openMargin_opi = v2;\n        this.openMargin = fixD(v2, this.marginCoinFix);\n\n        if (Number(this.openMargin) > 0) {\n          this.openMarginClass = 'u-1-cl';\n        }\n        if (Number(this.openMargin) < 0) {\n          this.openMarginClass = 'u-4-cl';\n        }\n        // 收益额\n        // 正向合约：\n        //   买入做多 收益额=（平仓价格 - 开仓价格）* 数量 / 保证金汇率\n        //   卖出做空 收益额=（平仓价格 - 开仓价格）* 数量 / 保证金汇率 * -1\n        // 反向合约：\n        //   买入做多 收益额=（1/平仓价格 - 1/开仓价格）* 数量 / 保证金汇率 * -1\n        //   卖出做空 收益额=（1/平仓价格 - 1/开仓价格）* 数量 / 保证金汇率\n        let n2;\n        if (this.contractSide === 1) {\n          n2 = closePrice - openPrice;\n        } else {\n          n2 = division(1, closePrice) - division(1, openPrice);\n        }\n        const n3 = division(nul(n2, volume), this.marginRate);\n        // 买入做多\n        let revenue = this.contractSide === 1 ? n3 : n3 * -1;\n        if (this.sideType === 2) {\n          // 卖出做空\n          revenue = this.contractSide === 1 ? n3 * -1 : n3;\n        }\n        this.revenue_opi = revenue;\n        this.revenue = fixD(revenue, this.marginCoinFix);\n        if (Number(this.revenue) > 0) {\n          this.revenueClass = 'u-1-cl';\n        }\n        if (Number(this.revenue) < 0) {\n          this.revenueClass = 'u-4-cl';\n        }\n        // this.contractSide === 1\n      }\n\n      // 计算平仓价格\n      if (this.categoryType === 2) {\n        // 平仓价格\n        // （单位：计价货币）\n        // 正向合约：\n        // 买入做多 平仓价格 = 开仓价格 *（杠杆 + 回报率） / 杠杆\n        // 卖出做空 平仓价格 = 开仓价格 *（杠杆 - 回报率） / 杠杆\n        // 反向合约：\n        // 买入做多 平仓价格 = 开仓价格 * 杠杆  /  （杠杆 - 回报率）\n        // 卖出做空 平仓价格 = 开仓价格 * 杠杆  /  （杠杆 + 回报率）\n        const reportRate = division(closePrice, 100);\n        // 杠杆 + 回报率\n        let M1 = add(this.leverage, reportRate);\n        // 杠杆 - 回报率\n        if ((this.contractSide === 1 && this.sideType === 2)\n        || (this.contractSide === 0 && this.sideType === 1)) {\n          M1 = cut(this.leverage, reportRate);\n        }\n        let value;\n        // 正向\n        if (this.contractSide === 1) {\n          value = division(nul(openPrice, M1), this.leverage);\n        } else {\n          value = division(nul(openPrice, this.leverage), M1);\n        }\n        if (value <= 0) {\n          this.closePrice = 'none';\n        } else {\n          this.closePrice = fixD(value, this.pricefix);\n          if (Number(this.closePrice) > 0) {\n            this.closePriceClass = 'u-1-cl';\n          }\n          if (Number(this.closePrice) < 0) {\n            this.closePriceClass = 'u-4-cl';\n          }\n        }\n      }\n      if (this.categoryType === 3) {\n        // 强平价格\n        // （单位：计价货币）\n        // 正向合约：\n        // 多仓 强平价格 = （保证金数量 / 保证金汇率 - 仓位数量 * 开仓价格） / （（维持保证金率 + 手续费率 - 1）* 仓位数量）\n        // 空仓 强平价格 = （保证金数量 / 保证金汇率 + 仓位数量 * 开仓价格） / （（维持保证金率 + 手续费率 + 1）* 仓位数量 ）\n        // 反向合约：\n        // 多仓 强平价格 = （（维持保证金率 + 手续费率 + 1）* 仓位数量）/ （保证金数量 / 保证金汇率 - 仓位数量 / 开仓价格）\n        // 空仓 强平价格 = （（维持保证金率 + 手续费率 - 1）* 仓位数量）/ （保证金数量 / 保证金汇率 + 仓位数量 / 开仓价格）\n        // 维持保证金率 = （仓位数量 * 标记价格）所在的挡位的维持保证金率\n        // 手续费=0.00075\n        // this.marginRate  保证金汇率\n        closePrice = this.setNumber(this.formData_2.value); // 3:仓位数量\n        volume = this.formData_3.value; // 3:保证金数量\n        const sRate = 0.00075; // 手续费\n        const Y1 = closePrice * this.tagPrice; // 仓位数量 * 标记价格\n        const mRate = this.getladderValue(Y1); // 获取维持保证金率\n        // 保证金数量 / 保证金汇率\n        const Y2 = division(volume, this.marginRate);\n        // 正向 = 仓位数量 * 开仓价格\n        // 反向 = 仓位数量 / 开仓价格\n        const Y3 = this.contractSide === 1\n          ? nul(closePrice, openPrice)\n          : division(closePrice, openPrice);\n        // 正向 多仓 || 反向 空仓 = 保证金数量 / 保证金汇率 - 仓位数量 * 开仓价格 :\n        let Y4 = cut(Y2, Y3);\n        // 正向 多仓 || 反向 空仓 = （维持保证金率 + 手续费率 - 1）\n        let Y5 = cut(add(mRate, sRate), 1);\n        //  正向 空仓 || 反向 多仓\n        if ((this.contractSide === 1 && this.sideType === 2)\n        || (this.contractSide === 0 && this.sideType === 1)) {\n          // 保证金数量 / 保证金汇率 + 仓位数量 * 开仓价格\n          Y4 = add(Y2, Y3);\n          // 维持保证金率 + 手续费率 + 1\n          Y5 = add(add(mRate, sRate), 1);\n        }\n\n        // Y5 * 仓位数量\n        const Y6 = nul(Y5, closePrice);\n        const value = this.contractSide === 1 ? division(Y4, Y6) : division(Y6, Y4);\n\n        // 多仓：强平价格>开仓价格 时 不显示强平价格，显示：保证金不足以开仓！\n        if (this.sideType === 1 && value > openPrice) {\n          this.forceClosePrice = this.lanText.text23; // '保证金不足以开仓';\n          this.forceClosePriceNUm = false;\n          this.forceClosePriceClass = 'u-4-cl';\n        } else if (this.sideType === 2 && value < openPrice) {\n          this.forceClosePrice = this.lanText.text23; // '保证金不足以开仓';\n          this.forceClosePriceNUm = false;\n          this.forceClosePriceClass = 'u-4-cl';\n        } else {\n          this.forceClosePrice = this.thousandsComma(fixD(value, this.pricefix));\n          this.forceClosePriceNUm = true;\n          if (Number(value) > 0) {\n            this.forceClosePriceClass = 'u-1-cl';\n          }\n          if (Number(value) < 0) {\n            // 不会被强制平仓\n            this.forceClosePrice = this.lanText.text24;\n            this.forceClosePriceNUm = false;\n            this.forceClosePriceClass = 'u-4-cl';\n          }\n        }\n      }\n    },\n\n    // 设置数量（把张换成量）\n    setNumber(volume) {\n      // 如果当前数量单位是张\n      if (this.coUnitType === 2 && volume && this.multiplier) {\n        return fixD(nul(volume, this.multiplier), this.volfix_two);\n      }\n      return volume;\n    },\n    // 切换 /收益/平仓价格/强平价格\n    switchType(type, id) {\n      if (this[type] !== id) {\n        this[type] = id;\n        this.initForm();\n        this.openMargin_opi = 0;\n        this.revenue_opi = 0;\n      }\n    },\n    // 设置最大持仓上限\n    setMaxNumber() {\n      let num = 0;\n      if (this.leverCeiling) {\n        const keyArr = Object.keys(this.leverCeiling);\n        keyArr.sort((a, b) => parseFloat(a) - parseFloat(b));\n        let nextL = 0;\n        for (let index = 0; index < keyArr.length; index += 1) {\n          if (Number(this.leverage) > nextL && Number(this.leverage) <= keyArr[index]) {\n            num = this.leverCeiling[keyArr[index]];\n          }\n          nextL = keyArr[index];\n        }\n        // 标的货币\n        if (this.coUnitType === 1) {\n          this.maxNumber = fixD(num, this.volfix);\n        }\n        // 张\n        if (this.coUnitType === 2) {\n          this.maxNumber = fixD(division(num, this.multiplier), 0);\n        }\n      }\n    },\n    // 设置滑竿位置\n    setPosition() {\n      if (this.leverage) {\n        if (this.leverage < 2) {\n          this.stepPosition = 0;\n        } else {\n          this.stepPosition = division(this.leverage, this.feeValue);\n        }\n      } else {\n        this.stepPosition = 1;\n      }\n    },\n    onmousedownCick(e) {\n      const bar = this.$refs.dragStepWrap;\n      const barLeft = bar.getBoundingClientRect().x;\n      const oevent = e || window.event;\n      const leftVal = oevent.clientX - barLeft;\n      const stepPosition = parseInt(nul(division(leftVal, bar.offsetWidth), 100), 0);\n      this.stepPosition = stepPosition < 1 ? 1 : stepPosition;\n      this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n    },\n    // 杠杆滑动\n    onmousedown(event) {\n      let oevent = event || window.event;\n      const self = this.$refs.dragStep;\n      const bar = this.$refs.dragStepWrap;\n      const leftVal = oevent.clientX - self.offsetLeft;\n      document.onmousemove = (e) => {\n        oevent = e || window.event;\n        let movement = oevent.clientX - leftVal;\n        if (movement < 0) {\n          movement = 0;\n        } else if (movement > bar.offsetWidth) {\n          movement = bar.offsetWidth;\n        }\n        const stepPosition = parseInt(nul(division(movement, bar.offsetWidth), 100), 0);\n        this.stepPosition = stepPosition < 1 ? 1 : stepPosition;\n        this.currenttage = stepPosition < 1 ? 1 : stepPosition;\n        document.onmouseup = () => {\n          document.onmousemove = null;\n        };\n      };\n      document.onmouseup = () => {\n        document.onmousemove = null;\n      };\n    },\n    // 点击 滑动到指定倍数位置\n    dragStep(index) {\n      this.stepPosition = nul(index, 20);\n      this.currenttage = nul(index, 20);\n      this.$emit('levelChange', index);\n    },\n    // 乘法\n    nulFun(val1, val2) {\n      return Math.round(nul(val1, val2));\n    },\n    // 获取当前维持保证金率的值\n    getladderValue(value) {\n      let rate = 0;\n      if (this.ladderList && this.ladderList.length) {\n        rate = this.ladderList[this.ladderList.length - 1].minMarginRate;\n        if (value === 0) {\n          rate = this.ladderList[0].minMarginRate;\n        } else {\n          this.ladderList.forEach((item) => {\n            if (value > item.minPositionValue && value <= item.maxPositionValue) {\n              rate = item.minMarginRate;\n            }\n          });\n        }\n      }\n      return rate;\n    },\n    // 获取阶梯设置列表\n    getladderList() {\n      this.axios({\n        url: this.$store.state.url.futures.getLadderInfo,\n        method: 'post',\n        hostType: 'co',\n        params: {\n          contractId: this.contractId,\n        },\n      }).then((rs) => {\n        this.tableLoading = false;\n        if (rs.code === '0' && rs.data) {\n          if (rs.data.ladderList) {\n            this.ladderList = rs.data.ladderList.ladderList || [];\n          }\n          if (rs.data.leverList) {\n            const leverListInfor = rs.data.leverList;\n            this.minLeverage = leverListInfor.minLever;\n            this.maxLeverage = leverListInfor.maxLever;\n          }\n          if (rs.data.leverCeiling) {\n            this.leverCeiling = rs.data.leverCeiling;\n          }\n          if (!this.userConfig) {\n            this.leverage = 20;\n          }\n        }\n      });\n    },\n    // 加\n    add() {\n      if (Number(this.leverage) < Number(this.maxLeverage)) {\n        const leverage = Number(this.leverage) + 1;\n        this.leverage = leverage;\n      }\n    },\n    // 减\n    subtract() {\n      if (Number(this.leverage) > 1) {\n        const leverage = Number(this.leverage) - 1;\n        this.leverage = leverage;\n      }\n    },\n    thousandsComma(num) {\n      if (num) {\n        return thousandsComma(num);\n      }\n      return num;\n    },\n  },\n};\n"]}]}