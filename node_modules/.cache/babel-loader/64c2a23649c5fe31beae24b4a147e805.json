{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/assets/exchangeAccount/exchangeAccount.js","dependencies":[{"path":"/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/assets/exchangeAccount/exchangeAccount.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.fill\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.sort\";\nimport _toConsumableArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { myStorage, fixD, fixRate, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-exchangeAccount',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      exchangeHeader: \"background: url(\".concat(imgMap.zc_ex, \")\"),\n      tabelLength: 20,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      switchFlag: false,\n      // 是否隐藏零资产\n      findValue: '',\n      // 搜索框内容\n      dataList: [],\n      totalBalance: '--',\n      // 总资产折合\n      totalRate: '--',\n      // 折合法币\n      totalBalanceSymbol: '',\n      // 总资产折合单位\n      colors: ['rgba(255, 255, 255, 1)', 'rgba(255, 255, 255, 0.8)', 'rgba(255, 255, 255, 0.6)', 'rgba(255, 255, 255, 0.4)', 'rgba(255, 255, 255, 0.25)', 'rgba(255, 255, 255, 0.1)'],\n      // colors: ['red', 'blue', 'pink', 'green', '#fff', '#000'],\n      canvasPages: [],\n      havePosition: false,\n      // 平台锁仓\n      positionV2: false,\n      // 代币锁仓\n      positionV3: false,\n      // 理财锁仓\n      searchTimer: null,\n      searchListResult: [],\n      search: false,\n      isShowDialog: false\n    };\n  },\n  computed: {\n    baseData: function baseData() {\n      return this.$store.state.baseData.publicInfo;\n    },\n    isCoOpen: function isCoOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\n        return true;\n      }\n\n      return false;\n    },\n    // 提现是否开启了必须实名认证\n    withdrawKycOpen: function withdrawKycOpen() {\n      var isOpen = 0;\n\n      if (this.baseData && this.baseData.kycLimitConfig) {\n        isOpen = this.baseData.kycLimitConfig.withdraw_kyc_open;\n      }\n\n      return Number(isOpen);\n    },\n    // 充值是否开启了必须实名认证\n    depositeKycOpen: function depositeKycOpen() {\n      var isOpen = 0;\n\n      if (this.baseData && this.baseData.kycLimitConfig) {\n        isOpen = this.baseData.kycLimitConfig.deposite_kyc_open;\n      }\n\n      return Number(isOpen);\n    },\n    // 用户信息\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo;\n    },\n    // 认证信息\n    idAuth: function idAuth() {\n      var idAuth = 0;\n\n      if (this.userInfo) {\n        idAuth = Number(this.userInfo.authLevel);\n      }\n\n      return idAuth;\n    },\n    linkurl: function linkurl() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.url;\n      }\n\n      return {};\n    },\n    tradeLinkUrl: function tradeLinkUrl() {\n      if (process.env.NODE_ENV === 'development') {\n        return this.isCoOpen ? '/co/trade' : '/ex/trade';\n      }\n\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\n        return this.isCoOpen ? \"\".concat(this.linkurl.coUrl, \"/trade\") : \"\".concat(this.linkurl.exUrl, \"/trade\");\n      }\n\n      return '';\n    },\n    // 表格title\n    columns: function columns() {\n      var arr = [];\n\n      if (this.havePosition || this.positionV2 || this.positionV3) {\n        arr = [{\n          title: this.$t('assets.exchangeAccount.position'),\n          width: ''\n        }];\n      }\n\n      return [{\n        title: this.$t('assets.exchangeAccount.coin'),\n        width: '100px'\n      }, // 币种\n      {\n        title: this.$t('assets.exchangeAccount.lumpSum'),\n        width: ''\n      }, // 总额\n      {\n        title: this.$t('assets.exchangeAccount.Available'),\n        width: ''\n      }, // 可用\n      {\n        title: this.$t('assets.exchangeAccount.freeze'),\n        width: ''\n      }].concat(_toConsumableArray(arr), [{\n        title: \"\".concat(this.$t('assets.exchangeAccount.AssetFolding'), \"(\").concat(this.showTotalBalanceSymbol, \")\"),\n        width: ''\n      }, // 资产折合\n      {\n        title: this.$t('assets.exchangeAccount.options'),\n        width: '200px'\n      } // 操作\n      ]);\n    },\n    // finance/account_balance 接口返回成功的数据\n    exchangeData: function exchangeData() {\n      return this.$store.state.assets.exchangeData;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 饼图 数据（包含饼图 和 指标）\n    canvasPagesFilter: function canvasPagesFilter() {\n      var _this = this;\n\n      var arr = []; // 去除零资产\n\n      var list = this.canvasPages.filter(function (item) {\n        return parseFloat(item.spk) > 0;\n      }); // 排序\n\n      list.sort(this.compare('spk')); // 非0资产的币种少于6种时\n\n      if (list.length < 6) {\n        list.forEach(function (item, index) {\n          var coinList = _this.market.coinList;\n          var coinName = getCoinShowName(item.symbol, coinList);\n          arr.push(_objectSpread(_objectSpread({}, item), {}, {\n            symbol: coinName,\n            color: _this.colors[index]\n          }));\n        }); // 非0资产的币种多于等于6种时\n      } else if (list.length >= 6) {\n        var evenSum = 0; // 选出前五个\n\n        list.forEach(function (item, index) {\n          if (index < 5) {\n            var coinList = _this.market.coinList;\n            var coinName = getCoinShowName(item.symbol, coinList);\n            arr.push(_objectSpread(_objectSpread({}, item), {}, {\n              symbol: coinName,\n              color: _this.colors[index]\n            }));\n          } else {\n            evenSum += item.spk;\n          }\n        }); // 剩余币种归纳为其他\n\n        arr.push({\n          symbol: this.$t('assets.exchangeAccount.other'),\n          // 其他\n          spk: evenSum,\n          color: this.colors[5]\n        });\n      }\n\n      return arr;\n    },\n    showTotalBalanceSymbol: function showTotalBalanceSymbol() {\n      var str = this.totalBalanceSymbol;\n\n      if (this.market && this.market.coinList && this.market.coinList[this.totalBalanceSymbol]) {\n        str = getCoinShowName(this.totalBalanceSymbol, this.market.coinList);\n      }\n\n      return str;\n    }\n  },\n  watch: {\n    exchangeData: function exchangeData(v) {\n      if (v && this.market) {\n        this.setData();\n      }\n    },\n    market: function market(v) {\n      if (v && this.exchangeData) {\n        this.setData();\n      }\n    },\n    canvasPagesFilter: function canvasPagesFilter(v) {\n      if (v.length === 0) {\n        this.canvasInit();\n      } else {\n        this.canvasMap();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      if (myStorage.get('assetsSwitch')) {\n        this.switchFlag = myStorage.get('assetsSwitch');\n      }\n\n      this.canvasInit();\n      this.$store.dispatch('assetsExchangeData');\n\n      if (this.exchangeData && this.market) {\n        this.setData();\n      }\n    },\n    setData: function setData() {\n      var _this$exchangeData = this.exchangeData,\n          totalBalance = _this$exchangeData.totalBalance,\n          totalBalanceSymbol = _this$exchangeData.totalBalanceSymbol,\n          platformCoin = _this$exchangeData.platformCoin,\n          allCoinMap = _this$exchangeData.allCoinMap;\n      this.positionV3 = Object.keys(allCoinMap).some(function (key) {\n        return Number(allCoinMap[key].lock_increment_amount) > 0;\n      });\n      var _this$market = this.market,\n          coinList = _this$market.coinList,\n          rate = _this$market.rate;\n      var fix = coinList[totalBalanceSymbol] && coinList[totalBalanceSymbol].showPrecision || 0;\n      this.totalBalance = fixD(totalBalance, fix); // 折合资产\n\n      this.totalBalanceSymbol = totalBalanceSymbol; // 折合币种\n\n      this.totalRate = fixRate(totalBalance, rate, totalBalanceSymbol); // 折合法币\n\n      if (platformCoin && platformCoin.length) {\n        var obj = allCoinMap[platformCoin];\n\n        if (obj && Number(obj.lock_position_balance)) {\n          this.havePosition = true;\n        }\n      }\n\n      if (this.baseData.switch.lock_position_v2_status && this.baseData.switch.lock_position_v2_status.toString() === '1') {\n        this.positionV2 = true;\n      }\n\n      this.setDataList(allCoinMap, totalBalance);\n    },\n    compare: function compare(property) {\n      return function fn(a, b) {\n        var value1 = a[property];\n        var value2 = b[property];\n        return value2 - value1;\n      };\n    },\n    switchChange: function switchChange() {\n      this.switchFlag = !this.switchFlag;\n      myStorage.set('assetsSwitch', this.switchFlag);\n      this.findChanges(this.findValue);\n    },\n    canvasMap: function canvasMap() {\n      var ctx = this.$refs.canvas.getContext('2d');\n      this.$refs.canvas.width = 100;\n      this.$refs.canvas.height = 100;\n      var start = 0;\n      this.canvasPagesFilter.forEach(function (item) {\n        var spk = start + item.spk * 2;\n\n        if (start >= 2) {\n          return;\n        } // 防止 2-xx的值\n\n\n        if (spk > 2) {\n          spk = 2;\n        } // 防止 1.x - 2.x的值\n\n\n        ctx.beginPath();\n        ctx.moveTo(50, 50);\n        ctx.fillStyle = item.color;\n        ctx.arc(50, 50, 50, Math.PI * start, Math.PI * spk);\n        ctx.closePath();\n        ctx.fill();\n        start = spk;\n      });\n      ctx.beginPath();\n      ctx.moveTo(50, 50);\n      ctx.fillStyle = '#294EBB';\n      ctx.arc(50, 50, 35, Math.PI * 0, Math.PI * 2);\n      ctx.closePath();\n      ctx.fill();\n    },\n    canvasInit: function canvasInit() {\n      var ctx = this.$refs.canvas.getContext('2d');\n      this.$refs.canvas.width = 100;\n      this.$refs.canvas.height = 100;\n      ctx.beginPath();\n      ctx.moveTo(50, 50);\n      ctx.fillStyle = '#e0e0e0';\n      ctx.arc(50, 50, 50, 0, Math.PI * 2);\n      ctx.closePath();\n      ctx.fill();\n      ctx.beginPath();\n      ctx.moveTo(50, 50);\n      ctx.fillStyle = '#294EBB';\n      ctx.arc(50, 50, 35, Math.PI * 0, Math.PI * 2);\n      ctx.closePath();\n      ctx.fill();\n    },\n    findChanges: function findChanges(v) {\n      var _this2 = this;\n\n      this.findValue = v;\n      if (this.searchTimer) clearTimeout(this.searchTimer);\n\n      if (v !== '') {\n        this.searchTimer = setTimeout(function () {\n          var result = _this2.dataList.filter(function (item) {\n            var isSamll = !_this2.switchFlag || _this2.switchFlag && item.classes !== 'smail-account';\n            var isSearch = isSamll && item.data[0].toUpperCase().indexOf(v.toUpperCase()) !== -1;\n            return isSearch;\n          });\n\n          _this2.searchListResult = result;\n          _this2.search = true;\n        }, 400);\n      } else {\n        this.search = false;\n      }\n    },\n    tableClick: function tableClick(type, symbol) {\n      // 提现\n      if (type === 'withdraw') {\n        // 如果开启了必须认证 并且 未认证成功 禁止提现\n        if (this.withdrawKycOpen && this.idAuth !== 1) {\n          this.isShowDialog = true;\n        } else {\n          this.$router.push(\"withdraw?symbol=\".concat(symbol));\n        }\n      } // 充值\n\n\n      if (type === 'recharge') {\n        if (this.depositeKycOpen && this.idAuth !== 1) {\n          this.isShowDialog = true;\n        } else {\n          this.$router.push(\"recharge?symbol=\".concat(symbol));\n        }\n      }\n\n      if (type === 'goTrade') {\n        var mSymbol = symbol.code;\n\n        if (mSymbol.toString().indexOf('/') === -1) {\n          return;\n        }\n\n        myStorage.set('markTitle', mSymbol.split('/')[1]);\n        myStorage.set('sSymbolName', mSymbol); // this.$router.push('/trade');\n\n        window.location.href = this.tradeLinkUrl;\n      } else if (type === 'goTradeIn') {\n        // this.$router.push('/trade');\n        window.location.href = this.tradeLinkUrl;\n      }\n    },\n    // 弹框取消\n    dialogClose: function dialogClose() {\n      this.isShowDialog = false;\n    },\n    // 去认证\n    gotoAuth: function gotoAuth() {\n      this.$router.push('/personal/userManagement');\n    },\n    setDataList: function setDataList(data, sum) {\n      var _this3 = this;\n\n      var list = [];\n      var canvasList = [];\n      Object.keys(data).forEach(function (item) {\n        if (data[item].isFiat) {\n          return;\n        }\n\n        canvasList.push({\n          symbol: item,\n          spk: data[item].allBtcValuatin / sum\n        }); // 该币种精度\n\n        var _this3$market = _this3.market,\n            coinList = _this3$market.coinList,\n            market = _this3$market.market;\n        var fix = coinList[item] && coinList[item].showPrecision || 0; // 资产折合精度\n\n        var totle = _this3.totalBalanceSymbol;\n        var btcFix = coinList[totle] && coinList[totle].showPrecision || 0; // 逻辑 1 如果 优先找出交易币种为当前货币的\n        //     2 如果 1条件未筛选出，则去看当前货币是否为计价货币 把以该货币为计价货币的币对都加进去\n\n        var selectOption = [];\n        var by = [];\n        Object.keys(market).forEach(function (v) {\n          Object.keys(market[v]).forEach(function (cv) {\n            var showSymbol = market[v][cv].showName || market[v][cv].name;\n\n            if (cv.split('/')[0] === item) {\n              selectOption.push({\n                value: showSymbol,\n                code: market[v][cv].name\n              });\n            }\n\n            if (v === item) {\n              by.push({\n                value: showSymbol,\n                code: market[v][cv].name\n              });\n            }\n          });\n        });\n\n        if (selectOption.length === 0) {\n          selectOption = by;\n        }\n\n        var arr = []; // 平台币锁仓数量\n\n        var lockPositionBalance = data[item].lock_position_balance || '0'; // 代币锁仓数量\n\n        var lockPositionV2Amount = data[item].lock_position_v2_amount || '0'; // 理财锁仓数量\n\n        var lockIncrementAmount = data[item].lock_increment_amount || '0'; // // 判断当前锁仓类型大于一个的时候\n\n        if (_this3.havePosition || _this3.positionV2 || _this3.positionV3) {\n          var num = Number(lockPositionBalance) + Number(lockPositionV2Amount) + Number(lockIncrementAmount);\n          var selectList = [];\n\n          if (Number(lockPositionBalance)) {\n            selectList.push(\"\".concat(_this3.$t('assets.exchangeAccount.positionBalance'), \"\\uFF1A\\n                    \").concat(fixD(lockPositionBalance, fix)));\n          }\n\n          if (Number(lockPositionV2Amount)) {\n            selectList.push(\"\".concat(_this3.$t('assets.exchangeAccount.positionV2Amount'), \"\\uFF1A\\n                  \").concat(fixD(lockPositionV2Amount, fix)));\n          }\n\n          if (Number(lockIncrementAmount)) {\n            selectList.push(\"\".concat(_this3.$t('assets.exchangeAccount.incomeLock'), \"\\uFF1A\").concat(fixD(lockIncrementAmount, fix)));\n          }\n\n          arr = [num ? [{\n            type: 'select',\n            iconSvg: \"<span class=\\\"position\\\">\".concat(fixD(num, fix), \"</span>\"),\n            selectOption: selectList,\n            iconClass: ['aaa'],\n            eventType: '',\n            selectWidth: '150'\n          }] : fixD(num, fix)];\n        }\n\n        var coinName = getCoinShowName(item, coinList);\n        var showUnlockSell = false;\n\n        if (coinList[item] && coinList[item].isOvercharge && coinList[item].isOvercharge.toString() === '1') {\n          showUnlockSell = true;\n        }\n\n        var btcValuation = fixD(data[item].allBtcValuatin, btcFix);\n        list.push({\n          // id: data[item].sort,\n          id: item,\n          btcValuation: btcValuation,\n          classes: btcValuation >= 0.0001 ? '' : 'smail-account',\n          data: [coinName, fixD(data[item].total_balance, fix), showUnlockSell ? [{\n            text: fixD(data[item].normal_balance, fix),\n            subContent: {\n              text: \"\".concat(fixD(data[item].overcharge_balance || 0, fix), \" (\").concat(_this3.$t('assets.exchangeAccount.limit'), \")\"),\n              classes: 'showUnlockSell'\n            }\n          }] : fixD(data[item].normal_balance, fix), fixD(data[item].lock_balance, fix)].concat(_toConsumableArray(arr), [fixD(data[item].allBtcValuatin, btcFix), [data[item].coinName === _this3.baseData.financing_symbol ? {\n            type: data[item].coinName === _this3.baseData.financing_symbol ? 'link' : 'label',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: '去理财',\n            // 去理财\n            links: '/manageFinances',\n            classes: [data[item].coinName === _this3.baseData.financing_symbol ? '' : 'tableNownStyle b-2-cl']\n          } : '', {\n            type: data[item].depositOpen ? 'button' : 'label',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: _this3.$t('assets.exchangeAccount.Recharge'),\n            // 充值\n            links: \"recharge?symbol=\".concat(item),\n            eventType: 'recharge',\n            classes: [data[item].depositOpen ? '' : 'tableNownStyle b-2-cl']\n          }, {\n            type: data[item].withdrawOpen ? 'button' : 'label',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: _this3.$t('assets.exchangeAccount.withdraw'),\n            // 提现\n            links: \"withdraw?symbol=\".concat(item),\n            eventType: 'withdraw',\n            classes: [data[item].withdrawOpen ? '' : 'tableNownStyle tableTithDraw b-2-cl']\n          }, selectOption.length ? {\n            type: 'select',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            iconSvg: '<svg class=\"icon icon-16\" aria-hidden=\"true\"><use xlink:href=\"#icon-c_1\"></use></svg>',\n            selectOption: selectOption,\n            iconClass: [''],\n            eventType: 'goTrade'\n          } : {\n            type: 'icon',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            iconSvg: '<span style=\"display: inline-block; width: 16px; height: 16px\"></span>' // eventType: 'goTradeIn',\n\n          }]])\n        });\n      });\n      this.canvasPages = canvasList;\n      this.tabelLoading = false;\n      this.tabelLength = list.length;\n      this.dataList = list.sort(function (a, b) {\n        return a.id - b.id;\n      }); // this.smailData = this.dataList.filter(item => parseFloat(item.btcValuation) >= 0.0001);\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/assets/exchangeAccount/exchangeAccount.js"],"names":["myStorage","fixD","fixRate","getCoinShowName","colorMap","imgMap","name","data","tabelLoading","exchangeHeader","zc_ex","tabelLength","switchFlag","findValue","dataList","totalBalance","totalRate","totalBalanceSymbol","colors","canvasPages","havePosition","positionV2","positionV3","searchTimer","searchListResult","search","isShowDialog","computed","baseData","$store","state","publicInfo","isCoOpen","base","switch","indep_co_switch","withdrawKycOpen","isOpen","kycLimitConfig","withdraw_kyc_open","Number","depositeKycOpen","deposite_kyc_open","userInfo","idAuth","authLevel","linkurl","url","tradeLinkUrl","process","env","NODE_ENV","coUrl","exUrl","columns","arr","title","$t","width","showTotalBalanceSymbol","exchangeData","assets","market","canvasPagesFilter","list","filter","item","parseFloat","spk","sort","compare","length","forEach","index","coinList","coinName","symbol","push","color","evenSum","str","watch","v","setData","canvasInit","canvasMap","methods","init","get","dispatch","platformCoin","allCoinMap","Object","keys","some","key","lock_increment_amount","rate","fix","showPrecision","obj","lock_position_balance","lock_position_v2_status","toString","setDataList","property","fn","a","b","value1","value2","switchChange","set","findChanges","ctx","$refs","canvas","getContext","height","start","beginPath","moveTo","fillStyle","arc","Math","PI","closePath","fill","clearTimeout","setTimeout","result","isSamll","classes","isSearch","toUpperCase","indexOf","tableClick","type","$router","mSymbol","code","split","window","location","href","dialogClose","gotoAuth","sum","canvasList","isFiat","allBtcValuatin","totle","btcFix","selectOption","by","cv","showSymbol","showName","value","lockPositionBalance","lockPositionV2Amount","lock_position_v2_amount","lockIncrementAmount","num","selectList","iconSvg","iconClass","eventType","selectWidth","showUnlockSell","isOvercharge","btcValuation","id","total_balance","text","normal_balance","subContent","overcharge_balance","lock_balance","financing_symbol","links","depositOpen","withdrawOpen"],"mappings":"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","sourcesContent":["import {\r\n  myStorage, fixD, fixRate, getCoinShowName, colorMap, imgMap,\r\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'page-exchangeAccount',\r\n  data() {\r\n    return {\r\n      tabelLoading: true,\r\n      exchangeHeader: `background: url(${imgMap.zc_ex})`,\r\n      tabelLength: 20,\r\n      imgMap,\r\n      colorMap,\r\n      switchFlag: false, // 是否隐藏零资产\r\n      findValue: '', // 搜索框内容\r\n      dataList: [],\r\n      totalBalance: '--', // 总资产折合\r\n      totalRate: '--', // 折合法币\r\n      totalBalanceSymbol: '', // 总资产折合单位\r\n      colors: [\r\n        'rgba(255, 255, 255, 1)',\r\n        'rgba(255, 255, 255, 0.8)',\r\n        'rgba(255, 255, 255, 0.6)',\r\n        'rgba(255, 255, 255, 0.4)',\r\n        'rgba(255, 255, 255, 0.25)',\r\n        'rgba(255, 255, 255, 0.1)',\r\n      ],\r\n      // colors: ['red', 'blue', 'pink', 'green', '#fff', '#000'],\r\n      canvasPages: [],\r\n      havePosition: false, // 平台锁仓\r\n      positionV2: false, // 代币锁仓\r\n      positionV3: false, // 理财锁仓\r\n      searchTimer: null,\r\n      searchListResult: [],\r\n      search: false,\r\n      isShowDialog: false,\r\n    };\r\n  },\r\n  computed: {\r\n    baseData() {\r\n      return this.$store.state.baseData.publicInfo;\r\n    },\r\n    isCoOpen() {\r\n      const base = this.$store.state.baseData.publicInfo;\r\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\r\n        return true;\r\n      }\r\n      return false;\r\n    },\r\n    // 提现是否开启了必须实名认证\r\n    withdrawKycOpen() {\r\n      let isOpen = 0;\r\n      if (this.baseData && this.baseData.kycLimitConfig) {\r\n        isOpen = this.baseData.kycLimitConfig.withdraw_kyc_open;\r\n      }\r\n      return Number(isOpen);\r\n    },\r\n    // 充值是否开启了必须实名认证\r\n    depositeKycOpen() {\r\n      let isOpen = 0;\r\n      if (this.baseData && this.baseData.kycLimitConfig) {\r\n        isOpen = this.baseData.kycLimitConfig.deposite_kyc_open;\r\n      }\r\n      return Number(isOpen);\r\n    },\r\n    // 用户信息\r\n    userInfo() {\r\n      return this.$store.state.baseData.userInfo;\r\n    },\r\n    // 认证信息\r\n    idAuth() {\r\n      let idAuth = 0;\r\n      if (this.userInfo) {\r\n        idAuth = Number(this.userInfo.authLevel);\r\n      }\r\n      return idAuth;\r\n    },\r\n    linkurl() {\r\n      if (this.$store.state.baseData.publicInfo) {\r\n        return this.$store.state.baseData.publicInfo.url;\r\n      }\r\n      return {};\r\n    },\r\n    tradeLinkUrl() {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        return this.isCoOpen ? '/co/trade' : '/ex/trade';\r\n      }\r\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\r\n        return this.isCoOpen ? `${this.linkurl.coUrl}/trade` : `${this.linkurl.exUrl}/trade`;\r\n      }\r\n      return '';\r\n    },\r\n    // 表格title\r\n    columns() {\r\n      let arr = [];\r\n      if (this.havePosition || this.positionV2 || this.positionV3) {\r\n        arr = [{ title: this.$t('assets.exchangeAccount.position'), width: '' }];\r\n      }\r\n      return [\r\n        { title: this.$t('assets.exchangeAccount.coin'), width: '100px' }, // 币种\r\n        { title: this.$t('assets.exchangeAccount.lumpSum'), width: '' }, // 总额\r\n        { title: this.$t('assets.exchangeAccount.Available'), width: '' }, // 可用\r\n        { title: this.$t('assets.exchangeAccount.freeze'), width: '' }, // 冻结\r\n        ...arr,\r\n        {\r\n          title: `${this.$t('assets.exchangeAccount.AssetFolding')}(${\r\n            this.showTotalBalanceSymbol\r\n          })`,\r\n          width: '',\r\n        }, // 资产折合\r\n        { title: this.$t('assets.exchangeAccount.options'), width: '200px' }, // 操作\r\n      ];\r\n    },\r\n    // finance/account_balance 接口返回成功的数据\r\n    exchangeData() {\r\n      return this.$store.state.assets.exchangeData;\r\n    },\r\n    // market 接口\r\n    market() {\r\n      return this.$store.state.baseData.market;\r\n    },\r\n    // 饼图 数据（包含饼图 和 指标）\r\n    canvasPagesFilter() {\r\n      const arr = [];\r\n      // 去除零资产\r\n      const list = this.canvasPages.filter((item) => parseFloat(item.spk) > 0);\r\n      // 排序\r\n      list.sort(this.compare('spk'));\r\n      // 非0资产的币种少于6种时\r\n      if (list.length < 6) {\r\n        list.forEach((item, index) => {\r\n          const { coinList } = this.market;\r\n          const coinName = getCoinShowName(item.symbol, coinList);\r\n          arr.push({\r\n            ...item,\r\n            symbol: coinName,\r\n            color: this.colors[index],\r\n          });\r\n        });\r\n        // 非0资产的币种多于等于6种时\r\n      } else if (list.length >= 6) {\r\n        let evenSum = 0;\r\n        // 选出前五个\r\n        list.forEach((item, index) => {\r\n          if (index < 5) {\r\n            const { coinList } = this.market;\r\n            const coinName = getCoinShowName(item.symbol, coinList);\r\n            arr.push({\r\n              ...item,\r\n              symbol: coinName,\r\n              color: this.colors[index],\r\n            });\r\n          } else {\r\n            evenSum += item.spk;\r\n          }\r\n        });\r\n        // 剩余币种归纳为其他\r\n        arr.push({\r\n          symbol: this.$t('assets.exchangeAccount.other'), // 其他\r\n          spk: evenSum,\r\n          color: this.colors[5],\r\n        });\r\n      }\r\n      return arr;\r\n    },\r\n    showTotalBalanceSymbol() {\r\n      let str = this.totalBalanceSymbol;\r\n      if (\r\n        this.market\r\n        && this.market.coinList\r\n        && this.market.coinList[this.totalBalanceSymbol]\r\n      ) {\r\n        str = getCoinShowName(this.totalBalanceSymbol, this.market.coinList);\r\n      }\r\n      return str;\r\n    },\r\n  },\r\n  watch: {\r\n    exchangeData(v) {\r\n      if (v && this.market) {\r\n        this.setData();\r\n      }\r\n    },\r\n    market(v) {\r\n      if (v && this.exchangeData) {\r\n        this.setData();\r\n      }\r\n    },\r\n    canvasPagesFilter(v) {\r\n      if (v.length === 0) {\r\n        this.canvasInit();\r\n      } else {\r\n        this.canvasMap();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (myStorage.get('assetsSwitch')) {\r\n        this.switchFlag = myStorage.get('assetsSwitch');\r\n      }\r\n      this.canvasInit();\r\n      this.$store.dispatch('assetsExchangeData');\r\n      if (this.exchangeData && this.market) {\r\n        this.setData();\r\n      }\r\n    },\r\n    setData() {\r\n      const {\r\n        totalBalance,\r\n        totalBalanceSymbol,\r\n        platformCoin,\r\n        allCoinMap,\r\n      } = this.exchangeData;\r\n\r\n      this.positionV3 = Object.keys(allCoinMap).some(\r\n        (key) => Number(allCoinMap[key].lock_increment_amount) > 0,\r\n      );\r\n      const { coinList, rate } = this.market;\r\n      const fix = (coinList[totalBalanceSymbol]\r\n          && coinList[totalBalanceSymbol].showPrecision)\r\n        || 0;\r\n      this.totalBalance = fixD(totalBalance, fix); // 折合资产\r\n      this.totalBalanceSymbol = totalBalanceSymbol; // 折合币种\r\n      this.totalRate = fixRate(totalBalance, rate, totalBalanceSymbol); // 折合法币\r\n      if (platformCoin && platformCoin.length) {\r\n        const obj = allCoinMap[platformCoin];\r\n        if (obj && Number(obj.lock_position_balance)) {\r\n          this.havePosition = true;\r\n        }\r\n      }\r\n      if (\r\n        this.baseData.switch.lock_position_v2_status\r\n        && this.baseData.switch.lock_position_v2_status.toString() === '1'\r\n      ) {\r\n        this.positionV2 = true;\r\n      }\r\n      this.setDataList(allCoinMap, totalBalance);\r\n    },\r\n    compare(property) {\r\n      return function fn(a, b) {\r\n        const value1 = a[property];\r\n        const value2 = b[property];\r\n        return value2 - value1;\r\n      };\r\n    },\r\n    switchChange() {\r\n      this.switchFlag = !this.switchFlag;\r\n      myStorage.set('assetsSwitch', this.switchFlag);\r\n      this.findChanges(this.findValue);\r\n    },\r\n    canvasMap() {\r\n      const ctx = this.$refs.canvas.getContext('2d');\r\n      this.$refs.canvas.width = 100;\r\n      this.$refs.canvas.height = 100;\r\n      let start = 0;\r\n      this.canvasPagesFilter.forEach((item) => {\r\n        let spk = start + item.spk * 2;\r\n        if (start >= 2) {\r\n          return;\r\n        } // 防止 2-xx的值\r\n        if (spk > 2) {\r\n          spk = 2;\r\n        } // 防止 1.x - 2.x的值\r\n        ctx.beginPath();\r\n        ctx.moveTo(50, 50);\r\n        ctx.fillStyle = item.color;\r\n        ctx.arc(50, 50, 50, Math.PI * start, Math.PI * spk);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n        start = spk;\r\n      });\r\n      ctx.beginPath();\r\n      ctx.moveTo(50, 50);\r\n      ctx.fillStyle = '#294EBB';\r\n      ctx.arc(50, 50, 35, Math.PI * 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    },\r\n    canvasInit() {\r\n      const ctx = this.$refs.canvas.getContext('2d');\r\n      this.$refs.canvas.width = 100;\r\n      this.$refs.canvas.height = 100;\r\n      ctx.beginPath();\r\n      ctx.moveTo(50, 50);\r\n      ctx.fillStyle = '#e0e0e0';\r\n      ctx.arc(50, 50, 50, 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n      ctx.beginPath();\r\n      ctx.moveTo(50, 50);\r\n      ctx.fillStyle = '#294EBB';\r\n      ctx.arc(50, 50, 35, Math.PI * 0, Math.PI * 2);\r\n      ctx.closePath();\r\n      ctx.fill();\r\n    },\r\n    findChanges(v) {\r\n      this.findValue = v;\r\n      if (this.searchTimer) clearTimeout(this.searchTimer);\r\n      if (v !== '') {\r\n        this.searchTimer = setTimeout(() => {\r\n          const result = this.dataList.filter((item) => {\r\n            const isSamll = !this.switchFlag || (this.switchFlag && item.classes !== 'smail-account');\r\n            const isSearch = isSamll && item.data[0].toUpperCase().indexOf(v.toUpperCase()) !== -1;\r\n            return isSearch;\r\n          });\r\n          this.searchListResult = result;\r\n          this.search = true;\r\n        }, 400);\r\n      } else {\r\n        this.search = false;\r\n      }\r\n    },\r\n    tableClick(type, symbol) {\r\n      // 提现\r\n      if (type === 'withdraw') {\r\n        // 如果开启了必须认证 并且 未认证成功 禁止提现\r\n        if (this.withdrawKycOpen && this.idAuth !== 1) {\r\n          this.isShowDialog = true;\r\n        } else {\r\n          this.$router.push(`withdraw?symbol=${symbol}`);\r\n        }\r\n      }\r\n      // 充值\r\n      if (type === 'recharge') {\r\n        if (this.depositeKycOpen && this.idAuth !== 1) {\r\n          this.isShowDialog = true;\r\n        } else {\r\n          this.$router.push(`recharge?symbol=${symbol}`);\r\n        }\r\n      }\r\n      if (type === 'goTrade') {\r\n        const mSymbol = symbol.code;\r\n        if (mSymbol.toString().indexOf('/') === -1) {\r\n          return;\r\n        }\r\n        myStorage.set('markTitle', mSymbol.split('/')[1]);\r\n        myStorage.set('sSymbolName', mSymbol);\r\n        // this.$router.push('/trade');\r\n        window.location.href = this.tradeLinkUrl;\r\n      } else if (type === 'goTradeIn') {\r\n        // this.$router.push('/trade');\r\n        window.location.href = this.tradeLinkUrl;\r\n      }\r\n    },\r\n    // 弹框取消\r\n    dialogClose() {\r\n      this.isShowDialog = false;\r\n    },\r\n    // 去认证\r\n    gotoAuth() {\r\n      this.$router.push('/personal/userManagement');\r\n    },\r\n    setDataList(data, sum) {\r\n      const list = [];\r\n      const canvasList = [];\r\n      Object.keys(data).forEach((item) => {\r\n        if (data[item].isFiat) {\r\n          return;\r\n        }\r\n        canvasList.push({\r\n          symbol: item,\r\n          spk: data[item].allBtcValuatin / sum,\r\n        });\r\n        // 该币种精度\r\n        const { coinList, market } = this.market;\r\n        const fix = (coinList[item] && coinList[item].showPrecision) || 0;\r\n        // 资产折合精度\r\n        const totle = this.totalBalanceSymbol;\r\n        const btcFix = (coinList[totle] && coinList[totle].showPrecision) || 0;\r\n        // 逻辑 1 如果 优先找出交易币种为当前货币的\r\n        //     2 如果 1条件未筛选出，则去看当前货币是否为计价货币 把以该货币为计价货币的币对都加进去\r\n        let selectOption = [];\r\n        const by = [];\r\n        Object.keys(market).forEach((v) => {\r\n          Object.keys(market[v]).forEach((cv) => {\r\n            const showSymbol = market[v][cv].showName || market[v][cv].name;\r\n            if (cv.split('/')[0] === item) {\r\n              selectOption.push({\r\n                value: showSymbol,\r\n                code: market[v][cv].name,\r\n              });\r\n            }\r\n            if (v === item) {\r\n              by.push({ value: showSymbol, code: market[v][cv].name });\r\n            }\r\n          });\r\n        });\r\n        if (selectOption.length === 0) {\r\n          selectOption = by;\r\n        }\r\n        let arr = [];\r\n\r\n        // 平台币锁仓数量\r\n        const lockPositionBalance = data[item].lock_position_balance || '0';\r\n        // 代币锁仓数量\r\n        const lockPositionV2Amount = data[item].lock_position_v2_amount || '0';\r\n        // 理财锁仓数量\r\n        const lockIncrementAmount = data[item].lock_increment_amount || '0';\r\n        // // 判断当前锁仓类型大于一个的时候\r\n        if (this.havePosition || this.positionV2 || this.positionV3) {\r\n          const num = Number(lockPositionBalance)\r\n            + Number(lockPositionV2Amount)\r\n            + Number(lockIncrementAmount);\r\n\r\n          const selectList = [];\r\n          if (Number(lockPositionBalance)) {\r\n            selectList.push(\r\n              `${this.$t('assets.exchangeAccount.positionBalance')}：\r\n                    ${fixD(lockPositionBalance, fix)}`,\r\n            );\r\n          }\r\n          if (Number(lockPositionV2Amount)) {\r\n            selectList.push(\r\n              `${this.$t('assets.exchangeAccount.positionV2Amount')}：\r\n                  ${fixD(lockPositionV2Amount, fix)}`,\r\n            );\r\n          }\r\n          if (Number(lockIncrementAmount)) {\r\n            selectList.push(\r\n              `${this.$t('assets.exchangeAccount.incomeLock')}：${fixD(\r\n                lockIncrementAmount,\r\n                fix,\r\n              )}`,\r\n            );\r\n          }\r\n\r\n          arr = [\r\n            num\r\n              ? [\r\n                {\r\n                  type: 'select',\r\n                  iconSvg: `<span class=\"position\">${fixD(num, fix)}</span>`,\r\n                  selectOption: selectList,\r\n                  iconClass: ['aaa'],\r\n                  eventType: '',\r\n                  selectWidth: '150',\r\n                },\r\n              ]\r\n              : fixD(num, fix),\r\n          ];\r\n        }\r\n\r\n        const coinName = getCoinShowName(item, coinList);\r\n        let showUnlockSell = false;\r\n        if (\r\n          coinList[item]\r\n          && coinList[item].isOvercharge\r\n          && coinList[item].isOvercharge.toString() === '1'\r\n        ) {\r\n          showUnlockSell = true;\r\n        }\r\n        const btcValuation = fixD(data[item].allBtcValuatin, btcFix);\r\n        list.push({\r\n          // id: data[item].sort,\r\n          id: item,\r\n          btcValuation,\r\n          classes: btcValuation >= 0.0001 ? '' : 'smail-account',\r\n          data: [\r\n            coinName,\r\n            fixD(data[item].total_balance, fix),\r\n            showUnlockSell\r\n              ? [\r\n                {\r\n                  text: fixD(data[item].normal_balance, fix),\r\n                  subContent: {\r\n                    text: `${fixD(\r\n                      data[item].overcharge_balance || 0,\r\n                      fix,\r\n                    )} (${this.$t('assets.exchangeAccount.limit')})`,\r\n                    classes: 'showUnlockSell',\r\n                  },\r\n                },\r\n              ]\r\n              : fixD(data[item].normal_balance, fix),\r\n            fixD(data[item].lock_balance, fix),\r\n            ...arr,\r\n            fixD(data[item].allBtcValuatin, btcFix),\r\n            [\r\n              data[item].coinName === this.baseData.financing_symbol\r\n                ? {\r\n                  type:\r\n                      data[item].coinName === this.baseData.financing_symbol\r\n                        ? 'link'\r\n                        : 'label', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                  text: '去理财', // 去理财\r\n                  links: '/manageFinances',\r\n                  classes: [\r\n                    data[item].coinName === this.baseData.financing_symbol\r\n                      ? ''\r\n                      : 'tableNownStyle b-2-cl',\r\n                  ],\r\n                }\r\n                : '',\r\n              {\r\n                type: data[item].depositOpen ? 'button' : 'label', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                text: this.$t('assets.exchangeAccount.Recharge'), // 充值\r\n                links: `recharge?symbol=${item}`,\r\n                eventType: 'recharge',\r\n                classes: [data[item].depositOpen ? '' : 'tableNownStyle b-2-cl'],\r\n              },\r\n              {\r\n                type: data[item].withdrawOpen ? 'button' : 'label', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                text: this.$t('assets.exchangeAccount.withdraw'), // 提现\r\n                links: `withdraw?symbol=${item}`,\r\n                eventType: 'withdraw',\r\n                classes: [\r\n                  data[item].withdrawOpen\r\n                    ? ''\r\n                    : 'tableNownStyle tableTithDraw b-2-cl',\r\n                ],\r\n              },\r\n              selectOption.length\r\n                ? {\r\n                  type: 'select', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                  iconSvg:\r\n                      '<svg class=\"icon icon-16\" aria-hidden=\"true\"><use xlink:href=\"#icon-c_1\"></use></svg>',\r\n                  selectOption,\r\n                  iconClass: [''],\r\n                  eventType: 'goTrade',\r\n                }\r\n                : {\r\n                  type: 'icon', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                  iconSvg:\r\n                      '<span style=\"display: inline-block; width: 16px; height: 16px\"></span>',\r\n                  // eventType: 'goTradeIn',\r\n                },\r\n            ],\r\n          ],\r\n        });\r\n      });\r\n      this.canvasPages = canvasList;\r\n      this.tabelLoading = false;\r\n      this.tabelLength = list.length;\r\n      this.dataList = list.sort((a, b) => a.id - b.id);\r\n      // this.smailData = this.dataList.filter(item => parseFloat(item.btcValuation) >= 0.0001);\r\n    },\r\n  },\r\n};\r\n"]}]}