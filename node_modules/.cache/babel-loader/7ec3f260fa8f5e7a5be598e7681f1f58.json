{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/leverageToLoan/leverageToLoan.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/leverageToLoan/leverageToLoan.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport { fixD, fixInput, formatTime, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-withdraw',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      tabelList: [],\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      messData: {},\n      // 当前币对信息\n      broCoin: '',\n      // 当前借贷的币种\n      broNum: '',\n      // 借贷数量\n      btnLoading: false,\n      // loading\n      subContent: [],\n      // 展开的数据\n      subColumns: [],\n      // 展开的表头\n      subContentId: 0,\n      // 展开的id\n      subLoading: false,\n      // 展开的loading\n      dataList: {}\n    };\n  },\n  filters: {\n    fixDFn: function fixDFn(v, that, type) {\n      return fixD(v, that.coinFix[type]);\n    },\n    fixDFnTwo: function fixDFnTwo(v, type) {\n      return fixD(v, type);\n    },\n    rateFix: function rateFix(v) {\n      var data = v || 0;\n      return \"\".concat(fixD(data * 100, 2), \"%\");\n    }\n  },\n  watch: {\n    messData: function messData(v) {\n      if (Object.keys(v).length) {\n        this.broCoin = v.baseCoin;\n\n        if (Object.keys(this.market).length) {\n          this.getTableList();\n        }\n      }\n    },\n    market: function market(v) {\n      if (Object.keys(v).length && Object.keys(this.messData).length) {\n        this.getTableList();\n      }\n    },\n    broNum: function broNum(v) {\n      this.broNum = fixInput(v, 3);\n    }\n  },\n  computed: {\n    btnDisabled: function btnDisabled() {\n      var flag = true;\n\n      if (this.broErrorObj.flag || this.btnLoading) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    // 借贷币种的信息\n    broMessage: function broMessage() {\n      var obj = {\n        total: '0',\n        // 总额度\n        can: '0',\n        // 可借\n        borrowed: '0',\n        // 已借\n        type: 'base',\n        min: '0' // 最小借贷量\n\n      };\n      var _this$messData = this.messData,\n          baseCoin = _this$messData.baseCoin,\n          baseTotalBorrow = _this$messData.baseTotalBorrow,\n          baseCanBorrow = _this$messData.baseCanBorrow,\n          baseBorrowBalance = _this$messData.baseBorrowBalance,\n          baseMinBorrow = _this$messData.baseMinBorrow,\n          quoteCoin = _this$messData.quoteCoin,\n          quoteTotalBorrow = _this$messData.quoteTotalBorrow,\n          quoteCanBorrow = _this$messData.quoteCanBorrow,\n          quoteBorrowBalance = _this$messData.quoteBorrowBalance,\n          quoteMinBorrow = _this$messData.quoteMinBorrow;\n\n      if (this.broCoin === baseCoin) {\n        obj.total = baseTotalBorrow || 0;\n        obj.can = baseCanBorrow || 0;\n        obj.borrowed = baseBorrowBalance || 0;\n        obj.type = 'base';\n        obj.min = baseMinBorrow || 0;\n      } else if (this.broCoin === quoteCoin) {\n        obj.total = quoteTotalBorrow || 0;\n        obj.can = quoteCanBorrow || 0;\n        obj.borrowed = quoteBorrowBalance || 0;\n        obj.type = 'quote';\n        obj.min = quoteMinBorrow || 0;\n      }\n\n      return obj;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market || {};\n    },\n    // 表格title\n    columns: function columns() {\n      return [{\n        title: this.$t('assets.leverageToLoan.list1'),\n        width: '10%'\n      }, // 申请时间\n      {\n        title: this.$t('assets.leverageToLoan.list2'),\n        width: '10%',\n        align: 'left'\n      }, // 杠杆账户\n      {\n        title: this.$t('assets.leverageToLoan.list3'),\n        width: '10%'\n      }, // 币种\n      {\n        title: this.$t('assets.leverageToLoan.list4'),\n        width: '15%'\n      }, // 数量\n      {\n        title: this.$t('assets.leverageToLoan.list5'),\n        width: '10%'\n      }, // 利率\n      {\n        title: this.$t('assets.leverageToLoan.list6'),\n        width: '15%'\n      }, // 未还利息\n      {\n        title: this.$t('assets.leverageToLoan.list7'),\n        width: '15%'\n      }, // 未还数量\n      {\n        title: this.$t('assets.leverageToLoan.list8'),\n        width: '15%'\n      } // 操作\n      ];\n    },\n    coinFix: function coinFix() {\n      var coinList = this.market.coinList;\n      var obj = {\n        base: 0,\n        quote: 0\n      };\n\n      if (coinList && Object.keys(this.messData).length) {\n        var _this$messData2 = this.messData,\n            baseCoin = _this$messData2.baseCoin,\n            quoteCoin = _this$messData2.quoteCoin;\n\n        if (coinList[baseCoin]) {\n          obj.base = coinList[baseCoin].showPrecision;\n        }\n\n        if (coinList[quoteCoin]) {\n          obj.quote = coinList[quoteCoin].showPrecision;\n        }\n      }\n\n      return obj;\n    },\n    broWarningText: function broWarningText() {\n      var can = this.broMessage.can; // const num = fixD(can, this.coinFix[type]);\n\n      var num = fixD(can, 3);\n      return \"\".concat(this.$t('assets.leverageToLoan.canToLoan'), \" \").concat(num, \"\\n        \").concat(this.getShowCoin(this.broCoin));\n    },\n    broErrorObj: function broErrorObj() {\n      var obj = {\n        flag: false,\n        // 是否通过验证\n        text: '',\n        // 错误文案\n        showError: false // 是否提示错误\n\n      };\n\n      if (Number(this.broNum) === 0) {\n        obj.flag = false;\n        obj.text = '';\n        obj.showError = false;\n      } else if (Number(this.broNum) > Number(this.broMessage.can)) {\n        obj.flag = false; // 借贷数量不得大于可借贷数量\n\n        obj.text = this.$t('assets.leverageToLoan.inputError1');\n        obj.showError = true;\n      } else if (Number(this.broNum) < Number(this.broMessage.min)) {\n        obj.flag = false;\n        var _this$broMessage = this.broMessage,\n            min = _this$broMessage.min,\n            type = _this$broMessage.type;\n        var num = fixD(min, this.coinFix[type]); // 借贷数量不得小于\n\n        var str = this.$t('assets.leverageToLoan.inputError2');\n        obj.text = \"\".concat(str, \" \").concat(num, \" \").concat(this.broCoin);\n        obj.showError = true;\n      } else {\n        obj.flag = true;\n        obj.text = '';\n        obj.showError = false;\n      }\n\n      return obj;\n    }\n  },\n  methods: {\n    init: function init() {\n      // 如果不存在币种跳走\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/leverageAccount');\n        return;\n      }\n\n      this.getData();\n\n      if (Object.keys(this.market).length && Object.keys(this.messData).length) {\n        this.getTableList();\n      }\n    },\n    getShowSymbol: function getShowSymbol(v) {\n      if (!this.market) return v;\n      var market = this.market.market;\n      var showSymbol = v;\n\n      if (this.market && market) {\n        var obj = market[this.messData.quoteCoin][this.messData.name];\n        showSymbol = obj.showName || obj.name;\n      }\n\n      return showSymbol;\n    },\n    getShowCoin: function getShowCoin(v) {\n      if (!this.market) return v;\n      var coinList = this.market.coinList;\n      var str = v;\n\n      if (this.market && coinList) {\n        str = getCoinShowName(v, coinList);\n      }\n\n      return str;\n    },\n    rateFixFn: function rateFixFn(v) {\n      return \"\".concat(fixD(v * 100, 2), \"%\");\n    },\n    // 全部借贷\n    allBro: function allBro() {\n      this.broNum = this.broMessage.can;\n    },\n    transferSuccess: function transferSuccess() {\n      this.getData();\n    },\n    repaymentSuccess: function repaymentSuccess() {\n      this.getData();\n      this.getTableList();\n    },\n    getData: function getData() {\n      var _this = this;\n\n      var params = {\n        symbol: this.symbol\n      }; // fetch('http://localhost:7001/financeLeverageFinance').then((data) => {\n      //   return data.json()\n      // }).then((data) => {\n      //   if(data.code.toString() === '0') {\n      //     this.messData = data.data\n      //   }\n      // })\n\n      this.axios({\n        url: '/lever/finance/symbol/balance',\n        params: params\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this.messData = data.data;\n        }\n      });\n    },\n    // 分页器\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getTableList();\n    },\n    // 划转\n    transfer: function transfer(coin) {\n      this.$bus.$emit('coTransfer', this.messData.symbol, coin);\n    },\n    // 修改借贷币种\n    setBroCoin: function setBroCoin(v) {\n      if (this.broCoin === v) return;\n      this.broCoin = v;\n      this.broNum = '';\n    },\n    inputChange: function inputChange(v, name) {\n      this[name] = v;\n    },\n    // 借贷点击\n    broClick: function broClick() {\n      var _this2 = this;\n\n      this.btnLoading = true;\n      this.axios({\n        url: '/lever/finance/borrow',\n        params: {\n          symbol: this.symbol,\n          coin: this.broCoin,\n          amount: this.broNum\n        }\n      }).then(function (data) {\n        _this2.btnLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this2.getData();\n\n          _this2.getTableList();\n\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this2.broNum = '';\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      }); // fetch('http://localhost:7001/leverFinanceTransfer').then((data) => {\n      //   return data.json()\n      // })\n    },\n    tableClick: function tableClick(type, data) {\n      if (type === 'repayment') {\n        var obj = this.dataList[data];\n        this.$bus.$emit('coRepayment', obj);\n      } else if (type === 'details') {\n        this.getSubTableData(data);\n      }\n    },\n    typeText: function typeText(v) {\n      var str = '';\n\n      switch (v) {\n        case '1':\n          str = this.$t('assets.leverageToLoan.typeText1');\n          break;\n\n        case '2':\n          str = this.$t('assets.leverageToLoan.typeText2');\n          break;\n\n        default:\n          str = this.$t('assets.leverageToLoan.typeText3');\n      }\n\n      return str;\n    },\n    // 查看详情\n    getSubTableData: function getSubTableData(v) {\n      var _this3 = this;\n\n      if (v.open) {\n        this.subContentId = v.id;\n        this.subColumns = [this.$t('order.exchangeOrder.detailsTime'), // 时间\n        this.$t('assets.leverageToLoan.list3'), // 币种\n        this.$t('order.exchangeOrder.detailsVolume'), // 数量\n        this.$t('assets.flowingWater.type') // 类型\n        ];\n        this.subContent = [];\n        this.subLoading = true;\n        this.axios({\n          url: '/lever/return/info',\n          method: 'post',\n          params: {\n            id: v.id.toString(),\n            pageSize: 10000\n          }\n        }).then(function (data) {\n          if (v.id !== _this3.subContentId) {\n            return;\n          }\n\n          if (data.code.toString() === '0') {\n            var list = [];\n            data.data.financeList.forEach(function (item) {\n              // const [baseCoin, countCoin] = this.symbol.split('/');\n              // const { marketFix, coinFix } = this.getFix(countCoin, baseCoin);\n              var returnFix = _this3.messData.baseReturnPrecision;\n\n              if (item.coin === _this3.messData.quoteCoin) {\n                returnFix = _this3.messData.quoteReturnPrecision;\n              }\n\n              list.push({\n                ctime: formatTime(Number(item.repaymentTime)),\n                coin: _this3.getShowCoin(item.coin),\n                volume: fixD(item.returnMoney, returnFix),\n                type: _this3.typeText(item.type.toString())\n              });\n            });\n            _this3.subLoading = false;\n            _this3.subContent = list;\n          } else {\n            _this3.subLoading = false;\n\n            _this3.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }\n        });\n      }\n    },\n    getTableList: function getTableList() {\n      var _this4 = this;\n\n      this.axios({\n        url: 'lever/borrow/new',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this4.tabelLoading = false;\n          var _data$data = data.data,\n              count = _data$data.count,\n              financeList = _data$data.financeList;\n          var list = []; // const { coinList } = this.market;\n\n          financeList.forEach(function (item) {\n            // const fix = coinList[item.coin.toUpperCase()].showPrecision;\n            var fix = 8;\n            var returnFix = 8;\n            _this4.dataList[item.id] = item;\n            list.push({\n              id: item.id,\n              data: [formatTime(Number(item.ctime)), item.showName || item.symbol.toUpperCase(), _this4.getShowCoin(item.coin.toUpperCase()), fixD(item.borrowMoney, fix), _this4.rateFixFn(item.interestRate), fixD(item.oweInterest, returnFix), fixD(item.oweAmount, returnFix), [{\n                type: 'subTable',\n                // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n                text: _this4.$t('order.exchangeOrder.details'),\n                // 详情\n                eventType: 'details'\n              }, {\n                type: 'button',\n                // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n                text: _this4.$t('assets.leverageToLoan.repayment'),\n                // 归还\n                eventType: 'repayment'\n              }]]\n            });\n          });\n          _this4.tabelList = list;\n          _this4.paginationObj.total = count > 30 ? 30 : count;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/leverageToLoan/leverageToLoan.js"],"names":["fixD","fixInput","formatTime","getCoinShowName","colorMap","imgMap","name","data","tabelLoading","tabelList","paginationObj","total","display","currentPage","messData","broCoin","broNum","btnLoading","subContent","subColumns","subContentId","subLoading","dataList","filters","fixDFn","v","that","type","coinFix","fixDFnTwo","rateFix","watch","Object","keys","length","baseCoin","market","getTableList","computed","btnDisabled","flag","broErrorObj","broMessage","obj","can","borrowed","min","baseTotalBorrow","baseCanBorrow","baseBorrowBalance","baseMinBorrow","quoteCoin","quoteTotalBorrow","quoteCanBorrow","quoteBorrowBalance","quoteMinBorrow","$store","state","baseData","columns","title","$t","width","align","coinList","base","quote","showPrecision","broWarningText","num","getShowCoin","text","showError","Number","str","methods","init","$route","query","symbol","toUpperCase","$router","push","getData","getShowSymbol","showSymbol","showName","rateFixFn","allBro","transferSuccess","repaymentSuccess","params","axios","url","then","code","toString","pagechange","transfer","coin","$bus","$emit","setBroCoin","inputChange","broClick","amount","msg","tableClick","getSubTableData","typeText","open","id","method","pageSize","list","financeList","forEach","item","returnFix","baseReturnPrecision","quoteReturnPrecision","ctime","repaymentTime","volume","returnMoney","page","count","fix","borrowMoney","interestRate","oweInterest","oweAmount","eventType"],"mappings":"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","sourcesContent":["import {\r\n  fixD, fixInput, formatTime, getCoinShowName, colorMap, imgMap,\r\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'page-withdraw',\r\n  data() {\r\n    return {\r\n      tabelLoading: true,\r\n      imgMap,\r\n      colorMap,\r\n      tabelList: [],\r\n      paginationObj: {\r\n        total: 0, // 数据总条数\r\n        display: 10, // 每页显示条数\r\n        currentPage: 1, // 当前页码\r\n      },\r\n      messData: {}, // 当前币对信息\r\n      broCoin: '', // 当前借贷的币种\r\n      broNum: '', // 借贷数量\r\n      btnLoading: false, // loading\r\n      subContent: [], // 展开的数据\r\n      subColumns: [], // 展开的表头\r\n      subContentId: 0, // 展开的id\r\n      subLoading: false, // 展开的loading\r\n      dataList: {},\r\n    };\r\n  },\r\n  filters: {\r\n    fixDFn(v, that, type) {\r\n      return fixD(v, that.coinFix[type]);\r\n    },\r\n    fixDFnTwo(v, type) {\r\n      return fixD(v, type);\r\n    },\r\n    rateFix(v) {\r\n      const data = v || 0;\r\n      return `${fixD(data * 100, 2)}%`;\r\n    },\r\n\r\n  },\r\n  watch: {\r\n    messData(v) {\r\n      if (Object.keys(v).length) {\r\n        this.broCoin = v.baseCoin;\r\n        if (Object.keys(this.market).length) {\r\n          this.getTableList();\r\n        }\r\n      }\r\n    },\r\n    market(v) {\r\n      if (Object.keys(v).length && Object.keys(this.messData).length) {\r\n        this.getTableList();\r\n      }\r\n    },\r\n    broNum(v) {\r\n      this.broNum = fixInput(v, 3);\r\n    },\r\n  },\r\n  computed: {\r\n    btnDisabled() {\r\n      let flag = true;\r\n      if (this.broErrorObj.flag || this.btnLoading) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    // 借贷币种的信息\r\n    broMessage() {\r\n      const obj = {\r\n        total: '0', // 总额度\r\n        can: '0', // 可借\r\n        borrowed: '0', // 已借\r\n        type: 'base',\r\n        min: '0', // 最小借贷量\r\n      };\r\n      const {\r\n        baseCoin,\r\n        baseTotalBorrow,\r\n        baseCanBorrow,\r\n        baseBorrowBalance,\r\n        baseMinBorrow,\r\n        quoteCoin,\r\n        quoteTotalBorrow,\r\n        quoteCanBorrow,\r\n        quoteBorrowBalance,\r\n        quoteMinBorrow,\r\n      } = this.messData;\r\n      if (this.broCoin === baseCoin) {\r\n        obj.total = baseTotalBorrow || 0;\r\n        obj.can = baseCanBorrow || 0;\r\n        obj.borrowed = baseBorrowBalance || 0;\r\n        obj.type = 'base';\r\n        obj.min = baseMinBorrow || 0;\r\n      } else if (this.broCoin === quoteCoin) {\r\n        obj.total = quoteTotalBorrow || 0;\r\n        obj.can = quoteCanBorrow || 0;\r\n        obj.borrowed = quoteBorrowBalance || 0;\r\n        obj.type = 'quote';\r\n        obj.min = quoteMinBorrow || 0;\r\n      }\r\n      return obj;\r\n    },\r\n    // market 接口\r\n    market() { return this.$store.state.baseData.market || {}; },\r\n    // 表格title\r\n    columns() {\r\n      return [\r\n        { title: this.$t('assets.leverageToLoan.list1'), width: '10%' }, // 申请时间\r\n        { title: this.$t('assets.leverageToLoan.list2'), width: '10%', align: 'left' }, // 杠杆账户\r\n        { title: this.$t('assets.leverageToLoan.list3'), width: '10%' }, // 币种\r\n        { title: this.$t('assets.leverageToLoan.list4'), width: '15%' }, // 数量\r\n        { title: this.$t('assets.leverageToLoan.list5'), width: '10%' }, // 利率\r\n        { title: this.$t('assets.leverageToLoan.list6'), width: '15%' }, // 未还利息\r\n        { title: this.$t('assets.leverageToLoan.list7'), width: '15%' }, // 未还数量\r\n        { title: this.$t('assets.leverageToLoan.list8'), width: '15%' }, // 操作\r\n      ];\r\n    },\r\n    coinFix() {\r\n      const { coinList } = this.market;\r\n      const obj = {\r\n        base: 0,\r\n        quote: 0,\r\n      };\r\n      if (coinList && Object.keys(this.messData).length) {\r\n        const { baseCoin, quoteCoin } = this.messData;\r\n        if (coinList[baseCoin]) {\r\n          obj.base = coinList[baseCoin].showPrecision;\r\n        }\r\n        if (coinList[quoteCoin]) {\r\n          obj.quote = coinList[quoteCoin].showPrecision;\r\n        }\r\n      }\r\n      return obj;\r\n    },\r\n    broWarningText() {\r\n      const { can } = this.broMessage;\r\n      // const num = fixD(can, this.coinFix[type]);\r\n      const num = fixD(can, 3);\r\n      return `${this.$t('assets.leverageToLoan.canToLoan')} ${num}\r\n        ${this.getShowCoin(this.broCoin)}`;\r\n    },\r\n    broErrorObj() {\r\n      const obj = {\r\n        flag: false, // 是否通过验证\r\n        text: '', // 错误文案\r\n        showError: false, // 是否提示错误\r\n      };\r\n      if (Number(this.broNum) === 0) {\r\n        obj.flag = false;\r\n        obj.text = '';\r\n        obj.showError = false;\r\n      } else if (Number(this.broNum) > Number(this.broMessage.can)) {\r\n        obj.flag = false;\r\n        // 借贷数量不得大于可借贷数量\r\n        obj.text = this.$t('assets.leverageToLoan.inputError1');\r\n        obj.showError = true;\r\n      } else if (Number(this.broNum) < Number(this.broMessage.min)) {\r\n        obj.flag = false;\r\n        const { min, type } = this.broMessage;\r\n        const num = fixD(min, this.coinFix[type]);\r\n        // 借贷数量不得小于\r\n        const str = this.$t('assets.leverageToLoan.inputError2');\r\n        obj.text = `${str} ${num} ${this.broCoin}`;\r\n        obj.showError = true;\r\n      } else {\r\n        obj.flag = true;\r\n        obj.text = '';\r\n        obj.showError = false;\r\n      }\r\n      return obj;\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      // 如果不存在币种跳走\r\n      if (this.$route.query.symbol) {\r\n        this.symbol = this.$route.query.symbol.toUpperCase();\r\n      } else {\r\n        this.$router.push('/assets/leverageAccount');\r\n        return;\r\n      }\r\n      this.getData();\r\n      if (Object.keys(this.market).length && Object.keys(this.messData).length) {\r\n        this.getTableList();\r\n      }\r\n    },\r\n    getShowSymbol(v) {\r\n      if (!this.market) return v;\r\n      const { market } = this.market;\r\n      let showSymbol = v;\r\n      if (this.market && market) {\r\n        const obj = market[this.messData.quoteCoin][this.messData.name];\r\n        showSymbol = obj.showName || obj.name;\r\n      }\r\n      return showSymbol;\r\n    },\r\n    getShowCoin(v) {\r\n      if (!this.market) return v;\r\n      const { coinList } = this.market;\r\n      let str = v;\r\n      if (this.market && coinList) {\r\n        str = getCoinShowName(v, coinList);\r\n      }\r\n      return str;\r\n    },\r\n    rateFixFn(v) {\r\n      return `${fixD(v * 100, 2)}%`;\r\n    },\r\n    // 全部借贷\r\n    allBro() {\r\n      this.broNum = this.broMessage.can;\r\n    },\r\n    transferSuccess() {\r\n      this.getData();\r\n    },\r\n    repaymentSuccess() {\r\n      this.getData();\r\n      this.getTableList();\r\n    },\r\n    getData() {\r\n      const params = {\r\n        symbol: this.symbol,\r\n      };\r\n      // fetch('http://localhost:7001/financeLeverageFinance').then((data) => {\r\n      //   return data.json()\r\n      // }).then((data) => {\r\n      //   if(data.code.toString() === '0') {\r\n      //     this.messData = data.data\r\n      //   }\r\n      // })\r\n      this.axios({\r\n        url: '/lever/finance/symbol/balance',\r\n        params,\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.messData = data.data;\r\n        }\r\n      });\r\n    },\r\n    // 分页器\r\n    pagechange(v) {\r\n      this.paginationObj.currentPage = v;\r\n      this.getTableList();\r\n    },\r\n    // 划转\r\n    transfer(coin) {\r\n      this.$bus.$emit('coTransfer', this.messData.symbol, coin);\r\n    },\r\n    // 修改借贷币种\r\n    setBroCoin(v) {\r\n      if (this.broCoin === v) return;\r\n      this.broCoin = v;\r\n      this.broNum = '';\r\n    },\r\n    inputChange(v, name) {\r\n      this[name] = v;\r\n    },\r\n    // 借贷点击\r\n    broClick() {\r\n      this.btnLoading = true;\r\n      this.axios({\r\n        url: '/lever/finance/borrow',\r\n        params: {\r\n          symbol: this.symbol,\r\n          coin: this.broCoin,\r\n          amount: this.broNum,\r\n        },\r\n      }).then((data) => {\r\n        this.btnLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.getData();\r\n          this.getTableList();\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.broNum = '';\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n      // fetch('http://localhost:7001/leverFinanceTransfer').then((data) => {\r\n      //   return data.json()\r\n      // })\r\n    },\r\n    tableClick(type, data) {\r\n      if (type === 'repayment') {\r\n        const obj = this.dataList[data];\r\n        this.$bus.$emit('coRepayment', obj);\r\n      } else if (type === 'details') {\r\n        this.getSubTableData(data);\r\n      }\r\n    },\r\n    typeText(v) {\r\n      let str = '';\r\n      switch (v) {\r\n        case '1':\r\n          str = this.$t('assets.leverageToLoan.typeText1');\r\n          break;\r\n        case '2':\r\n          str = this.$t('assets.leverageToLoan.typeText2');\r\n          break;\r\n        default:\r\n          str = this.$t('assets.leverageToLoan.typeText3');\r\n      }\r\n      return str;\r\n    },\r\n    // 查看详情\r\n    getSubTableData(v) {\r\n      if (v.open) {\r\n        this.subContentId = v.id;\r\n        this.subColumns = [\r\n          this.$t('order.exchangeOrder.detailsTime'), // 时间\r\n          this.$t('assets.leverageToLoan.list3'), // 币种\r\n          this.$t('order.exchangeOrder.detailsVolume'), // 数量\r\n          this.$t('assets.flowingWater.type'), // 类型\r\n        ];\r\n        this.subContent = [];\r\n        this.subLoading = true;\r\n        this.axios({\r\n          url: '/lever/return/info',\r\n          method: 'post',\r\n          params: {\r\n            id: v.id.toString(),\r\n            pageSize: 10000,\r\n          },\r\n        }).then((data) => {\r\n          if (v.id !== this.subContentId) { return; }\r\n          if (data.code.toString() === '0') {\r\n            const list = [];\r\n            data.data.financeList.forEach((item) => {\r\n              // const [baseCoin, countCoin] = this.symbol.split('/');\r\n              // const { marketFix, coinFix } = this.getFix(countCoin, baseCoin);\r\n              let returnFix = this.messData.baseReturnPrecision;\r\n              if (item.coin === this.messData.quoteCoin) {\r\n                returnFix = this.messData.quoteReturnPrecision;\r\n              }\r\n              list.push({\r\n                ctime: formatTime(Number(item.repaymentTime)),\r\n                coin: this.getShowCoin(item.coin),\r\n                volume: fixD(item.returnMoney, returnFix),\r\n                type: this.typeText(item.type.toString()),\r\n              });\r\n            });\r\n            this.subLoading = false;\r\n            this.subContent = list;\r\n          } else {\r\n            this.subLoading = false;\r\n            this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n          }\r\n        });\r\n      }\r\n    },\r\n    getTableList() {\r\n      this.axios({\r\n        url: 'lever/borrow/new',\r\n        params: {\r\n          pageSize: this.paginationObj.display, // 每页条数\r\n          page: this.paginationObj.currentPage, // 页码\r\n          symbol: this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.tabelLoading = false;\r\n          const { count, financeList } = data.data;\r\n          const list = [];\r\n          // const { coinList } = this.market;\r\n          financeList.forEach((item) => {\r\n            // const fix = coinList[item.coin.toUpperCase()].showPrecision;\r\n            const fix = 8;\r\n            const returnFix = 8;\r\n            this.dataList[item.id] = item;\r\n            list.push({\r\n              id: item.id,\r\n              data: [\r\n                formatTime(Number(item.ctime)),\r\n                item.showName || item.symbol.toUpperCase(),\r\n                this.getShowCoin(item.coin.toUpperCase()),\r\n                fixD(item.borrowMoney, fix),\r\n                this.rateFixFn(item.interestRate),\r\n                fixD(item.oweInterest, returnFix),\r\n                fixD(item.oweAmount, returnFix),\r\n                [\r\n                  {\r\n                    type: 'subTable', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                    text: this.$t('order.exchangeOrder.details'), // 详情\r\n                    eventType: 'details',\r\n                  },\r\n                  {\r\n                    type: 'button', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                    text: this.$t('assets.leverageToLoan.repayment'), // 归还\r\n                    eventType: 'repayment',\r\n                  },\r\n                ],\r\n              ],\r\n            });\r\n          });\r\n          this.tabelList = list;\r\n          this.paginationObj.total = count > 30 ? 30 : count;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n"]}]}