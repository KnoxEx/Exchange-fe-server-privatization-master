{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/manageFinances/orderList/orderList.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/manageFinances/orderList/orderList.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { fixD, formatTime, getCoinShowName, colorMap, imgMap } from '@/utils';\nvar bannerImgUrl = imgMap.jjrNeaderBg;\nexport default {\n  name: 'orderList',\n  data: function data() {\n    return {\n      bannerImg: bannerImgUrl,\n      bannerTitle: this.$t('manageFinances.manage_finances'),\n      // '理财宝',\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      symbol: '',\n      // 当前币种\n      tabelList: [],\n      // table数据列表\n      financeListData: [],\n      subTableDataId: '',\n      subTableDataOpen: 0,\n      subTableData: [],\n      subContentId: null,\n      symbolList: [],\n      // 币种选择列表\n      otherType: '',\n      // type\n      otherTypeList: [],\n      // type选择列表\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      }\n    };\n  },\n  computed: {\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [{\n        title: this.$t('manageFinances.buyTime'),\n        width: '8%'\n      }, // 购买时间\n      {\n        title: this.$t('manageFinances.name'),\n        width: '15%'\n      }, // 项目名称\n      {\n        title: this.$t('manageFinances.orderNumber'),\n        width: '15%'\n      }, // 订单号\n      {\n        title: this.$t('manageFinances.coin'),\n        width: '10%'\n      }, // 币种\n      {\n        title: this.$t('manageFinances.number'),\n        width: '15%'\n      }, // 数量\n      {\n        title: this.$t('manageFinances.tablerate'),\n        width: '10%'\n      }, // 利率\n      {\n        title: this.$t('manageFinances.status'),\n        width: '10%'\n      }, // 状态\n      {\n        title: this.$t('manageFinances.operating'),\n        width: '10%'\n      } // 操作\n      ];\n      return list;\n    },\n    subColumns: function subColumns() {\n      return [this.$t('manageFinances.transferTime'), // 转出时间\n      this.$t('manageFinances.returnCoin'), // 返还币种\n      this.$t('manageFinances.returnNumber'), // 返还数量\n      this.$t('manageFinances.type') // 类型\n      ];\n    },\n    // 用于axios的symbol\n    axiosSymbol: function axiosSymbol() {\n      if (this.symbol === 'all') {\n        return null;\n      }\n\n      return this.symbol;\n    },\n    // 用于axios的symbol\n    axiostype: function axiostype() {\n      if (this.otherType === 'all') {\n        return null;\n      }\n\n      return this.otherType;\n    }\n  },\n  watch: {\n    market: function market(v) {\n      if (v) {\n        this.setData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.market) {\n        this.setData();\n      }\n    },\n    // 获取个人理财记录\n    getDataList: function getDataList() {\n      var _this = this;\n\n      this.axios({\n        url: this.$store.state.url.common.financingList,\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          coinSymbol: this.axiosSymbol,\n          status: this.axiostype\n        },\n        hostType: 'financing'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var list = [];\n          data.data.order_list.forEach(function (item, index) {\n            var coinList = _this.market.coinList;\n            var fix = coinList[item.symbol] && coinList[item.symbol].showPrecision || 0;\n            list.push({\n              id: index,\n              data: [formatTime(item.ctime), // 时间\n              item.name, // 项目名称\n              item.order_id, // 订单号\n              getCoinShowName(item.symbol, _this.coinList), // 币种\n              fixD(item.number, fix), // 数量\n              item.rate, // 利率\n              item.status_txt, // 状态\n              _this.handleButton(item.order_id)]\n            });\n          });\n          _this.tabelLoading = false;\n          _this.tabelList = list;\n          _this.paginationObj.total = data.data.count;\n        }\n      });\n    },\n    symbolChange: function symbolChange(item) {\n      // this.subTableDataOpen = 0\n      this.symbol = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true; // this.subTableDataOpen = 0\n\n      this.getDataList();\n    },\n    otherTypeChange: function otherTypeChange(item) {\n      // this.subTableDataOpen = 0\n      this.otherType = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getDataList();\n    },\n    setData: function setData() {\n      var _this2 = this;\n\n      var list = [{\n        code: 'all',\n        value: this.$t('assets.flowingWater.allCoin')\n      }];\n      Object.keys(this.market.coinList).forEach(function (item) {\n        if (_this2.market.coinList[item].isFiat) {\n          return;\n        }\n\n        list.push({\n          code: item,\n          value: getCoinShowName(item, _this2.coinList)\n        });\n      });\n      this.symbolList = list; // console.log(this.symbolList);\n\n      this.symbol = 'all';\n      var otherlist = [{\n        code: 'all',\n        value: this.$t('manageFinances.allType')\n      }, {\n        code: '1',\n        value: this.$t('manageFinances.subscribed')\n      }, {\n        code: '2',\n        value: this.$t('manageFinances.interested')\n      }, {\n        code: '3',\n        value: this.$t('manageFinances.completed')\n      }];\n      this.otherTypeList = otherlist;\n      this.otherType = this.otherTypeList[0].code;\n      this.getDataList();\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getDataList();\n    },\n    // 详情列表\n    tableClick: function tableClick(type, id) {\n      var _this3 = this;\n\n      this.subTableDataId = id.id;\n      this.subTableData = [];\n      this.axios({\n        url: this.$store.state.url.common.financingListDet,\n        headers: {},\n        params: {\n          order_id: type\n        },\n        method: 'post',\n        hostType: 'financing'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          data.data.return_list.forEach(function (item) {\n            var coinList = _this3.market.coinList;\n            var fix = coinList[item.symbol] && coinList[item.symbol].showPrecision || 0;\n            var detailtype = null;\n\n            if (item.type === 0) {\n              detailtype = _this3.$t('manageFinances.interest');\n            } else {\n              detailtype = _this3.$t('manageFinances.principal');\n            } // console.log(type)\n\n\n            _this3.subTableData.push([formatTime(item.return_time), // 地址\n            item.symbol, fixD(item.number, fix), detailtype]);\n          });\n        }\n      });\n    },\n    handleButton: function handleButton(item) {\n      var arr = [];\n      arr.push({\n        type: 'subTable',\n        text: this.$t('trade.view'),\n        // 详情\n        eventType: item // orderId: item,\n\n      });\n      return arr;\n    }\n  }\n};",null]}