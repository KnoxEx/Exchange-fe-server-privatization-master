{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/locale/index.js","dependencies":[{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/locale/index.js","mtime":1641912372000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.match\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Vue from 'vue';\nimport VueI18n from 'vue-i18n';\nimport axios from '@/api/http/axios';\nimport { myStorage, getComplexType, getLocationLang } from '@/utils';\nimport localesMap from \"./filesMap.json\";\nimport defLan from \"./default\";\nVue.use(VueI18n);\nvar urlLang = '';\n\nif (window.publicInfo && window.publicInfo.lan.lanList) {\n  urlLang = getLocationLang();\n  var result = window.publicInfo.lan.lanList.some(function (el) {\n    return el.id === urlLang;\n  });\n  if (!result) urlLang = '';\n}\n\nvar lang = window.location.href.match(/[a-z]+_[A-Z]+/) && window.location.href.match(/[a-z]+_[A-Z]+/)[0];\nvar langKey = localesMap[lang];\nvar messages = {\n  def_Lan: _objectSpread({}, defLan)\n};\nexport var i18n = new VueI18n({\n  locale: 'def_Lan',\n  messages: messages,\n  missing: function missing() {\n    return '';\n  }\n});\n\nfunction loadLocaleMessage(locale, cb) {\n  var localeCache = myStorage.get('locale') || {};\n  var localeJson = localeCache[langKey];\n\n  if (localeJson) {\n    cb(null, localeJson);\n  } else {\n    axios({\n      url: \"/static/locales/\".concat(localesMap[lang]),\n      method: 'get',\n      hostType: 'def'\n    }).then(function (res) {\n      cb(null, res);\n    }).catch(function (error) {\n      cb(error);\n    });\n  }\n}\n\nexport function changeLanguage(lan, change) {\n  var localeCache = myStorage.get('locale') || {};\n  loadLocaleMessage(lan, function (error, message) {\n    if (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n\n    if (getComplexType(message) !== 'Object') return;\n    i18n.locale = lan;\n    i18n.setLocaleMessage(lan, message);\n    var keys = Object.keys(localeCache);\n    keys.forEach(function (item) {\n      if (item.indexOf(lan) > -1 && !change) {\n        delete localeCache[item];\n      }\n    });\n    localeCache[langKey] = message;\n    myStorage.set('locale', localeCache);\n\n    if (change) {\n      var locationLang = getLocationLang();\n\n      if (locationLang) {\n        window.location.href = window.location.href.replace(locationLang, lan);\n      } else {\n        window.location.reload();\n      }\n    }\n  });\n}\nchangeLanguage(lang);",{"version":3,"sources":["/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/locale/index.js"],"names":["Vue","VueI18n","axios","myStorage","getComplexType","getLocationLang","localesMap","defLan","use","urlLang","window","publicInfo","lan","lanList","result","some","el","id","lang","location","href","match","langKey","messages","def_Lan","i18n","locale","missing","loadLocaleMessage","cb","localeCache","get","localeJson","url","method","hostType","then","res","catch","error","changeLanguage","change","message","console","log","setLocaleMessage","keys","Object","forEach","item","indexOf","set","locationLang","replace","reload"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport VueI18n from 'vue-i18n';\nimport axios from '@/api/http/axios';\nimport {\n  myStorage, getComplexType, getLocationLang,\n} from '@/utils';\nimport localesMap from './filesMap.json';\nimport defLan from './default';\n\nVue.use(VueI18n);\n\nlet urlLang = '';\n\nif (window.publicInfo && window.publicInfo.lan.lanList) {\n  urlLang = getLocationLang();\n  const result = window.publicInfo.lan.lanList.some(el => el.id === urlLang);\n\n  if (!result) urlLang = '';\n}\n\nconst lang = window.location.href.match(/[a-z]+_[A-Z]+/) && window.location.href.match(/[a-z]+_[A-Z]+/)[0];\nconst langKey = localesMap[lang];\n\nconst messages = {\n  def_Lan: {\n    ...defLan,\n  },\n};\nexport const i18n = new VueI18n({\n  locale: 'def_Lan',\n  messages,\n  missing() {\n    return '';\n  },\n});\n\nfunction loadLocaleMessage(locale, cb) {\n  const localeCache = myStorage.get('locale') || {};\n  const localeJson = localeCache[langKey];\n  if (localeJson) {\n    cb(null, localeJson);\n  } else {\n    axios({\n      url: `/static/locales/${localesMap[lang]}`,\n      method: 'get',\n      hostType: 'def',\n    }).then((res) => {\n      cb(null, res);\n    }).catch((error) => {\n      cb(error);\n    });\n  }\n}\n\nexport function changeLanguage(lan, change) {\n  const localeCache = myStorage.get('locale') || {};\n  loadLocaleMessage(lan, (error, message) => {\n    if (error) {\n      // eslint-disable-next-line no-console\n      console.log(error);\n    }\n\n    if (getComplexType(message) !== 'Object') return;\n\n    i18n.locale = lan;\n    i18n.setLocaleMessage(lan, message);\n    const keys = Object.keys(localeCache);\n    keys.forEach((item) => {\n      if (item.indexOf(lan) > -1 && !change) {\n        delete localeCache[item];\n      }\n    });\n    localeCache[langKey] = message;\n    myStorage.set('locale', localeCache);\n    if (change) {\n      const locationLang = getLocationLang();\n      if (locationLang) {\n        window.location.href = window.location.href.replace(locationLang, lan);\n      } else {\n        window.location.reload();\n      }\n    }\n  });\n}\n\nchangeLanguage(lang);\n"]}]}