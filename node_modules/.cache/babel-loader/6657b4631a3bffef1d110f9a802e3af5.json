{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/broker/view/view.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/broker/view/view.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport { fixD, formatTime, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'brokerView',\n  data: function data() {\n    return {\n      headClasses: 'c-4-bg',\n      bodyClasses: 'c-4-bg',\n      tableLoading: false,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      backgroundImg: \"background: url(\".concat(imgMap.jjrNeaderBg, \")  center bottom no-repeat #0E1A2E\"),\n      myData: {},\n      tableData: {},\n      tableType: 'return_list',\n      searchValue: null,\n      bonusAmount: null,\n      bonusCoinName: null,\n      // 筛选币种\n      startTime: '',\n      endTime: '',\n      pagination: {\n        // 翻页数据\n        count: 0,\n        // 总数量\n        pageSize: 10,\n        // 每页显示条数\n        page: 1 // 当前页数\n\n      },\n      uid: null\n    };\n  },\n  watch: {\n    isLogin: function isLogin(val) {\n      if (val) {\n        this.getData();\n      }\n    }\n  },\n  computed: {\n    startTimeText: function startTimeText() {\n      return this.$t('broker.startTime'); // '起始时间';\n    },\n    endTimeText: function endTimeText() {\n      return this.$t('broker.endTime'); // '截止时间';\n    },\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    columns: function columns() {\n      return [{\n        title: this.$t('broker.time'),\n        width: '100px'\n      }, {\n        title: this.$t('broker.scale') // '返佣比例',\n\n      }, {\n        title: \"\".concat(this.$t('broker.fee'), \"(\").concat(getCoinShowName(this.bonusCoinName, this.coinList), \")\")\n      }, {\n        title: \"\".concat(this.$t('broker.amount'), \"(\").concat(getCoinShowName(this.bonusCoinName, this.coinList), \")\")\n      }];\n    },\n    dataList: function dataList() {\n      var _this = this;\n\n      if (this.tableData && this.tableData.length) {\n        var dataArr = [];\n        this.tableData.forEach(function (item) {\n          dataArr.push({\n            id: item.uid,\n            data: [formatTime(item.time), // 时间\n            item.scale, // 返佣比例\n            \"\".concat(_this.fixDFun(item.fee, item.feeCoin), \"\\n                \").concat(getCoinShowName(item.feeCoin, _this.coinList)), // 手续费\n            \"\".concat(_this.fixDFun(item.bonus, item.bonusCoin), \"\\n                \").concat(getCoinShowName(item.bonusCoin, _this.coinList)) // 返佣额度\n            ]\n          });\n        });\n        return dataArr;\n      }\n\n      return [];\n    }\n  },\n  methods: {\n    init: function init() {\n      this.uid = this.$route.params.item;\n      this.getData();\n    },\n    fixDFun: function fixDFun(val, symbol) {\n      if (this.showPrecision(symbol)) {\n        return fixD(val, this.showPrecision(symbol));\n      }\n\n      return val;\n    },\n    showPrecision: function showPrecision(symbol) {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        var coinList = this.$store.state.baseData.market.coinList;\n\n        if (coinList[symbol]) {\n          var precision = coinList[symbol].showPrecision;\n\n          if (precision) {\n            return precision;\n          }\n        }\n      }\n\n      return 4;\n    },\n    // 翻页事件\n    pagechange: function pagechange(num) {\n      this.pagination.page = num;\n      this.getData();\n    },\n    // 请求数据\n    getData: function getData(ajaxUrl) {\n      var _this2 = this;\n\n      this.tableLoading = true;\n      var url = ajaxUrl || this.$store.state.url.common.agent_data_info_query;\n      this.axios({\n        url: url,\n        params: {\n          pageNum: this.pagination.page,\n          pageSize: this.pagination.pageSize,\n          uid: this.uid,\n          startTime: this.startTime,\n          endTime: this.endTime\n        },\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          _this2.tableData = data.data.mapList;\n          _this2.pagination.count = data.data.count;\n          _this2.bonusAmount = data.data.bonusAmount;\n          _this2.bonusCoinName = data.data.bonusCoinName;\n        }\n\n        _this2.tableLoading = false;\n      });\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          return v[j];\n        });\n      });\n    },\n    // 选择时间\n    onChangeCalendar: function onChangeCalendar(data, name) {\n      this[name] = data;\n\n      if (this.startTime && this.endTime) {\n        this.getData();\n      }\n    },\n    // select 选择事件\n    selectOnChange: function selectOnChange(data, name) {\n      this[name] = data.code;\n    }\n  }\n};",null]}