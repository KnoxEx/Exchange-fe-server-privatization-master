{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/Downloads/BlockChain-ui-privatization/PC/components/verify/aliyunCaptcha.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/components/verify/aliyunCaptcha.vue","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport VueScript2 from 'vue-script2';\r\nimport bowser from 'bowser';\r\n\r\nexport default {\r\n  name: 'common-AliyunCaptcha',\r\n  props: {\r\n    width: { default: '100%', type: String }, // 该容器根容器 width属性\r\n    marginTop: { default: '0px', type: String }, // 该组件根容器 margin-top属性\r\n    errorHave: { default: false, type: Boolean }, // 是否有错误文案\r\n    errorText: { default: '', type: String }, // 错误文案\r\n    errorFlag: { default: false, type: Boolean }, // 错误文案是否显示\r\n  },\r\n  computed: {\r\n    appkey() {\r\n      return this.$store.state.baseData.publicInfo.nc.nc_appkey;\r\n      // return 'FFFF0N000000000066A8';\r\n      // return 'FFFF0000000001780E11';\r\n    },\r\n    prefix() {\r\n      return this.$store.state.baseData.publicInfo.nc.nc_prefix;\r\n    },\r\n    dynamicId() {\r\n      const ncId = `a${this.randomCode(10)}`;\r\n      return ncId;\r\n    },\r\n    // 根容器 行内样式\r\n    contentStyle() {\r\n      return {\r\n        width: this.width,\r\n        marginTop: this.marginTop,\r\n      };\r\n    },\r\n    lan() {\r\n      return this.$store.state.baseData.lan;\r\n    },\r\n    alyLan() {\r\n      let language = '';\r\n      // 简体中文\r\n      if (this.lan === 'zh_CN') {\r\n        language = 'cn';\r\n        // 繁体中文\r\n      } else if (this.lan === 'el_GR') {\r\n        language = 'tw';\r\n        // 葡萄牙\r\n      } else if (this.lan === 'en_US') {\r\n        language = 'en';\r\n      } else {\r\n        const arr = [\r\n          'ar_SA', // 阿拉伯文\r\n          'de_DE', // 德文\r\n          'es_ES', // 西班牙文\r\n          'fr_FR', // 法文\r\n          'in_ID', // 印尼语\r\n          'it_IT', // 意大利文\r\n          'iw_HE', // 希伯来语\r\n          'ja_JP', // 日文\r\n          'ko_KR', // 韓文\r\n          'nl_NL', // 荷蘭文\r\n          'pt_BR', // 波蘭文\r\n          'ru_RU', // 俄文\r\n          'th_TH', // 泰文\r\n          'tr_TR', // 土耳其文\r\n          'vi_VN', // 越南文\r\n        ];\r\n        if (arr.indexOf(this.lan) !== -1) {\r\n          language = this.lan;\r\n        }\r\n      }\r\n      if (!language.length) {\r\n        language = 'en';\r\n      }\r\n      return language;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    randomCode(length) {\r\n      const arr = [];\r\n      let str = '';\r\n      arr.length = 10;\r\n      arr.forEach(() => {\r\n        str += Math.random()\r\n          .toString(36)\r\n          .substr(2);\r\n      });\r\n      return str.substr(0, length);\r\n    },\r\n    init() {\r\n      let nc = null;\r\n      const scene = 'login'; // 场景,不可更改\r\n      const token = [this.appkey, new Date().getTime(), Math.random()].join(\r\n        ':',\r\n      );\r\n      const option = {\r\n        renderTo: `#${this.dynamicId}`, // 渲染到该DOM ID指定的Div位置\r\n        appkey: this.appkey,\r\n        scene: this.prefix + scene,\r\n        token,\r\n        language: this.alyLan,\r\n        callback: (data) => {\r\n          // 校验成功回调\r\n          this.$emit('callback', {\r\n            verificationType: '1',\r\n            csessionid: data.csessionid,\r\n            sig: data.sig,\r\n            token,\r\n            scene,\r\n            nc,\r\n          });\r\n        },\r\n        error() {\r\n          // console.log('error', s);\r\n        },\r\n        verifycallback() {},\r\n      };\r\n      this.$nextTick(() => {\r\n        if (bowser.mobile) {\r\n          VueScript2.load(\r\n            '//g.alicdn.com/sd/nch5/index.js?t=1497436353263',\r\n          ).then(() => {\r\n            window.NoCaptcha.init(option);\r\n            window.NoCaptcha.setEnabled(true);\r\n            nc = window.NoCaptcha;\r\n          });\r\n        } else {\r\n          VueScript2.load('//g.alicdn.com/sd/ncpc/nc.js?t=1497440454594').then(\r\n            () => {\r\n              class F extends window.noCaptcha {}\r\n              nc = new F();\r\n              nc.init(option);\r\n            },\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n",{"version":3,"sources":["aliyunCaptcha.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aliyunCaptcha.vue","sourceRoot":"../../Downloads/BlockChain-ui-privatization/PC/components/verify","sourcesContent":["// Created by 任泽阳 on 18/12/07. // 阿里云\r\n<template>\r\n  <section\r\n    class='common-AliyunCaptcha'\r\n    :style='contentStyle'\r\n    id='common-AliyunCaptcha'\r\n  >\r\n    <div class='ln' id='ln'>\r\n      <div v-bind:id='dynamicId'></div>\r\n    </div>\r\n    <!-- 错误文案占位 24px -->\r\n    <div class='common-AliyunCaptcha-errorStence b-6-cl' v-if='errorHave'>\r\n      <!-- 错误信息容器 -->\r\n      <p class='common-AliyunCaptcha-error' v-if='errorFlag'>{{ errorText }}</p>\r\n    </div>\r\n  </section>\r\n</template>\r\n<script>\r\nimport VueScript2 from 'vue-script2';\r\nimport bowser from 'bowser';\r\n\r\nexport default {\r\n  name: 'common-AliyunCaptcha',\r\n  props: {\r\n    width: { default: '100%', type: String }, // 该容器根容器 width属性\r\n    marginTop: { default: '0px', type: String }, // 该组件根容器 margin-top属性\r\n    errorHave: { default: false, type: Boolean }, // 是否有错误文案\r\n    errorText: { default: '', type: String }, // 错误文案\r\n    errorFlag: { default: false, type: Boolean }, // 错误文案是否显示\r\n  },\r\n  computed: {\r\n    appkey() {\r\n      return this.$store.state.baseData.publicInfo.nc.nc_appkey;\r\n      // return 'FFFF0N000000000066A8';\r\n      // return 'FFFF0000000001780E11';\r\n    },\r\n    prefix() {\r\n      return this.$store.state.baseData.publicInfo.nc.nc_prefix;\r\n    },\r\n    dynamicId() {\r\n      const ncId = `a${this.randomCode(10)}`;\r\n      return ncId;\r\n    },\r\n    // 根容器 行内样式\r\n    contentStyle() {\r\n      return {\r\n        width: this.width,\r\n        marginTop: this.marginTop,\r\n      };\r\n    },\r\n    lan() {\r\n      return this.$store.state.baseData.lan;\r\n    },\r\n    alyLan() {\r\n      let language = '';\r\n      // 简体中文\r\n      if (this.lan === 'zh_CN') {\r\n        language = 'cn';\r\n        // 繁体中文\r\n      } else if (this.lan === 'el_GR') {\r\n        language = 'tw';\r\n        // 葡萄牙\r\n      } else if (this.lan === 'en_US') {\r\n        language = 'en';\r\n      } else {\r\n        const arr = [\r\n          'ar_SA', // 阿拉伯文\r\n          'de_DE', // 德文\r\n          'es_ES', // 西班牙文\r\n          'fr_FR', // 法文\r\n          'in_ID', // 印尼语\r\n          'it_IT', // 意大利文\r\n          'iw_HE', // 希伯来语\r\n          'ja_JP', // 日文\r\n          'ko_KR', // 韓文\r\n          'nl_NL', // 荷蘭文\r\n          'pt_BR', // 波蘭文\r\n          'ru_RU', // 俄文\r\n          'th_TH', // 泰文\r\n          'tr_TR', // 土耳其文\r\n          'vi_VN', // 越南文\r\n        ];\r\n        if (arr.indexOf(this.lan) !== -1) {\r\n          language = this.lan;\r\n        }\r\n      }\r\n      if (!language.length) {\r\n        language = 'en';\r\n      }\r\n      return language;\r\n    },\r\n  },\r\n  mounted() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    randomCode(length) {\r\n      const arr = [];\r\n      let str = '';\r\n      arr.length = 10;\r\n      arr.forEach(() => {\r\n        str += Math.random()\r\n          .toString(36)\r\n          .substr(2);\r\n      });\r\n      return str.substr(0, length);\r\n    },\r\n    init() {\r\n      let nc = null;\r\n      const scene = 'login'; // 场景,不可更改\r\n      const token = [this.appkey, new Date().getTime(), Math.random()].join(\r\n        ':',\r\n      );\r\n      const option = {\r\n        renderTo: `#${this.dynamicId}`, // 渲染到该DOM ID指定的Div位置\r\n        appkey: this.appkey,\r\n        scene: this.prefix + scene,\r\n        token,\r\n        language: this.alyLan,\r\n        callback: (data) => {\r\n          // 校验成功回调\r\n          this.$emit('callback', {\r\n            verificationType: '1',\r\n            csessionid: data.csessionid,\r\n            sig: data.sig,\r\n            token,\r\n            scene,\r\n            nc,\r\n          });\r\n        },\r\n        error() {\r\n          // console.log('error', s);\r\n        },\r\n        verifycallback() {},\r\n      };\r\n      this.$nextTick(() => {\r\n        if (bowser.mobile) {\r\n          VueScript2.load(\r\n            '//g.alicdn.com/sd/nch5/index.js?t=1497436353263',\r\n          ).then(() => {\r\n            window.NoCaptcha.init(option);\r\n            window.NoCaptcha.setEnabled(true);\r\n            nc = window.NoCaptcha;\r\n          });\r\n        } else {\r\n          VueScript2.load('//g.alicdn.com/sd/ncpc/nc.js?t=1497440454594').then(\r\n            () => {\r\n              class F extends window.noCaptcha {}\r\n              nc = new F();\r\n              nc.init(option);\r\n            },\r\n          );\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='stylus'>\r\n// 错误信息占位容器\r\n.common-AliyunCaptcha-errorStence {\r\n    height: 24px;\r\n    position: relative;\r\n    // 错误文案容器\r\n    .common-AliyunCaptcha-error {\r\n      position: absolute;\r\n      bottom: 2px;\r\n      margin: 0;\r\n      font-size: 12px;\r\n      user-select:none;\r\n    }\r\n  }\r\n.common-AliyunCaptcha {\r\n  // 弹窗\r\n  .nc-container .nc_scale .imgCaptcha, .nc-container .nc_scale .clickCaptcha {\r\n    border: none;\r\n  }\r\n  .nc-container .clickCaptcha_text .btn_refresh {\r\n    background: none\r\n  }\r\n  .nc-container .nc_scale .clickCaptcha div {\r\n    height: 40px;\r\n    line-height: 40px;\r\n  }\r\n  .nc-container .clickCaptcha_text .icon_close {\r\n    line-height: 40px;\r\n  }\r\n  .clickCaptcha {\r\n    width: 380px!important;\r\n    top: 45px!important;\r\n    box-shadow: 0px 2px 10px rgba(0,0,0,0.30)!important;\r\n    padding-bottom: 30px!important;\r\n    img {\r\n      width: 300px!important;\r\n    }\r\n    .clickCaptcha_img {\r\n      text-align: center!important;\r\n    }\r\n  }\r\n  .imgCaptcha {\r\n    width: 380px!important;\r\n    min-height: 200px!important;\r\n    box-sizing: border-box!important;\r\n    border: none!important;\r\n    top: 44px!important;\r\n    padding: 40px!important;\r\n    box-shadow: 0px 2px 10px rgba(0,0,0,0.30)!important;\r\n    // input\r\n    .imgCaptcha_text {\r\n      margin: 0!important;\r\n      height: 40px!important;\r\n      width: 200px!important;\r\n      box-sizing: border-box!important;\r\n      overflow: hidden!important;\r\n      border-bottom-width: 2px!important;\r\n      border-bottom-style: solid!important;\r\n      input {\r\n        box-sizing: border-box!important;\r\n        width: 100%!important;\r\n        height: 100%!important;\r\n        margin: 0!important;\r\n      }\r\n    }\r\n    // 图\r\n    .imgCaptcha_img {\r\n      margin: 0!important;\r\n      width: 100px!important;\r\n      height: 40px!important;\r\n      img {\r\n        width: 100px!important;\r\n        height: 40px!important;\r\n        display: block!important;\r\n      }\r\n    }\r\n    .btn_refresh {\r\n      background: none;\r\n    }\r\n    // button\r\n    .imgCaptcha_btn {\r\n      background: none!important;\r\n      width: 100%!important;\r\n      margin: 40px 0 0 0!important;\r\n      padding: 0!important;\r\n      // 错误\r\n      .nc_captcha_img_text {\r\n        background: none;\r\n      }\r\n      .nc_scale_submit {\r\n        width: 100%;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        border-radius: 2px;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  .ln {\r\n    padding: 0;\r\n    .nc_wrapper {\r\n      width: 100% !important;\r\n    }\r\n    // 滑条背景  nc_bg滑动后一系列状态背景 scale_text2为未滑动\r\n    .nc-container .nc_scale .nc_bg\r\n    .nc-container .nc_scale .scale_text2 {\r\n      border-radius: 2px;\r\n    }\r\n    // 滑块滑动后 ok状态\r\n    .nc-container .nc_scale .btn_ok {\r\n      line-height: 40px;\r\n      top: -1px;\r\n      width: 56px!important;\r\n      height: 40px;\r\n      line-height: 40px;\r\n      border: none;\r\n      border-radius: 2px;\r\n    }\r\n    .nc-container .nc_scale .scale_text {\r\n      line-height: 40px;\r\n    }\r\n    .nc-container .clickCaptcha .clickCaptcha_img img {\r\n      margin: 0;\r\n    }\r\n    // 初始\r\n    .nc_scale {\r\n      height: 40px;\r\n      line-height: 40px;\r\n      border-radius: 2px;\r\n      // 划块\r\n      .btn_slide {\r\n        line-height: 40px;\r\n        top: -1px;\r\n        width: 56px;\r\n        height: 40px;\r\n        line-height: 40px;\r\n        border: none;\r\n        border-radius: 2px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}