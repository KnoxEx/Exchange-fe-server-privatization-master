{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAdd/b2cAdd.js","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAdd/b2cAdd.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { imgMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      symbol: '',\n      bank: '',\n      // 银行\n      bankSub: '',\n      // 支行\n      cardNo: '',\n      // 账号\n      name: '',\n      // 姓名\n      cms: '',\n      // 短信验证码\n      google: '',\n      // 谷歌验证码\n      bankList: [],\n      btnLoading: false,\n      nowType: '',\n      setId: ''\n    };\n  },\n  watch: {\n    AddUserInfoIsReady: {\n      immediate: true,\n      handler: function handler(v) {\n        if (v) {\n          var userInfo = this.$store.state.baseData.userInfo;\n          this.name = userInfo.realName;\n        }\n      }\n    }\n  },\n  computed: {\n    AddUserInfoIsReady: function AddUserInfoIsReady() {\n      return this.userInfoIsReady;\n    },\n    buttonDisable: function buttonDisable() {\n      var flag = true;\n      var cmsSuc = this.OpenMobile ? this.cmsFlag : true;\n      var googleSuc = this.OpenGoogle ? this.googleFlag : true;\n\n      if (this.bank.length && this.cardNoFlag && cmsSuc && googleSuc || this.btnLoading) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    regExps: function regExps() {\n      return this.$store.state.regExp;\n    },\n    cardNoFlag: function cardNoFlag() {\n      return this.regExps.nonEmpty.test(this.cardNo);\n    },\n    bankSubFlag: function bankSubFlag() {\n      return this.regExps.nonEmpty.test(this.bankSub);\n    },\n    cmsFlag: function cmsFlag() {\n      return this.regExps.verification.test(this.cms);\n    },\n    googleFlag: function googleFlag() {\n      return this.regExps.verification.test(this.google);\n    },\n    cmsErrorFlag: function cmsErrorFlag() {\n      if (this.cms.length !== 0 && !this.cmsFlag) return true;\n      return false;\n    },\n    googleErrorFlag: function googleErrorFlag() {\n      if (this.google.length !== 0 && !this.googleFlag) return true;\n      return false;\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this$$route$query = this.$route.query,\n          symbol = _this$$route$query.symbol,\n          type = _this$$route$query.type,\n          id = _this$$route$query.id;\n\n      if (symbol && type === 'add') {\n        this.symbol = symbol.toUpperCase();\n        this.nowType = 'add';\n      } else if (symbol && type === 'set' && id) {\n        this.symbol = symbol.toUpperCase();\n        this.nowType = 'set';\n        this.setId = id;\n      } else {\n        this.$router.push('/assets/b2cAccount');\n        return;\n      }\n\n      this.getBankList();\n    },\n    addressChange: function addressChange(item) {\n      this.bank = item.code;\n    },\n    getSetMess: function getSetMess() {\n      var _this = this;\n\n      this.axios({\n        url: '/user/bank/get',\n        params: {\n          id: this.setId\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this.bank = data.data.bankNo.toString();\n          _this.bankSub = data.data.bankSub;\n          _this.cardNo = data.data.cardNo;\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      this.btnLoading = true;\n      this.axios({\n        url: this.nowType === 'add' ? '/user/bank/add' : '/user/bank/edit',\n        params: {\n          id: this.nowType === 'add' ? undefined : this.setId,\n          bankId: this.bank,\n          bankSub: this.bankSub || undefined,\n          cardNo: this.cardNo,\n          name: this.name,\n          symbol: this.symbol,\n          smsAuthCode: this.cms || undefined,\n          googleCode: this.google || undefined\n        }\n      }).then(function (data) {\n        _this2.btnLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this2.$router.push(\"/assets/b2cAddressMent?symbol=\".concat(_this2.symbol));\n\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 获取验证码\n    getCodeClick: function getCodeClick() {\n      this.sendCode();\n    },\n    sendCode: function sendCode() {\n      var _this3 = this;\n\n      this.axios({\n        url: 'v4/common/smsValidCode',\n        params: {\n          operationType: this.nowType === 'add' ? '30' : '31'\n        }\n      }).then(function (data) {\n        if (data.code.toString() !== '0') {\n          setTimeout(function () {\n            // 倒计时重置\n            _this3.$bus.$emit('getCode-clear', 'withdrawGetcode'); // tip框提示错误\n\n\n            _this3.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }, 2000);\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: _this3.$t('assets.withdraw.phoneSendSuccess'),\n            type: 'success'\n          });\n        }\n      });\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    getBankList: function getBankList() {\n      var _this4 = this;\n\n      this.axios({\n        url: '/bank/all',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var arr = [];\n          data.data.forEach(function (item) {\n            arr.push({\n              code: item.bankNo.toString(),\n              value: item.accountName\n            });\n          });\n          _this4.bankList = arr;\n\n          if (arr.length && _this4.nowType === 'add') {\n            _this4.bank = arr[0].code;\n          }\n\n          if (_this4.nowType === 'set') {\n            _this4.getSetMess();\n          }\n        } else {\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAdd/b2cAdd.js"],"names":["imgMap","data","symbol","bank","bankSub","cardNo","name","cms","google","bankList","btnLoading","nowType","setId","watch","AddUserInfoIsReady","immediate","handler","v","userInfo","$store","state","baseData","realName","computed","userInfoIsReady","buttonDisable","flag","cmsSuc","OpenMobile","cmsFlag","googleSuc","OpenGoogle","googleFlag","length","cardNoFlag","regExps","regExp","nonEmpty","test","bankSubFlag","verification","cmsErrorFlag","googleErrorFlag","methods","init","$route","query","type","id","toUpperCase","$router","push","getBankList","addressChange","item","code","getSetMess","axios","url","params","then","toString","bankNo","$bus","$emit","text","msg","submit","undefined","bankId","smsAuthCode","googleCode","getCodeClick","sendCode","operationType","setTimeout","$t","inputChanges","value","arr","forEach","accountName"],"mappings":";;;AACA,SAASA,MAAT,QAAuB,SAAvB;AAEA,eAAe;AACbC,EAAAA,IADa,kBACN;AACL,WAAO;AACLD,MAAAA,MAAM,EAANA,MADK;AAELE,MAAAA,MAAM,EAAE,EAFH;AAGLC,MAAAA,IAAI,EAAE,EAHD;AAGK;AACVC,MAAAA,OAAO,EAAE,EAJJ;AAIQ;AACbC,MAAAA,MAAM,EAAE,EALH;AAKO;AACZC,MAAAA,IAAI,EAAE,EAND;AAMK;AACVC,MAAAA,GAAG,EAAE,EAPA;AAOI;AACTC,MAAAA,MAAM,EAAE,EARH;AAQO;AACZC,MAAAA,QAAQ,EAAE,EATL;AAULC,MAAAA,UAAU,EAAE,KAVP;AAWLC,MAAAA,OAAO,EAAE,EAXJ;AAYLC,MAAAA,KAAK,EAAE;AAZF,KAAP;AAcD,GAhBY;AAiBbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,kBAAkB,EAAE;AAClBC,MAAAA,SAAS,EAAE,IADO;AAElBC,MAAAA,OAFkB,mBAEVC,CAFU,EAEP;AACT,YAAIA,CAAJ,EAAO;AACL,cAAQC,QAAR,GAAqB,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,QAAvC,CAAQH,QAAR;AACA,eAAKZ,IAAL,GAAYY,QAAQ,CAACI,QAArB;AACD;AACF;AAPiB;AADf,GAjBM;AA4BbC,EAAAA,QAAQ,EAAE;AACRT,IAAAA,kBADQ,gCACa;AAAE,aAAO,KAAKU,eAAZ;AAA8B,KAD7C;AAERC,IAAAA,aAFQ,2BAEQ;AACd,UAAIC,IAAI,GAAG,IAAX;AACA,UAAMC,MAAM,GAAG,KAAKC,UAAL,GAAkB,KAAKC,OAAvB,GAAiC,IAAhD;AACA,UAAMC,SAAS,GAAG,KAAKC,UAAL,GAAkB,KAAKC,UAAvB,GAAoC,IAAtD;;AACA,UAAK,KAAK7B,IAAL,CAAU8B,MAAV,IACA,KAAKC,UADL,IAEAP,MAFA,IAGAG,SAHD,IAGe,KAAKpB,UAHxB,EAGoC;AAClCgB,QAAAA,IAAI,GAAG,KAAP;AACD;;AACD,aAAOA,IAAP;AACD,KAbO;AAcRS,IAAAA,OAdQ,qBAcE;AAAE,aAAO,KAAKhB,MAAL,CAAYC,KAAZ,CAAkBgB,MAAzB;AAAkC,KAdtC;AAeRF,IAAAA,UAfQ,wBAeK;AAAE,aAAO,KAAKC,OAAL,CAAaE,QAAb,CAAsBC,IAAtB,CAA2B,KAAKjC,MAAhC,CAAP;AAAiD,KAfxD;AAgBRkC,IAAAA,WAhBQ,yBAgBM;AAAE,aAAO,KAAKJ,OAAL,CAAaE,QAAb,CAAsBC,IAAtB,CAA2B,KAAKlC,OAAhC,CAAP;AAAkD,KAhB1D;AAiBRyB,IAAAA,OAjBQ,qBAiBE;AAAE,aAAO,KAAKM,OAAL,CAAaK,YAAb,CAA0BF,IAA1B,CAA+B,KAAK/B,GAApC,CAAP;AAAkD,KAjBtD;AAkBRyB,IAAAA,UAlBQ,wBAkBK;AAAE,aAAO,KAAKG,OAAL,CAAaK,YAAb,CAA0BF,IAA1B,CAA+B,KAAK9B,MAApC,CAAP;AAAqD,KAlB5D;AAmBRiC,IAAAA,YAnBQ,0BAmBO;AACb,UAAI,KAAKlC,GAAL,CAAS0B,MAAT,KAAoB,CAApB,IAAyB,CAAC,KAAKJ,OAAnC,EAA4C,OAAO,IAAP;AAC5C,aAAO,KAAP;AACD,KAtBO;AAuBRa,IAAAA,eAvBQ,6BAuBU;AAChB,UAAI,KAAKlC,MAAL,CAAYyB,MAAZ,KAAuB,CAAvB,IAA4B,CAAC,KAAKD,UAAtC,EAAkD,OAAO,IAAP;AAClD,aAAO,KAAP;AACD;AA1BO,GA5BG;AAwDbW,EAAAA,OAAO,EAAE;AACPC,IAAAA,IADO,kBACA;AACL,+BAA6B,KAAKC,MAAL,CAAYC,KAAzC;AAAA,UAAQ5C,MAAR,sBAAQA,MAAR;AAAA,UAAgB6C,IAAhB,sBAAgBA,IAAhB;AAAA,UAAsBC,EAAtB,sBAAsBA,EAAtB;;AACA,UAAI9C,MAAM,IAAI6C,IAAI,KAAK,KAAvB,EAA8B;AAC5B,aAAK7C,MAAL,GAAcA,MAAM,CAAC+C,WAAP,EAAd;AACA,aAAKtC,OAAL,GAAe,KAAf;AACD,OAHD,MAGO,IAAIT,MAAM,IAAI6C,IAAI,KAAK,KAAnB,IAA4BC,EAAhC,EAAoC;AACzC,aAAK9C,MAAL,GAAcA,MAAM,CAAC+C,WAAP,EAAd;AACA,aAAKtC,OAAL,GAAe,KAAf;AACA,aAAKC,KAAL,GAAaoC,EAAb;AACD,OAJM,MAIA;AACL,aAAKE,OAAL,CAAaC,IAAb,CAAkB,oBAAlB;AACA;AACD;;AACD,WAAKC,WAAL;AACD,KAfM;AAgBPC,IAAAA,aAhBO,yBAgBOC,IAhBP,EAgBa;AAClB,WAAKnD,IAAL,GAAYmD,IAAI,CAACC,IAAjB;AACD,KAlBM;AAmBPC,IAAAA,UAnBO,wBAmBM;AAAA;;AACX,WAAKC,KAAL,CAAW;AACTC,QAAAA,GAAG,EAAE,gBADI;AAETC,QAAAA,MAAM,EAAE;AACNX,UAAAA,EAAE,EAAE,KAAKpC;AADH;AAFC,OAAX,EAKGgD,IALH,CAKQ,UAAC3D,IAAD,EAAU;AAChB,YAAIA,IAAI,CAACsD,IAAL,CAAUM,QAAV,OAAyB,GAA7B,EAAkC;AAChC,UAAA,KAAI,CAAC1D,IAAL,GAAYF,IAAI,CAACA,IAAL,CAAU6D,MAAV,CAAiBD,QAAjB,EAAZ;AACA,UAAA,KAAI,CAACzD,OAAL,GAAeH,IAAI,CAACA,IAAL,CAAUG,OAAzB;AACA,UAAA,KAAI,CAACC,MAAL,GAAcJ,IAAI,CAACA,IAAL,CAAUI,MAAxB;AACD,SAJD,MAIO;AACL,UAAA,KAAI,CAAC0D,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEC,YAAAA,IAAI,EAAEhE,IAAI,CAACiE,GAAb;AAAkBnB,YAAAA,IAAI,EAAE;AAAxB,WAAvB;AACD;AACF,OAbD;AAcD,KAlCM;AAmCPoB,IAAAA,MAnCO,oBAmCE;AAAA;;AACP,WAAKzD,UAAL,GAAkB,IAAlB;AACA,WAAK+C,KAAL,CAAW;AACTC,QAAAA,GAAG,EAAE,KAAK/C,OAAL,KAAiB,KAAjB,GAAyB,gBAAzB,GAA4C,iBADxC;AAETgD,QAAAA,MAAM,EAAE;AACNX,UAAAA,EAAE,EAAE,KAAKrC,OAAL,KAAiB,KAAjB,GAAyByD,SAAzB,GAAqC,KAAKxD,KADxC;AAENyD,UAAAA,MAAM,EAAE,KAAKlE,IAFP;AAGNC,UAAAA,OAAO,EAAE,KAAKA,OAAL,IAAgBgE,SAHnB;AAIN/D,UAAAA,MAAM,EAAE,KAAKA,MAJP;AAKNC,UAAAA,IAAI,EAAE,KAAKA,IALL;AAMNJ,UAAAA,MAAM,EAAE,KAAKA,MANP;AAONoE,UAAAA,WAAW,EAAE,KAAK/D,GAAL,IAAY6D,SAPnB;AAQNG,UAAAA,UAAU,EAAE,KAAK/D,MAAL,IAAe4D;AARrB;AAFC,OAAX,EAYGR,IAZH,CAYQ,UAAC3D,IAAD,EAAU;AAChB,QAAA,MAAI,CAACS,UAAL,GAAkB,KAAlB;;AACA,YAAIT,IAAI,CAACsD,IAAL,CAAUM,QAAV,OAAyB,GAA7B,EAAkC;AAChC,UAAA,MAAI,CAACX,OAAL,CAAaC,IAAb,yCAAmD,MAAI,CAACjD,MAAxD;;AACA,UAAA,MAAI,CAAC6D,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEC,YAAAA,IAAI,EAAEhE,IAAI,CAACiE,GAAb;AAAkBnB,YAAAA,IAAI,EAAE;AAAxB,WAAvB;AACD,SAHD,MAGO;AACL,UAAA,MAAI,CAACgB,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEC,YAAAA,IAAI,EAAEhE,IAAI,CAACiE,GAAb;AAAkBnB,YAAAA,IAAI,EAAE;AAAxB,WAAvB;AACD;AACF,OApBD;AAqBD,KA1DM;AA2DP;AACAyB,IAAAA,YA5DO,0BA4DQ;AACb,WAAKC,QAAL;AACD,KA9DM;AA+DPA,IAAAA,QA/DO,sBA+DI;AAAA;;AACT,WAAKhB,KAAL,CAAW;AACTC,QAAAA,GAAG,EAAE,wBADI;AAETC,QAAAA,MAAM,EAAE;AAAEe,UAAAA,aAAa,EAAE,KAAK/D,OAAL,KAAiB,KAAjB,GAAyB,IAAzB,GAAgC;AAAjD;AAFC,OAAX,EAGGiD,IAHH,CAGQ,UAAC3D,IAAD,EAAU;AAChB,YAAIA,IAAI,CAACsD,IAAL,CAAUM,QAAV,OAAyB,GAA7B,EAAkC;AAChCc,UAAAA,UAAU,CAAC,YAAM;AACf;AACA,YAAA,MAAI,CAACZ,IAAL,CAAUC,KAAV,CAAgB,eAAhB,EAAiC,iBAAjC,EAFe,CAGf;;;AACA,YAAA,MAAI,CAACD,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEC,cAAAA,IAAI,EAAEhE,IAAI,CAACiE,GAAb;AAAkBnB,cAAAA,IAAI,EAAE;AAAxB,aAAvB;AACD,WALS,EAKP,IALO,CAAV;AAMD,SAPD,MAOO;AACL,UAAA,MAAI,CAACgB,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEC,YAAAA,IAAI,EAAE,MAAI,CAACW,EAAL,CAAQ,kCAAR,CAAR;AAAqD7B,YAAAA,IAAI,EAAE;AAA3D,WAAvB;AACD;AACF,OAdD;AAeD,KA/EM;AAgFP8B,IAAAA,YAhFO,wBAgFMC,KAhFN,EAgFaxE,IAhFb,EAgFmB;AACxB,WAAKA,IAAL,IAAawE,KAAb;AACD,KAlFM;AAmFP1B,IAAAA,WAnFO,yBAmFO;AAAA;;AACZ,WAAKK,KAAL,CAAW;AACTC,QAAAA,GAAG,EAAE,WADI;AAETC,QAAAA,MAAM,EAAE;AACNzD,UAAAA,MAAM,EAAE,KAAKA;AADP;AAFC,OAAX,EAKG0D,IALH,CAKQ,UAAC3D,IAAD,EAAU;AAChB,YAAIA,IAAI,CAACsD,IAAL,CAAUM,QAAV,OAAyB,GAA7B,EAAkC;AAChC,cAAMkB,GAAG,GAAG,EAAZ;AACA9E,UAAAA,IAAI,CAACA,IAAL,CAAU+E,OAAV,CAAkB,UAAC1B,IAAD,EAAU;AAC1ByB,YAAAA,GAAG,CAAC5B,IAAJ,CAAS;AACPI,cAAAA,IAAI,EAAED,IAAI,CAACQ,MAAL,CAAYD,QAAZ,EADC;AAEPiB,cAAAA,KAAK,EAAExB,IAAI,CAAC2B;AAFL,aAAT;AAID,WALD;AAMA,UAAA,MAAI,CAACxE,QAAL,GAAgBsE,GAAhB;;AACA,cAAIA,GAAG,CAAC9C,MAAJ,IAAc,MAAI,CAACtB,OAAL,KAAiB,KAAnC,EAA0C;AACxC,YAAA,MAAI,CAACR,IAAL,GAAY4E,GAAG,CAAC,CAAD,CAAH,CAAOxB,IAAnB;AACD;;AACD,cAAI,MAAI,CAAC5C,OAAL,KAAiB,KAArB,EAA4B;AAC1B,YAAA,MAAI,CAAC6C,UAAL;AACD;AACF,SAfD,MAeO;AACL,UAAA,MAAI,CAACO,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEC,YAAAA,IAAI,EAAEhE,IAAI,CAACiE,GAAb;AAAkBnB,YAAAA,IAAI,EAAE;AAAxB,WAAvB;AACD;AACF,OAxBD;AAyBD;AA7GM;AAxDI,CAAf","sourcesContent":["\r\nimport { imgMap } from '@/utils';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgMap,\r\n      symbol: '',\r\n      bank: '', // 银行\r\n      bankSub: '', // 支行\r\n      cardNo: '', // 账号\r\n      name: '', // 姓名\r\n      cms: '', // 短信验证码\r\n      google: '', // 谷歌验证码\r\n      bankList: [],\r\n      btnLoading: false,\r\n      nowType: '',\r\n      setId: '',\r\n    };\r\n  },\r\n  watch: {\r\n    AddUserInfoIsReady: {\r\n      immediate: true,\r\n      handler(v) {\r\n        if (v) {\r\n          const { userInfo } = this.$store.state.baseData;\r\n          this.name = userInfo.realName;\r\n        }\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    AddUserInfoIsReady() { return this.userInfoIsReady; },\r\n    buttonDisable() {\r\n      let flag = true;\r\n      const cmsSuc = this.OpenMobile ? this.cmsFlag : true;\r\n      const googleSuc = this.OpenGoogle ? this.googleFlag : true;\r\n      if ((this.bank.length\r\n        && this.cardNoFlag\r\n        && cmsSuc\r\n        && googleSuc) || this.btnLoading) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    regExps() { return this.$store.state.regExp; },\r\n    cardNoFlag() { return this.regExps.nonEmpty.test(this.cardNo); },\r\n    bankSubFlag() { return this.regExps.nonEmpty.test(this.bankSub); },\r\n    cmsFlag() { return this.regExps.verification.test(this.cms); },\r\n    googleFlag() { return this.regExps.verification.test(this.google); },\r\n    cmsErrorFlag() {\r\n      if (this.cms.length !== 0 && !this.cmsFlag) return true;\r\n      return false;\r\n    },\r\n    googleErrorFlag() {\r\n      if (this.google.length !== 0 && !this.googleFlag) return true;\r\n      return false;\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      const { symbol, type, id } = this.$route.query;\r\n      if (symbol && type === 'add') {\r\n        this.symbol = symbol.toUpperCase();\r\n        this.nowType = 'add';\r\n      } else if (symbol && type === 'set' && id) {\r\n        this.symbol = symbol.toUpperCase();\r\n        this.nowType = 'set';\r\n        this.setId = id;\r\n      } else {\r\n        this.$router.push('/assets/b2cAccount');\r\n        return;\r\n      }\r\n      this.getBankList();\r\n    },\r\n    addressChange(item) {\r\n      this.bank = item.code;\r\n    },\r\n    getSetMess() {\r\n      this.axios({\r\n        url: '/user/bank/get',\r\n        params: {\r\n          id: this.setId,\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.bank = data.data.bankNo.toString();\r\n          this.bankSub = data.data.bankSub;\r\n          this.cardNo = data.data.cardNo;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    submit() {\r\n      this.btnLoading = true;\r\n      this.axios({\r\n        url: this.nowType === 'add' ? '/user/bank/add' : '/user/bank/edit',\r\n        params: {\r\n          id: this.nowType === 'add' ? undefined : this.setId,\r\n          bankId: this.bank,\r\n          bankSub: this.bankSub || undefined,\r\n          cardNo: this.cardNo,\r\n          name: this.name,\r\n          symbol: this.symbol,\r\n          smsAuthCode: this.cms || undefined,\r\n          googleCode: this.google || undefined,\r\n        },\r\n      }).then((data) => {\r\n        this.btnLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.$router.push(`/assets/b2cAddressMent?symbol=${this.symbol}`);\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 获取验证码\r\n    getCodeClick() {\r\n      this.sendCode();\r\n    },\r\n    sendCode() {\r\n      this.axios({\r\n        url: 'v4/common/smsValidCode',\r\n        params: { operationType: this.nowType === 'add' ? '30' : '31' },\r\n      }).then((data) => {\r\n        if (data.code.toString() !== '0') {\r\n          setTimeout(() => {\r\n            // 倒计时重置\r\n            this.$bus.$emit('getCode-clear', 'withdrawGetcode');\r\n            // tip框提示错误\r\n            this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n          }, 2000);\r\n        } else {\r\n          this.$bus.$emit('tip', { text: this.$t('assets.withdraw.phoneSendSuccess'), type: 'success' });\r\n        }\r\n      });\r\n    },\r\n    inputChanges(value, name) {\r\n      this[name] = value;\r\n    },\r\n    getBankList() {\r\n      this.axios({\r\n        url: '/bank/all',\r\n        params: {\r\n          symbol: this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          const arr = [];\r\n          data.data.forEach((item) => {\r\n            arr.push({\r\n              code: item.bankNo.toString(),\r\n              value: item.accountName,\r\n            });\r\n          });\r\n          this.bankList = arr;\r\n          if (arr.length && this.nowType === 'add') {\r\n            this.bank = arr[0].code;\r\n          }\r\n          if (this.nowType === 'set') {\r\n            this.getSetMess();\r\n          }\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n"]}]}