{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/coFlowingWater/coFlowingWater.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/coFlowingWater/coFlowingWater.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-flowingWater',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      tabelList: [],\n      // table数据列表\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      startTime: '',\n      endTime: '',\n      type: 'all',\n      symbol: '' // symbolList: [],\n\n    };\n  },\n  computed: {\n    tradeLinkUrl: function tradeLinkUrl() {\n      if (process.env.NODE_ENV === 'development') {\n        return '/co/trade';\n      }\n\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\n        return \"\".concat(this.linkurl.coUrl, \"/trade\");\n      }\n\n      return '';\n    },\n    marginCoinList: function marginCoinList() {\n      if (this.$store.state.future.marginCoinList) {\n        return this.$store.state.future.marginCoinList;\n      }\n\n      return [];\n    },\n    // 币种信息\n    marginCoinInfor: function marginCoinInfor() {\n      if (this.$store.state.future.marginCoinInfor) {\n        return this.$store.state.future.marginCoinInfor;\n      }\n\n      return {};\n    },\n    symbolList: function symbolList() {\n      var arr = [];\n\n      if (this.marginCoinList.length !== 0) {\n        this.marginCoinList.forEach(function (item) {\n          arr.push({\n            value: item,\n            code: item\n          });\n        });\n        this.symbol = arr[0].code;\n      }\n\n      return arr;\n    },\n    typeList: function typeList() {\n      return [{\n        code: 'all',\n        value: this.$t('futures.coFlowingWater.all')\n      }, // 全部\n      {\n        code: '1',\n        value: this.$t('futures.coFlowingWater.transferIn')\n      }, // 转入\n      {\n        code: '2',\n        value: this.$t('futures.coFlowingWater.transferOut')\n      }, // 转出\n      // { code: '3', value: '结算多仓' }, // 结算多仓\n      // { code: '4', value: '结算空仓' }, // 结算空仓\n      {\n        code: '5',\n        value: this.$t('futures.coFlowingWater.fee')\n      }, // 资金费用\n      {\n        code: '6',\n        value: this.$t('futures.coFlowingWater.typeList5')\n      }, // 开仓手续费\n      {\n        code: '7',\n        value: this.$t('futures.coFlowingWater.typeList4')\n      }, // 平仓手续费\n      {\n        code: '8',\n        value: this.$t('futures.coFlowingWater.loss')\n      }, // 分摊\n      {\n        code: '9',\n        value: this.$t('futures.coFlowingWater.typeList1')\n      }, // 手续费分成\n      {\n        code: '10',\n        value: this.$t('futures.coFlowingWater.typeList2')\n      }, // 增金发放\n      {\n        code: '11',\n        value: this.$t('futures.coFlowingWater.typeList3')\n      } // 赠金回收\n      ];\n    },\n    axiosType: function axiosType() {\n      if (this.type === 'all') {\n        return '';\n      }\n\n      return this.type;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [{\n        title: this.$t('futures.coFlowingWater.time'),\n        width: '20%'\n      }, // 时间\n      {\n        title: this.$t('futures.coFlowingWater.type'),\n        width: '20%'\n      }, // 类型\n      {\n        title: this.$t('futures.coFlowingWater.amount'),\n        width: '20%'\n      }, // 金额\n      {\n        title: this.$t('futures.order.contract'),\n        width: '20%'\n      }, // 手续费\n      {\n        title: this.$t('futures.coFlowingWater.coin'),\n        width: '20%'\n      } // 币种\n      ];\n      return list;\n    }\n  },\n  watch: {\n    // marginCoinList(v) {\n    //   if (v) {\n    //     const arr = [];\n    //     this.$store.state.future.marginCoinList.forEach((item) => {\n    //       arr.push({ value: item, code: item });\n    //     });\n    //     this.symbolList = arr;\n    //     console.log(this.symbolList)\n    //     this.symbol = arr[0].code;\n    //     console.log(this.symbol)\n    //     this.getData();\n    //   }\n    // },\n    symbol: function symbol(v) {\n      if (v) {\n        this.getData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      this.resetTime(); // this.getSymbolList();\n    },\n    // getSymbolList() {\n    //   const arr = [];\n    //   const list = this.marginCoinList;\n    //   if (list) {\n    //     list.forEach((item) => {\n    //       arr.push({ value: item, code: item });\n    //     });\n    //     this.symbol = arr[0].code;\n    //     this.symbolList = arr;\n    //   }\n    // },\n    // 重置时间\n    resetTime: function resetTime() {\n      var timestamp = new Date().getTime();\n      var t = 60 * 60 * 24 * 1000 * 14;\n      this.startTime = this.getNowTime(timestamp - t);\n      this.endTime = this.getNowTime(timestamp);\n      this.start = \"\".concat(this.startTime, \" 00:00:00\");\n      this.end = \"\".concat(this.endTime, \" 23:59:59\");\n    },\n    getNowTime: function getNowTime() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var date = new Date(time);\n      var year = date.getFullYear();\n      var month = date.getMonth() + 1;\n      var day = date.getDate();\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    },\n    // 选择时间\n    startTimeSelect: function startTimeSelect(v) {\n      this.startTime = v;\n      this.start = \"\".concat(this.startTime, \" 00:00:00\");\n      this.end = \"\".concat(this.endTime, \" 23:59:59\");\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    endTimeSelect: function endTimeSelect(v) {\n      this.endTime = v;\n      this.start = \"\".concat(this.startTime, \" 00:00:00\");\n      this.end = \"\".concat(this.endTime, \" 23:59:59\");\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    symbolChange: function symbolChange(item) {\n      this.symbol = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    typeChange: function typeChange(item) {\n      this.type = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    getData: function getData() {\n      var _this = this;\n\n      this.axios({\n        url: 'record/get_transaction_list',\n        hostType: 'co',\n        params: {\n          limit: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          beginTime: new Date(this.start).getTime(),\n          endTime: new Date(this.end).getTime(),\n          type: this.axiosType,\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        _this.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n\n          if (data.data.transList && data.data.transList.length !== 0) {\n            data.data.transList.forEach(function (item, index) {\n              list.push({\n                id: index,\n                data: [item.ctime, // 时间\n                item.type, // 类型\n                fixD(item.amount, _this.marginCoinInfor[_this.symbol].marginCoinPrecision), // 金额\n                item.contractName, // 合约\n                _this.symbol]\n              });\n            });\n          }\n\n          _this.tabelList = list;\n          _this.paginationObj.total = data.data.count;\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getData();\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/assets/coFlowingWater/coFlowingWater.js"],"names":["fixD","colorMap","imgMap","name","data","tabelLoading","tabelList","paginationObj","total","display","currentPage","startTime","endTime","type","symbol","computed","tradeLinkUrl","process","env","NODE_ENV","$store","state","baseData","publicInfo","linkurl","coUrl","marginCoinList","future","marginCoinInfor","symbolList","arr","length","forEach","item","push","value","code","typeList","$t","axiosType","market","columns","list","title","width","watch","v","getData","methods","init","resetTime","timestamp","Date","getTime","t","getNowTime","start","end","time","date","year","getFullYear","month","getMonth","day","getDate","startTimeSelect","endTimeSelect","symbolChange","typeChange","axios","url","hostType","params","limit","page","beginTime","then","toString","transList","index","id","ctime","amount","marginCoinPrecision","contractName","count","$bus","$emit","text","msg","pagechange"],"mappings":"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","sourcesContent":["import {\r\n  fixD, colorMap, imgMap,\r\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'page-flowingWater',\r\n  data() {\r\n    return {\r\n      tabelLoading: true,\r\n      imgMap,\r\n      colorMap,\r\n      tabelList: [], // table数据列表\r\n      paginationObj: {\r\n        total: 0, // 数据总条数\r\n        display: 10, // 每页显示条数\r\n        currentPage: 1, // 当前页码\r\n      },\r\n      startTime: '',\r\n      endTime: '',\r\n      type: 'all',\r\n      symbol: '',\r\n      // symbolList: [],\r\n    };\r\n  },\r\n  computed: {\r\n    tradeLinkUrl() {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        return '/co/trade';\r\n      }\r\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\r\n        return `${this.linkurl.coUrl}/trade`;\r\n      }\r\n      return '';\r\n    },\r\n    marginCoinList() {\r\n      if (this.$store.state.future.marginCoinList) {\r\n        return this.$store.state.future.marginCoinList;\r\n      }\r\n      return [];\r\n    },\r\n    // 币种信息\r\n    marginCoinInfor() {\r\n      if (this.$store.state.future.marginCoinInfor) {\r\n        return this.$store.state.future.marginCoinInfor;\r\n      }\r\n      return {};\r\n    },\r\n    symbolList() {\r\n      const arr = [];\r\n      if (this.marginCoinList.length !== 0) {\r\n        this.marginCoinList.forEach((item) => {\r\n          arr.push({ value: item, code: item });\r\n        });\r\n        this.symbol = arr[0].code;\r\n      }\r\n      return arr;\r\n    },\r\n    typeList() {\r\n      return [\r\n        { code: 'all', value: this.$t('futures.coFlowingWater.all') }, // 全部\r\n        { code: '1', value: this.$t('futures.coFlowingWater.transferIn') }, // 转入\r\n        { code: '2', value: this.$t('futures.coFlowingWater.transferOut') }, // 转出\r\n        // { code: '3', value: '结算多仓' }, // 结算多仓\r\n        // { code: '4', value: '结算空仓' }, // 结算空仓\r\n        { code: '5', value: this.$t('futures.coFlowingWater.fee') }, // 资金费用\r\n        { code: '6', value: this.$t('futures.coFlowingWater.typeList5') }, // 开仓手续费\r\n        { code: '7', value: this.$t('futures.coFlowingWater.typeList4') }, // 平仓手续费\r\n        { code: '8', value: this.$t('futures.coFlowingWater.loss') }, // 分摊\r\n        { code: '9', value: this.$t('futures.coFlowingWater.typeList1') }, // 手续费分成\r\n        { code: '10', value: this.$t('futures.coFlowingWater.typeList2') }, // 增金发放\r\n        { code: '11', value: this.$t('futures.coFlowingWater.typeList3') }, // 赠金回收\r\n\r\n      ];\r\n    },\r\n    axiosType() {\r\n      if (this.type === 'all') {\r\n        return '';\r\n      }\r\n      return this.type;\r\n    },\r\n    // market 接口\r\n    market() { return this.$store.state.baseData.market; },\r\n    // 表格title\r\n    columns() {\r\n      const list = [\r\n        { title: this.$t('futures.coFlowingWater.time'), width: '20%' }, // 时间\r\n        { title: this.$t('futures.coFlowingWater.type'), width: '20%' }, // 类型\r\n        { title: this.$t('futures.coFlowingWater.amount'), width: '20%' }, // 金额\r\n        { title: this.$t('futures.order.contract'), width: '20%' }, // 手续费\r\n        { title: this.$t('futures.coFlowingWater.coin'), width: '20%' }, // 币种\r\n      ];\r\n      return list;\r\n    },\r\n  },\r\n  watch: {\r\n    // marginCoinList(v) {\r\n    //   if (v) {\r\n    //     const arr = [];\r\n    //     this.$store.state.future.marginCoinList.forEach((item) => {\r\n    //       arr.push({ value: item, code: item });\r\n    //     });\r\n    //     this.symbolList = arr;\r\n    //     console.log(this.symbolList)\r\n    //     this.symbol = arr[0].code;\r\n    //     console.log(this.symbol)\r\n    //     this.getData();\r\n    //   }\r\n    // },\r\n    symbol(v) {\r\n      if (v) {\r\n        this.getData();\r\n      }\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.resetTime();\r\n      // this.getSymbolList();\r\n    },\r\n    // getSymbolList() {\r\n    //   const arr = [];\r\n    //   const list = this.marginCoinList;\r\n    //   if (list) {\r\n    //     list.forEach((item) => {\r\n    //       arr.push({ value: item, code: item });\r\n    //     });\r\n    //     this.symbol = arr[0].code;\r\n    //     this.symbolList = arr;\r\n    //   }\r\n    // },\r\n    // 重置时间\r\n    resetTime() {\r\n      const timestamp = new Date().getTime();\r\n      const t = 60 * 60 * 24 * 1000 * 14;\r\n      this.startTime = this.getNowTime(timestamp - t);\r\n      this.endTime = this.getNowTime(timestamp);\r\n      this.start = `${this.startTime} 00:00:00`;\r\n      this.end = `${this.endTime} 23:59:59`;\r\n    },\r\n    getNowTime(time = '') {\r\n      const date = new Date(time);\r\n      const year = date.getFullYear();\r\n      const month = date.getMonth() + 1;\r\n      const day = date.getDate();\r\n      return `${year}-${month}-${day}`;\r\n    },\r\n    // 选择时间\r\n    startTimeSelect(v) {\r\n      this.startTime = v;\r\n      this.start = `${this.startTime} 00:00:00`;\r\n      this.end = `${this.endTime} 23:59:59`;\r\n      this.paginationObj.currentPage = 1; // 页码\r\n      this.paginationObj.total = 0; // 总条数\r\n      this.tabelList = [];\r\n      this.tabelLoading = true;\r\n      this.getData();\r\n    },\r\n    endTimeSelect(v) {\r\n      this.endTime = v;\r\n      this.start = `${this.startTime} 00:00:00`;\r\n      this.end = `${this.endTime} 23:59:59`;\r\n      this.paginationObj.currentPage = 1; // 页码\r\n      this.paginationObj.total = 0; // 总条数\r\n      this.tabelList = [];\r\n      this.tabelLoading = true;\r\n      this.getData();\r\n    },\r\n    symbolChange(item) {\r\n      this.symbol = item.code;\r\n      this.paginationObj.currentPage = 1; // 页码\r\n      this.paginationObj.total = 0; // 总条数\r\n      this.tabelList = [];\r\n      this.tabelLoading = true;\r\n      this.getData();\r\n    },\r\n    typeChange(item) {\r\n      this.type = item.code;\r\n      this.paginationObj.currentPage = 1; // 页码\r\n      this.paginationObj.total = 0; // 总条数\r\n      this.tabelList = [];\r\n      this.tabelLoading = true;\r\n      this.getData();\r\n    },\r\n    getData() {\r\n      this.axios({\r\n        url: 'record/get_transaction_list',\r\n        hostType: 'co',\r\n        params: {\r\n          limit: this.paginationObj.display, // 每页条数\r\n          page: this.paginationObj.currentPage, // 页码\r\n          beginTime: new Date(this.start).getTime(),\r\n          endTime: new Date(this.end).getTime(),\r\n          type: this.axiosType,\r\n          symbol: this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        this.tabelLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          const list = [];\r\n          if (data.data.transList && data.data.transList.length !== 0) {\r\n            data.data.transList.forEach((item, index) => {\r\n              list.push({\r\n                id: index,\r\n                data: [\r\n                  item.ctime, // 时间\r\n                  item.type, // 类型\r\n                  fixD(item.amount, this.marginCoinInfor[this.symbol].marginCoinPrecision), // 金额\r\n                  item.contractName, // 合约\r\n                  this.symbol,\r\n                ],\r\n              });\r\n            });\r\n          }\r\n          this.tabelList = list;\r\n          this.paginationObj.total = data.data.count;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    pagechange(v) {\r\n      this.paginationObj.currentPage = v;\r\n      this.getData();\r\n    },\r\n  },\r\n};\r\n"]}]}