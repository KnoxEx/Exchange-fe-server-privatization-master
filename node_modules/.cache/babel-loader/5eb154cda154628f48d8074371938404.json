{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/leverageAccount/leverageAccount.js","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/leverageAccount/leverageAccount.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { myStorage, fixD, fixRate, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-leverAccount',\n  data: function data() {\n    return {\n      otcHeader: \"background: url(\".concat(imgMap.zc_le, \")\"),\n      tabelLoading: true,\n      // 表格 loading\n      imgMap: imgMap,\n      colorMap: colorMap,\n      dataList: [],\n      // 表格 数据\n      totalBalance: '--',\n      // 资产折合\n      totalBalanceSymbol: '',\n      // 资产折合币种\n      switchFlag: false,\n      // 是否隐藏零资产\n      findValue: '',\n      // 搜索币种\n      totalRate: '--' // 折合法币\n\n    };\n  },\n  watch: {\n    market: function market(v) {\n      if (v) {\n        this.getData();\n      }\n    }\n  },\n  computed: {\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    showTotalBalanceSymbol: function showTotalBalanceSymbol() {\n      var str = this.totalBalanceSymbol;\n\n      if (this.market && this.market.coinList && this.market.coinList[this.totalBalanceSymbol]) {\n        str = getCoinShowName(this.totalBalanceSymbol, this.market.coinList);\n      }\n\n      return str;\n    },\n    linkurl: function linkurl() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.url;\n      }\n\n      return {};\n    },\n    tradeLinkUrl: function tradeLinkUrl() {\n      if (process.env.NODE_ENV === 'development') {\n        return '/ex/margin';\n      }\n\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\n        return \"\".concat(this.linkurl.exUrl, \"/margin\");\n      }\n\n      return '';\n    },\n    // 表格title\n    columns: function columns() {\n      return [{\n        title: this.$t('assets.leverageAccount.list1')\n      }, // 杠杆账户\n      {\n        title: this.$t('assets.leverageAccount.list2'),\n        width: '13%'\n      }, // 总资产\n      {\n        title: this.$t('assets.leverageAccount.list3'),\n        width: '13%'\n      }, // 可用\n      {\n        title: this.$t('assets.leverageAccount.list4'),\n        width: '13%'\n      }, // 冻结\n      {\n        title: this.$t('assets.leverageAccount.list5'),\n        width: '13%'\n      }, // 已借\n      {\n        title: this.$t('assets.leverageAccount.list6'),\n        width: '13%'\n      }, // 爆仓价\n      {\n        title: this.$t('assets.leverageAccount.list7'),\n        width: '10%'\n      }, // 风险率\n      {\n        title: this.$t('assets.leverageAccount.list8')\n      } // 操作\n      ];\n    },\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 资金列表展示到页面数据\n    dataListFilter: function dataListFilter() {\n      var _this = this;\n\n      // 隐藏零资产功能过滤数据\n      var list = [];\n\n      if (this.switchFlag) {\n        this.dataList.forEach(function (item) {\n          var _item$data$1$ = item.data[1][0],\n              subContent = _item$data$1$.subContent,\n              text = _item$data$1$.text;\n\n          if (parseFloat(text) || parseFloat(subContent.text)) {\n            list.push(item);\n          }\n        });\n      } else {\n        list = this.dataList;\n      } // 搜索框功能过滤数据\n\n\n      var newList = [];\n      list.forEach(function (item) {\n        if (item.data[0].toUpperCase().indexOf(_this.findValue.toUpperCase()) !== -1) {\n          newList.push(item);\n        }\n      });\n      return newList;\n    }\n  },\n  methods: {\n    init: function init() {\n      if (myStorage.get('assetsSwitch')) {\n        this.switchFlag = myStorage.get('assetsSwitch');\n      }\n\n      if (this.market) {\n        this.getData();\n      }\n    },\n    transferSuccess: function transferSuccess() {\n      this.getData();\n    },\n    getData: function getData() {\n      var _this2 = this;\n\n      this.axios({\n        url: '/lever/finance/balance'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this2.tabelLoading = false;\n          var leverMap = data.data.leverMap;\n          _this2.serverData = leverMap;\n\n          _this2.setData(data.data);\n        }\n      });\n    },\n    // 处理列表数据\n    setData: function setData(_ref) {\n      var _this3 = this;\n\n      var totalBalance = _ref.totalBalance,\n          totalBalanceSymbol = _ref.totalBalanceSymbol,\n          leverMap = _ref.leverMap;\n      this.tabelLoading = false;\n      var _this$market = this.market,\n          coinList = _this$market.coinList,\n          rate = _this$market.rate,\n          market = _this$market.market;\n      this.totalBalance = fixD(totalBalance, 8); // 折合资产\n\n      this.totalBalanceSymbol = totalBalanceSymbol; // 折合币种\n\n      this.totalRate = fixRate(totalBalance, rate, totalBalanceSymbol); // 折合法币\n\n      var list = [];\n      Object.keys(leverMap).forEach(function (v) {\n        var item = leverMap[v];\n        var quoteFix = coinList[item.quoteCoin].showPrecision || 0;\n\n        if (_this3.symbolAll) {\n          quoteFix = _this3.symbolAll[item.name].price;\n        } // const marketFix = market[item.quoteCoin][item.name].volume || 0;\n        // const showSymbol = market[v][cv].showName || market[v][cv].name;\n\n\n        var obj = market[item.quoteCoin][item.name];\n        var showSymbol = obj.showName || obj.name; // getCoinShowName\n\n        var showBaseCoin = getCoinShowName(item.baseCoin, coinList);\n        var showQuoteFix = getCoinShowName(item.quoteCoin, coinList);\n        list.push({\n          id: JSON.stringify(item),\n          data: [showSymbol, // 总资产\n          [{\n            text: \"\".concat(fixD(item.baseTotalBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              text: \"\".concat(fixD(item.quoteTotalBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 可用\n          [{\n            text: \"\".concat(fixD(item.baseNormalBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              text: \"\".concat(fixD(item.quoteNormalBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 冻结\n          [{\n            text: \"\".concat(fixD(item.baseLockBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              text: \"\".concat(fixD(item.quoteLockBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 已借\n          [{\n            // text: `${fixD(item.baseBorrowBalance, baseFix)} ${showBaseCoin}`,\n            text: \"\".concat(fixD(item.baseBorrowBalance, 8), \" \").concat(showBaseCoin),\n            subContent: {\n              // text: `${fixD(item.quoteBorrowBalance, quoteFix)} ${showQuoteFix}`,\n              text: \"\".concat(fixD(item.quoteBorrowBalance, 8), \" \").concat(showQuoteFix)\n            }\n          }], // 爆仓价\n          \"\".concat(fixD(item.burstPrice, quoteFix), \" \").concat(showQuoteFix), // 风险率\n          item.riskRate ? \"\".concat(item.riskRate, \"%\") : '--', [{\n            type: 'button',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: _this3.$t('assets.leverageAccount.transfer'),\n            // 划转\n            eventType: 'transfer'\n          }, {\n            type: 'link',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            text: _this3.$t('assets.leverageAccount.ToLoan'),\n            // 借贷\n            links: \"leverageToLoan?symbol=\".concat(item.symbol)\n          }, {\n            type: 'icon',\n            // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n            iconSvg: '<svg class=\"icon icon-16\" aria-hidden=\"true\"><use xlink:href=\"#icon-c_1\"></use></svg>',\n            eventType: 'goTrade'\n          }]]\n        });\n      });\n      this.dataList = list;\n    },\n    // 隐藏零资产\n    findChanges: function findChanges(v) {\n      this.findValue = v;\n    },\n    switchChange: function switchChange() {\n      this.switchFlag = !this.switchFlag;\n      myStorage.set('assetsSwitch', this.switchFlag);\n    },\n    tableClick: function tableClick(v, data) {\n      var obj = JSON.parse(data);\n\n      if (v === 'transfer') {\n        this.$bus.$emit('coTransfer', obj.symbol);\n      } else if (v === 'goTrade') {\n        var symbol = obj.name;\n\n        if (symbol.toString().indexOf('/') === -1) {\n          return;\n        }\n\n        var arr = symbol.split('/'); // myStorage.set('markTitle', symbol.split('/')[1]);\n        // myStorage.set('sSymbolName', symbol);\n\n        window.location.href = \"\".concat(this.tradeLinkUrl, \"/\").concat(arr[0], \"_\").concat(arr[1]);\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/leverageAccount/leverageAccount.js"],"names":["myStorage","fixD","fixRate","getCoinShowName","colorMap","imgMap","name","data","otcHeader","zc_le","tabelLoading","dataList","totalBalance","totalBalanceSymbol","switchFlag","findValue","totalRate","watch","market","v","getData","computed","symbolAll","$store","state","baseData","showTotalBalanceSymbol","str","coinList","linkurl","publicInfo","url","tradeLinkUrl","process","env","NODE_ENV","exUrl","columns","title","$t","width","dataListFilter","list","forEach","item","subContent","text","parseFloat","push","newList","toUpperCase","indexOf","methods","init","get","transferSuccess","axios","then","code","toString","leverMap","serverData","setData","rate","Object","keys","quoteFix","quoteCoin","showPrecision","price","obj","showSymbol","showName","showBaseCoin","baseCoin","showQuoteFix","id","JSON","stringify","baseTotalBalance","quoteTotalBalance","baseNormalBalance","quoteNormalBalance","baseLockBalance","quoteLockBalance","baseBorrowBalance","quoteBorrowBalance","burstPrice","riskRate","type","eventType","links","symbol","iconSvg","findChanges","switchChange","set","tableClick","parse","$bus","$emit","arr","split","window","location","href"],"mappings":"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","sourcesContent":["import {\r\n  myStorage, fixD, fixRate, getCoinShowName, colorMap, imgMap,\r\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'page-leverAccount',\r\n  data() {\r\n    return {\r\n      otcHeader: `background: url(${imgMap.zc_le})`,\r\n      tabelLoading: true, // 表格 loading\r\n      imgMap,\r\n      colorMap,\r\n      dataList: [], // 表格 数据\r\n      totalBalance: '--', // 资产折合\r\n      totalBalanceSymbol: '', // 资产折合币种\r\n      switchFlag: false, // 是否隐藏零资产\r\n      findValue: '', // 搜索币种\r\n      totalRate: '--', // 折合法币\r\n    };\r\n  },\r\n  watch: {\r\n    market(v) {\r\n      if (v) { this.getData(); }\r\n    },\r\n  },\r\n  computed: {\r\n    symbolAll() {\r\n      return this.$store.state.baseData.symbolAll;\r\n    },\r\n    showTotalBalanceSymbol() {\r\n      let str = this.totalBalanceSymbol;\r\n      if (this.market && this.market.coinList\r\n        && this.market.coinList[this.totalBalanceSymbol]) {\r\n        str = getCoinShowName(this.totalBalanceSymbol, this.market.coinList);\r\n      }\r\n      return str;\r\n    },\r\n    linkurl() {\r\n      if (this.$store.state.baseData.publicInfo) {\r\n        return this.$store.state.baseData.publicInfo.url;\r\n      }\r\n      return {};\r\n    },\r\n    tradeLinkUrl() {\r\n      if (process.env.NODE_ENV === 'development') {\r\n        return '/ex/margin';\r\n      }\r\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\r\n        return `${this.linkurl.exUrl}/margin`;\r\n      }\r\n      return '';\r\n    },\r\n    // 表格title\r\n    columns() {\r\n      return [\r\n        { title: this.$t('assets.leverageAccount.list1') }, // 杠杆账户\r\n        { title: this.$t('assets.leverageAccount.list2'), width: '13%' }, // 总资产\r\n        { title: this.$t('assets.leverageAccount.list3'), width: '13%' }, // 可用\r\n        { title: this.$t('assets.leverageAccount.list4'), width: '13%' }, // 冻结\r\n        { title: this.$t('assets.leverageAccount.list5'), width: '13%' }, // 已借\r\n        { title: this.$t('assets.leverageAccount.list6'), width: '13%' }, // 爆仓价\r\n        { title: this.$t('assets.leverageAccount.list7'), width: '10%' }, // 风险率\r\n        { title: this.$t('assets.leverageAccount.list8') }, // 操作\r\n      ];\r\n    },\r\n    market() { return this.$store.state.baseData.market; },\r\n    // 资金列表展示到页面数据\r\n    dataListFilter() {\r\n      // 隐藏零资产功能过滤数据\r\n      let list = [];\r\n      if (this.switchFlag) {\r\n        this.dataList.forEach((item) => {\r\n          const { subContent, text } = item.data[1][0];\r\n          if (parseFloat(text) || parseFloat(subContent.text)) {\r\n            list.push(item);\r\n          }\r\n        });\r\n      } else {\r\n        list = this.dataList;\r\n      }\r\n      // 搜索框功能过滤数据\r\n      const newList = [];\r\n      list.forEach((item) => {\r\n        if (item.data[0].toUpperCase().indexOf(this.findValue.toUpperCase()) !== -1) {\r\n          newList.push(item);\r\n        }\r\n      });\r\n      return newList;\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (myStorage.get('assetsSwitch')) {\r\n        this.switchFlag = myStorage.get('assetsSwitch');\r\n      }\r\n      if (this.market) {\r\n        this.getData();\r\n      }\r\n    },\r\n    transferSuccess() {\r\n      this.getData();\r\n    },\r\n    getData() {\r\n      this.axios({\r\n        url: '/lever/finance/balance',\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.tabelLoading = false;\r\n          const { leverMap } = data.data;\r\n          this.serverData = leverMap;\r\n          this.setData(data.data);\r\n        }\r\n      });\r\n    },\r\n    // 处理列表数据\r\n    setData({ totalBalance, totalBalanceSymbol, leverMap }) {\r\n      this.tabelLoading = false;\r\n      const { coinList, rate, market } = this.market;\r\n      this.totalBalance = fixD(totalBalance, 8); // 折合资产\r\n      this.totalBalanceSymbol = totalBalanceSymbol; // 折合币种\r\n      this.totalRate = fixRate(totalBalance, rate, totalBalanceSymbol); // 折合法币\r\n      const list = [];\r\n      Object.keys(leverMap).forEach((v) => {\r\n        const item = leverMap[v];\r\n        let quoteFix = coinList[item.quoteCoin].showPrecision || 0;\r\n        if (this.symbolAll) {\r\n          quoteFix = this.symbolAll[item.name].price;\r\n        }\r\n        // const marketFix = market[item.quoteCoin][item.name].volume || 0;\r\n        // const showSymbol = market[v][cv].showName || market[v][cv].name;\r\n        const obj = market[item.quoteCoin][item.name];\r\n        const showSymbol = obj.showName || obj.name;\r\n        // getCoinShowName\r\n        const showBaseCoin = getCoinShowName(item.baseCoin, coinList);\r\n        const showQuoteFix = getCoinShowName(item.quoteCoin, coinList);\r\n        list.push({\r\n          id: JSON.stringify(item),\r\n          data: [\r\n            showSymbol,\r\n            // 总资产\r\n            [\r\n              {\r\n                text: `${fixD(item.baseTotalBalance, 8)} ${showBaseCoin}`,\r\n                subContent: {\r\n                  text: `${fixD(item.quoteTotalBalance, 8)} ${showQuoteFix}`,\r\n                },\r\n              },\r\n            ],\r\n            // 可用\r\n            [\r\n              {\r\n                text: `${fixD(item.baseNormalBalance, 8)} ${showBaseCoin}`,\r\n                subContent: {\r\n                  text: `${fixD(item.quoteNormalBalance, 8)} ${showQuoteFix}`,\r\n                },\r\n              },\r\n            ],\r\n            // 冻结\r\n            [\r\n              {\r\n                text: `${fixD(item.baseLockBalance, 8)} ${showBaseCoin}`,\r\n                subContent: {\r\n                  text: `${fixD(item.quoteLockBalance, 8)} ${showQuoteFix}`,\r\n                },\r\n              },\r\n            ],\r\n            // 已借\r\n            [\r\n              {\r\n                // text: `${fixD(item.baseBorrowBalance, baseFix)} ${showBaseCoin}`,\r\n                text: `${fixD(item.baseBorrowBalance, 8)} ${showBaseCoin}`,\r\n                subContent: {\r\n                  // text: `${fixD(item.quoteBorrowBalance, quoteFix)} ${showQuoteFix}`,\r\n                  text: `${fixD(item.quoteBorrowBalance, 8)} ${showQuoteFix}`,\r\n                },\r\n              },\r\n            ],\r\n            // 爆仓价\r\n            `${fixD(item.burstPrice, quoteFix)} ${showQuoteFix}`,\r\n            // 风险率\r\n            item.riskRate ? `${item.riskRate}%` : '--',\r\n            [\r\n              {\r\n                type: 'button', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                text: this.$t('assets.leverageAccount.transfer'), // 划转\r\n                eventType: 'transfer',\r\n              },\r\n              {\r\n                type: 'link', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                text: this.$t('assets.leverageAccount.ToLoan'), // 借贷\r\n                links: `leverageToLoan?symbol=${item.symbol}`,\r\n              },\r\n              {\r\n                type: 'icon', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n                iconSvg: '<svg class=\"icon icon-16\" aria-hidden=\"true\"><use xlink:href=\"#icon-c_1\"></use></svg>',\r\n                eventType: 'goTrade',\r\n              },\r\n            ],\r\n          ],\r\n        });\r\n      });\r\n      this.dataList = list;\r\n    },\r\n    // 隐藏零资产\r\n    findChanges(v) {\r\n      this.findValue = v;\r\n    },\r\n    switchChange() {\r\n      this.switchFlag = !this.switchFlag;\r\n      myStorage.set('assetsSwitch', this.switchFlag);\r\n    },\r\n    tableClick(v, data) {\r\n      const obj = JSON.parse(data);\r\n      if (v === 'transfer') {\r\n        this.$bus.$emit('coTransfer', obj.symbol);\r\n      } else if (v === 'goTrade') {\r\n        const symbol = obj.name;\r\n        if (symbol.toString().indexOf('/') === -1) { return; }\r\n        const arr = symbol.split('/');\r\n        // myStorage.set('markTitle', symbol.split('/')[1]);\r\n        // myStorage.set('sSymbolName', symbol);\r\n        window.location.href = `${this.tradeLinkUrl}/${arr[0]}_${arr[1]}`;\r\n      }\r\n    },\r\n  },\r\n};\r\n"]}]}