{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/newTrade/newTrade.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/modules/coTrade/newTrade/newTrade.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { fixD, formatTime, nul, thousandsComma as _thousandsComma } from '@/utils';\nexport default {\n  name: 'newTrade',\n  components: {},\n  data: function data() {\n    return {\n      wsData: [],\n      dataList: [],\n      cellWidth: [120, 90, 90],\n      differNUmber: 29,\n      bodyHeight: '700px',\n      symbolCurrent: null\n    };\n  },\n  computed: {\n    // 当前合约面值\n    multiplier: function multiplier() {\n      return Number(this.$store.state.future.multiplier);\n    },\n    // 合约数量单位\n    coUnit: function coUnit() {\n      return this.$store.state.future.coUnit;\n    },\n    // 数量单位类型Number\n    coUnitType: function coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 合约数量精度\n    volfix: function volfix() {\n      return this.$store.state.future.volfix;\n    },\n    // 合约币对价格精度\n    pricefix: function pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    theadList: function theadList() {\n      return [this.$t('futures.newTrade.text2'), // 价格\n      \"\".concat(this.$t('futures.newTrade.text3'), \" (\").concat(this.coUnit, \")\"), // 数量\n      this.$t('futures.newTrade.text4') //  时间\n      ];\n    }\n  },\n  watch: {\n    coUnitType: function coUnitType(val, old) {\n      if (val && old) {\n        this.setDataList(JSON.stringify(this.wsData), 'req');\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.$bus.$on('TRADE_DATA_REQ', function (data) {\n        _this.setDataList(data, 'req');\n      });\n      this.$bus.$on('TRADE_DATA_SUB', function (data) {\n        _this.setDataList(data, 'sub');\n      }); // 获取 当前选中的货币对\n\n      this.$bus.$on('SYMBOL_CURRENT', function (val) {\n        _this.symbolCurrent = val;\n      });\n    },\n    setDataList: function setDataList(data, type) {\n      var _this2 = this;\n\n      var wsData = JSON.parse(data);\n      var arr = [];\n\n      if (type === 'req') {\n        this.dataList = [];\n        this.wsData = [];\n      }\n\n      if (wsData && wsData.length) {\n        wsData.forEach(function (item, index) {\n          var vol = item.vol; // 标的货币\n\n          if (_this2.coUnitType === 1) {\n            vol = fixD(nul(vol, _this2.multiplier), _this2.volfix);\n          }\n\n          var obj = {\n            side: item.side === 'SELL' ? 'u-4-cl' : 'u-1-cl',\n            time: formatTime(item.ts).split(' ')[1],\n            ts: item.ts,\n            price: fixD(item.price, _this2.pricefix),\n            vol: vol,\n            date: new Date().getTime() + index\n          };\n\n          if (type === 'sub') {\n            _this2.dataList.unshift(obj);\n\n            _this2.wsData.unshift(item);\n\n            if (_this2.dataList.length > 150) {\n              _this2.dataList.pop();\n\n              _this2.wsData.pop();\n            }\n          } else {\n            arr.push(obj);\n          }\n        });\n      }\n\n      if (type === 'req') {\n        this.dataList = arr;\n        this.wsData = wsData;\n      }\n\n      this.differNUmber = 29 - this.dataList.length > 0 ? 29 - this.dataList.length : 0;\n    },\n    handelPrice: function handelPrice(price) {\n      this.$bus.$emit('HANDEL_PRICE', price);\n    },\n    kyes: function kyes(item, index) {\n      if (item.change) {\n        return new Date().getTime();\n      }\n\n      return index;\n    },\n    thousandsComma: function thousandsComma(num) {\n      if (num) {\n        return _thousandsComma(num);\n      }\n\n      return num;\n    }\n  }\n};",null]}