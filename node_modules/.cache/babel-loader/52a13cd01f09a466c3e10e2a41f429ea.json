{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/assets/innerTransfer/innerTransfer.js","dependencies":[{"path":"/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/assets/innerTransfer/innerTransfer.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { fixD, fixInput, getCoinShowName, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-withdraw',\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      colorMap: colorMap,\n      alertFlag: false,\n      // alert变量\n      detailsList: [{\n        key: 'sum',\n        value: '--'\n      }, {\n        key: 'normal',\n        value: '--'\n      }, {\n        key: 'lock',\n        value: '--'\n      }],\n      withdrawMin: '--',\n      // 最小提币额度\n      withdrawMax: '--',\n      // 最大提币额度\n      daywithdrawMax: '--',\n      // 最大提币额度\n      symbol: '',\n      numberValue: '',\n      // 提币数量\n      proceduresValue: '',\n      // 手续费\n      dialogFlag: false,\n      // 弹窗开关\n      dialogConfirmLoading: false,\n      // 弹窗按钮loading\n      googleValue: '',\n      // 谷歌\n      phoneValue: '',\n      // 手机\n      defaultFeeFlag: true,\n      defaultFee: null,\n      symbol_withdraw_msg: null,\n      notIdShowDialog: false,\n      nowType: 1,\n      // 1为站外提现 2为站内提现\n      accountValue: '',\n      // 账号\n      accountFlag: false\n    };\n  },\n  filters: {\n    fixDFn: function fixDFn(v, that) {\n      return fixD(v, that.showPrecision);\n    }\n  },\n  watch: {\n    userInfoIsReady: function userInfoIsReady() {\n      this.canAlert();\n    },\n    exchangeData: function exchangeData(v) {\n      if (v) {\n        this.initDetails();\n      }\n    },\n    symbol: function symbol(v) {\n      if (v && this.market) {\n        // this.innerInit();\n        this.defInit();\n      }\n    },\n    market: {\n      immediate: true,\n      handler: function handler(v) {\n        if (v && this.symbol) {\n          // this.innerInit();\n          this.defInit();\n        }\n      }\n    },\n    proceduresValue: function proceduresValue(v) {\n      this.proceduresValue = fixInput(v, this.showPrecision);\n    },\n    numberValue: function numberValue(v) {\n      this.numberValue = fixInput(v, this.showPrecision);\n    }\n  },\n  computed: {\n    // finance/account_balance 接口返回成功的数据\n    exchangeData: function exchangeData() {\n      return this.$store.state.assets.exchangeData;\n    },\n    showSymbol: function showSymbol() {\n      var str = this.symbol;\n\n      if (this.market && this.market.coinList && this.market.coinList[this.symbol]) {\n        str = getCoinShowName(this.symbol, this.market.coinList);\n      }\n\n      return str;\n    },\n    enforceGoogleAuth: function enforceGoogleAuth() {\n      return this.$store.state.baseData.is_enforce_google_auth || 0;\n    },\n    authTitleText: function authTitleText() {\n      var text = this.enforceGoogleAuth ? 'assets.withdraw.enforceGoogleAuth' : 'assets.withdraw.safetyWarningError';\n      return this.$t(text);\n    },\n    switchadd: function switchadd() {\n      var publicInfo = this.$store.state.baseData.publicInfo;\n      var switchopen = 0;\n\n      if (publicInfo && publicInfo.switch.open_txid_addr) {\n        switchopen = Number(publicInfo.switch.open_txid_addr);\n      }\n\n      return switchopen;\n    },\n    alertData: function alertData() {\n      var arr = [// 绑定谷歌验证\n      {\n        text: this.$t('assets.withdraw.bindGoogle'),\n        flag: this.OpenGoogle\n      }];\n\n      if (!this.enforceGoogleAuth) {\n        // 绑定手机验证\n        arr.push({\n          text: this.$t('assets.withdraw.bindPhone'),\n          flag: this.OpenMobile\n        });\n      }\n\n      return arr;\n    },\n    // paginationObjCurrentPage() { return this.paginationObj.currentPage; },\n    // 当前币种精度\n    showPrecision: function showPrecision() {\n      var v = 0;\n      var market = this.$store.state.baseData.market;\n\n      if (market && market.coinList && market.coinList[this.symbol]) {\n        v = market.coinList[this.symbol].showPrecision;\n      }\n\n      return v;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 提现按钮禁用状态\n    btnDisabled: function btnDisabled() {\n      var flag = true;\n\n      if (this.accountValue.length && this.numberOptions.flag) {\n        flag = false;\n      }\n\n      return flag;\n    },\n    userInfoIsReady: function userInfoIsReady() {\n      return this.$store.state.baseData.userInfoIsReady;\n    },\n    // 用户是否开启手机\n    OpenMobile: function OpenMobile() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.isOpenMobileCheck.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    idAuth: function idAuth() {\n      var userInfo = this.$store.state.baseData.userInfo;\n      var idAuth = 0;\n\n      if (userInfo) {\n        idAuth = Number(userInfo.authLevel);\n      }\n\n      return idAuth;\n    },\n    // 用户是否开启谷歌\n    OpenGoogle: function OpenGoogle() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.googleStatus.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // phoneValue 是否复合正则验证\n    phoneValueFlag: function phoneValueFlag() {\n      return this.$store.state.regExp.verification.test(this.phoneValue);\n    },\n    // googleValue 是否复合正则验证\n    googleValueFlag: function googleValueFlag() {\n      return this.$store.state.regExp.verification.test(this.googleValue);\n    },\n    phoneError: function phoneError() {\n      if (this.phoneValue.length !== 0 && !this.phoneValueFlag) return true;\n      return false;\n    },\n    googleError: function googleError() {\n      if (this.googleValue.length !== 0 && !this.googleValueFlag) return true;\n      return false;\n    },\n    // 弹窗确认按钮\n    dialogConfirmDisabled: function dialogConfirmDisabled() {\n      var phone = true;\n      var google = true;\n\n      if (this.OpenMobile) {\n        phone = this.phoneValueFlag;\n      }\n\n      if (this.OpenGoogle) {\n        google = this.googleValueFlag;\n      }\n\n      if (phone && google || this.dialogConfirmLoading) {\n        return false;\n      }\n\n      return true;\n    },\n    that: function that() {\n      return this;\n    },\n    // 提币数量的校验\n    // 提现条件：\n    // 1. 提现数量 > 手续费\n    // 2. 提现数量 <= 可用余额 （提现数量包含手续费）\n    // 3. 提现最小限额 =< (提现数量 -手续费) =<提现最大限额\n    numberOptions: function numberOptions() {\n      var obj = {\n        text: '',\n        // 错误提示文案\n        flag: null,\n        // 是否通过校验\n        error: null // 是否展示文案\n\n      };\n      var haveNum = parseFloat(this.detailsList[1].value) || 0; // 可用\n\n      var minNum = parseFloat(this.withdrawMin) || 0; // 最小提币额\n\n      var maxNum = parseFloat(this.withdrawMax) || 0; // 最大提币额\n\n      var daymaxNum = parseFloat(this.daywithdrawMax) || 0; // 单日最大提币额\n\n      var spk = fixD(this.numberValue - this.proceduresValue, this.showPrecision); // 提币数量减手续费\n\n      if (this.numberValue.length === 0 || parseFloat(this.numberValue) === 0) {\n        // 请输入提币数量\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError');\n        obj.flag = false;\n        obj.error = false;\n        return obj;\n      }\n\n      if (parseFloat(this.numberValue) <= parseFloat(this.proceduresValue)) {\n        // 提币数量需大于矿工手续费\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError2');\n        obj.flag = false;\n        obj.error = true;\n        return obj;\n      }\n\n      if (parseFloat(this.numberValue) > haveNum) {\n        // 提币数量不得大于可用余额\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError3');\n        obj.flag = false;\n        obj.error = true;\n        return obj;\n      }\n\n      if (parseFloat(minNum) > spk || parseFloat(maxNum) < spk) {\n        // （提币数量-矿工手续费）需要大于最小提币额且小于最大提币额\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError4');\n        obj.flag = false;\n        obj.error = true;\n        return obj;\n      }\n\n      if (this.switchadd === 1) {\n        if (parseFloat(daymaxNum) < spk) {\n          // （提币数量-矿工手续费）需要小于单日最大提币额\n          obj.text = this.$t('assets.withdraw.NumberOfCoinsError5');\n          obj.flag = false;\n          obj.error = true;\n          return obj;\n        }\n      }\n\n      obj.flag = true;\n      obj.error = false;\n      return obj;\n    },\n    baseData: function baseData() {\n      return this.$store.state.baseData.publicInfo;\n    },\n    // 提现是否开启了必须实名认证\n    withdrawKycOpen: function withdrawKycOpen() {\n      var isOpen = 0;\n\n      if (this.baseData && this.baseData.kycLimitConfig) {\n        isOpen = this.baseData.kycLimitConfig.withdraw_kyc_open;\n      }\n\n      return Number(isOpen);\n    }\n  },\n  methods: {\n    defInit: function defInit() {\n      if (!this.exchangeData) {\n        this.$store.dispatch('assetsExchangeData');\n      } else {\n        this.initDetails();\n      }\n    },\n    init: function init() {\n      // 如果不存在币种跳走\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/exchangeAccount');\n      }\n\n      if (this.userInfoIsReady) {\n        this.canAlert();\n      }\n    },\n    canAlert: function canAlert() {\n      var _this = this;\n\n      if (this.OpenGoogle || !this.enforceGoogleAuth && this.OpenMobile) {\n        this.alertFlag = false;\n      } else {\n        setTimeout(function () {\n          _this.alertFlag = true;\n        }, 100);\n      }\n    },\n    alertClone: function alertClone() {\n      this.alertFlag = false;\n      this.notIdShowDialog = false;\n    },\n    alertGo: function alertGo() {\n      this.$router.push('/personal/userManagement');\n    },\n    goAddress: function goAddress() {\n      this.$router.push('/assets/addressMent');\n    },\n    inputChange: function inputChange(v, name) {\n      this[name] = v;\n    },\n    innerInit: function innerInit() {// 该币种是否有标签\n    },\n    // 上半部分 左侧数据\n    initDetails: function initDetails() {\n      var obj = this.exchangeData.allCoinMap[this.symbol];\n      var normalBalance = Number(obj.normal_balance) || Number(obj.overcharge_balance);\n      this.detailsList = [{\n        key: 'sum',\n        value: fixD(obj.total_balance, this.showPrecision)\n      }, // 总额\n      {\n        key: 'normal',\n        value: fixD(normalBalance, this.showPrecision)\n      }, // 可用\n      {\n        key: 'lock',\n        value: fixD(obj.lock_balance, this.showPrecision)\n      } // 冻结\n      ];\n      this.symbol_withdraw_msg = obj.symbol_withdraw_msg || null; // 注意事项\n\n      this.withdrawMin = fixD(obj.withdraw_min, this.showPrecision); // 最小提币额\n\n      this.withdrawMax = fixD(obj.withdraw_max, this.showPrecision); // 最大提币额\n\n      this.daywithdrawMax = fixD(obj.withdraw_max_day, this.showPrecision); // 单日最大提币额\n\n      this.defaultFee = \"\".concat(obj.innerTransferFee);\n      this.proceduresValue = \"\".concat(obj.innerTransferFee); // 默认手续费\n    },\n    // 全部提现\n    allWithDraw: function allWithDraw() {\n      if (this.detailsList[1].value === '--') return;\n      this.numberValue = this.detailsList[1].value;\n    },\n    // 获取验证码\n    getCodeClick: function getCodeClick() {\n      this.sendSmsCode();\n    },\n    // 发送验证码\n    sendSmsCode: function sendSmsCode() {\n      var _this2 = this;\n\n      this.axios({\n        url: 'v4/common/smsValidCode',\n        params: {\n          operationType: '34'\n        }\n      }).then(function (data) {\n        if (data.code.toString() !== '0') {\n          setTimeout(function () {\n            // 倒计时重置\n            _this2.$bus.$emit('getCode-clear', 'withdrawGetcode'); // tip框提示错误\n\n\n            _this2.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }, 2000);\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: _this2.$t('assets.withdraw.phoneSendSuccess'),\n            type: 'success'\n          });\n        }\n      });\n    },\n    withdrawClick: function withdrawClick() {\n      if (this.OpenGoogle || !this.enforceGoogleAuth && this.OpenMobile) {\n        if (this.withdrawKycOpen && this.idAuth !== 1) {\n          this.notIdShowDialog = true;\n          return;\n        }\n\n        this.isExistAccount(); // this.dialogFlag = true;\n\n        return;\n      }\n\n      this.alertFlag = true;\n    },\n    // 判断站内账户是否存在\n    isExistAccount: function isExistAccount() {\n      var _this3 = this;\n\n      this.axios({\n        url: 'inner_transfer/user_auth',\n        params: {\n          transferUid: this.accountValue // 对方账号\n\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this3.dialogFlag = true;\n        } else {\n          // this.accountFlag = true;\n          _this3.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 弹窗关闭\n    dialogClose: function dialogClose() {\n      this.phoneValue = '';\n      this.googleValue = '';\n      this.dialogFlag = false;\n    },\n    // 弹窗确认\n    dialogConfirm: function dialogConfirm() {\n      var _this4 = this;\n\n      this.dialogConfirmLoading = true;\n      var pv = this.showPrecision;\n      var amount = fixD(this.numberValue - this.proceduresValue, pv);\n      this.axios({\n        url: 'inner_transfer/do_withdraw',\n        params: {\n          transferUid: this.accountValue,\n          // 提现地址id\n          fee: this.proceduresValue,\n          // 手续费\n          amount: amount,\n          // 提现金额（不包含手续费\n          googleCode: this.googleValue,\n          smsAuthCode: this.phoneValue,\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        _this4.dialogConfirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this4.$bus.$emit('innerList');\n\n          _this4.$store.dispatch('assetsExchangeData'); // 更新额度\n\n\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this4.proceduresValue = '';\n          _this4.numberValue = '';\n          _this4.phoneValue = '';\n          _this4.googleValue = '';\n          _this4.accountValue = '';\n          _this4.dialogFlag = false;\n        } else {\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    // 去认证\n    gotoAuth: function gotoAuth() {\n      this.$router.push('/personal/userManagement');\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/assets/innerTransfer/innerTransfer.js"],"names":["fixD","fixInput","getCoinShowName","colorMap","imgMap","name","data","alertFlag","detailsList","key","value","withdrawMin","withdrawMax","daywithdrawMax","symbol","numberValue","proceduresValue","dialogFlag","dialogConfirmLoading","googleValue","phoneValue","defaultFeeFlag","defaultFee","symbol_withdraw_msg","notIdShowDialog","nowType","accountValue","accountFlag","filters","fixDFn","v","that","showPrecision","watch","userInfoIsReady","canAlert","exchangeData","initDetails","market","defInit","immediate","handler","computed","$store","state","assets","showSymbol","str","coinList","enforceGoogleAuth","baseData","is_enforce_google_auth","authTitleText","text","$t","switchadd","publicInfo","switchopen","switch","open_txid_addr","Number","alertData","arr","flag","OpenGoogle","push","OpenMobile","btnDisabled","length","numberOptions","userInfo","isOpenMobileCheck","toString","idAuth","authLevel","googleStatus","phoneValueFlag","regExp","verification","test","googleValueFlag","phoneError","googleError","dialogConfirmDisabled","phone","google","obj","error","haveNum","parseFloat","minNum","maxNum","daymaxNum","spk","withdrawKycOpen","isOpen","kycLimitConfig","withdraw_kyc_open","methods","dispatch","init","$route","query","toUpperCase","$router","setTimeout","alertClone","alertGo","goAddress","inputChange","innerInit","allCoinMap","normalBalance","normal_balance","overcharge_balance","total_balance","lock_balance","withdraw_min","withdraw_max","withdraw_max_day","innerTransferFee","allWithDraw","getCodeClick","sendSmsCode","axios","url","params","operationType","then","code","$bus","$emit","msg","type","withdrawClick","isExistAccount","transferUid","dialogClose","dialogConfirm","pv","amount","fee","googleCode","smsAuthCode","gotoAuth"],"mappings":"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","sourcesContent":["import {\r\n  fixD, fixInput, getCoinShowName, colorMap, imgMap,\r\n} from '@/utils';\r\n\r\nexport default {\r\n  name: 'page-withdraw',\r\n  data() {\r\n    return {\r\n      imgMap,\r\n      colorMap,\r\n      alertFlag: false, // alert变量\r\n      detailsList: [\r\n        { key: 'sum', value: '--' },\r\n        { key: 'normal', value: '--' },\r\n        { key: 'lock', value: '--' },\r\n      ],\r\n      withdrawMin: '--', // 最小提币额度\r\n      withdrawMax: '--', // 最大提币额度\r\n      daywithdrawMax: '--', // 最大提币额度\r\n      symbol: '',\r\n      numberValue: '', // 提币数量\r\n      proceduresValue: '', // 手续费\r\n      dialogFlag: false, // 弹窗开关\r\n      dialogConfirmLoading: false, // 弹窗按钮loading\r\n      googleValue: '', // 谷歌\r\n      phoneValue: '', // 手机\r\n      defaultFeeFlag: true,\r\n      defaultFee: null,\r\n      symbol_withdraw_msg: null,\r\n      notIdShowDialog: false,\r\n      nowType: 1, // 1为站外提现 2为站内提现\r\n      accountValue: '', // 账号\r\n      accountFlag: false,\r\n    };\r\n  },\r\n  filters: {\r\n    fixDFn(v, that) {\r\n      return fixD(v, that.showPrecision);\r\n    },\r\n  },\r\n  watch: {\r\n    userInfoIsReady() { this.canAlert(); },\r\n    exchangeData(v) { if (v) { this.initDetails(); } },\r\n    symbol(v) {\r\n      if (v && this.market) {\r\n        // this.innerInit();\r\n        this.defInit();\r\n      }\r\n    },\r\n    market: {\r\n      immediate: true,\r\n      handler(v) {\r\n        if (v && this.symbol) {\r\n          // this.innerInit();\r\n          this.defInit();\r\n        }\r\n      },\r\n    },\r\n    proceduresValue(v) { this.proceduresValue = fixInput(v, this.showPrecision); },\r\n    numberValue(v) { this.numberValue = fixInput(v, this.showPrecision); },\r\n  },\r\n  computed: {\r\n    // finance/account_balance 接口返回成功的数据\r\n    exchangeData() { return this.$store.state.assets.exchangeData; },\r\n    showSymbol() {\r\n      let str = this.symbol;\r\n      if (this.market && this.market.coinList\r\n        && this.market.coinList[this.symbol]) {\r\n        str = getCoinShowName(this.symbol, this.market.coinList);\r\n      }\r\n      return str;\r\n    },\r\n    enforceGoogleAuth() {\r\n      return this.$store.state.baseData.is_enforce_google_auth || 0;\r\n    },\r\n    authTitleText() {\r\n      const text = this.enforceGoogleAuth ? 'assets.withdraw.enforceGoogleAuth' : 'assets.withdraw.safetyWarningError';\r\n      return this.$t(text);\r\n    },\r\n    switchadd() {\r\n      const { publicInfo } = this.$store.state.baseData;\r\n      let switchopen = 0;\r\n      if (publicInfo && publicInfo.switch.open_txid_addr) {\r\n        switchopen = Number(publicInfo.switch.open_txid_addr);\r\n      }\r\n      return switchopen;\r\n    },\r\n    alertData() {\r\n      const arr = [\r\n        // 绑定谷歌验证\r\n        { text: this.$t('assets.withdraw.bindGoogle'), flag: this.OpenGoogle },\r\n      ];\r\n      if (!this.enforceGoogleAuth) {\r\n        // 绑定手机验证\r\n        arr.push({ text: this.$t('assets.withdraw.bindPhone'), flag: this.OpenMobile });\r\n      }\r\n      return arr;\r\n    },\r\n    // paginationObjCurrentPage() { return this.paginationObj.currentPage; },\r\n    // 当前币种精度\r\n    showPrecision() {\r\n      let v = 0;\r\n      const { market } = this.$store.state.baseData;\r\n      if (market && market.coinList && market.coinList[this.symbol]) {\r\n        v = market.coinList[this.symbol].showPrecision;\r\n      }\r\n      return v;\r\n    },\r\n    // market 接口\r\n    market() { return this.$store.state.baseData.market; },\r\n    // 提现按钮禁用状态\r\n    btnDisabled() {\r\n      let flag = true;\r\n      if (this.accountValue.length && this.numberOptions.flag) {\r\n        flag = false;\r\n      }\r\n      return flag;\r\n    },\r\n    userInfoIsReady() { return this.$store.state.baseData.userInfoIsReady; },\r\n    // 用户是否开启手机\r\n    OpenMobile() {\r\n      let flag = false;\r\n      const { userInfo } = this.$store.state.baseData;\r\n      if (userInfo && userInfo.isOpenMobileCheck.toString() === '1') {\r\n        flag = true;\r\n      }\r\n      return flag;\r\n    },\r\n    idAuth() {\r\n      const { userInfo } = this.$store.state.baseData;\r\n      let idAuth = 0;\r\n      if (userInfo) {\r\n        idAuth = Number(userInfo.authLevel);\r\n      }\r\n      return idAuth;\r\n    },\r\n    // 用户是否开启谷歌\r\n    OpenGoogle() {\r\n      let flag = false;\r\n      const { userInfo } = this.$store.state.baseData;\r\n      if (userInfo && userInfo.googleStatus.toString() === '1') {\r\n        flag = true;\r\n      }\r\n      return flag;\r\n    },\r\n    // phoneValue 是否复合正则验证\r\n    phoneValueFlag() { return this.$store.state.regExp.verification.test(this.phoneValue); },\r\n    // googleValue 是否复合正则验证\r\n    googleValueFlag() { return this.$store.state.regExp.verification.test(this.googleValue); },\r\n    phoneError() {\r\n      if (this.phoneValue.length !== 0 && !this.phoneValueFlag) return true;\r\n      return false;\r\n    },\r\n    googleError() {\r\n      if (this.googleValue.length !== 0 && !this.googleValueFlag) return true;\r\n      return false;\r\n    },\r\n    // 弹窗确认按钮\r\n    dialogConfirmDisabled() {\r\n      let phone = true;\r\n      let google = true;\r\n      if (this.OpenMobile) { phone = this.phoneValueFlag; }\r\n      if (this.OpenGoogle) { google = this.googleValueFlag; }\r\n      if ((phone && google) || this.dialogConfirmLoading) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    that() { return this; },\r\n    // 提币数量的校验\r\n    // 提现条件：\r\n    // 1. 提现数量 > 手续费\r\n    // 2. 提现数量 <= 可用余额 （提现数量包含手续费）\r\n    // 3. 提现最小限额 =< (提现数量 -手续费) =<提现最大限额\r\n    numberOptions() {\r\n      const obj = {\r\n        text: '', // 错误提示文案\r\n        flag: null, // 是否通过校验\r\n        error: null, // 是否展示文案\r\n      };\r\n      const haveNum = parseFloat(this.detailsList[1].value) || 0; // 可用\r\n      const minNum = parseFloat(this.withdrawMin) || 0; // 最小提币额\r\n      const maxNum = parseFloat(this.withdrawMax) || 0; // 最大提币额\r\n      const daymaxNum = parseFloat(this.daywithdrawMax) || 0; // 单日最大提币额\r\n      const spk = fixD(this.numberValue - this.proceduresValue, this.showPrecision); // 提币数量减手续费\r\n      if (this.numberValue.length === 0 || parseFloat(this.numberValue) === 0) {\r\n        // 请输入提币数量\r\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError');\r\n        obj.flag = false;\r\n        obj.error = false;\r\n        return obj;\r\n      } if (parseFloat(this.numberValue) <= parseFloat(this.proceduresValue)) {\r\n        // 提币数量需大于矿工手续费\r\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError2');\r\n        obj.flag = false;\r\n        obj.error = true;\r\n        return obj;\r\n      } if (parseFloat(this.numberValue) > haveNum) {\r\n        // 提币数量不得大于可用余额\r\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError3');\r\n        obj.flag = false;\r\n        obj.error = true;\r\n        return obj;\r\n      } if (parseFloat(minNum) > spk || parseFloat(maxNum) < spk) {\r\n        // （提币数量-矿工手续费）需要大于最小提币额且小于最大提币额\r\n        obj.text = this.$t('assets.withdraw.NumberOfCoinsError4');\r\n        obj.flag = false;\r\n        obj.error = true;\r\n        return obj;\r\n      } if (this.switchadd === 1) {\r\n        if (parseFloat(daymaxNum) < spk) {\r\n          // （提币数量-矿工手续费）需要小于单日最大提币额\r\n          obj.text = this.$t('assets.withdraw.NumberOfCoinsError5');\r\n          obj.flag = false;\r\n          obj.error = true;\r\n          return obj;\r\n        }\r\n      }\r\n      obj.flag = true;\r\n      obj.error = false;\r\n      return obj;\r\n    },\r\n    baseData() {\r\n      return this.$store.state.baseData.publicInfo;\r\n    },\r\n    // 提现是否开启了必须实名认证\r\n    withdrawKycOpen() {\r\n      let isOpen = 0;\r\n      if (this.baseData && this.baseData.kycLimitConfig) {\r\n        isOpen = this.baseData.kycLimitConfig.withdraw_kyc_open;\r\n      }\r\n      return Number(isOpen);\r\n    },\r\n  },\r\n  methods: {\r\n    defInit() {\r\n      if (!this.exchangeData) {\r\n        this.$store.dispatch('assetsExchangeData');\r\n      } else {\r\n        this.initDetails();\r\n      }\r\n    },\r\n    init() {\r\n      // 如果不存在币种跳走\r\n      if (this.$route.query.symbol) {\r\n        this.symbol = this.$route.query.symbol.toUpperCase();\r\n      } else {\r\n        this.$router.push('/assets/exchangeAccount');\r\n      }\r\n      if (this.userInfoIsReady) {\r\n        this.canAlert();\r\n      }\r\n    },\r\n    canAlert() {\r\n      if (this.OpenGoogle || (!this.enforceGoogleAuth && this.OpenMobile)) {\r\n        this.alertFlag = false;\r\n      } else {\r\n        setTimeout(() => {\r\n          this.alertFlag = true;\r\n        }, 100);\r\n      }\r\n    },\r\n    alertClone() {\r\n      this.alertFlag = false;\r\n      this.notIdShowDialog = false;\r\n    },\r\n    alertGo() { this.$router.push('/personal/userManagement'); },\r\n    goAddress() { this.$router.push('/assets/addressMent'); },\r\n    inputChange(v, name) {\r\n      this[name] = v;\r\n    },\r\n    innerInit() {\r\n      // 该币种是否有标签\r\n    },\r\n    // 上半部分 左侧数据\r\n    initDetails() {\r\n      const obj = this.exchangeData.allCoinMap[this.symbol];\r\n      const normalBalance = Number(obj.normal_balance) || Number(obj.overcharge_balance);\r\n      this.detailsList = [\r\n        { key: 'sum', value: fixD(obj.total_balance, this.showPrecision) }, // 总额\r\n        { key: 'normal', value: fixD(normalBalance, this.showPrecision) }, // 可用\r\n        { key: 'lock', value: fixD(obj.lock_balance, this.showPrecision) }, // 冻结\r\n      ];\r\n      this.symbol_withdraw_msg = obj.symbol_withdraw_msg || null; // 注意事项\r\n      this.withdrawMin = fixD(obj.withdraw_min, this.showPrecision); // 最小提币额\r\n      this.withdrawMax = fixD(obj.withdraw_max, this.showPrecision);// 最大提币额\r\n      this.daywithdrawMax = fixD(obj.withdraw_max_day, this.showPrecision);// 单日最大提币额\r\n      this.defaultFee = `${obj.innerTransferFee}`;\r\n      this.proceduresValue = `${obj.innerTransferFee}`; // 默认手续费\r\n    },\r\n    // 全部提现\r\n    allWithDraw() {\r\n      if (this.detailsList[1].value === '--') return;\r\n      this.numberValue = this.detailsList[1].value;\r\n    },\r\n    // 获取验证码\r\n    getCodeClick() {\r\n      this.sendSmsCode();\r\n    },\r\n    // 发送验证码\r\n    sendSmsCode() {\r\n      this.axios({\r\n        url: 'v4/common/smsValidCode',\r\n        params: { operationType: '34' },\r\n      }).then((data) => {\r\n        if (data.code.toString() !== '0') {\r\n          setTimeout(() => {\r\n            // 倒计时重置\r\n            this.$bus.$emit('getCode-clear', 'withdrawGetcode');\r\n            // tip框提示错误\r\n            this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n          }, 2000);\r\n        } else {\r\n          this.$bus.$emit('tip', { text: this.$t('assets.withdraw.phoneSendSuccess'), type: 'success' });\r\n        }\r\n      });\r\n    },\r\n    withdrawClick() {\r\n      if (this.OpenGoogle || (!this.enforceGoogleAuth && this.OpenMobile)) {\r\n        if (this.withdrawKycOpen && this.idAuth !== 1) {\r\n          this.notIdShowDialog = true;\r\n          return;\r\n        }\r\n        this.isExistAccount();\r\n        // this.dialogFlag = true;\r\n        return;\r\n      }\r\n      this.alertFlag = true;\r\n    },\r\n    // 判断站内账户是否存在\r\n    isExistAccount() {\r\n      this.axios({\r\n        url: 'inner_transfer/user_auth',\r\n        params: {\r\n          transferUid: this.accountValue, // 对方账号\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.dialogFlag = true;\r\n        } else {\r\n          // this.accountFlag = true;\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 弹窗关闭\r\n    dialogClose() {\r\n      this.phoneValue = '';\r\n      this.googleValue = '';\r\n      this.dialogFlag = false;\r\n    },\r\n    // 弹窗确认\r\n    dialogConfirm() {\r\n      this.dialogConfirmLoading = true;\r\n      const pv = this.showPrecision;\r\n      const amount = fixD(this.numberValue - this.proceduresValue, pv);\r\n      this.axios({\r\n        url: 'inner_transfer/do_withdraw',\r\n        params: {\r\n          transferUid: this.accountValue, // 提现地址id\r\n          fee: this.proceduresValue, // 手续费\r\n          amount, // 提现金额（不包含手续费\r\n          googleCode: this.googleValue,\r\n          smsAuthCode: this.phoneValue,\r\n          symbol: this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        this.dialogConfirmLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          this.$bus.$emit('innerList');\r\n          this.$store.dispatch('assetsExchangeData'); // 更新额度\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.proceduresValue = '';\r\n          this.numberValue = '';\r\n          this.phoneValue = '';\r\n          this.googleValue = '';\r\n          this.accountValue = '';\r\n          this.dialogFlag = false;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    // 去认证\r\n    gotoAuth() {\r\n      this.$router.push('/personal/userManagement');\r\n    },\r\n  },\r\n};\r\n"]}]}