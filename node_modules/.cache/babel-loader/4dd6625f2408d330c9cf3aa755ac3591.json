{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/personal/checkApi/checkApi.js","dependencies":[{"path":"/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/personal/checkApi/checkApi.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nexport default {\n  name: 'checkApi',\n  watch: {\n    sendSmsCode: function sendSmsCode(_sendSmsCode) {\n      if (_sendSmsCode !== null) {\n        if (_sendSmsCode.text === 'success') {\n          this.$bus.$emit('tip', {\n            text: _sendSmsCode.msg,\n            type: 'success'\n          });\n          this.$store.dispatch('resetType');\n        } else {\n          this.$bus.$emit('tip', {\n            text: _sendSmsCode.msg,\n            type: 'error'\n          });\n          this.$store.dispatch('resetType');\n        }\n      }\n    },\n    openApiOne: function openApiOne(_openApiOne) {\n      if (_openApiOne !== null) {\n        this.loading = false;\n\n        if (_openApiOne.text === 'success') {\n          this.$bus.$emit('tip', {\n            text: _openApiOne.msg,\n            type: 'success'\n          });\n          this.$store.dispatch('resetType');\n          this.secretKey = _openApiOne.data.secretKey;\n          this.qrCode = _openApiOne.data.qrCode;\n          this.divShow = 2;\n        } else {\n          this.$bus.$emit('tip', {\n            text: _openApiOne.msg,\n            type: 'error'\n          });\n          this.$store.dispatch('resetType');\n\n          if (_openApiOne.code !== '10009') {\n            this.$bus.$emit('getCode-clear', 'phone');\n          }\n        }\n      }\n    }\n  },\n  computed: {\n    sendSmsCode: function sendSmsCode() {\n      return this.$store.state.personal.sendSmsCode;\n    },\n    openApiOne: function openApiOne() {\n      return this.$store.state.personal.openApiOne;\n    }\n  },\n  data: function data() {\n    return {\n      svgShow: true,\n      // input'\n      loading: false,\n      divShow: 1,\n      promptText1: this.$t('personal.label.smsCodeText'),\n      errorText1: this.$t('personal.prompt.errorCode'),\n      checkErrorFlag1: false,\n      checkValue1: '',\n      promptText2: this.$t('personal.label.googleCodeText'),\n      errorText2: this.$t('personal.prompt.errorCode'),\n      checkErrorFlag2: false,\n      checkValue2: '',\n      disabled: true,\n      googleCode: false,\n      smsCode: false,\n      secretKey: '',\n      qrCode: ''\n    };\n  },\n  methods: {\n    init: function init() {\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo !== null) {\n        this.googleCode = !!Number(userInfo.googleStatus);\n        this.smsCode = !!Number(userInfo.isOpenMobileCheck);\n      }\n    },\n    handMouseenter: function handMouseenter() {\n      this.svgShow = false;\n    },\n    handMouseleave: function handMouseleave() {\n      this.svgShow = true;\n    },\n    codeFlag: function codeFlag(val) {\n      return this.$store.state.regExp.verification.test(val);\n    },\n    getCodeClick: function getCodeClick() {\n      this.$bus.$emit('getCode-start', 'phone');\n      var info = {\n        operationType: 16\n      };\n      this.$store.dispatch('sendSmsCode', info);\n    },\n    inputChanges: function inputChanges(val, name) {\n      switch (name) {\n        case 'phoneCode':\n          this.checkValue1 = val;\n\n          if (this.codeFlag(val)) {\n            this.checkErrorFlag1 = false;\n          } else {\n            this.checkErrorFlag1 = true;\n          }\n\n          break;\n\n        default:\n          this.checkValue2 = val;\n\n          if (this.codeFlag(val)) {\n            this.checkErrorFlag2 = false;\n          } else {\n            this.checkErrorFlag2 = true;\n          }\n\n      }\n\n      if (!this.checkErrorFlag1 && !this.checkErrorFlag2) {\n        if (this.smsCode) {\n          this.disabled = !this.checkValue1;\n        }\n\n        if (this.googleCode) {\n          this.disabled = !this.checkValue2;\n        }\n      } else {\n        this.disabled = true;\n      }\n    },\n    btnLink: function btnLink() {\n      this.loading = true;\n      var token = this.$store.state.personal.apiToken;\n      var info = {\n        smsValidCode: this.checkValue1,\n        googleCode: this.checkValue2,\n        token: token\n      };\n      this.$store.dispatch('openApiOne', info);\n    },\n    copyClick: function copyClick(name) {\n      if (name === 'secretKey') {\n        this.copy(this.secretKey);\n      }\n    },\n    copy: function copy(str) {\n      // this.$bus.$emit('tip', { text: this.$t('personal.prompt.copySucces'), type: 'success' });\n      function save(e) {\n        e.clipboardData.setData('text/plain', str); // 下面会说到clipboardData对象\n\n        e.preventDefault(); // 阻止默认行为\n      }\n\n      document.addEventListener('copy', save);\n      document.execCommand('copy'); // 使文档处于可编辑状态，否则无效\n\n      document.removeEventListener('copy', save);\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/blockchain-ui-privatization/PC/common-mixin/personal/checkApi/checkApi.js"],"names":["name","watch","sendSmsCode","text","$bus","$emit","msg","type","$store","dispatch","openApiOne","loading","secretKey","data","qrCode","divShow","code","computed","state","personal","svgShow","promptText1","$t","errorText1","checkErrorFlag1","checkValue1","promptText2","errorText2","checkErrorFlag2","checkValue2","disabled","googleCode","smsCode","methods","init","userInfo","baseData","Number","googleStatus","isOpenMobileCheck","handMouseenter","handMouseleave","codeFlag","val","regExp","verification","test","getCodeClick","info","operationType","inputChanges","btnLink","token","apiToken","smsValidCode","copyClick","copy","str","save","e","clipboardData","setData","preventDefault","document","addEventListener","execCommand","removeEventListener"],"mappings":"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","sourcesContent":["export default {\r\n  name: 'checkApi',\r\n  watch: {\r\n    sendSmsCode(sendSmsCode) {\r\n      if (sendSmsCode !== null) {\r\n        if (sendSmsCode.text === 'success') {\r\n          this.$bus.$emit('tip', { text: sendSmsCode.msg, type: 'success' });\r\n          this.$store.dispatch('resetType');\r\n        } else {\r\n          this.$bus.$emit('tip', { text: sendSmsCode.msg, type: 'error' });\r\n          this.$store.dispatch('resetType');\r\n        }\r\n      }\r\n    },\r\n    openApiOne(openApiOne) {\r\n      if (openApiOne !== null) {\r\n        this.loading = false;\r\n        if (openApiOne.text === 'success') {\r\n          this.$bus.$emit('tip', { text: openApiOne.msg, type: 'success' });\r\n          this.$store.dispatch('resetType');\r\n          this.secretKey = openApiOne.data.secretKey;\r\n          this.qrCode = openApiOne.data.qrCode;\r\n          this.divShow = 2;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: openApiOne.msg, type: 'error' });\r\n          this.$store.dispatch('resetType');\r\n          if (openApiOne.code !== '10009') {\r\n            this.$bus.$emit('getCode-clear', 'phone');\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    sendSmsCode() {\r\n      return this.$store.state.personal.sendSmsCode;\r\n    },\r\n    openApiOne() {\r\n      return this.$store.state.personal.openApiOne;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      svgShow: true,\r\n      // input'\r\n      loading: false,\r\n      divShow: 1,\r\n      promptText1: this.$t('personal.label.smsCodeText'),\r\n      errorText1: this.$t('personal.prompt.errorCode'),\r\n      checkErrorFlag1: false,\r\n      checkValue1: '',\r\n      promptText2: this.$t('personal.label.googleCodeText'),\r\n      errorText2: this.$t('personal.prompt.errorCode'),\r\n      checkErrorFlag2: false,\r\n      checkValue2: '',\r\n      disabled: true,\r\n      googleCode: false,\r\n      smsCode: false,\r\n      secretKey: '',\r\n      qrCode: '',\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      const { userInfo } = this.$store.state.baseData;\r\n      if (userInfo !== null) {\r\n        this.googleCode = !!Number(userInfo.googleStatus);\r\n        this.smsCode = !!Number(userInfo.isOpenMobileCheck);\r\n      }\r\n    },\r\n    handMouseenter() {\r\n      this.svgShow = false;\r\n    },\r\n    handMouseleave() {\r\n      this.svgShow = true;\r\n    },\r\n    codeFlag(val) {\r\n      return this.$store.state.regExp.verification.test(val);\r\n    },\r\n    getCodeClick() {\r\n      this.$bus.$emit('getCode-start', 'phone');\r\n      const info = { operationType: 16 };\r\n      this.$store.dispatch('sendSmsCode', info);\r\n    },\r\n    inputChanges(val, name) {\r\n      switch (name) {\r\n        case 'phoneCode':\r\n          this.checkValue1 = val;\r\n          if (this.codeFlag(val)) {\r\n            this.checkErrorFlag1 = false;\r\n          } else {\r\n            this.checkErrorFlag1 = true;\r\n          }\r\n          break;\r\n        default:\r\n          this.checkValue2 = val;\r\n          if (this.codeFlag(val)) {\r\n            this.checkErrorFlag2 = false;\r\n          } else {\r\n            this.checkErrorFlag2 = true;\r\n          }\r\n      }\r\n\r\n      if (!this.checkErrorFlag1 && !this.checkErrorFlag2) {\r\n        if (this.smsCode) {\r\n          this.disabled = !this.checkValue1;\r\n        }\r\n        if (this.googleCode) {\r\n          this.disabled = !this.checkValue2;\r\n        }\r\n      } else {\r\n        this.disabled = true;\r\n      }\r\n    },\r\n    btnLink() {\r\n      this.loading = true;\r\n      const token = this.$store.state.personal.apiToken;\r\n      const info = {\r\n        smsValidCode: this.checkValue1,\r\n        googleCode: this.checkValue2,\r\n        token,\r\n      };\r\n      this.$store.dispatch('openApiOne', info);\r\n    },\r\n    copyClick(name) {\r\n      if (name === 'secretKey') {\r\n        this.copy(this.secretKey);\r\n      }\r\n    },\r\n    copy(str) {\r\n      // this.$bus.$emit('tip', { text: this.$t('personal.prompt.copySucces'), type: 'success' });\r\n      function save(e) {\r\n        e.clipboardData.setData('text/plain', str); // 下面会说到clipboardData对象\r\n        e.preventDefault(); // 阻止默认行为\r\n      }\r\n      document.addEventListener('copy', save);\r\n      document.execCommand('copy'); // 使文档处于可编辑状态，否则无效\r\n      document.removeEventListener('copy', save);\r\n    },\r\n  },\r\n};\r\n"]}]}