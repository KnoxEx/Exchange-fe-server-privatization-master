{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/message/message.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/message/message.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toArray\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { formatTime } from '@/utils';\nexport default {\n  name: 'mesage',\n  data: function data() {\n    return {\n      messageType: 0,\n      sideList: [],\n      notieContent: [],\n      pagination: {\n        count: 0,\n        page: 1,\n        pageSize: 10\n      },\n      selectArr: [],\n      deleteFlag: null,\n      readFlag: null,\n      pageNumber: null,\n      isshowLoading: true,\n      pageTitle: null\n    };\n  },\n  computed: {\n    title: function title() {\n      if (this.pageTitle) {\n        return this.pageTitle;\n      }\n\n      if (this.sideList.length) {\n        return this.sideList[0].title;\n      }\n\n      return '';\n    },\n    dataListId: function dataListId() {\n      if (this.notieContent.length) {\n        var arr = [];\n        this.notieContent.forEach(function (item) {\n          arr.push(item.id);\n        });\n        return arr;\n      }\n\n      return [];\n    }\n  },\n  methods: {\n    init: function init() {\n      this.getListData();\n    },\n    formatTimeFn: function formatTimeFn(date) {\n      return formatTime(date);\n    },\n    // 获取列表书数据\n    getListData: function getListData() {\n      var _this = this;\n\n      this.isshowLoading = true;\n      this.getData({\n        url: this.$store.state.url.mesage.message,\n        params: {\n          page: this.pagination.page,\n          pageSize: this.pagination.pageSize,\n          messageType: this.messageType\n        },\n        callback: function callback(data) {\n          _this.notieContent = data.data.userMessageList;\n          _this.sideList = data.data.typeList;\n          _this.pagination.count = data.data.count;\n          _this.isshowLoading = false;\n        }\n      });\n    },\n    getData: function getData(datas) {\n      var _this2 = this;\n\n      var url = datas.url,\n          params = datas.params,\n          callback = datas.callback;\n      this.axios({\n        url: url,\n        params: params,\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          callback(data);\n        } else {\n          _this2.deleteFlag = null;\n          _this2.readFlag = null;\n\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      }).catch(function () {\n        _this2.deleteFlag = null;\n        _this2.readFlag = null;\n\n        _this2.$bus.$emit('tip', {\n          text: _this2.$t('common.error_500'),\n          type: 'error'\n        });\n      });\n    },\n    // 标记为已读\n    onChangeRead: function onChangeRead(id, index) {\n      var _this3 = this;\n\n      if (index !== 'all' && this.notieContent[index].status === 2) {\n        return false;\n      }\n\n      if (this.readFlag !== id) {\n        this.readFlag = id;\n        this.getData({\n          url: this.$store.state.url.mesage.message_status,\n          params: {\n            id: id\n          },\n          callback: function callback() {\n            if (index === 'all') {\n              _this3.notieContent.forEach(function (item, i) {\n                _this3.notieContent[i].status = 2;\n              });\n            } else {\n              _this3.notieContent[index].status = 2;\n            }\n\n            _this3.$store.dispatch('getMessage_count');\n          }\n        });\n      }\n\n      return true;\n    },\n    // 删除\n    deleteMsg: function deleteMsg(id, index) {\n      var _this4 = this;\n\n      if (index === 'all' && !id.length) {\n        // '请选择要删除的内容'\n        this.$bus.$emit('tip', {\n          text: this.$t('message.pleSelContent'),\n          type: 'error'\n        });\n      } else if (this.deleteFlag !== id) {\n        this.deleteFlag = id;\n        this.getData({\n          url: this.$store.state.url.mesage.message_del,\n          params: {\n            ids: id.toString()\n          },\n          callback: function callback() {\n            _this4.selectArr = [];\n\n            _this4.notieContent.splice(index, 1);\n\n            _this4.$store.dispatch('getMessage_count');\n\n            _this4.getListData();\n          }\n        });\n      }\n    },\n    // 切换类型\n    switchType: function switchType(id, title) {\n      this.pageTitle = title;\n      this.messageType = id;\n      this.pagination.page = 1;\n      this.getListData();\n    },\n    // 翻页事件\n    pagechange: function pagechange(num) {\n      this.pageNumber = num;\n      this.pagination.page = num;\n      this.getListData();\n    },\n    // 复选框\n    checkoutSelect: function checkoutSelect(data) {\n      if (data === 'all') {\n        if (this.selectArr.length === this.dataListId.length) {\n          this.selectArr = [];\n        } else {\n          var _this$dataListId = _toArray(this.dataListId),\n              selectArr = _this$dataListId.slice(0);\n\n          this.selectArr = selectArr;\n        }\n      } else {\n        var index = this.selectArr.indexOf(data);\n\n        if (index !== -1) {\n          this.selectArr.splice(index, 1);\n        } else {\n          this.selectArr.push(data);\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/message/message.js"],"names":["formatTime","name","data","messageType","sideList","notieContent","pagination","count","page","pageSize","selectArr","deleteFlag","readFlag","pageNumber","isshowLoading","pageTitle","computed","title","length","dataListId","arr","forEach","item","push","id","methods","init","getListData","formatTimeFn","date","getData","url","$store","state","mesage","message","params","callback","userMessageList","typeList","datas","axios","method","then","code","$bus","$emit","text","msg","type","catch","$t","onChangeRead","index","status","message_status","i","dispatch","deleteMsg","message_del","ids","toString","splice","switchType","pagechange","num","checkoutSelect","indexOf"],"mappings":"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","sourcesContent":["import { formatTime } from '@/utils';\n\nexport default {\n  name: 'mesage',\n  data() {\n    return {\n      messageType: 0,\n      sideList: [],\n      notieContent: [],\n      pagination: {\n        count: 0,\n        page: 1,\n        pageSize: 10,\n      },\n      selectArr: [],\n      deleteFlag: null,\n      readFlag: null,\n      pageNumber: null,\n      isshowLoading: true,\n      pageTitle: null,\n    };\n  },\n  computed: {\n    title() {\n      if (this.pageTitle) {\n        return this.pageTitle;\n      }\n      if (this.sideList.length) {\n        return this.sideList[0].title;\n      }\n      return '';\n    },\n    dataListId() {\n      if (this.notieContent.length) {\n        const arr = [];\n        this.notieContent.forEach((item) => {\n          arr.push(item.id);\n        });\n        return arr;\n      }\n      return [];\n    },\n  },\n  methods: {\n    init() {\n      this.getListData();\n    },\n    formatTimeFn(date) {\n      return formatTime(date);\n    },\n    // 获取列表书数据\n    getListData() {\n      this.isshowLoading = true;\n      this.getData({\n        url: this.$store.state.url.mesage.message,\n        params: {\n          page: this.pagination.page,\n          pageSize: this.pagination.pageSize,\n          messageType: this.messageType,\n        },\n        callback: (data) => {\n          this.notieContent = data.data.userMessageList;\n          this.sideList = data.data.typeList;\n          this.pagination.count = data.data.count;\n          this.isshowLoading = false;\n        },\n      });\n    },\n    getData(datas) {\n      const { url, params, callback } = datas;\n      this.axios({\n        url,\n        params,\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          callback(data);\n        } else {\n          this.deleteFlag = null;\n          this.readFlag = null;\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\n        }\n      }).catch(() => {\n        this.deleteFlag = null;\n        this.readFlag = null;\n        this.$bus.$emit('tip', { text: this.$t('common.error_500'), type: 'error' });\n      });\n    },\n    // 标记为已读\n    onChangeRead(id, index) {\n      if (index !== 'all' && this.notieContent[index].status === 2) {\n        return false;\n      }\n      if (this.readFlag !== id) {\n        this.readFlag = id;\n        this.getData({\n          url: this.$store.state.url.mesage.message_status,\n          params: {\n            id,\n          },\n          callback: () => {\n            if (index === 'all') {\n              this.notieContent.forEach((item, i) => {\n                this.notieContent[i].status = 2;\n              });\n            } else {\n              this.notieContent[index].status = 2;\n            }\n            this.$store.dispatch('getMessage_count');\n          },\n        });\n      }\n      return true;\n    },\n    // 删除\n    deleteMsg(id, index) {\n      if (index === 'all' && !id.length) {\n        // '请选择要删除的内容'\n        this.$bus.$emit('tip', { text: this.$t('message.pleSelContent'), type: 'error' });\n      } else if (this.deleteFlag !== id) {\n        this.deleteFlag = id;\n        this.getData({\n          url: this.$store.state.url.mesage.message_del,\n          params: {\n            ids: id.toString(),\n          },\n          callback: () => {\n            this.selectArr = [];\n            this.notieContent.splice(index, 1);\n            this.$store.dispatch('getMessage_count');\n            this.getListData();\n          },\n        });\n      }\n    },\n    // 切换类型\n    switchType(id, title) {\n      this.pageTitle = title;\n      this.messageType = id;\n      this.pagination.page = 1;\n      this.getListData();\n    },\n    // 翻页事件\n    pagechange(num) {\n      this.pageNumber = num;\n      this.pagination.page = num;\n      this.getListData();\n    },\n    // 复选框\n    checkoutSelect(data) {\n      if (data === 'all') {\n        if (this.selectArr.length === this.dataListId.length) {\n          this.selectArr = [];\n        } else {\n          const [...selectArr] = this.dataListId;\n          this.selectArr = selectArr;\n        }\n      } else {\n        const index = this.selectArr.indexOf(data);\n        if (index !== -1) {\n          this.selectArr.splice(index, 1);\n        } else {\n          this.selectArr.push(data);\n        }\n      }\n    },\n  },\n};\n"]}]}