{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/freeStaking/detail/detail.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/freeStaking/detail/detail.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.to-string\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { fixD, colorMap, imgMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      colorMap: colorMap,\n      projectDetail: null,\n      lockNumber: '0',\n      userAgress: false,\n      tableList: [],\n      projectId: null,\n      currencyModalState: false,\n      verifyObj: {},\n      dialogFlag: false,\n      googleVlaue: '',\n      phoneCode: '',\n      headerBackground: {\n        'background-image': \"url(\".concat(imgMap.free_staking_banner, \")\")\n      },\n      timer: null\n    };\n  },\n  filters: {\n    userInputLockFix: function userInputLockFix(val) {\n      return (parseFloat(val) || 0).toString();\n    }\n  },\n  computed: {\n    totalAmount: function totalAmount() {\n      var totalAmount = this.projectDetail.totalAmount;\n      return !this.isLogin || !this.projectDetail ? '- - -' : fixD(totalAmount, this.currentSymbol);\n    },\n    totalGainAmount: function totalGainAmount() {\n      var totalGainAmount = this.projectDetail.totalGainAmount;\n      return !this.isLogin || !this.projectDetail ? '- - -' : fixD(totalGainAmount, this.currentSymbol);\n    },\n    totalUserGainAmount: function totalUserGainAmount() {\n      var totalUserGainAmount = this.projectDetail.totalUserGainAmount;\n      return !this.isLogin || !this.projectDetail ? '- - -' : fixD(totalUserGainAmount, this.currentSymbol);\n    },\n    raiseAmount: function raiseAmount() {\n      var raiseAmount = this.projectDetail.raiseAmount;\n      return !this.projectDetail ? '- - -' : fixD(raiseAmount, this.currentSymbol);\n    },\n    userBalance: function userBalance() {\n      var balance = this.projectDetail.balance;\n      return !this.projectDetail ? '- - -' : fixD(balance, this.currentSymbol);\n    },\n    lockMinNumText: function lockMinNumText() {\n      if (!this.projectDetail) return '';\n      var _this$projectDetail = this.projectDetail,\n          buyAmountMin = _this$projectDetail.buyAmountMin,\n          shortName = _this$projectDetail.shortName,\n          buyAmountMax = _this$projectDetail.buyAmountMax;\n      var text = this.$t('freeStaking.detail.lockNum');\n      var text1 = this.$t('freeStaking.detail.lockMinNum');\n      var text2 = this.$t('freeStaking.detail.lockMaxNum');\n      return \"\".concat(text, \" (\").concat(text1).concat(buyAmountMin, \" \").concat(shortName, \"\\uFF1B\").concat(text2).concat(buyAmountMax, \" \").concat(shortName, \" )\");\n    },\n    symbolAll: function symbolAll() {\n      var market = this.$store.state.baseData.market;\n      return market && market.coinList ? market.coinList : null;\n    },\n    currentSymbol: function currentSymbol() {\n      var fix = 0;\n\n      if (this.projectDetail && this.projectDetail.gainCoin && this.symbolAll) {\n        var showPrecision = this.symbolAll[this.projectDetail.gainCoin].showPrecision;\n        fix = showPrecision;\n      }\n\n      return fix;\n    },\n    enforceGoogleAuth: function enforceGoogleAuth() {\n      return this.$store.state.baseData.is_enforce_google_auth || 0;\n    },\n    userFeatureIncome: function userFeatureIncome() {\n      if (!this.isLogin) return '- - -';\n      var _this$projectDetail2 = this.projectDetail,\n          totalAmount = _this$projectDetail2.totalAmount,\n          gainRate = _this$projectDetail2.gainRate,\n          lockDay = _this$projectDetail2.lockDay,\n          currencyExchangeRate = _this$projectDetail2.currencyExchangeRate;\n      var all = totalAmount + Number(this.lockNumber);\n      return fixD(all * gainRate / 100 / 365 * lockDay * currencyExchangeRate, this.currentSymbol);\n    },\n    verificationType: function verificationType() {\n      var publicInfo = this.$store.state.baseData.publicInfo;\n      var type = '0';\n\n      if (publicInfo && publicInfo.switch && publicInfo.switch.verificationType) {\n        type = publicInfo.switch.verificationType;\n      }\n\n      return type;\n    },\n    showActivityTable: function showActivityTable() {\n      var _this$projectDetail3 = this.projectDetail,\n          status = _this$projectDetail3.status,\n          projectType = _this$projectDetail3.projectType;\n      var lockPosStatus = projectType === 3 && this.isShowBlock([3, 4, 5]); // 判断是否是协议Pos和状态\n\n      var unLockPosStatus = projectType === 1 && status !== 1; // 判断是否是持仓Pos和状态\n\n      return (unLockPosStatus || lockPosStatus) && this.isLogin;\n    },\n    isLogin: function isLogin() {\n      if (this.$store.state.baseData.isLogin) {\n        return this.$store.state.baseData.isLogin;\n      }\n\n      return false;\n    },\n    projectStatus: function projectStatus() {\n      var _this = this;\n\n      var _this$projectDetail$a = this.projectDetail.activeStatus,\n          activeStatus = _this$projectDetail$a === void 0 ? null : _this$projectDetail$a;\n      var projectStatus = [{\n        title: this.$t('freeStaking.detail.activityStatus[0]'),\n        datetime: '',\n        active: false\n      }, {\n        title: this.$t('freeStaking.detail.activityStatus[1]'),\n        datetime: '',\n        active: false\n      }, {\n        title: this.$t('freeStaking.detail.activityStatus[2]'),\n        datetime: '',\n        active: false\n      }, {\n        title: this.$t('freeStaking.detail.activityStatus[3]'),\n        datetime: '',\n        active: false\n      }, {\n        title: this.$t('freeStaking.detail.activityStatus[4]'),\n        datetime: '',\n        active: false\n      }];\n      return projectStatus.map(function (item, index) {\n        return _objectSpread(_objectSpread({}, item), {}, {\n          datetime: _this.countStateTime(index),\n          active: activeStatus !== null && activeStatus > index\n        });\n      });\n    },\n    columns: function columns() {\n      return [{\n        title: this.$t('freeStaking.detail.incomeTime'),\n        width: '50%'\n      }, // 币种\n      {\n        title: this.$t('freeStaking.detail.incomeNum'),\n        width: '50%',\n        align: 'left'\n      } // 地址\n      ];\n    },\n    // 二次确认按钮是否开启\n    confirmBtnFlag: function confirmBtnFlag() {\n      if (this.googleStatus === 1) {\n        if (this.googleErrorFlag || this.googleVlaue.length === 0) {\n          return true;\n        }\n      }\n\n      if (this.isOpenMobileCheck === 1) {\n        if (this.phoneCode.length === 0 || this.checkErrorFlag) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    checkPhione: function checkPhione() {\n      return {\n        text: this.$t('login.phoneCode'),\n        haveCode: true\n      };\n    },\n    googleVlaueForm: function googleVlaueForm() {\n      return {\n        text: this.$t('login.googleCode'),\n        haveCode: false\n      };\n    },\n    // 验证框是否为错误\n    googleErrorFlag: function googleErrorFlag() {\n      return this.googleVlaue.length !== 0 && !this.authInputRight(this.googleVlaue);\n    },\n    // 验证框是否为错误\n    phoneErrorFlag: function phoneErrorFlag() {\n      return this.phoneCode.length !== 0 && !this.authInputRight(this.phoneCode);\n    },\n    userInfo: function userInfo() {\n      if (this.$store.state.baseData.userInfo) {\n        return this.$store.state.baseData.userInfo;\n      }\n\n      return {};\n    },\n    googleStatus: function googleStatus() {\n      return this.userInfo ? this.userInfo.googleStatus : null;\n    },\n    isOpenMobileCheck: function isOpenMobileCheck() {\n      return this.userInfo ? this.userInfo.isOpenMobileCheck : null;\n    },\n    userIncomeTitle: function userIncomeTitle() {\n      var _this$projectDetail$l = this.projectDetail.lockDay,\n          lockDay = _this$projectDetail$l === void 0 ? 0 : _this$projectDetail$l;\n      var day = this.$t('freeStaking.detail.twoDayIncome[0]');\n      var text = this.$t('freeStaking.detail.twoDayIncome[1]');\n      return \"\".concat(lockDay).concat(day).concat(text);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n  },\n  methods: {\n    init: function init() {\n      this.projectId = this.$route.params.id;\n      document.getElementsByTagName('html')[0].scrollTop = 0;\n      this.getProjectDetail();\n    },\n    initData: function initData() {\n      this.lockNumber = 0;\n      this.googleVlaue = '';\n      this.phoneCode = '';\n    },\n    tableClick: function tableClick() {},\n    timerBegin: function timerBegin(t) {\n      var _this2 = this;\n\n      var time = t;\n      this.timer = setInterval(function () {\n        if (time > 0) {\n          time -= 1;\n        } else {\n          clearInterval(_this2.timer);\n          window.location.reload();\n        }\n      }, 1000);\n    },\n    countStateTime: function countStateTime(index) {\n      if (!this.projectDetail) return '';\n      var time = '';\n\n      switch (index) {\n        case 0:\n          time = this.projectDetail.stime;\n          break;\n\n        case 1:\n          time = this.projectDetail.etime;\n          break;\n\n        case 2:\n          time = this.projectDetail.ltime;\n          break;\n\n        case 3:\n          time = this.projectDetail.iasDate;\n          break;\n\n        default:\n          break;\n      }\n\n      return time;\n    },\n    checkoutHandle: function checkoutHandle(val) {\n      this.userAgress = val;\n    },\n    changeUserAgreeState: function changeUserAgreeState() {\n      this.userAgress = !this.userAgress;\n    },\n    isShowBlock: function isShowBlock() {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return state.includes(this.projectDetail.activeStatus);\n    },\n    getProjectDetail: function getProjectDetail() {\n      var _this3 = this;\n\n      this.axios({\n        url: this.$store.state.url.freeStaking.project_detail,\n        headers: {},\n        params: {\n          id: this.projectId\n        },\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          var projectDetail = data.data; // 判断项目关闭或者删除\n\n          if (projectDetail.status === -1 || projectDetail.status === 5) {\n            _this3.$router.push('/freeStaking');\n\n            return;\n          }\n\n          if (projectDetail.status === 1 && projectDetail.projectType === 3) {\n            _this3.timerBegin(projectDetail.remainingTimeSeconds);\n          } // 如果是已满仓状态 按产品逻辑强行设置成募集开始\n\n\n          if (projectDetail.activeStatus === 6) projectDetail.activeStatus = 1;\n          projectDetail.details = projectDetail.details.replace(/\\n/g, '<br/>');\n          projectDetail.info = projectDetail.info.replace(/\\n/g, '<br/>');\n          _this3.projectDetail = projectDetail;\n          _this3.tableList = _this3.countTableList(projectDetail.userGainList);\n        }\n      });\n    },\n    countTableList: function countTableList(userGainList) {\n      if (!userGainList || !Array.isArray(userGainList)) return [];\n      return userGainList.map(function (item) {\n        return {\n          id: item.id,\n          data: [item.gainTime, item.gainAmount]\n        };\n      });\n    },\n    lineStatusStyle: function lineStatusStyle(index) {\n      var activeStatus = this.projectDetail.activeStatus;\n      return \"width:\".concat(activeStatus - 1 > index ? '100%' : '50%');\n    },\n    goBackHome: function goBackHome() {\n      window.location.href = this.projectDetail.url;\n    },\n    navMyPos: function navMyPos() {\n      this.$router.push('/myPos');\n    },\n    showCurrencyModal: function showCurrencyModal() {\n      this.currencyModalState = true;\n    },\n    hideCurrencyModal: function hideCurrencyModal() {\n      this.currencyModalState = false;\n    },\n    submitUserPos: function submitUserPos() {\n      var _this$projectDetail4 = this.projectDetail,\n          buyAmountMin = _this$projectDetail4.buyAmountMin,\n          buyAmountMax = _this$projectDetail4.buyAmountMax,\n          balance = _this$projectDetail4.balance,\n          shortName = _this$projectDetail4.shortName,\n          totalAmount = _this$projectDetail4.totalAmount;\n      var errText = '';\n\n      if (!this.isLogin) {\n        this.$router.push('/login');\n        return;\n      } // 兑换金额不能大于账户数量\n\n\n      if (parseFloat(this.lockNumber) > parseFloat(balance)) {\n        errText = \"\".concat(this.$t('freeStaking.detail.balanceError[0]'), \"\\n        \").concat(this.userBalance).concat(shortName).concat(this.$t('freeStaking.detail.balanceError[1]'));\n        this.showToast(errText);\n        return;\n      }\n\n      if (parseFloat(this.lockNumber) < parseFloat(buyAmountMin)) {\n        errText = \"\".concat(this.$t('freeStaking.detail.buyAmountMinError')).concat(buyAmountMin).concat(shortName);\n        this.showToast(errText);\n        return;\n      }\n\n      if (parseFloat(this.lockNumber) + parseFloat(totalAmount) > parseFloat(buyAmountMax)) {\n        errText = \"\".concat(this.$t('freeStaking.detail.buyAmountMaxError')).concat(buyAmountMax).concat(shortName);\n        this.showToast(errText);\n        return;\n      } // 判断如果没有谷歌验证 使用谷歌验证\n\n\n      if (this.googleStatus !== 1 && this.isOpenMobileCheck !== 1) {\n        errText = this.$t('innov.binding');\n        this.showToast(errText);\n        return;\n      } // 谷歌强制认证开启的时候 判断有没有谷歌没有的话 提示去绑定\n\n\n      if (this.googleStatus !== 1 && this.enforceGoogleAuth) {\n        errText = this.$t('assets.withdraw.bindGoogle');\n        this.showToast(errText);\n        return;\n      }\n\n      if (this.verificationType === '2') {\n        this.captchaObj.verify();\n      } else {\n        this.dialogFlag = true;\n      }\n    },\n    getCaptchaObj: function getCaptchaObj(captchaObj) {\n      this.captchaObj = captchaObj;\n    },\n    verifyCallBack: function verifyCallBack(parameter) {\n      this.verifyObj = {\n        geetest_challenge: parameter.geetest_challenge,\n        geetest_seccode: parameter.geetest_seccode,\n        geetest_validate: parameter.geetest_validate\n      };\n      this.dialogFlag = true;\n    },\n    // 关闭弹窗\n    dialogClose: function dialogClose() {\n      this.dialogFlag = false;\n      this.phoneCode = '';\n      this.googleVlaue = '';\n      this.emailCheckValue = '';\n    },\n    getCodeClick: function getCodeClick() {\n      var _this4 = this;\n\n      this.axios({\n        url: 'v4/common/smsValidCode',\n        method: 'post',\n        header: {},\n        params: {\n          operationType: 28\n        }\n      }).then(function (data) {\n        if (data.code.toString() !== '0') {\n          // 倒计时重置\n          _this4.$bus.$emit('getCode-clear', 'loginGetcode'); // tip框提示错误\n\n\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        } else {\n          // 邮件已发送，请注意查收\n          _this4.$bus.$emit('tip', {\n            text: '验证码已发送，请注意查收',\n            type: 'success'\n          });\n        }\n      }).catch(function () {});\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    dialogConfirm: function dialogConfirm() {\n      var _this5 = this;\n\n      var params = {\n        amount: this.lockNumber,\n        projectId: this.projectId,\n        googleCode: this.googleVlaue,\n        smsValidCode: this.phoneCode,\n        verificationType: this.verificationType\n      };\n\n      if (this.verificationType === '2') {\n        params = Object.assign(params, this.verifyObj);\n      }\n\n      this.axios({\n        url: this.$store.state.url.freeStaking.project_apply,\n        headers: {},\n        params: params,\n        method: 'post'\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this5.$bus.$emit('tip', {\n            text: _this5.$t('购买成功'),\n            type: 'success'\n          });\n\n          _this5.dialogFlag = false;\n\n          _this5.initData();\n\n          _this5.init();\n        } else {\n          _this5.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    authInputRight: function authInputRight(value) {\n      return this.$store.state.regExp.verification.test(value);\n    },\n    autoFillCoin: function autoFillCoin() {\n      this.lockNumber = String(this.projectDetail.balance);\n    },\n    showToast: function showToast(errText) {\n      if (!errText) return;\n      this.$bus.$emit('tip', {\n        text: errText,\n        type: 'error'\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/freeStaking/detail/detail.js"],"names":["fixD","colorMap","imgMap","data","projectDetail","lockNumber","userAgress","tableList","projectId","currencyModalState","verifyObj","dialogFlag","googleVlaue","phoneCode","headerBackground","free_staking_banner","timer","filters","userInputLockFix","val","parseFloat","toString","computed","totalAmount","isLogin","currentSymbol","totalGainAmount","totalUserGainAmount","raiseAmount","userBalance","balance","lockMinNumText","buyAmountMin","shortName","buyAmountMax","text","$t","text1","text2","symbolAll","market","$store","state","baseData","coinList","fix","gainCoin","showPrecision","enforceGoogleAuth","is_enforce_google_auth","userFeatureIncome","gainRate","lockDay","currencyExchangeRate","all","Number","verificationType","publicInfo","type","switch","showActivityTable","status","projectType","lockPosStatus","isShowBlock","unLockPosStatus","projectStatus","activeStatus","title","datetime","active","map","item","index","countStateTime","columns","width","align","confirmBtnFlag","googleStatus","googleErrorFlag","length","isOpenMobileCheck","checkErrorFlag","checkPhione","haveCode","googleVlaueForm","authInputRight","phoneErrorFlag","userInfo","userIncomeTitle","day","beforeDestroy","clearInterval","methods","init","$route","params","id","document","getElementsByTagName","scrollTop","getProjectDetail","initData","tableClick","timerBegin","t","time","setInterval","window","location","reload","stime","etime","ltime","iasDate","checkoutHandle","changeUserAgreeState","includes","axios","url","freeStaking","project_detail","headers","method","then","code","$router","push","remainingTimeSeconds","details","replace","info","countTableList","userGainList","Array","isArray","gainTime","gainAmount","lineStatusStyle","goBackHome","href","navMyPos","showCurrencyModal","hideCurrencyModal","submitUserPos","errText","showToast","captchaObj","verify","getCaptchaObj","verifyCallBack","parameter","geetest_challenge","geetest_seccode","geetest_validate","dialogClose","emailCheckValue","getCodeClick","header","operationType","$bus","$emit","msg","catch","inputChanges","value","name","dialogConfirm","amount","googleCode","smsValidCode","Object","assign","project_apply","regExp","verification","test","autoFillCoin","String"],"mappings":"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","sourcesContent":["import { fixD, colorMap, imgMap } from '@/utils';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgMap,\r\n      colorMap,\r\n      projectDetail: null,\r\n      lockNumber: '0',\r\n      userAgress: false,\r\n      tableList: [],\r\n      projectId: null,\r\n      currencyModalState: false,\r\n      verifyObj: {},\r\n      dialogFlag: false,\r\n      googleVlaue: '',\r\n      phoneCode: '',\r\n      headerBackground: {\r\n        'background-image': `url(${imgMap.free_staking_banner})`,\r\n      },\r\n      timer: null,\r\n    };\r\n  },\r\n  filters: {\r\n    userInputLockFix(val) {\r\n      return (parseFloat(val) || 0).toString();\r\n    },\r\n  },\r\n  computed: {\r\n    totalAmount() {\r\n      const { totalAmount } = this.projectDetail;\r\n      return !this.isLogin || !this.projectDetail ? '- - -' : fixD(totalAmount, this.currentSymbol);\r\n    },\r\n    totalGainAmount() {\r\n      const { totalGainAmount } = this.projectDetail;\r\n      return !this.isLogin || !this.projectDetail ? '- - -' : fixD(totalGainAmount, this.currentSymbol);\r\n    },\r\n    totalUserGainAmount() {\r\n      const { totalUserGainAmount } = this.projectDetail;\r\n      return !this.isLogin || !this.projectDetail ? '- - -' : fixD(totalUserGainAmount, this.currentSymbol);\r\n    },\r\n    raiseAmount() {\r\n      const { raiseAmount } = this.projectDetail;\r\n      return !this.projectDetail ? '- - -' : fixD(raiseAmount, this.currentSymbol);\r\n    },\r\n    userBalance() {\r\n      const { balance } = this.projectDetail;\r\n      return !this.projectDetail ? '- - -' : fixD(balance, this.currentSymbol);\r\n    },\r\n    lockMinNumText() {\r\n      if (!this.projectDetail) return '';\r\n\r\n      const { buyAmountMin, shortName, buyAmountMax } = this.projectDetail;\r\n      const text = this.$t('freeStaking.detail.lockNum');\r\n      const text1 = this.$t('freeStaking.detail.lockMinNum');\r\n      const text2 = this.$t('freeStaking.detail.lockMaxNum');\r\n      return `${text} (${text1}${buyAmountMin} ${shortName}；${text2}${buyAmountMax} ${shortName} )`;\r\n    },\r\n    symbolAll() {\r\n      const { market } = this.$store.state.baseData;\r\n\r\n      return market && market.coinList ? market.coinList : null;\r\n    },\r\n    currentSymbol() {\r\n      let fix = 0;\r\n      if (this.projectDetail && this.projectDetail.gainCoin && this.symbolAll) {\r\n        const { showPrecision } = this.symbolAll[this.projectDetail.gainCoin];\r\n        fix = showPrecision;\r\n      }\r\n\r\n      return fix;\r\n    },\r\n    enforceGoogleAuth() {\r\n      return this.$store.state.baseData.is_enforce_google_auth || 0;\r\n    },\r\n    userFeatureIncome() {\r\n      if (!this.isLogin) return '- - -';\r\n      const {\r\n        totalAmount, gainRate, lockDay, currencyExchangeRate,\r\n      } = this.projectDetail;\r\n      const all = totalAmount + Number(this.lockNumber);\r\n\r\n      return fixD(\r\n        ((all * gainRate) / 100 / 365) * lockDay * currencyExchangeRate,\r\n        this.currentSymbol,\r\n      );\r\n    },\r\n    verificationType() {\r\n      const { publicInfo } = this.$store.state.baseData;\r\n      let type = '0';\r\n      if (\r\n        publicInfo\r\n        && publicInfo.switch\r\n        && publicInfo.switch.verificationType\r\n      ) {\r\n        type = publicInfo.switch.verificationType;\r\n      }\r\n      return type;\r\n    },\r\n    showActivityTable() {\r\n      const { status, projectType } = this.projectDetail;\r\n      const lockPosStatus = projectType === 3 && this.isShowBlock([3, 4, 5]); // 判断是否是协议Pos和状态\r\n      const unLockPosStatus = projectType === 1 && status !== 1; // 判断是否是持仓Pos和状态\r\n      return (unLockPosStatus || lockPosStatus) && this.isLogin;\r\n    },\r\n    isLogin() {\r\n      if (this.$store.state.baseData.isLogin) {\r\n        return this.$store.state.baseData.isLogin;\r\n      }\r\n      return false;\r\n    },\r\n    projectStatus() {\r\n      const { activeStatus = null } = this.projectDetail;\r\n      const projectStatus = [\r\n        { title: this.$t('freeStaking.detail.activityStatus[0]'), datetime: '', active: false },\r\n        { title: this.$t('freeStaking.detail.activityStatus[1]'), datetime: '', active: false },\r\n        { title: this.$t('freeStaking.detail.activityStatus[2]'), datetime: '', active: false },\r\n        { title: this.$t('freeStaking.detail.activityStatus[3]'), datetime: '', active: false },\r\n        { title: this.$t('freeStaking.detail.activityStatus[4]'), datetime: '', active: false },\r\n      ];\r\n\r\n      return projectStatus.map((item, index) => ({\r\n        ...item,\r\n        datetime: this.countStateTime(index),\r\n        active: activeStatus !== null && activeStatus > index,\r\n      }));\r\n    },\r\n    columns() {\r\n      return [\r\n        { title: this.$t('freeStaking.detail.incomeTime'), width: '50%' }, // 币种\r\n        { title: this.$t('freeStaking.detail.incomeNum'), width: '50%', align: 'left' }, // 地址\r\n      ];\r\n    },\r\n    // 二次确认按钮是否开启\r\n    confirmBtnFlag() {\r\n      if (this.googleStatus === 1) {\r\n        if (this.googleErrorFlag || this.googleVlaue.length === 0) {\r\n          return true;\r\n        }\r\n      }\r\n      if (this.isOpenMobileCheck === 1) {\r\n        if (this.phoneCode.length === 0 || this.checkErrorFlag) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    },\r\n    checkPhione() {\r\n      return { text: this.$t('login.phoneCode'), haveCode: true };\r\n    },\r\n    googleVlaueForm() {\r\n      return { text: this.$t('login.googleCode'), haveCode: false };\r\n    },\r\n    // 验证框是否为错误\r\n    googleErrorFlag() {\r\n      return this.googleVlaue.length !== 0 && !this.authInputRight(this.googleVlaue);\r\n    },\r\n    // 验证框是否为错误\r\n    phoneErrorFlag() {\r\n      return this.phoneCode.length !== 0 && !this.authInputRight(this.phoneCode);\r\n    },\r\n    userInfo() {\r\n      if (this.$store.state.baseData.userInfo) {\r\n        return this.$store.state.baseData.userInfo;\r\n      }\r\n      return {};\r\n    },\r\n    googleStatus() {\r\n      return this.userInfo ? this.userInfo.googleStatus : null;\r\n    },\r\n    isOpenMobileCheck() {\r\n      return this.userInfo ? this.userInfo.isOpenMobileCheck : null;\r\n    },\r\n    userIncomeTitle() {\r\n      const { lockDay = 0 } = this.projectDetail;\r\n      const day = this.$t('freeStaking.detail.twoDayIncome[0]');\r\n      const text = this.$t('freeStaking.detail.twoDayIncome[1]');\r\n\r\n      return `${lockDay}${day}${text}`;\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    if (this.timer) {\r\n      clearInterval(this.timer);\r\n    }\r\n  },\r\n  methods: {\r\n    init() {\r\n      this.projectId = this.$route.params.id;\r\n      document.getElementsByTagName('html')[0].scrollTop = 0;\r\n      this.getProjectDetail();\r\n    },\r\n    initData() {\r\n      this.lockNumber = 0;\r\n      this.googleVlaue = '';\r\n      this.phoneCode = '';\r\n    },\r\n    tableClick() {\r\n\r\n    },\r\n    timerBegin(t) {\r\n      let time = t;\r\n      this.timer = setInterval(() => {\r\n        if (time > 0) {\r\n          time -= 1;\r\n        } else {\r\n          clearInterval(this.timer);\r\n          window.location.reload();\r\n        }\r\n      }, 1000);\r\n    },\r\n    countStateTime(index) {\r\n      if (!this.projectDetail) return '';\r\n      let time = '';\r\n      switch (index) {\r\n        case 0:\r\n          time = this.projectDetail.stime;\r\n          break;\r\n        case 1:\r\n          time = this.projectDetail.etime;\r\n          break;\r\n        case 2:\r\n          time = this.projectDetail.ltime;\r\n          break;\r\n        case 3:\r\n          time = this.projectDetail.iasDate;\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      return time;\r\n    },\r\n    checkoutHandle(val) {\r\n      this.userAgress = val;\r\n    },\r\n    changeUserAgreeState() {\r\n      this.userAgress = !this.userAgress;\r\n    },\r\n    isShowBlock(state = []) {\r\n      return state.includes(this.projectDetail.activeStatus);\r\n    },\r\n    getProjectDetail() {\r\n      this.axios({\r\n        url: this.$store.state.url.freeStaking.project_detail,\r\n        headers: {},\r\n        params: { id: this.projectId },\r\n        method: 'post',\r\n      }).then((data) => {\r\n        if (data.code === '0') {\r\n          const projectDetail = data.data;\r\n          // 判断项目关闭或者删除\r\n          if (projectDetail.status === -1 || projectDetail.status === 5) {\r\n            this.$router.push('/freeStaking');\r\n            return;\r\n          }\r\n\r\n          if (projectDetail.status === 1 && projectDetail.projectType === 3) {\r\n            this.timerBegin(projectDetail.remainingTimeSeconds);\r\n          }\r\n\r\n          // 如果是已满仓状态 按产品逻辑强行设置成募集开始\r\n          if (projectDetail.activeStatus === 6) projectDetail.activeStatus = 1;\r\n\r\n          projectDetail.details = projectDetail.details.replace(/\\n/g, '<br/>');\r\n          projectDetail.info = projectDetail.info.replace(/\\n/g, '<br/>');\r\n          this.projectDetail = projectDetail;\r\n          this.tableList = this.countTableList(projectDetail.userGainList);\r\n        }\r\n      });\r\n    },\r\n    countTableList(userGainList) {\r\n      if (!userGainList || !Array.isArray(userGainList)) return [];\r\n\r\n      return userGainList.map((item) => ({\r\n        id: item.id,\r\n        data: [\r\n          item.gainTime,\r\n          item.gainAmount,\r\n        ],\r\n      }));\r\n    },\r\n    lineStatusStyle(index) {\r\n      const { activeStatus } = this.projectDetail;\r\n      return `width:${activeStatus - 1 > index ? '100%' : '50%'}`;\r\n    },\r\n    goBackHome() {\r\n      window.location.href = this.projectDetail.url;\r\n    },\r\n    navMyPos() {\r\n      this.$router.push('/myPos');\r\n    },\r\n    showCurrencyModal() {\r\n      this.currencyModalState = true;\r\n    },\r\n    hideCurrencyModal() {\r\n      this.currencyModalState = false;\r\n    },\r\n    submitUserPos() {\r\n      const {\r\n        buyAmountMin, buyAmountMax, balance, shortName, totalAmount,\r\n      } = this.projectDetail;\r\n      let errText = '';\r\n\r\n      if (!this.isLogin) {\r\n        this.$router.push('/login');\r\n        return;\r\n      }\r\n\r\n      // 兑换金额不能大于账户数量\r\n      if (parseFloat(this.lockNumber) > parseFloat(balance)) {\r\n        errText = `${this.$t('freeStaking.detail.balanceError[0]')}\r\n        ${this.userBalance}${shortName}${this.$t('freeStaking.detail.balanceError[1]')}`;\r\n\r\n        this.showToast(errText);\r\n        return;\r\n      }\r\n\r\n      if (parseFloat(this.lockNumber) < parseFloat(buyAmountMin)) {\r\n        errText = `${this.$t('freeStaking.detail.buyAmountMinError')}${buyAmountMin}${shortName}`;\r\n        this.showToast(errText);\r\n        return;\r\n      }\r\n\r\n      if ((parseFloat(this.lockNumber) + parseFloat(totalAmount)) > parseFloat(buyAmountMax)) {\r\n        errText = `${this.$t('freeStaking.detail.buyAmountMaxError')}${buyAmountMax}${shortName}`;\r\n        this.showToast(errText);\r\n        return;\r\n      }\r\n\r\n      // 判断如果没有谷歌验证 使用谷歌验证\r\n      if (\r\n        this.googleStatus !== 1\r\n        && this.isOpenMobileCheck !== 1\r\n      ) {\r\n        errText = this.$t('innov.binding');\r\n\r\n        this.showToast(errText);\r\n        return;\r\n      }\r\n\r\n      // 谷歌强制认证开启的时候 判断有没有谷歌没有的话 提示去绑定\r\n      if (this.googleStatus !== 1 && this.enforceGoogleAuth) {\r\n        errText = this.$t('assets.withdraw.bindGoogle');\r\n\r\n        this.showToast(errText);\r\n        return;\r\n      }\r\n\r\n      if (this.verificationType === '2') {\r\n        this.captchaObj.verify();\r\n      } else {\r\n        this.dialogFlag = true;\r\n      }\r\n    },\r\n    getCaptchaObj(captchaObj) {\r\n      this.captchaObj = captchaObj;\r\n    },\r\n    verifyCallBack(parameter) {\r\n      this.verifyObj = {\r\n        geetest_challenge: parameter.geetest_challenge,\r\n        geetest_seccode: parameter.geetest_seccode,\r\n        geetest_validate: parameter.geetest_validate,\r\n      };\r\n      this.dialogFlag = true;\r\n    },\r\n    // 关闭弹窗\r\n    dialogClose() {\r\n      this.dialogFlag = false;\r\n      this.phoneCode = '';\r\n      this.googleVlaue = '';\r\n      this.emailCheckValue = '';\r\n    },\r\n    getCodeClick() {\r\n      this.axios({\r\n        url: 'v4/common/smsValidCode',\r\n        method: 'post',\r\n        header: {},\r\n        params: {\r\n          operationType: 28,\r\n        },\r\n      })\r\n        .then((data) => {\r\n          if (data.code.toString() !== '0') {\r\n            // 倒计时重置\r\n            this.$bus.$emit('getCode-clear', 'loginGetcode');\r\n            // tip框提示错误\r\n            this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n          } else {\r\n            // 邮件已发送，请注意查收\r\n            this.$bus.$emit('tip', {\r\n              text: '验证码已发送，请注意查收',\r\n              type: 'success',\r\n            });\r\n          }\r\n        })\r\n        .catch(() => {\r\n\r\n        });\r\n    },\r\n    inputChanges(value, name) {\r\n      this[name] = value;\r\n    },\r\n    dialogConfirm() {\r\n      let params = {\r\n        amount: this.lockNumber,\r\n        projectId: this.projectId,\r\n        googleCode: this.googleVlaue,\r\n        smsValidCode: this.phoneCode,\r\n        verificationType: this.verificationType,\r\n      };\r\n\r\n      if (this.verificationType === '2') {\r\n        params = Object.assign(params, this.verifyObj);\r\n      }\r\n\r\n      this.axios({\r\n        url: this.$store.state.url.freeStaking.project_apply,\r\n        headers: {},\r\n        params,\r\n        method: 'post',\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          this.$bus.$emit('tip', {\r\n            text: this.$t('购买成功'),\r\n            type: 'success',\r\n          });\r\n          this.dialogFlag = false;\r\n          this.initData();\r\n          this.init();\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    authInputRight(value) {\r\n      return this.$store.state.regExp.verification.test(value);\r\n    },\r\n    autoFillCoin() {\r\n      this.lockNumber = String(this.projectDetail.balance);\r\n    },\r\n    showToast(errText) {\r\n      if (!errText) return;\r\n      this.$bus.$emit('tip', {\r\n        text: errText,\r\n        type: 'error',\r\n      });\r\n    },\r\n  },\r\n\r\n};\r\n"]}]}