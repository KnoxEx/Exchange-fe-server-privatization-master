{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/partTimeJob/BlockChain-ui/PC/components/oldUploadFile/OldUploadFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/components/oldUploadFile/OldUploadFile.vue","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'c-oldUploadFile',\n  props: {\n    // 最大尺寸\n    maxSize: {\n      type: String,\n      default: '5'\n    },\n    imageType: {\n      type: String,\n      default: '2'\n    },\n    // 上传数据类型\n    formatValue: {\n      type: String,\n      default: 'image/jpeg, image/jpg, image/png'\n    },\n    // 接口名\n    url: {\n      type: String,\n      default: ''\n    },\n    // 外部传入name\n    name: {\n      type: String,\n      default: ''\n    },\n    // 外部传入请求类型\n    isOpenUploadImg: {\n      type: String,\n      default: ''\n    },\n    // 外部传入可拓展项\n    expand: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    // className\n    className: {\n      type: String,\n      default: ''\n    },\n    // isWaterMark 添加水印\n    isWaterMark: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      // 真实文件尺寸\n      size: '',\n      // 真实文件格式\n      realFormatValue: ''\n    };\n  },\n  mounted: function mounted() {},\n  computed: {},\n  watch: {},\n  methods: {\n    uploadClick: function uploadClick() {\n      this.$refs.upload.click();\n    },\n    tellFun: function tellFun(e) {\n      var _this = this;\n\n      var val = e.target.files[0];\n\n      if (val.size > this.maxSize * 1024 * 1024) {\n        this.$emit('tellMessage', {\n          error: '图片尺寸过大',\n          code: 'maxSize'\n        });\n        e.target.value = '';\n      } else {\n        this.$emit('tellMessage', {\n          name: this.name\n        });\n        var formData = new FormData();\n        formData.append(this.name, val);\n        formData.append('name', this.name); // 添加水印\n\n        if (this.isWaterMark) {// formData.append('isWaterMark', 1);\n        }\n\n        if (this.expand.length > 0) {\n          this.expand.forEach(function (item) {\n            formData.append(Object.keys(item)[0], item[Object.keys(item)[0]]);\n          });\n        }\n\n        this.axios({\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          method: 'post',\n          url: this.url,\n          hostType: Number(this.isOpenUploadImg) === 1 ? 'upload' : null,\n          params: formData\n        }).then(function (res) {\n          if (!Number(res.code)) {\n            var data = res.data;\n            var fileName = data.filenameStr ? data.filenameStr : data.filename;\n            var name = data.name || _this.name;\n\n            _this.$emit('uploadFinish', {\n              url: data.base_image_url + fileName,\n              imgSrc: data.filename,\n              fileName: fileName,\n              name: name\n            });\n\n            e.target.value = '';\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["OldUploadFile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAgBA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,KAAA,EAAA;AACA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAFA;AAMA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KANA;AAUA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAXA;AAeA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAhBA;AAoBA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KArBA;AAyBA;AACA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KA1BA;AA8BA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KA/BA;AAmCA;AACA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KApCA;AAwCA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA;AAzCA,GAFA;AAgDA,EAAA,IAhDA,kBAgDA;AACA,WAAA;AACA;AACA,MAAA,IAAA,EAAA,EAFA;AAGA;AACA,MAAA,eAAA,EAAA;AAJA,KAAA;AAMA,GAvDA;AAwDA,EAAA,OAxDA,qBAwDA,CAAA,CAxDA;AAyDA,EAAA,QAAA,EAAA,EAzDA;AA0DA,EAAA,KAAA,EAAA,EA1DA;AA2DA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,KAAA;AACA,KAHA;AAIA,IAAA,OAJA,mBAIA,CAJA,EAIA;AAAA;;AACA,UAAA,GAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;;AACA,UAAA,GAAA,CAAA,IAAA,GAAA,KAAA,OAAA,GAAA,IAAA,GAAA,IAAA,EAAA;AACA,aAAA,KAAA,CAAA,aAAA,EAAA;AACA,UAAA,KAAA,EAAA,QADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,QAAA,CAAA,CAAA,MAAA,CAAA,KAAA,GAAA,EAAA;AACA,OANA,MAMA;AACA,aAAA,KAAA,CAAA,aAAA,EAAA;AACA,UAAA,IAAA,EAAA,KAAA;AADA,SAAA;AAGA,YAAA,QAAA,GAAA,IAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,MAAA,CAAA,KAAA,IAAA,EAAA,GAAA;AACA,QAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA,EANA,CAOA;;AACA,YAAA,KAAA,WAAA,EAAA,CACA;AACA;;AACA,YAAA,KAAA,MAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,MAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,QAAA,CAAA,MAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,CAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA,CAAA,CAAA,CAAA;AACA,WAFA;AAGA;;AACA,aAAA,KAAA,CAAA;AACA,UAAA,OAAA,EAAA;AACA,4BAAA;AADA,WADA;AAIA,UAAA,MAAA,EAAA,MAJA;AAKA,UAAA,GAAA,EAAA,KAAA,GALA;AAMA,UAAA,QAAA,EAAA,MAAA,CAAA,KAAA,eAAA,CAAA,KAAA,CAAA,GAAA,QAAA,GAAA,IANA;AAOA,UAAA,MAAA,EAAA;AAPA,SAAA,EAQA,IARA,CAQA,UAAA,GAAA,EAAA;AACA,cAAA,CAAA,MAAA,CAAA,GAAA,CAAA,IAAA,CAAA,EAAA;AACA,gBAAA,IAAA,GAAA,GAAA,CAAA,IAAA;AACA,gBAAA,QAAA,GAAA,IAAA,CAAA,WAAA,GACA,IAAA,CAAA,WADA,GAEA,IAAA,CAAA,QAFA;AAGA,gBAAA,IAAA,GAAA,IAAA,CAAA,IAAA,IAAA,KAAA,CAAA,IAAA;;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,cAAA,EAAA;AACA,cAAA,GAAA,EAAA,IAAA,CAAA,cAAA,GAAA,QADA;AAEA,cAAA,MAAA,EAAA,IAAA,CAAA,QAFA;AAGA,cAAA,QAAA,EAAA,QAHA;AAIA,cAAA,IAAA,EAAA;AAJA,aAAA;;AAMA,YAAA,CAAA,CAAA,MAAA,CAAA,KAAA,GAAA,EAAA;AACA;AACA,SAvBA;AAwBA;AACA;AArDA;AA3DA,CAAA","sourcesContent":["// Created by 王晓波. // 上传图片 // *****************************\n<template>\n  <div>\n    <input\n      class='input_upload_file'\n      type='file'\n      :class='className'\n      :accept='formatValue'\n      ref='upload'\n      @change='tellFun'\n    />\n    <div class='upload-div' @click='uploadClick'></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'c-oldUploadFile',\n  props: {\n    // 最大尺寸\n    maxSize: {\n      type: String,\n      default: '5',\n    },\n    imageType: {\n      type: String,\n      default: '2',\n    },\n    // 上传数据类型\n    formatValue: {\n      type: String,\n      default: 'image/jpeg, image/jpg, image/png',\n    },\n    // 接口名\n    url: {\n      type: String,\n      default: '',\n    },\n    // 外部传入name\n    name: {\n      type: String,\n      default: '',\n    },\n    // 外部传入请求类型\n    isOpenUploadImg: {\n      type: String,\n      default: '',\n    },\n    // 外部传入可拓展项\n    expand: {\n      type: Array,\n      default: () => [],\n    },\n    // className\n    className: {\n      type: String,\n      default: '',\n    },\n    // isWaterMark 添加水印\n    isWaterMark: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      // 真实文件尺寸\n      size: '',\n      // 真实文件格式\n      realFormatValue: '',\n    };\n  },\n  mounted() {},\n  computed: {},\n  watch: {},\n  methods: {\n    uploadClick() {\n      this.$refs.upload.click();\n    },\n    tellFun(e) {\n      const val = e.target.files[0];\n      if (val.size > this.maxSize * 1024 * 1024) {\n        this.$emit('tellMessage', {\n          error: '图片尺寸过大',\n          code: 'maxSize',\n        });\n        e.target.value = '';\n      } else {\n        this.$emit('tellMessage', {\n          name: this.name,\n        });\n        const formData = new FormData();\n        formData.append(this.name, val);\n        formData.append('name', this.name);\n        // 添加水印\n        if (this.isWaterMark) {\n          // formData.append('isWaterMark', 1);\n        }\n        if (this.expand.length > 0) {\n          this.expand.forEach((item) => {\n            formData.append(Object.keys(item)[0], item[Object.keys(item)[0]]);\n          });\n        }\n        this.axios({\n          headers: {\n            'Content-Type': 'multipart/form-data',\n          },\n          method: 'post',\n          url: this.url,\n          hostType: Number(this.isOpenUploadImg) === 1 ? 'upload' : null,\n          params: formData,\n        }).then((res) => {\n          if (!Number(res.code)) {\n            const { data } = res;\n            const fileName = data.filenameStr\n              ? data.filenameStr\n              : data.filename;\n            const name = data.name || this.name;\n            this.$emit('uploadFinish', {\n              url: data.base_image_url + fileName,\n              imgSrc: data.filename,\n              fileName,\n              name,\n            });\n            e.target.value = '';\n          }\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style scoped lang='stylus'>\n.input_upload_file{\n  opacity: 0;\n}\n.upload-div{\n  width:100%;\n  height:100%;\n  position: absolute;\n  top:0;\n  opacity: 0;\n  z-index: 3;\n  cursor: pointer;\n}\n</style>\n"],"sourceRoot":"../BlockChain-ui/PC/components/oldUploadFile"}]}