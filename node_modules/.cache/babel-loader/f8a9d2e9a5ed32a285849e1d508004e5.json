{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/manageFinances/view/view.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/manageFinances/view/view.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { fixD, formatTime, fixInput, imgMap } from '@/utils';\nvar replaceStrMap = {\n  biki: 'Tokencan',\n  'www.biki.com': 'www.tokencan.net'\n};\nexport default {\n  name: 'InnovationList',\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      numberValue: '',\n      // 购买数量\n      alertFlag: false,\n      // 验证弹窗\n      alertFlagAuth: false,\n      // 实名弹窗\n      // bannerImg: null,\n      // bannerTitle: '',\n      nowType: 1,\n      errorFlag: false,\n      errorHave: false,\n      pageId: null,\n      pageData: {},\n      amount: '',\n      dialogFlag: false,\n      // 弹窗flag\n      dialogConfirmLoading: false,\n      // 用于弹窗按钮loading效果\n      checkValue: '',\n      // 验证码value\n      googleVlaue: '',\n      // 谷歌验证码\n      checkErrorText: '',\n      googleErrorText: '',\n      dbclick: true,\n      rate_type: '',\n      // 年化日化\n      interest_begin_time: '',\n      // 计息开始时间\n      interest_end_time: '',\n      // 到期退出时间\n      end_time: '',\n      // 项目截止时间\n      return_type: '',\n      // 还款方式\n      income: 0,\n      balance: null,\n      // 可用余额\n      secoundClick: true // 防止二次点击\n\n    };\n  },\n  watch: {\n    userInfoIsReady: function userInfoIsReady() {\n      this.alert();\n    },\n    income: function income(value) {\n      this.income = fixD(value, this.showPrecision(this.pageData.interest_symbol));\n    },\n    amount: function amount(value) {\n      this.amount = fixInput(value, this.showPrecision(this.pageData.symbol));\n      this.income = this.amount * this.pageData.rate / 100 / 365 * this.pageData.limit_day;\n    },\n    checkValue: function checkValue(value) {\n      this.checkValue = fixInput(value, 0);\n    },\n    googleVlaue: function googleVlaue(value) {\n      this.googleVlaue = fixInput(value, 0);\n    }\n  },\n  computed: {\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    templateLayoutType: function templateLayoutType() {\n      return Number(this.$store.state.baseData.templateLayoutType);\n    },\n    userInfoIsReady: function userInfoIsReady() {\n      return this.$store.state.baseData.userInfoIsReady;\n    },\n    // 用户是否实名\n    authLevel: function authLevel() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.authLevel.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // 用户是否开启手机\n    OpenMobile: function OpenMobile() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.isOpenMobileCheck.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // 用户是否开启谷歌\n    OpenGoogle: function OpenGoogle() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.googleStatus.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    alertData: function alertData() {\n      var arr = [// 绑定谷歌验证\n      {\n        text: this.$t('assets.withdraw.bindGoogle'),\n        flag: this.OpenGoogle\n      }, // 绑定手机验证\n      {\n        text: this.$t('assets.withdraw.bindPhone'),\n        flag: this.OpenMobile\n      }];\n      return arr;\n    },\n    promptText: function promptText() {\n      return this.$t('innov.numbre'); // '数量';\n    },\n    userInfo: function userInfo() {\n      if (this.$store.state.baseData.userInfo) {\n        return this.$store.state.baseData.userInfo;\n      }\n\n      return {};\n    },\n    numberOptions: function numberOptions() {\n      var obj = {\n        text: '',\n        // 错误提示文案\n        flag: null,\n        // 是否通过校验\n        error: null // 是否展示文案\n\n      };\n      var haveNum = parseFloat(this.pageData.balance) || 0; // 可用\n      // console.log(this.pageData.balance)\n\n      if (this.amount.length === 0 || parseFloat(this.amount) === 0) {\n        // 请输入购买数量\n        obj.text = this.$t('manageFinances.inputNumber');\n        obj.flag = false;\n        obj.error = false;\n        return obj;\n      }\n\n      if (parseFloat(this.amount) > haveNum) {\n        // 购买数量不得大于可用余额\n        obj.text = this.$t('manageFinances.buyNumMax');\n        obj.flag = false;\n        obj.error = true;\n        return obj;\n      }\n\n      obj.flag = true;\n      obj.error = false;\n      return obj;\n    },\n    btnDisabled: function btnDisabled() {\n      var flag = true;\n\n      if (this.numberOptions.flag) {\n        flag = false;\n      }\n\n      return flag;\n    }\n  },\n  methods: {\n    init: function init() {\n      this.pageId = this.$route.params.id;\n      this.getData();\n\n      if (this.userInfoIsReady) {\n        this.alert();\n      }\n    },\n    replaceStr: function replaceStr(str) {\n      return replaceStrMap[str.toLowerCase()];\n    },\n    alert: function alert() {\n      if (!this.authLevel) {\n        this.canAuthAlert();\n      } else {\n        this.canAlert();\n      }\n    },\n    canAlert: function canAlert() {\n      var _this = this;\n\n      if (this.OpenGoogle || this.OpenMobile) {\n        this.alertFlag = false;\n      } else {\n        setTimeout(function () {\n          _this.alertFlag = true;\n        }, 100);\n      }\n    },\n    canAuthAlert: function canAuthAlert() {\n      var _this2 = this;\n\n      if (this.authLevel) {\n        this.alertFlagAuth = false;\n      } else {\n        setTimeout(function () {\n          _this2.alertFlagAuth = true;\n        }, 100);\n      }\n    },\n    alertClone: function alertClone() {\n      this.alertFlag = false;\n    },\n    alertAuthClone: function alertAuthClone() {\n      this.alertFlagAuth = false;\n    },\n    alertGo: function alertGo() {\n      this.$router.push('/personal/userManagement');\n    },\n    alertAuthGo: function alertAuthGo() {\n      this.$router.push('/personal/idAuth');\n    },\n    fixDFun: function fixDFun(val, symbol) {\n      if (this.showPrecision(symbol)) {\n        return fixD(val, this.showPrecision(symbol));\n      }\n\n      return val;\n    },\n    showPrecision: function showPrecision(symbol) {\n      if (this.$store.state.baseData && this.$store.state.baseData.market && this.$store.state.baseData.market.coinList) {\n        var coinList = this.$store.state.baseData.market.coinList;\n\n        if (coinList[symbol]) {\n          var precision = coinList[symbol].showPrecision;\n\n          if (precision) {\n            return precision;\n          }\n        }\n      }\n\n      return 4;\n    },\n    submit: function submit() {\n      if (!this.authLevel) {\n        this.alertFlagAuth = true;\n        return;\n      }\n\n      if (!this.OpenGoogle && !this.OpenMobile) {\n        this.alertFlag = true;\n        return;\n      }\n\n      this.order();\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    formatTimeFn: function formatTimeFn(date) {\n      return formatTime(date);\n    },\n    goRecharge: function goRecharge(symbol) {\n      // console.log(symbol)\n      this.$router.push(\"/assets/recharge?symbol=\".concat(symbol));\n    },\n    getMore: function getMore() {\n      this.$router.push('/manageFinances');\n    },\n    // 请求数据\n    getData: function getData() {\n      var _this3 = this;\n\n      this.axios({\n        url: this.$store.state.url.common.financingDet,\n        params: {\n          id: this.pageId\n        },\n        hostType: 'financing',\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          _this3.pageData = data.data;\n\n          if (data.data.rate_type === 0) {\n            _this3.rate_type = _this3.$t('manageFinances.yearRate');\n          } else {\n            _this3.rate_type = _this3.$t('manageFinances.dayRate');\n          }\n\n          _this3.balance = fixD(data.data.balance, _this3.showPrecision(data.data.symbol));\n          _this3.end_time = formatTime(data.data.end_time);\n\n          if (data.data.interest_begin_type === 1) {\n            _this3.interest_begin_time = formatTime(data.data.user_interest_begin_time);\n            _this3.interest_end_time = formatTime(data.data.user_interest_end_time);\n          } else {\n            _this3.interest_begin_time = formatTime(data.data.interest_begin_time);\n            _this3.interest_end_time = formatTime(data.data.interest_end_time);\n          }\n\n          if (data.data.return_type === 1) {\n            _this3.return_type = _this3.$t('manageFinances.first');\n          } else {\n            _this3.return_type = _this3.$t('manageFinances.together');\n          } // this.bannerImg = data.data.banner;\n\n        }\n      });\n    },\n    // 下单\n    order: function order() {\n      var _this4 = this;\n\n      if (!this.secoundClick) {\n        return;\n      }\n\n      this.secoundClick = false;\n      this.axios({\n        url: this.$store.state.url.common.order,\n        params: {\n          id: this.pageData.id,\n          number: this.amount\n        },\n        hostType: 'financing',\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          window.location.href = data.data.payUrl;\n          _this4.secoundClick = true;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/manageFinances/view/view.js"],"names":["fixD","formatTime","fixInput","imgMap","replaceStrMap","biki","name","data","numberValue","alertFlag","alertFlagAuth","nowType","errorFlag","errorHave","pageId","pageData","amount","dialogFlag","dialogConfirmLoading","checkValue","googleVlaue","checkErrorText","googleErrorText","dbclick","rate_type","interest_begin_time","interest_end_time","end_time","return_type","income","balance","secoundClick","watch","userInfoIsReady","alert","value","showPrecision","interest_symbol","symbol","rate","limit_day","computed","coinList","$store","state","baseData","market","templateLayoutType","Number","authLevel","flag","userInfo","toString","OpenMobile","isOpenMobileCheck","OpenGoogle","googleStatus","alertData","arr","text","$t","promptText","numberOptions","obj","error","haveNum","parseFloat","length","btnDisabled","methods","init","$route","params","id","getData","replaceStr","str","toLowerCase","canAuthAlert","canAlert","setTimeout","alertClone","alertAuthClone","alertGo","$router","push","alertAuthGo","fixDFun","val","precision","submit","order","inputChanges","formatTimeFn","date","goRecharge","getMore","axios","url","common","financingDet","hostType","method","then","code","interest_begin_type","user_interest_begin_time","user_interest_end_time","number","window","location","href","payUrl"],"mappings":"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","sourcesContent":["import {\n  fixD,\n  formatTime,\n  fixInput,\n  imgMap,\n} from '@/utils';\n\nconst replaceStrMap = {\n  biki: 'Tokencan',\n  'www.biki.com': 'www.tokencan.net',\n};\n\nexport default {\n  name: 'InnovationList',\n  data() {\n    return {\n      imgMap,\n      numberValue: '', // 购买数量\n      alertFlag: false, // 验证弹窗\n      alertFlagAuth: false, // 实名弹窗\n      // bannerImg: null,\n      // bannerTitle: '',\n      nowType: 1,\n      errorFlag: false,\n      errorHave: false,\n      pageId: null,\n      pageData: {},\n      amount: '',\n      dialogFlag: false, // 弹窗flag\n      dialogConfirmLoading: false, // 用于弹窗按钮loading效果\n      checkValue: '', // 验证码value\n      googleVlaue: '', // 谷歌验证码\n      checkErrorText: '',\n      googleErrorText: '',\n      dbclick: true,\n      rate_type: '', // 年化日化\n      interest_begin_time: '', // 计息开始时间\n      interest_end_time: '', // 到期退出时间\n      end_time: '', // 项目截止时间\n      return_type: '', // 还款方式\n      income: 0,\n      balance: null, // 可用余额\n      secoundClick: true, // 防止二次点击\n    };\n  },\n  watch: {\n    userInfoIsReady() { this.alert(); },\n    income(value) {\n      this.income = fixD(value, this.showPrecision(this.pageData.interest_symbol));\n    },\n    amount(value) {\n      this.amount = fixInput(value, this.showPrecision(this.pageData.symbol));\n      this.income = ((this.amount * this.pageData.rate) / 100 / 365) * this.pageData.limit_day;\n    },\n    checkValue(value) {\n      this.checkValue = fixInput(value, 0);\n    },\n    googleVlaue(value) {\n      this.googleVlaue = fixInput(value, 0);\n    },\n  },\n  computed: {\n    coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n      return null;\n    },\n    templateLayoutType() {\n      return Number(this.$store.state.baseData.templateLayoutType);\n    },\n    userInfoIsReady() { return this.$store.state.baseData.userInfoIsReady; },\n    // 用户是否实名\n    authLevel() {\n      let flag = false;\n      const { userInfo } = this.$store.state.baseData;\n      if (userInfo && userInfo.authLevel.toString() === '1') {\n        flag = true;\n      }\n      return flag;\n    },\n    // 用户是否开启手机\n    OpenMobile() {\n      let flag = false;\n      const { userInfo } = this.$store.state.baseData;\n      if (userInfo && userInfo.isOpenMobileCheck.toString() === '1') {\n        flag = true;\n      }\n      return flag;\n    },\n    // 用户是否开启谷歌\n    OpenGoogle() {\n      let flag = false;\n      const { userInfo } = this.$store.state.baseData;\n      if (userInfo && userInfo.googleStatus.toString() === '1') {\n        flag = true;\n      }\n      return flag;\n    },\n    alertData() {\n      const arr = [\n        // 绑定谷歌验证\n        { text: this.$t('assets.withdraw.bindGoogle'), flag: this.OpenGoogle },\n        // 绑定手机验证\n        { text: this.$t('assets.withdraw.bindPhone'), flag: this.OpenMobile },\n      ];\n      return arr;\n    },\n    promptText() {\n      return this.$t('innov.numbre'); // '数量';\n    },\n    userInfo() {\n      if (this.$store.state.baseData.userInfo) {\n        return this.$store.state.baseData.userInfo;\n      }\n      return {};\n    },\n    numberOptions() {\n      const obj = {\n        text: '', // 错误提示文案\n        flag: null, // 是否通过校验\n        error: null, // 是否展示文案\n      };\n      const haveNum = parseFloat(this.pageData.balance) || 0; // 可用\n      // console.log(this.pageData.balance)\n      if (this.amount.length === 0 || parseFloat(this.amount) === 0) {\n        // 请输入购买数量\n        obj.text = this.$t('manageFinances.inputNumber');\n        obj.flag = false;\n        obj.error = false;\n        return obj;\n      } if (parseFloat(this.amount) > haveNum) {\n        // 购买数量不得大于可用余额\n        obj.text = this.$t('manageFinances.buyNumMax');\n        obj.flag = false;\n        obj.error = true;\n        return obj;\n      }\n      obj.flag = true;\n      obj.error = false;\n      return obj;\n    },\n    btnDisabled() {\n      let flag = true;\n      if (this.numberOptions.flag) {\n        flag = false;\n      }\n      return flag;\n    },\n  },\n  methods: {\n    init() {\n      this.pageId = this.$route.params.id;\n      this.getData();\n      if (this.userInfoIsReady) {\n        this.alert();\n      }\n    },\n    replaceStr(str) {\n      return replaceStrMap[str.toLowerCase()];\n    },\n    alert() {\n      if (!this.authLevel) {\n        this.canAuthAlert();\n      } else {\n        this.canAlert();\n      }\n    },\n    canAlert() {\n      if (this.OpenGoogle || this.OpenMobile) {\n        this.alertFlag = false;\n      } else {\n        setTimeout(() => {\n          this.alertFlag = true;\n        }, 100);\n      }\n    },\n    canAuthAlert() {\n      if (this.authLevel) {\n        this.alertFlagAuth = false;\n      } else {\n        setTimeout(() => {\n          this.alertFlagAuth = true;\n        }, 100);\n      }\n    },\n    alertClone() { this.alertFlag = false; },\n    alertAuthClone() { this.alertFlagAuth = false; },\n    alertGo() { this.$router.push('/personal/userManagement'); },\n    alertAuthGo() { this.$router.push('/personal/idAuth'); },\n    fixDFun(val, symbol) {\n      if (this.showPrecision(symbol)) {\n        return fixD(val, this.showPrecision(symbol));\n      }\n      return val;\n    },\n    showPrecision(symbol) {\n      if (this.$store.state.baseData\n        && this.$store.state.baseData.market\n        && this.$store.state.baseData.market.coinList) {\n        const { coinList } = this.$store.state.baseData.market;\n        if (coinList[symbol]) {\n          const precision = coinList[symbol].showPrecision;\n          if (precision) {\n            return precision;\n          }\n        }\n      }\n      return 4;\n    },\n    submit() {\n      if (!this.authLevel) {\n        this.alertFlagAuth = true;\n        return;\n      }\n      if (!this.OpenGoogle && !this.OpenMobile) {\n        this.alertFlag = true;\n        return;\n      }\n      this.order();\n    },\n    inputChanges(value, name) {\n      this[name] = value;\n    },\n    formatTimeFn(date) {\n      return formatTime(date);\n    },\n    goRecharge(symbol) {\n      // console.log(symbol)\n      this.$router.push(`/assets/recharge?symbol=${symbol}`);\n    },\n    getMore() {\n      this.$router.push('/manageFinances');\n    },\n    // 请求数据\n    getData() {\n      this.axios({\n        url: this.$store.state.url.common.financingDet,\n        params: {\n          id: this.pageId,\n        },\n        hostType: 'financing',\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          this.pageData = data.data;\n          if (data.data.rate_type === 0) {\n            this.rate_type = this.$t('manageFinances.yearRate');\n          } else {\n            this.rate_type = this.$t('manageFinances.dayRate');\n          }\n          this.balance = fixD(data.data.balance, this.showPrecision(data.data.symbol));\n          this.end_time = formatTime(data.data.end_time);\n          if (data.data.interest_begin_type === 1) {\n            this.interest_begin_time = formatTime(data.data.user_interest_begin_time);\n            this.interest_end_time = formatTime(data.data.user_interest_end_time);\n          } else {\n            this.interest_begin_time = formatTime(data.data.interest_begin_time);\n            this.interest_end_time = formatTime(data.data.interest_end_time);\n          }\n          if (data.data.return_type === 1) {\n            this.return_type = this.$t('manageFinances.first');\n          } else {\n            this.return_type = this.$t('manageFinances.together');\n          }\n          // this.bannerImg = data.data.banner;\n        }\n      });\n    },\n    // 下单\n    order() {\n      if (!this.secoundClick) { return; }\n      this.secoundClick = false;\n      this.axios({\n        url: this.$store.state.url.common.order,\n        params: {\n          id: this.pageData.id,\n          number: this.amount,\n        },\n        hostType: 'financing',\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          window.location.href = data.data.payUrl;\n          this.secoundClick = true;\n        }\n      });\n    },\n  },\n};\n"]}]}