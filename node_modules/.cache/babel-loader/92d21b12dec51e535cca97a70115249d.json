{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/CompanyApplication/CompanyApplicationDetail/CompanyApplicationDetail.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/CompanyApplication/CompanyApplicationDetail/CompanyApplicationDetail.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { myStorage, logImg, getCoinShowName } from '@/utils';\nexport default {\n  name: 'CompanyApplication',\n  data: function data() {\n    return {\n      textFlag: true,\n      copyTime: 0,\n      submitLoading: false,\n      // 提交按钮loading\n      superCompany: false,\n      stepProgress: this.$t('application.stepProgress'),\n      moduleShow: false\n    };\n  },\n  watch: {},\n  computed: {\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    fiatTradeOpen: function fiatTradeOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.fiat_trade_open === '1') {\n        return true;\n      }\n\n      return false;\n    },\n    otcCompanyInfo: function otcCompanyInfo() {\n      return this.userInfo.otcCompanyInfo || {};\n    },\n    userCompanyInfo: function userCompanyInfo() {\n      return this.userInfo.userCompanyInfo || {};\n    },\n    headerDesc: function headerDesc() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n      var str = '';\n\n      switch (applyStatus) {\n        case 0:\n          {\n            str = this.$t('application.company.head.desc');\n            break;\n          }\n\n        case 3:\n          {\n            str = this.$t('application.company.head.descApplied');\n\n            if (applyRuleStatus === 0 || applyRuleStatus === 1) {\n              str = this.$t('application.company.head.desc');\n            }\n\n            break;\n          }\n\n        case 2:\n          {\n            if (applyRuleStatus === 1 || applyRuleStatus === 0) {\n              str = this.$t('application.company.head.desc');\n            }\n\n            break;\n          }\n\n        default:\n          {\n            str = '';\n          }\n      }\n\n      return str;\n    },\n    headerTitle: function headerTitle() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      var companyTypeS = 1;\n      var str = '';\n      var applyMap = {\n        0: '',\n        1: 'Appling',\n        3: 'Applied'\n      };\n      var companyMap = {\n        1: '',\n        2: 'Super'\n      };\n      var applyType = applyMap[this.applyStatus];\n\n      if (this.applySuper) {\n        applyType = '';\n      } else if (applyStatus === 1 && applyRuleStatus === 0) {\n        applyType = 'Appling';\n      } else if (applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 1 || applyStatus === 2 && applyRuleStatus === 3) {\n        applyType = 'Applied';\n      } else if (applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 0) || applyStatus === 3 && applyRuleStatus === 0 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2) {\n        applyType = '';\n      }\n\n      if (applyRuleStatus === 1 && companyStatus === 2 || applyStatus === 3 && applyRuleStatus === 3 || applyStatus === 2 && applyRuleStatus === 3 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2) {\n        companyTypeS = 2;\n      }\n\n      var companyTypeDesc = companyMap[companyTypeS];\n      str = this.$t(\"application.company\".concat(companyTypeDesc, \".head.title\").concat(applyType));\n\n      if (str.indexOf('undefined') > -1) {\n        str = '';\n      }\n\n      return str;\n    },\n    applySuper: function applySuper() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyType = this.companyType;\n      return (applyStatus === 3 || applyStatus === 2) && applyRuleStatus === 1 && companyType === 2;\n    },\n    companyStatus: function companyStatus() {\n      return Number(this.otcCompanyInfo.status);\n    },\n    applyStatus: function applyStatus() {\n      return Number(this.userCompanyInfo.applyStatus);\n    },\n    marginCoinSymbol: function marginCoinSymbol() {\n      return this.otcCompanyInfo.marginCoinSymbol;\n    },\n    normalCompanyMarginNum: function normalCompanyMarginNum() {\n      var no = 0;\n\n      if (this.applyRuleStatus === 0) {\n        no = Number(this.otcCompanyInfo.normalCompanyMarginNum);\n      } else if (this.applyRuleStatus === 1) {\n        no = Number(this.otcCompanyInfo.superCompanyMarginNum);\n      }\n\n      return no;\n    },\n    otcCompanyApplyEmail: function otcCompanyApplyEmail() {\n      return this.otcCompanyInfo.otcCompanyApplyEmail;\n    },\n\n    /*\r\n    * applyRuleStatus\r\n    * 0: 未认证\r\n    * 1: 普通商户\r\n    * 2: 普通商户解除\r\n    * 3: 超级商户\r\n    * 4: 超级商户解除\r\n    * */\n    applyRuleStatus: function applyRuleStatus() {\n      return Number(this.userCompanyInfo.status);\n    },\n    allPass: function allPass() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      return applyRuleStatus === 3 && (applyStatus === 3 || applyStatus === 2) || (applyStatus === 3 || applyStatus === 2) && applyRuleStatus === 1 && companyStatus === 1;\n    },\n    applyPass: function applyPass() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n      return applyRuleStatus === 3 && applyStatus === 3 || applyStatus === 3 && applyRuleStatus === 1;\n    },\n    applying: function applying() {\n      var bol = false;\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n\n      if (applyStatus === 1 && (applyRuleStatus === 1 || applyRuleStatus === 3 || applyRuleStatus === 0)) {\n        bol = true;\n      }\n\n      return bol;\n    },\n    relieving: function relieving() {\n      var bol = false;\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n\n      if (applyStatus === 1 && (applyRuleStatus === 2 || applyRuleStatus === 4)) {\n        bol = true;\n      }\n\n      return bol;\n    },\n    docAddr: function docAddr() {\n      return this.otcCompanyInfo.docAddr;\n    },\n    submitDisabled: function submitDisabled() {\n      return !this.textFlag;\n    },\n    btnShow: function btnShow() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      return applyStatus === 0 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2 || applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 2 || applyRuleStatus === 0 && applyStatus !== 1;\n    },\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo || {};\n    }\n  },\n  methods: {\n    getShowCoin: function getShowCoin(v) {\n      var str = v;\n\n      if (this.market && this.market.coinList) {\n        str = getCoinShowName(v, this.market.coinList);\n      }\n\n      return str;\n    },\n    init: function init() {\n      var applyRuleStatus = this.applyRuleStatus,\n          applyStatus = this.applyStatus;\n\n      if (this.companyStatus === 0) {\n        this.$router.push('/');\n      } else if ((applyRuleStatus === 2 || applyRuleStatus === 4) && applyStatus === 1) {\n        this.$router.push('/companyApplication');\n      } else {\n        this.moduleShow = true;\n      }\n    },\n    relieveClick: function relieveClick() {\n      var _window = window,\n          history = _window.history;\n\n      if (!history.state) {\n        this.$router.push('/companyApplication');\n      } else {\n        history.back();\n      }\n    },\n    lineShow: function lineShow(inx, len) {\n      return inx + 1 < len;\n    },\n    copyMail: function copyMail(val) {\n      var time = new Date().getTime();\n\n      if (time - this.copyTime > 1000) {\n        this.$bus.$emit('tip', {\n          text: '复制成功',\n          type: 'success'\n        });\n\n        var save = function save(e) {\n          e.clipboardData.setData('text/plain', val);\n          e.preventDefault();\n        };\n\n        document.addEventListener('copy', save, false);\n        document.execCommand('copy');\n        document.removeEventListener('copy', save);\n        this.copyTime = time;\n      }\n    },\n    actived: function actived(type) {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      var count = applyStatus;\n\n      if (applyRuleStatus === 1 && applyStatus === 3 && companyStatus === 2 || applyRuleStatus === 0 && applyStatus !== 1 || applyStatus === 2 && applyRuleStatus === 1) {\n        count = 0;\n      }\n\n      if (applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 3)) {\n        count = 3;\n      }\n\n      return count >= type ? 'a-12-bg' : 'a-2-bg ';\n    },\n    checkoutClick: function checkoutClick(flag) {\n      this.textFlag = flag;\n    },\n    back: function back() {\n      this.$router.push('/');\n    },\n    applyCompany: function applyCompany() {\n      var _this = this;\n\n      var type = 1;\n\n      if (this.applyRuleStatus === 0) {\n        type = 0;\n      }\n\n      if (this.applyRuleStatus === 1) {\n        type = 1;\n      }\n\n      this.axios({\n        url: this.$store.state.url.common.company_apply,\n        hostType: 'otc',\n        method: 'post',\n        params: {\n          type: type\n        }\n      }).then(function (data) {\n        if (!Number(data.code)) {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this.$store.dispatch('getUserInfo');\n\n          myStorage.remove('companyAppling');\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n\n        _this.submitLoading = false;\n      });\n    },\n    submit: function submit() {\n      var _this2 = this;\n\n      this.submitLoading = true;\n      this.axios({\n        url: this.$store.state.url.common.otc_account_list,\n        hostType: 'ex',\n        method: 'post'\n      }).then(function (data) {\n        if (!Number(data.code)) {\n          var allCoinMap = data.data.allCoinMap;\n          var hasSymbol = false;\n          allCoinMap.forEach(function (item) {\n            if (item.coinSymbol === _this2.marginCoinSymbol) {\n              hasSymbol = true;\n\n              if (Number(item.normal) >= _this2.normalCompanyMarginNum) {\n                _this2.applyCompany();\n              } else {\n                _this2.$bus.$emit('tip', {\n                  text: _this2.fiatTradeOpen ? _this2.$t('assets.b2c.otcShow.unEnough') : _this2.$t('application.unEnough'),\n                  type: 'error'\n                });\n\n                _this2.submitLoading = false;\n              }\n            }\n          });\n\n          if (!hasSymbol) {\n            logImg({\n              host: window.location.host,\n              type: 'marginCoinSymbol',\n              path: window.location.href,\n              ds: 'marginCoinSymbol error',\n              data: {\n                marginCoinSymbol: _this2.marginCoinSymbol,\n                allCoinMap: allCoinMap.map(function (i) {\n                  return i.coinSymbol;\n                })\n              },\n              t: new Date().getTime()\n            });\n          }\n        }\n      });\n    }\n  }\n};",null]}