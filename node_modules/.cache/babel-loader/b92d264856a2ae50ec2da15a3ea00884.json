{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/trade/orderList/orderList.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/trade/orderList/orderList.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport { fixD, formatTime, getCoinShowName, myStorage, imgMap, colorMap } from '@/utils';\nexport default {\n  name: 'orderList',\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      colorMap: colorMap,\n      orderType: 1,\n      // 订单类型 1: 当前委托 2:历史委托\n      pagination: {\n        // 翻页数据\n        count: 0,\n        // 总数量\n        pageSize: 10,\n        // 每页显示条数\n        page: 1 // 当前页数\n\n      },\n      subTableDataId: null,\n      subTableDataIds: null,\n      // 当前货币对\n      symbolCurrent: myStorage.get('sSymbolName'),\n      // 撤销订单 防止重复点击\n      cancelFla: true,\n      getDataInter: null,\n      subTableData: [],\n      subLoading: false,\n      orderIdArrar: [],\n      tableLoading: false,\n      cancelOrderId: null,\n      timer: 15000,\n      cellHeight: 56\n    };\n  },\n  props: {\n    moduleType: {\n      type: String,\n      default: 'ex'\n    }\n  },\n  watch: {\n    isLogin: function isLogin(val) {\n      if (val) {\n        this.getData();\n      }\n    },\n    orderData: function orderData(val) {\n      if (val) {\n        if (val.count > 0) {\n          this.timer = 2000;\n        } else {\n          this.timer = 15000;\n        } // 轮训请求数据\n\n\n        this.intervalGet();\n        this.tableLoading = false;\n        this.pagination.count = val.count;\n      }\n    },\n    subData: function subData(val) {\n      if (val) {\n        this.subLoading = false;\n\n        if (val.id === this.subTableDataId) {\n          this.subTableData = this.setSubTableData(val.trade_list);\n        }\n      }\n    }\n  },\n  computed: {\n    coinSymbols: function coinSymbols() {\n      if (this.symbolCurrent) {\n        return this.symbolCurrent.replace('/', ',');\n      }\n\n      return '';\n    },\n    // 全部币种列表\n    coinList: function coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    titleBlockClass: function titleBlockClass() {\n      if (this.$store.state.baseData.templateLayoutType === '2') {\n        return 'a-5-bg';\n      }\n\n      return 'a-7-bg';\n    },\n    // 是否Login\n    isLogin: function isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    openOrderCollect: function openOrderCollect() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.open_order_collect;\n      }\n\n      return null;\n    },\n    subData: function subData() {\n      return this.$store.state.tradeOrderList.subTableData;\n    },\n    // tab 项\n    tabTypeItem: function tabTypeItem() {\n      return [this.$t('trade.activeOrder'), // 当前委托\n      this.$t('trade.historyOrder') // 历史委托\n      ];\n    },\n    // 表头\n    columns: function columns() {\n      if (this.orderType === 2) {\n        return [{\n          title: this.$t('trade.time'),\n          // '时间',\n          width: '100px'\n        }, {\n          title: this.$t('trade.class'),\n          // '类别'\n          width: '200px'\n        }, {\n          title: this.$t('trade.transaction') // '交易对'\n\n        }, {\n          title: \"\".concat(this.$t('trade.price'), \"\\n            (\").concat(getCoinShowName(this.symbolUnit.units, this.coinList), \")\") // 价格\n\n        }, {\n          title: \"\".concat(this.$t('trade.number'), \"\\n            (\").concat(getCoinShowName(this.symbolUnit.symbol, this.coinList), \")\") // 数量\n\n        }, {\n          title: this.$t('trade.average') // '成交均价'\n\n        }, {\n          title: this.$t('trade.status') // '状态'\n\n        }, {\n          title: this.$t('trade.opera'),\n          // '操作'\n          width: '100px'\n        }];\n      }\n\n      return [{\n        title: this.$t('trade.time'),\n        // '时间',\n        width: '100px'\n      }, {\n        title: this.$t('trade.class'),\n        // '类别'\n        width: '150px'\n      }, {\n        title: \"\".concat(this.$t('trade.price'), \"\\n          (\").concat(getCoinShowName(this.symbolUnit.units, this.coinList), \")\") // 价格\n\n      }, {\n        title: \"\".concat(this.$t('trade.number'), \"\\n          (\").concat(getCoinShowName(this.symbolUnit.symbol, this.coinList), \")\") // 数量\n\n      }, {\n        title: \"\".concat(this.$t('trade.dealMoney'), \"\\n          (\").concat(getCoinShowName(this.symbolUnit.units, this.coinList), \")\") // 交易额\n\n      }, {\n        title: this.$t('trade.average') // '成交均价'\n\n      }, {\n        title: \"\".concat(this.$t('trade.deal'), \"/\").concat(this.$t('trade.noDeal')) // 已成交/未成交\n\n      }, {\n        title: this.$t('trade.opera'),\n        // '操作'\n        width: '100px',\n        classes: 'opera'\n      }];\n    },\n    subColumns: function subColumns() {\n      return [this.$t('trade.time'), this.$t('trade.price'), this.$t('trade.number'), this.$t('trade.turnover'), this.$t('trade.serviceCharge')];\n    },\n    // 当前币对小写\n    symbols: function symbols() {\n      if (this.symbolCurrent) {\n        var symbolArr = this.symbolCurrent.split('/');\n        var symbol = symbolArr[0].toLowerCase() + symbolArr[1].toLowerCase();\n        return symbol;\n      }\n\n      return null;\n    },\n    // 全部币对列表\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 当前币对\n    symbolUnit: function symbolUnit() {\n      if (this.symbolCurrent) {\n        return {\n          symbol: this.symbolCurrent.split('/')[0],\n          units: this.symbolCurrent.split('/')[1]\n        };\n      }\n\n      return {};\n    },\n    // 当前币对精度计算的值\n    fixValue: function fixValue() {\n      if (this.symbolAll && this.symbolCurrent) {\n        var symbol = this.symbolAll[this.symbolCurrent];\n        return {\n          priceFix: symbol.price,\n          volumeFix: symbol.volume\n        };\n      }\n\n      return {\n        priceFix: 2,\n        volumeFix: 8\n      };\n    },\n    orderData: function orderData() {\n      if (this.$store.state.tradeOrderList) {\n        return this.$store.state.tradeOrderList.nowOrderData;\n      } // if (this.orderType === 1 && this.$store.state.tradeOrderList) {\n      //   return this.$store.state.tradeOrderList.nowOrderData;\n      // }\n      // if (this.orderType === 2 && this.$store.state.tradeOrderList) {\n      //   return this.$store.state.tradeOrderList.historyData;\n      // }\n\n\n      return null;\n    },\n    dataList: function dataList() {\n      if (this.orderData && this.orderData.orderType === this.orderType) {\n        if (this.orderType === 1) {\n          return this.formData(this.orderData.orderList, this.cancelOrderId);\n        }\n\n        return this.formHistoryData(this.orderData.orderList);\n      }\n\n      return [];\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      // 获取 当前选中的货币对\n      this.symbolCurrent = myStorage.get('sSymbolName');\n\n      if (this.moduleType === 'lever') {\n        this.symbolCurrent = myStorage.get('leverSymbolName');\n      }\n\n      if (this.isLogin) {\n        this.getData(); // 轮训请求数据\n\n        this.intervalGet();\n      }\n\n      this.$bus.$on('SYMBOL_CURRENT', function (val) {\n        _this.symbolCurrent = val;\n\n        if (_this.isLogin) {\n          _this.pagination.page = 1;\n          _this.subTableDataId = null;\n          _this.tableLoading = true;\n\n          _this.getData();\n        }\n      }); // 监听下单成功\n\n      this.$bus.$on('ORDER_CREATE', function () {\n        _this.pagination.page = 1;\n\n        _this.getData();\n      });\n    },\n    // 查看全部订单\n    goOrderPage: function goOrderPage() {\n      // this.$router.push({path: '/order/exchangeOrder', query: {nowType: this.orderType}});\n      if (this.moduleType === 'lever') {\n        window.location.href = \"/order/leverageOrder?nowType=\".concat(this.orderType);\n      } else {\n        window.location.href = \"/order/exchangeOrder?nowType=\".concat(this.orderType);\n      }\n    },\n    // 轮训请求数据\n    intervalGet: function intervalGet() {\n      var _this2 = this;\n\n      clearInterval(this.getDataInter);\n      this.getDataInter = setInterval(function () {\n        _this2.getData(true);\n      }, this.timer);\n    },\n    // 判断 限价单 还是 市价单\n    setPrice: function setPrice(data) {\n      if (data.type === 1) {\n        return fixD(data.price, this.fixValue.priceFix);\n      }\n\n      return this.$t('trade.marketPrice');\n    },\n    // 格式化数据\n    formData: function formData(data, cancelOrderId) {\n      var _this3 = this;\n\n      var dataArray = data || [];\n      var newData = [];\n\n      if (dataArray.length) {\n        dataArray.forEach(function (item) {\n          if (cancelOrderId !== item.id) {\n            var showClose = true;\n\n            if (item.type === 2 || item.isCloseCancelOrder && item.isCloseCancelOrder.toString() === '1') {\n              showClose = false;\n            }\n\n            var tableData = {\n              id: item.id,\n              data: [formatTime(item.time_long), [{\n                text: item.side_text,\n                classes: item.side === 'BUY' ? 'u-1-cl' : 'u-4-cl'\n              }], [{\n                text: _this3.setPrice(item)\n              }], [{\n                text: fixD(item.volume, _this3.fixValue.volumeFix)\n              }], [{\n                text: fixD(item.total_price, _this3.fixValue.priceFix)\n              }], [{\n                text: fixD(item.avg_price, _this3.fixValue.priceFix)\n              }], [{\n                text: fixD(item.deal_volume, _this3.fixValue.volumeFix),\n                subContent: {\n                  text: fixD(item.remain_volume, _this3.fixValue.volumeFix)\n                }\n              }], [{\n                type: 'button',\n                text: _this3.$t('trade.cancelOrder'),\n                // 撤单\n                eventType: 'cancel',\n                classes: !showClose ? 'marketPriceOrder' : ''\n              }]]\n            };\n            newData.push(tableData);\n          }\n        });\n        return newData;\n      }\n\n      return [];\n    },\n    // 历史委托数据格式化\n    formHistoryData: function formHistoryData(data) {\n      var _this4 = this;\n\n      var dataArray = data || [];\n      var newData = [];\n      var idArr = [];\n\n      if (dataArray.length) {\n        dataArray.forEach(function (item) {\n          idArr.push(item.id);\n          var tableData = {\n            id: item.id,\n            data: [formatTime(item.time_long), [{\n              text: item.side_text,\n              classes: item.side === 'BUY' ? 'u-1-cl' : 'u-4-cl'\n            }], [{\n              text: \"\".concat(getCoinShowName(item.baseCoin, _this4.coinList), \"\\n                    /\").concat(getCoinShowName(item.countCoin, _this4.coinList))\n            }], [{\n              text: _this4.setPrice(item)\n            }], [{\n              text: fixD(item.volume, _this4.fixValue.volumeFix)\n            }], [{\n              text: fixD(item.avg_price, _this4.fixValue.priceFix)\n            }], [{\n              text: item.status_text\n            }]]\n          };\n          var subTableBtn = [];\n\n          if (item.status === 2 || item.status === 4 && parseFloat(item.deal_volume) !== 0) {\n            subTableBtn = [{\n              type: 'subTable',\n              text: _this4.$t('trade.view'),\n              // 详情\n              eventType: 'view'\n            }];\n          } else {\n            subTableBtn = [{\n              type: 'subTable',\n              text: _this4.$t('trade.view'),\n              // 详情\n              eventType: 'view',\n              classes: 'notShowe'\n            }];\n          }\n\n          tableData.data.push(subTableBtn);\n          newData.push(tableData);\n        }); // this.orderIdArrar = idArr;\n\n        return newData;\n      }\n\n      return [];\n    },\n    // sub table Data 格式化\n    setSubTableData: function setSubTableData(data) {\n      var _this5 = this;\n\n      var arr = [];\n\n      if (data.length) {\n        data.forEach(function (item) {\n          var ctime = item.ctime,\n              price = item.price,\n              volume = item.volume,\n              fee = item.fee,\n              feeCoin = item.feeCoin;\n          var dealPrice = item.deal_price;\n          arr.push({\n            ctime: ctime,\n            price: fixD(price, _this5.fixValue.priceFix),\n            volume: fixD(volume, _this5.fixValue.volumeFix),\n            dealPrice: fixD(dealPrice, _this5.fixValue.priceFix),\n            fee: \"\".concat(fee, \" \").concat(getCoinShowName(feeCoin, _this5.coinList).toUpperCase())\n          });\n        });\n        return arr;\n      }\n\n      return [];\n    },\n    // 切换订单类型\n    switchType: function switchType(index) {\n      this.orderType = index;\n      this.getData();\n\n      if (this.isLogin) {\n        this.subTableDataId = null;\n        this.pagination.page = 1;\n        this.subTableData = [];\n        this.orderIdArrar = [];\n        this.tableLoading = true;\n      }\n    },\n    elementClick: function elementClick(type, data) {\n      if (type === 'cancel') {\n        this.cancelOrderEvent(data);\n      } else {\n        this.getSubTableData(data);\n      }\n    },\n    // 查看详情\n    getSubTableData: function getSubTableData(data) {\n      if (data.open) {\n        this.subTableData = [];\n        this.subLoading = true;\n        this.subTableDataId = data.id;\n        var symbolArr = this.symbolCurrent.split('/');\n        var symbol = symbolArr[0].toLowerCase() + symbolArr[1].toLowerCase();\n        var url = this.$store.state.url.ordercenter.orderDetail;\n\n        if (this.moduleType === 'lever') {\n          url = this.$store.state.url.lever.list_by_order;\n        }\n\n        var params = {\n          url: url,\n          params: {\n            symbol: symbol,\n            order_id: data.id,\n            pageSize: this.pagination.pageSize\n          }\n        };\n        this.$store.dispatch('getSubTableData', params);\n      }\n    },\n    // 撤单\n    cancelOrderEvent: function cancelOrderEvent(id) {\n      var _this6 = this;\n\n      if (this.cancelFla) {\n        this.cancelFla = false;\n        var data = {\n          orderId: id,\n          symbol: this.symbols\n        };\n        var url = this.$store.state.url.ordercenter.cancelorder;\n\n        if (this.moduleType === 'lever') {\n          url = this.$store.state.url.lever.cancel;\n        }\n\n        this.axios({\n          url: url,\n          method: 'post',\n          params: data\n        }).then(function (rep) {\n          if (rep.code === '0') {\n            // this.getData();\n            _this6.cancelOrderId = id; // 重新请求资产\n\n            _this6.$store.dispatch('assetsExchangeData', {\n              auto: false,\n              coinSymbols: _this6.coinSymbols\n            }); // 撤单成功 提示\n\n\n            _this6.$bus.$emit('tip', {\n              text: _this6.$t('trade.cancelled'),\n              type: 'success'\n            });\n\n            _this6.cancelFla = true;\n          } else {\n            _this6.$bus.$emit('tip', {\n              text: rep.msg,\n              type: 'error'\n            });\n\n            _this6.cancelFla = true;\n          }\n        });\n      }\n    },\n    // 请求订单数据\n    getData: function getData(auto) {\n      if (this.symbolCurrent && this.isLogin) {\n        var url = this.$store.state.url.cointran.orderNew;\n\n        if (this.orderType === 2) {\n          url = this.$store.state.url.ordercenter.historyNew;\n        }\n\n        if (this.moduleType === 'lever') {\n          url = this.$store.state.url.lever.new;\n\n          if (this.orderType === 2) {\n            url = this.$store.state.url.lever.all;\n          }\n        }\n\n        var symbolArr = this.symbolCurrent.split('/');\n        var symbol = symbolArr[0].toLowerCase() + symbolArr[1].toLowerCase();\n        var data = {\n          url: url,\n          orderType: this.orderType,\n          params: {\n            symbol: symbol,\n            pageSize: this.pagination.pageSize\n          }\n        };\n\n        if (this.orderIdArrar.length && this.orderType === 2) {\n          data.params.idList = this.orderIdArrar;\n        } else {\n          data.params.page = this.pagination.page;\n        }\n\n        if (auto) {\n          data.auto = true;\n        }\n\n        this.$store.dispatch('getOrderListData', data);\n      }\n    },\n    // 翻页事件\n    pagechange: function pagechange(num) {\n      this.pagination.page = num;\n      this.subTableData = null;\n      this.subTableDataId = null;\n      this.orderIdArrar = [];\n      this.getData();\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/trade/orderList/orderList.js"],"names":["fixD","formatTime","getCoinShowName","myStorage","imgMap","colorMap","name","data","orderType","pagination","count","pageSize","page","subTableDataId","subTableDataIds","symbolCurrent","get","cancelFla","getDataInter","subTableData","subLoading","orderIdArrar","tableLoading","cancelOrderId","timer","cellHeight","props","moduleType","type","String","default","watch","isLogin","val","getData","orderData","intervalGet","subData","id","setSubTableData","trade_list","computed","coinSymbols","replace","coinList","$store","state","baseData","market","titleBlockClass","templateLayoutType","openOrderCollect","publicInfo","open_order_collect","tradeOrderList","tabTypeItem","$t","columns","title","width","symbolUnit","units","symbol","classes","subColumns","symbols","symbolArr","split","toLowerCase","symbolAll","fixValue","priceFix","price","volumeFix","volume","nowOrderData","dataList","formData","orderList","formHistoryData","methods","init","$bus","$on","goOrderPage","window","location","href","clearInterval","setInterval","setPrice","dataArray","newData","length","forEach","item","showClose","isCloseCancelOrder","toString","tableData","time_long","text","side_text","side","total_price","avg_price","deal_volume","subContent","remain_volume","eventType","push","idArr","baseCoin","countCoin","status_text","subTableBtn","status","parseFloat","arr","ctime","fee","feeCoin","dealPrice","deal_price","toUpperCase","switchType","index","elementClick","cancelOrderEvent","getSubTableData","open","url","ordercenter","orderDetail","lever","list_by_order","params","order_id","dispatch","orderId","cancelorder","cancel","axios","method","then","rep","code","auto","$emit","msg","cointran","orderNew","historyNew","new","all","idList","pagechange","num"],"mappings":"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","sourcesContent":["import {\n  fixD,\n  formatTime,\n  getCoinShowName,\n  myStorage,\n  imgMap,\n  colorMap,\n} from '@/utils';\n\nexport default {\n  name: 'orderList',\n  data() {\n    return {\n      imgMap,\n      colorMap,\n      orderType: 1, // 订单类型 1: 当前委托 2:历史委托\n      pagination: { // 翻页数据\n        count: 0, // 总数量\n        pageSize: 10, // 每页显示条数\n        page: 1, // 当前页数\n      },\n      subTableDataId: null,\n      subTableDataIds: null,\n      // 当前货币对\n      symbolCurrent: myStorage.get('sSymbolName'),\n      // 撤销订单 防止重复点击\n      cancelFla: true,\n      getDataInter: null,\n      subTableData: [],\n      subLoading: false,\n      orderIdArrar: [],\n      tableLoading: false,\n      cancelOrderId: null,\n      timer: 15000,\n      cellHeight: 56,\n    };\n  },\n  props: {\n    moduleType: {\n      type: String,\n      default: 'ex',\n    },\n  },\n  watch: {\n    isLogin(val) {\n      if (val) {\n        this.getData();\n      }\n    },\n    orderData(val) {\n      if (val) {\n        if (val.count > 0) {\n          this.timer = 2000;\n        } else {\n          this.timer = 15000;\n        }\n        // 轮训请求数据\n        this.intervalGet();\n        this.tableLoading = false;\n        this.pagination.count = val.count;\n      }\n    },\n    subData(val) {\n      if (val) {\n        this.subLoading = false;\n        if (val.id === this.subTableDataId) {\n          this.subTableData = this.setSubTableData(val.trade_list);\n        }\n      }\n    },\n  },\n  computed: {\n    coinSymbols() {\n      if (this.symbolCurrent) {\n        return this.symbolCurrent.replace('/', ',');\n      }\n      return '';\n    },\n    // 全部币种列表\n    coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n      return null;\n    },\n    titleBlockClass() {\n      if (this.$store.state.baseData.templateLayoutType === '2') {\n        return 'a-5-bg';\n      }\n      return 'a-7-bg';\n    },\n    // 是否Login\n    isLogin() {\n      return this.$store.state.baseData.isLogin;\n    },\n    openOrderCollect() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.open_order_collect;\n      }\n      return null;\n    },\n    subData() {\n      return this.$store.state.tradeOrderList.subTableData;\n    },\n    // tab 项\n    tabTypeItem() {\n      return [\n        this.$t('trade.activeOrder'), // 当前委托\n        this.$t('trade.historyOrder'), // 历史委托\n      ];\n    },\n    // 表头\n    columns() {\n      if (this.orderType === 2) {\n        return [\n          {\n            title: this.$t('trade.time'), // '时间',\n            width: '100px',\n          },\n          {\n            title: this.$t('trade.class'), // '类别'\n            width: '200px',\n          },\n          {\n            title: this.$t('trade.transaction'), // '交易对'\n          },\n          {\n            title: `${this.$t('trade.price')}\n            (${getCoinShowName(this.symbolUnit.units, this.coinList)})`, // 价格\n          },\n          {\n            title: `${this.$t('trade.number')}\n            (${getCoinShowName(this.symbolUnit.symbol, this.coinList)})`, // 数量\n          },\n          {\n            title: this.$t('trade.average'), // '成交均价'\n          },\n          {\n            title: this.$t('trade.status'), // '状态'\n          },\n          {\n            title: this.$t('trade.opera'), // '操作'\n            width: '100px',\n          },\n        ];\n      }\n      return [\n        {\n          title: this.$t('trade.time'), // '时间',\n          width: '100px',\n        },\n        {\n          title: this.$t('trade.class'), // '类别'\n          width: '150px',\n        },\n        {\n          title: `${this.$t('trade.price')}\n          (${getCoinShowName(this.symbolUnit.units, this.coinList)})`, // 价格\n        },\n        {\n          title: `${this.$t('trade.number')}\n          (${getCoinShowName(this.symbolUnit.symbol, this.coinList)})`, // 数量\n        },\n        {\n          title: `${this.$t('trade.dealMoney')}\n          (${getCoinShowName(this.symbolUnit.units, this.coinList)})`, // 交易额\n        },\n        {\n          title: this.$t('trade.average'), // '成交均价'\n        },\n        {\n          title: `${this.$t('trade.deal')}/${this.$t('trade.noDeal')}`, // 已成交/未成交\n        },\n        {\n          title: this.$t('trade.opera'), // '操作'\n          width: '100px',\n          classes: 'opera',\n        },\n      ];\n    },\n    subColumns() {\n      return [\n        this.$t('trade.time'),\n        this.$t('trade.price'),\n        this.$t('trade.number'),\n        this.$t('trade.turnover'),\n        this.$t('trade.serviceCharge'),\n      ];\n    },\n    // 当前币对小写\n    symbols() {\n      if (this.symbolCurrent) {\n        const symbolArr = this.symbolCurrent.split('/');\n        const symbol = symbolArr[0].toLowerCase() + symbolArr[1].toLowerCase();\n        return symbol;\n      }\n      return null;\n    },\n    // 全部币对列表\n    symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 当前币对\n    symbolUnit() {\n      if (this.symbolCurrent) {\n        return {\n          symbol: this.symbolCurrent.split('/')[0],\n          units: this.symbolCurrent.split('/')[1],\n        };\n      }\n      return {};\n    },\n    // 当前币对精度计算的值\n    fixValue() {\n      if (this.symbolAll && this.symbolCurrent) {\n        const symbol = this.symbolAll[this.symbolCurrent];\n        return {\n          priceFix: symbol.price,\n          volumeFix: symbol.volume,\n        };\n      }\n      return {\n        priceFix: 2,\n        volumeFix: 8,\n      };\n    },\n    orderData() {\n      if (this.$store.state.tradeOrderList) {\n        return this.$store.state.tradeOrderList.nowOrderData;\n      }\n      // if (this.orderType === 1 && this.$store.state.tradeOrderList) {\n      //   return this.$store.state.tradeOrderList.nowOrderData;\n      // }\n      // if (this.orderType === 2 && this.$store.state.tradeOrderList) {\n      //   return this.$store.state.tradeOrderList.historyData;\n      // }\n      return null;\n    },\n    dataList() {\n      if (this.orderData && this.orderData.orderType === this.orderType) {\n        if (this.orderType === 1) {\n          return this.formData(this.orderData.orderList, this.cancelOrderId);\n        }\n        return this.formHistoryData(this.orderData.orderList);\n      }\n      return [];\n    },\n  },\n  methods: {\n    init() {\n      // 获取 当前选中的货币对\n      this.symbolCurrent = myStorage.get('sSymbolName');\n      if (this.moduleType === 'lever') {\n        this.symbolCurrent = myStorage.get('leverSymbolName');\n      }\n      if (this.isLogin) {\n        this.getData();\n        // 轮训请求数据\n        this.intervalGet();\n      }\n      this.$bus.$on('SYMBOL_CURRENT', (val) => {\n        this.symbolCurrent = val;\n        if (this.isLogin) {\n          this.pagination.page = 1;\n          this.subTableDataId = null;\n          this.tableLoading = true;\n          this.getData();\n        }\n      });\n      // 监听下单成功\n      this.$bus.$on('ORDER_CREATE', () => {\n        this.pagination.page = 1;\n        this.getData();\n      });\n    },\n    // 查看全部订单\n    goOrderPage() {\n      // this.$router.push({path: '/order/exchangeOrder', query: {nowType: this.orderType}});\n      if (this.moduleType === 'lever') {\n        window.location.href = `/order/leverageOrder?nowType=${this.orderType}`;\n      } else {\n        window.location.href = `/order/exchangeOrder?nowType=${this.orderType}`;\n      }\n    },\n    // 轮训请求数据\n    intervalGet() {\n      clearInterval(this.getDataInter);\n      this.getDataInter = setInterval(() => {\n        this.getData(true);\n      }, this.timer);\n    },\n    // 判断 限价单 还是 市价单\n    setPrice(data) {\n      if (data.type === 1) {\n        return fixD(data.price, this.fixValue.priceFix);\n      }\n      return this.$t('trade.marketPrice');\n    },\n    // 格式化数据\n    formData(data, cancelOrderId) {\n      const dataArray = data || [];\n      const newData = [];\n      if (dataArray.length) {\n        dataArray.forEach((item) => {\n          if (cancelOrderId !== item.id) {\n            let showClose = true;\n            if (item.type === 2\n              || (item.isCloseCancelOrder && item.isCloseCancelOrder.toString() === '1')) {\n              showClose = false;\n            }\n            const tableData = {\n              id: item.id,\n              data: [\n                formatTime(item.time_long),\n                [\n                  {\n                    text: item.side_text,\n                    classes: item.side === 'BUY' ? 'u-1-cl' : 'u-4-cl',\n                  },\n                ],\n                [\n                  {\n                    text: this.setPrice(item),\n                  },\n                ],\n                [\n                  {\n                    text: fixD(item.volume, this.fixValue.volumeFix),\n                  },\n                ],\n                [\n                  {\n                    text: fixD(item.total_price, this.fixValue.priceFix),\n                  },\n                ],\n                [\n                  {\n                    text: fixD(item.avg_price, this.fixValue.priceFix),\n                  },\n                ],\n                [\n                  {\n                    text: fixD(item.deal_volume, this.fixValue.volumeFix),\n                    subContent: {\n                      text: fixD(item.remain_volume, this.fixValue.volumeFix),\n                    },\n                  },\n                ],\n                [\n                  {\n                    type: 'button',\n                    text: this.$t('trade.cancelOrder'), // 撤单\n                    eventType: 'cancel',\n                    classes: !showClose ? 'marketPriceOrder' : '',\n                  },\n                ],\n              ],\n            };\n            newData.push(tableData);\n          }\n        });\n        return newData;\n      }\n      return [];\n    },\n    // 历史委托数据格式化\n    formHistoryData(data) {\n      const dataArray = data || [];\n      const newData = [];\n      const idArr = [];\n      if (dataArray.length) {\n        dataArray.forEach((item) => {\n          idArr.push(item.id);\n          const tableData = {\n            id: item.id,\n            data: [\n              formatTime(item.time_long),\n              [\n                {\n                  text: item.side_text,\n                  classes: item.side === 'BUY' ? 'u-1-cl' : 'u-4-cl',\n                },\n              ],\n              [\n                {\n                  text: `${getCoinShowName(item.baseCoin, this.coinList)}\n                    /${getCoinShowName(item.countCoin, this.coinList)}`,\n                },\n              ],\n              [\n                {\n                  text: this.setPrice(item),\n                },\n              ],\n              [\n                {\n                  text: fixD(item.volume, this.fixValue.volumeFix),\n                },\n              ],\n              [\n                {\n                  text: fixD(item.avg_price, this.fixValue.priceFix),\n                },\n              ],\n              [\n                {\n                  text: item.status_text,\n                },\n              ],\n            ],\n          };\n          let subTableBtn = [];\n          if (item.status === 2 || (item.status === 4 && parseFloat(item.deal_volume) !== 0)) {\n            subTableBtn = [\n              {\n                type: 'subTable',\n                text: this.$t('trade.view'), // 详情\n                eventType: 'view',\n              },\n            ];\n          } else {\n            subTableBtn = [\n              {\n                type: 'subTable',\n                text: this.$t('trade.view'), // 详情\n                eventType: 'view',\n                classes: 'notShowe',\n              },\n            ];\n          }\n          tableData.data.push(subTableBtn);\n          newData.push(tableData);\n        });\n        // this.orderIdArrar = idArr;\n        return newData;\n      }\n      return [];\n    },\n    // sub table Data 格式化\n    setSubTableData(data) {\n      const arr = [];\n      if (data.length) {\n        data.forEach((item) => {\n          const {\n            ctime,\n            price,\n            volume,\n            fee,\n            feeCoin,\n          } = item;\n          const dealPrice = item.deal_price;\n          arr.push({\n            ctime,\n            price: fixD(price, this.fixValue.priceFix),\n            volume: fixD(volume, this.fixValue.volumeFix),\n            dealPrice: fixD(dealPrice, this.fixValue.priceFix),\n            fee: `${fee} ${getCoinShowName(feeCoin, this.coinList).toUpperCase()}`,\n\n          });\n        });\n        return arr;\n      }\n      return [];\n    },\n    // 切换订单类型\n    switchType(index) {\n      this.orderType = index;\n      this.getData();\n      if (this.isLogin) {\n        this.subTableDataId = null;\n        this.pagination.page = 1;\n        this.subTableData = [];\n        this.orderIdArrar = [];\n        this.tableLoading = true;\n      }\n    },\n    elementClick(type, data) {\n      if (type === 'cancel') {\n        this.cancelOrderEvent(data);\n      } else {\n        this.getSubTableData(data);\n      }\n    },\n    // 查看详情\n    getSubTableData(data) {\n      if (data.open) {\n        this.subTableData = [];\n        this.subLoading = true;\n        this.subTableDataId = data.id;\n        const symbolArr = this.symbolCurrent.split('/');\n        const symbol = symbolArr[0].toLowerCase() + symbolArr[1].toLowerCase();\n        let url = this.$store.state.url.ordercenter.orderDetail;\n        if (this.moduleType === 'lever') {\n          url = this.$store.state.url.lever.list_by_order;\n        }\n        const params = {\n          url,\n          params: {\n            symbol,\n            order_id: data.id,\n            pageSize: this.pagination.pageSize,\n          },\n        };\n        this.$store.dispatch('getSubTableData', params);\n      }\n    },\n    // 撤单\n    cancelOrderEvent(id) {\n      if (this.cancelFla) {\n        this.cancelFla = false;\n        const data = {\n          orderId: id,\n          symbol: this.symbols,\n        };\n        let url = this.$store.state.url.ordercenter.cancelorder;\n        if (this.moduleType === 'lever') {\n          url = this.$store.state.url.lever.cancel;\n        }\n        this.axios({\n          url,\n          method: 'post',\n          params: data,\n        }).then((rep) => {\n          if (rep.code === '0') {\n            // this.getData();\n            this.cancelOrderId = id;\n            // 重新请求资产\n            this.$store.dispatch('assetsExchangeData', {\n              auto: false,\n              coinSymbols: this.coinSymbols,\n            });\n            // 撤单成功 提示\n            this.$bus.$emit('tip', { text: this.$t('trade.cancelled'), type: 'success' });\n            this.cancelFla = true;\n          } else {\n            this.$bus.$emit('tip', { text: rep.msg, type: 'error' });\n            this.cancelFla = true;\n          }\n        });\n      }\n    },\n    // 请求订单数据\n    getData(auto) {\n      if (this.symbolCurrent && this.isLogin) {\n        let url = this.$store.state.url.cointran.orderNew;\n        if (this.orderType === 2) {\n          url = this.$store.state.url.ordercenter.historyNew;\n        }\n        if (this.moduleType === 'lever') {\n          url = this.$store.state.url.lever.new;\n          if (this.orderType === 2) {\n            url = this.$store.state.url.lever.all;\n          }\n        }\n        const symbolArr = this.symbolCurrent.split('/');\n        const symbol = symbolArr[0].toLowerCase() + symbolArr[1].toLowerCase();\n        const data = {\n          url,\n          orderType: this.orderType,\n          params: {\n            symbol,\n            pageSize: this.pagination.pageSize,\n          },\n        };\n        if (this.orderIdArrar.length && this.orderType === 2) {\n          data.params.idList = this.orderIdArrar;\n        } else {\n          data.params.page = this.pagination.page;\n        }\n        if (auto) {\n          data.auto = true;\n        }\n        this.$store.dispatch('getOrderListData', data);\n      }\n    },\n    // 翻页事件\n    pagechange(num) {\n      this.pagination.page = num;\n      this.subTableData = null;\n      this.subTableDataId = null;\n      this.orderIdArrar = [];\n      this.getData();\n    },\n  },\n};\n"]}]}