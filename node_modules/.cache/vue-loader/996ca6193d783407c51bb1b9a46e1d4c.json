{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/components/modules/trade/gridDialog/GridTabel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/components/modules/trade/gridDialog/GridTabel.vue","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getComplexType } from 'blockchain-ui-privatization/utils';\n\nexport default {\n  name: 'GridTabel',\n  props: {\n    h5Width: {\n      type: String,\n      default: '800px',\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n    // 表头数据列表\n    columns: {\n      type: Array,\n      default: () => [],\n    },\n    // 表格数据列表\n    dataList: {\n      type: Array,\n      default: () => [],\n    },\n    // 展开数据\n    subContent: {\n      type: Array,\n      default: () => [],\n    },\n    // 整个表格根元素的class\n    classes: {\n      type: [String, Array],\n      default: () => [],\n    },\n    // 表头class\n    headClasses: {\n      type: [String, Array],\n      default: () => [],\n    },\n    // 表内容class\n    bodyClasses: {\n      type: [String, Array],\n      default: () => [],\n    },\n    // 表格每一行class\n    lineClasses: {\n      type: [String, Array],\n      default: () => ['b—3-bd'],\n    },\n    // 表格每一行的hover class\n    lineClassesHover: {\n      type: [String, Array],\n      default: () => [],\n    },\n    // 大于多少条后出现滚动条\n    lineNumber: {\n      type: Number,\n      default: 20,\n    },\n    // 表格每一行的高度\n    cellHeight: {\n      type: Number,\n      default: 50,\n    },\n    // 表头高度\n    headHeight: {\n      type: Number,\n      default: 30,\n    },\n    // sub 表头\n    subColumns: {\n      type: Array,\n      default: () => [],\n    },\n    // sub 表的自定义class\n    subClass: {\n      type: String,\n      default: '',\n    },\n    subContentId: {\n      type: [Number, String],\n    },\n    subLoading: {\n      type: Boolean,\n      default: false,\n    },\n    colorMap: {\n      type: Object,\n      default: () => {},\n      required: true,\n    },\n  },\n  data() {\n    return {\n      // 是否排序\n      isSorte: false,\n      // 排序 使用的Key\n      sorteKey: null,\n      // 排序方向\n      sortType: null,\n      // 表头单元格的宽度\n      cellWidth: [],\n      // sub 显示的 id\n      subPpenId: null,\n      subIsOpen: 0,\n      // 滚动条配置\n      ops: {\n        rail: {\n          gutterOfSide: '0px',\n        },\n      },\n    };\n  },\n\n  mounted() {\n    this.setCellWidth();\n    this.$bus.$on('WINFOW_ON_RESIIZE', () => {\n      this.setCellWidth();\n    });\n  },\n  computed: {\n    classBoxStyle() {\n      // const max = window.matchMedia('(max-width:960px)');\n      let str = 'width: 100%;';\n      // if (max.matches) {\n      str += `min-width: ${this.h5Width}`;\n      // }\n      return str;\n    },\n    // 表格 根目录 class\n    classBox() {\n      const cls = this.isType(this.classes) === 'Array'\n        ? [...this.classes] : this.classes;\n      return ['common-table', 'a-5-bg', cls];\n    },\n    // 表头 class\n    classHead() {\n      const cls = this.isType(this.headClasses) === 'Array'\n        ? [...this.headClasses] : this.headClasses;\n      return ['table-head', 'a-3-bd', cls];\n    },\n    // 表格行 class\n    classLine() {\n      const cls = this.isType(this.lineClasses) === 'Array'\n        ? [...this.lineClasses] : this.lineClasses;\n      return ['a-3-bd', cls];\n    },\n    // 表格 数据列表 设置排序\n    tableDataList() {\n      if (!this.dataList || !this.dataList.length) return [];\n      if (this.isSorte) {\n        return this.sortType === 'down'\n          ? this.quickSort(this.dataList)\n          : this.quickSort(this.dataList).reverse();\n      }\n      return this.dataList;\n    },\n    // 获取表头传入的宽\n    columnsWidth() {\n      const [...columns] = this.columns;\n      const arr = [];\n      columns.forEach((item, i) => {\n        const obj = { index: i };\n        if (item.width) {\n          obj.width = item.width;\n        }\n        if (item.align) {\n          obj['text-align'] = item.align;\n        }\n        if (item.styleClass) {\n          obj.styleClass = item.styleClass;\n        }\n        arr.push(obj);\n      });\n      return arr;\n    },\n    // 表格内容 高度 超出高度 出现滚动条\n    tableBodyHeight() {\n      if (this.tableDataList.length <= this.lineNumber) {\n        return false;\n      }\n      return { height: `${this.lineNumber * this.cellHeight}px` };\n    },\n  },\n  watch: {\n    // 监听表格数据的变化\n    dataList(val) {\n      setTimeout(() => {\n        // 重新设置表头单元格的宽度\n        this.setCellWidth();\n      }, 0);\n      if (val) {\n        // 设置成默认排序\n        // this.isSorte = false;\n        // 排序 使用的Key\n        // this.sorteKey = null;\n        // 排序方向\n        // this.sortType = null;\n      }\n    },\n  },\n  methods: {\n    isObjectType(element) {\n      return getComplexType(element) === 'Object';\n    },\n    isObjectTypeJoinClass(element) {\n      return this.isObjectType(element) && element.class ? element.class : '';\n    },\n    isObjectTypeJoinStyle(element) {\n      return this.isObjectType(element) && element.style ? element.style : '';\n    },\n    isObjectTypeJoinText(element) {\n      return this.isObjectType(element) && element.text\n        ? element.text\n        : element;\n    },\n    onChaneForm(item, id, val) {\n      const data = {};\n      data[id] = val;\n      this.$emit('elementClick', item.eventType, data);\n    },\n    listMouseOver(e) {\n      const { colorMap } = this;\n      e.target.style.backgroundColor = colorMap['a-4-bg'];\n    },\n    listMouseOut(e) {\n      e.target.style.backgroundColor = 'transparent';\n    },\n    enter(index) {\n      this.hoverIndex = index;\n    },\n    leave() {\n      this.hoverIndex = null;\n    },\n    lineClassesH(index) {\n      if (index === this.hoverIndex) {\n        return this.lineClassesHover;\n      }\n      return null;\n    },\n    isType(obj) {\n      const types = Object.prototype.toString.call(obj);\n      if (types === '[object Array]') {\n        return 'Array';\n      }\n      if (types === '[object Object]') {\n        return 'Object';\n      }\n      return 'string';\n    },\n    // 表头文字 居中\n    cellStyleTh(item) {\n      return {\n        'text-align': item.align,\n      };\n    },\n    cellStyleClass(index) {\n      if (this.columnsWidth.length) {\n        let obj = {};\n        this.columnsWidth.forEach((item) => {\n          if (item.index === index && item.styleClass) {\n            obj = item.styleClass;\n          }\n        });\n        return obj;\n      }\n      return false;\n    },\n    // 设置 单元格 的宽度\n    cellStyleTd(index) {\n      if (this.columnsWidth.length) {\n        let obj = {};\n        this.columnsWidth.forEach((item) => {\n          if (item.index === index) {\n            obj = item;\n          }\n        });\n        return obj;\n      }\n      return false;\n    },\n    // 设置表头单元格的宽度\n    setCellWidth() {\n      const tdFefsKeys = Object.keys(this.$refs);\n      this.cellWidth = [];\n      tdFefsKeys.forEach((item) => {\n        if (item.indexOf('td') !== -1) {\n          if (this.$refs[item][0]) {\n            this.cellWidth.push(this.$refs[item][0].offsetWidth);\n          }\n        }\n      });\n    },\n    // 行 点击事件\n    lineClickEvent(item) {\n      this.$emit('lineClick', item);\n    },\n    // 按钮 点击事件\n    elementClickEvent(item, id) {\n      this.$emit('elementClick', item.eventType, id);\n      if (item.type === 'link') {\n        this.$router.push(item.links);\n      }\n    },\n    // 点击排序事件\n    sorteChane(key, asynSorte) {\n      if (asynSorte) {\n        this.isSorte = true;\n        this.sortType = this.sortType === 'down' ? 'up' : 'down';\n        if (this.sorteKey !== key) {\n          this.sortType = 'down';\n          this.sorteKey = key;\n        }\n      }\n      this.$emit('sortOnChange', { key: this.sorteKey, type: this.sortType });\n    },\n    getSortValue(itemArr) {\n      let val = null;\n      if (this.isType(itemArr) === 'Array') {\n        itemArr.forEach((option) => {\n          if (this.isType(option) === 'Array') {\n            option.forEach((data) => {\n              if (data.key === this.sorteKey) {\n                val = data.sortVal;\n              }\n            });\n          }\n        });\n      }\n      return parseFloat(val);\n    },\n    // 排序\n    quickSort(datas) {\n      const [...dataArray] = datas;\n      if (!dataArray.length) {\n        return dataArray;\n      }\n      return dataArray.sort(\n        (a, b) => this.getSortValue(b.data) - this.getSortValue(a.data),\n      );\n    },\n    // 展开 sub 表格\n    opentSubCOntent(item, ids) {\n      this.subIsOpen = this.subPpenId !== ids ? 1 : 0;\n      this.$emit('elementClick', item.eventType, {\n        id: ids,\n        open: this.subPpenId !== ids ? 1 : 0,\n      });\n      this.subPpenId = this.subPpenId === ids ? null : ids;\n    },\n  },\n};\n",null]}