{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/echarts/echarts.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/echarts/echarts.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _slicedToArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { colorMap, getHex, myStorage, fixD, nul } from '@/utils';\nexport default {\n  name: 'chartsDepth',\n  components: {},\n  props: {\n    chartType: {\n      default: 0,\n      type: Number\n    }\n  },\n  watch: {\n    chartType: function chartType(val) {\n      if (val === 2) {\n        this.intervalGetdata();\n        this.eachart();\n      } else {\n        clearInterval(this.intervalData);\n        this.intervalData = null;\n      }\n    },\n    contractId: function contractId(val) {\n      if (val && this.chartType === 2) {\n        this.getData();\n      }\n    },\n    coUnitType: function coUnitType(val) {\n      if (val && this.chartType === 2) {\n        this.getData();\n      }\n    }\n  },\n  data: function data() {\n    return {\n      symbolCurrent: myStorage.get('sSymbolName'),\n      isshowLoading: true,\n      myEcharts: null,\n      loading: true,\n      destory: false,\n      echartsData: {\n        minval: 0,\n        maxval: 0,\n        buysArr: [],\n        asksArr: []\n      },\n      styleObject: {\n        height: '450px'\n      },\n      interval: 5000,\n      intervalData: null,\n      deptValue: 8\n    };\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      this.$bus.$on('WINFOW_ON_RESIIZE', function () {\n        if (_this.myEcharts) {\n          _this.myEcharts.resize();\n        }\n      });\n    },\n    intervalGetdata: function intervalGetdata() {\n      var _this2 = this;\n\n      this.getData(true);\n      clearInterval(this.intervalData);\n      this.intervalData = setInterval(function () {\n        _this2.getData();\n      }, this.interval);\n    },\n    getData: function getData(first) {\n      var _this3 = this;\n\n      this.axios({\n        url: this.$store.state.url.futures.depthMap,\n        hostType: 'co',\n        params: {\n          contractId: this.contractId\n        }\n      }).then(function (data) {\n        if (first) {\n          _this3.loading = false;\n        }\n\n        if (data.code && data.code.toString() === '0') {\n          if (data.data && data.data.buys && data.data.buys.length) {\n            var bl = data.data.buys.length;\n            var lasteData = data.data.buys[bl - 1];\n\n            var _lasteData = _slicedToArray(lasteData, 1);\n\n            _this3.echartsData.minval = _lasteData[0];\n            var buysArr = [];\n            data.data.buys.forEach(function (item) {\n              buysArr.push([item[0], _this3.setNumber(item[2])]);\n            });\n            _this3.echartsData.buysArr = buysArr.reverse();\n          } else {\n            _this3.echartsData.buysArr = [];\n          }\n\n          if (data.data && data.data.asks && data.data.asks.length) {\n            var sl = data.data.asks.length;\n            var lasteAsks = data.data.asks[sl - 1];\n\n            var _lasteAsks = _slicedToArray(lasteAsks, 1);\n\n            _this3.echartsData.maxval = _lasteAsks[0];\n            _this3.echartsData.asksArr = [];\n            data.data.asks.forEach(function (item) {\n              _this3.echartsData.asksArr.push([item[0], _this3.setNumber(item[2])]);\n            });\n          } else {\n            _this3.echartsData.asksArr = [];\n          }\n\n          _this3.eachart();\n        } else {\n          _this3.clearData();\n        }\n      });\n    },\n    setNumber: function setNumber(volume) {\n      if (this.coUnitType === 1) {\n        return fixD(nul(volume, this.multiplier), this.volfix);\n      }\n\n      return volume;\n    },\n    clearData: function clearData() {\n      this.echartsData = {\n        minval: 0,\n        maxval: 0,\n        yminval: 0,\n        ymaxval: 0,\n        buysArr: [],\n        asksArr: []\n      };\n      this.eachart();\n    },\n    eachart: function eachart() {\n      if (this.destory) {\n        return;\n      }\n\n      if (this.myEcharts) {\n        this.myEcharts.dispose(this.myEcharts);\n      }\n\n      this.initEachart();\n      var data = JSON.parse(JSON.stringify(this.echartsData));\n      this.myEcharts.resize();\n      this.isshowLoading = false;\n      var series = [];\n      series = [_objectSpread(_objectSpread({}, this.seriesTypes.buy), {}, {\n        data: data.buysArr,\n        type: 'line'\n      }), _objectSpread(_objectSpread({}, this.seriesTypes.ask), {}, {\n        data: data.asksArr,\n        type: 'line'\n      })];\n      this.myEcharts.setOption({\n        xAxis: [{\n          min: data.minval,\n          max: data.maxval\n        }],\n        series: series\n      });\n    },\n    initEachart: function initEachart() {\n      var self = this; // 基于准备好的dom，初始化echarts实例\n\n      this.myEcharts = window.echarts.init(document.getElementById('myEcharts')); // 绘制图表\n\n      this.myEcharts.setOption({\n        animation: false,\n        tooltip: {\n          trigger: 'axis',\n          // 不限时弹层\n          axisPointer: {\n            // 显示随手指移动的刻度线\n            type: 'cross',\n            crossStyle: {\n              width: 2,\n              color: getHex(colorMap['b-2-cl']),\n              type: 'cross'\n            }\n          }\n        },\n        grid: {\n          show: true,\n          borderWidth: 0,\n          borderColor: getHex(colorMap['a-3-bd']),\n          containLabel: true,\n          left: 5,\n          top: 40,\n          right: 5,\n          bottom: 0\n        },\n        xAxis: {\n          type: 'value',\n          axisPointer: {\n            show: true,\n            type: 'line',\n            lineStyle: {\n              color: getHex(colorMap['b-2-cl']),\n              width: 2,\n              type: 'dotted'\n            }\n          },\n          axisLine: {\n            show: true,\n            lineStyle: {\n              width: 1,\n              color: getHex(colorMap['a-3-bd'])\n            }\n          },\n          axisTick: {\n            lineStyle: {\n              color: getHex(colorMap['a-3-bd'])\n            }\n          },\n          axisLabel: {\n            color: getHex(colorMap['b-2-cl']),\n            showMaxLabel: false,\n            showMinLabel: false,\n            formatter: function name(value) {\n              return value.toFixed(self.pricefix);\n            }\n          },\n          splitLine: {\n            lineStyle: {\n              width: 1,\n              color: getHex(colorMap['a-3-bd'])\n            }\n          }\n        },\n        yAxis: [{\n          min: 'dataMin',\n          type: 'value',\n          axisLine: {\n            show: true,\n            lineStyle: {\n              width: 1,\n              color: getHex(colorMap['a-3-bd'])\n            }\n          },\n          axisTick: {\n            lineStyle: {\n              color: getHex(colorMap['a-3-bd'])\n            }\n          },\n          axisLabel: {\n            color: getHex(colorMap['b-2-cl'])\n          },\n          splitLine: {\n            lineStyle: {\n              width: 1,\n              color: getHex(colorMap['a-3-bd'])\n            }\n          }\n        }]\n      });\n    }\n  },\n  computed: {\n    // 当前合约币对\n    contractId: function contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 合约币对价格精度\n    pricefix: function pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    // 数量单位类型Number(1标的货币 2张)\n    coUnitType: function coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 当前合约面值\n    multiplier: function multiplier() {\n      return Number(this.$store.state.future.multiplier) || 1;\n    },\n    // 当前合约数量精度\n    volfix: function volfix() {\n      if (this.coUnitType === 1) {\n        return this.$store.state.future.volfix;\n      }\n\n      return 0;\n    },\n    seriesTypes: function seriesTypes() {\n      var buy = {\n        type: 'line',\n        symbol: 'none',\n        itemStyle: {\n          normal: {\n            color: colorMap['a-18-bg']\n          }\n        },\n        lineStyle: {\n          normal: {\n            color: colorMap['a-18-bg'],\n            width: 2\n          }\n        },\n        areaStyle: {\n          normal: {\n            color: new window.echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: colorMap['a-18-bg']\n            }, {\n              offset: 1,\n              color: colorMap['u-2-bg']\n            }])\n          }\n        },\n        data: []\n      };\n      var ask = {\n        type: 'line',\n        symbol: 'none',\n        lineStyle: {\n          normal: {\n            color: colorMap['a-19-bg'],\n            width: 2\n          }\n        },\n        itemStyle: {\n          normal: {\n            color: colorMap['a-19-bg']\n          }\n        },\n        areaStyle: {\n          normal: {\n            color: new window.echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n              offset: 0,\n              color: colorMap['a-19-bg']\n            }, {\n              offset: 1,\n              color: colorMap['u-5-bg']\n            }])\n          }\n        },\n        data: []\n      };\n\n      var autoBuy = _objectSpread(_objectSpread({}, buy), {}, {\n        lineStyle: {\n          normal: {\n            width: 0\n          }\n        }\n      });\n\n      var autoAsk = _objectSpread(_objectSpread({}, ask), {}, {\n        lineStyle: {\n          normal: {\n            width: 0\n          }\n        }\n      });\n\n      return {\n        buy: buy,\n        ask: ask,\n        autoBuy: autoBuy,\n        autoAsk: autoAsk\n      };\n    } // // 全部币对列表\n    // symbolAll() {\n    //   return this.$store.state.baseData.symbolAll;\n    // },\n    // // 当前币对精度计算的值\n    // fixValue() {\n    //   if (this.symbolAll && this.symbolCurrent) {\n    //     const symbol = this.symbolAll[this.symbolCurrent];\n    //     return {\n    //       priceFix: symbol.price,\n    //       volumeFix: symbol.volume,\n    //     };\n    //   }\n    //   return {\n    //     priceFix: 2,\n    //     volumeFix: 8,\n    //   };\n    // },\n\n  },\n  destroyed: function destroyed() {\n    this.$bus.$off('SYMBOL_CURRENT');\n    this.$bus.$off('WINFOW_ON_RESIIZE');\n    this.$bus.$off('DEPTH_VALUE');\n    clearInterval(this.intervalData);\n    this.intervalData = null;\n    this.destory = true;\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/modules/coTrade/echarts/echarts.js"],"names":["colorMap","getHex","myStorage","fixD","nul","name","components","props","chartType","default","type","Number","watch","val","intervalGetdata","eachart","clearInterval","intervalData","contractId","getData","coUnitType","data","symbolCurrent","get","isshowLoading","myEcharts","loading","destory","echartsData","minval","maxval","buysArr","asksArr","styleObject","height","interval","deptValue","methods","init","$bus","$on","resize","setInterval","first","axios","url","$store","state","futures","depthMap","hostType","params","then","code","toString","buys","length","bl","lasteData","forEach","item","push","setNumber","reverse","asks","sl","lasteAsks","clearData","volume","multiplier","volfix","yminval","ymaxval","dispose","initEachart","JSON","parse","stringify","series","seriesTypes","buy","ask","setOption","xAxis","min","max","self","window","echarts","document","getElementById","animation","tooltip","trigger","axisPointer","crossStyle","width","color","grid","show","borderWidth","borderColor","containLabel","left","top","right","bottom","lineStyle","axisLine","axisTick","axisLabel","showMaxLabel","showMinLabel","formatter","value","toFixed","pricefix","splitLine","yAxis","computed","future","symbol","itemStyle","normal","areaStyle","graphic","LinearGradient","offset","autoBuy","autoAsk","destroyed","$off"],"mappings":"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","sourcesContent":["import {\n  colorMap, getHex, myStorage, fixD, nul,\n} from '@/utils';\n\nexport default {\n  name: 'chartsDepth',\n  components: {},\n  props: {\n    chartType: { default: 0, type: Number },\n  },\n  watch: {\n    chartType(val) {\n      if (val === 2) {\n        this.intervalGetdata();\n        this.eachart();\n      } else {\n        clearInterval(this.intervalData);\n        this.intervalData = null;\n      }\n    },\n    contractId(val) {\n      if (val && this.chartType === 2) {\n        this.getData();\n      }\n    },\n    coUnitType(val) {\n      if (val && this.chartType === 2) {\n        this.getData();\n      }\n    },\n  },\n  data() {\n    return {\n      symbolCurrent: myStorage.get('sSymbolName'),\n      isshowLoading: true,\n      myEcharts: null,\n      loading: true,\n      destory: false,\n      echartsData: {\n        minval: 0,\n        maxval: 0,\n        buysArr: [],\n        asksArr: [],\n      },\n      styleObject: {\n        height: '450px',\n      },\n      interval: 5000,\n      intervalData: null,\n      deptValue: 8,\n    };\n  },\n  methods: {\n    init() {\n      this.$bus.$on('WINFOW_ON_RESIIZE', () => {\n        if (this.myEcharts) {\n          this.myEcharts.resize();\n        }\n      });\n    },\n    intervalGetdata() {\n      this.getData(true);\n      clearInterval(this.intervalData);\n      this.intervalData = setInterval(() => {\n        this.getData();\n      }, this.interval);\n    },\n    getData(first) {\n      this.axios({\n        url: this.$store.state.url.futures.depthMap,\n        hostType: 'co',\n        params: {\n          contractId: this.contractId,\n        },\n      }).then((data) => {\n        if (first) {\n          this.loading = false;\n        }\n        if (data.code && data.code.toString() === '0') {\n          if (data.data && data.data.buys && data.data.buys.length) {\n            const bl = data.data.buys.length;\n            const lasteData = data.data.buys[bl - 1];\n            [this.echartsData.minval] = lasteData;\n            const buysArr = [];\n            data.data.buys.forEach((item) => {\n              buysArr.push([item[0], this.setNumber(item[2])]);\n            });\n            this.echartsData.buysArr = buysArr.reverse();\n          } else {\n            this.echartsData.buysArr = [];\n          }\n          if (data.data && data.data.asks && data.data.asks.length) {\n            const sl = data.data.asks.length;\n            const lasteAsks = data.data.asks[sl - 1];\n            [this.echartsData.maxval] = lasteAsks;\n            this.echartsData.asksArr = [];\n            data.data.asks.forEach((item) => {\n              this.echartsData.asksArr.push([item[0], this.setNumber(item[2])]);\n            });\n          } else {\n            this.echartsData.asksArr = [];\n          }\n          this.eachart();\n        } else {\n          this.clearData();\n        }\n      });\n    },\n    setNumber(volume) {\n      if (this.coUnitType === 1) {\n        return fixD(nul(volume, this.multiplier), this.volfix);\n      }\n      return volume;\n    },\n    clearData() {\n      this.echartsData = {\n        minval: 0,\n        maxval: 0,\n        yminval: 0,\n        ymaxval: 0,\n        buysArr: [],\n        asksArr: [],\n      };\n      this.eachart();\n    },\n    eachart() {\n      if (this.destory) {\n        return;\n      }\n      if (this.myEcharts) {\n        this.myEcharts.dispose(this.myEcharts);\n      }\n      this.initEachart();\n      const data = JSON.parse(JSON.stringify(this.echartsData));\n      this.myEcharts.resize();\n      this.isshowLoading = false;\n      let series = [];\n      series = [\n        {\n          ...this.seriesTypes.buy,\n          data: data.buysArr,\n          type: 'line',\n        },\n        {\n          ...this.seriesTypes.ask,\n          data: data.asksArr,\n          type: 'line',\n        },\n      ];\n      this.myEcharts.setOption({\n        xAxis: [\n          {\n            min: data.minval,\n            max: data.maxval,\n          },\n        ],\n        series,\n      });\n    },\n    initEachart() {\n      const self = this;\n      // 基于准备好的dom，初始化echarts实例\n      this.myEcharts = window.echarts.init(document.getElementById('myEcharts'));\n      // 绘制图表\n      this.myEcharts.setOption({\n        animation: false,\n        tooltip: {\n          trigger: 'axis', // 不限时弹层\n          axisPointer: { // 显示随手指移动的刻度线\n            type: 'cross',\n            crossStyle: {\n              width: 2,\n              color: getHex(colorMap['b-2-cl']),\n              type: 'cross',\n            },\n          },\n        },\n        grid: {\n          show: true,\n          borderWidth: 0,\n          borderColor: getHex(colorMap['a-3-bd']),\n          containLabel: true,\n          left: 5,\n          top: 40,\n          right: 5,\n          bottom: 0,\n        },\n        xAxis: {\n          type: 'value',\n          axisPointer: {\n            show: true,\n            type: 'line',\n            lineStyle: {\n              color: getHex(colorMap['b-2-cl']),\n              width: 2,\n              type: 'dotted',\n            },\n          },\n          axisLine: {\n            show: true,\n            lineStyle: {\n              width: 1,\n              color: getHex(colorMap['a-3-bd']),\n            },\n          },\n          axisTick: {\n            lineStyle: {\n              color: getHex(colorMap['a-3-bd']),\n            },\n          },\n          axisLabel: {\n            color: getHex(colorMap['b-2-cl']),\n            showMaxLabel: false,\n            showMinLabel: false,\n            formatter: function name(value) {\n              return value.toFixed(self.pricefix);\n            },\n          },\n          splitLine: {\n            lineStyle: {\n              width: 1,\n              color: getHex(colorMap['a-3-bd']),\n            },\n          },\n        },\n        yAxis: [\n          {\n            min: 'dataMin',\n            type: 'value',\n            axisLine: {\n              show: true,\n              lineStyle: {\n                width: 1,\n                color: getHex(colorMap['a-3-bd']),\n              },\n            },\n            axisTick: {\n              lineStyle: {\n                color: getHex(colorMap['a-3-bd']),\n              },\n            },\n            axisLabel: {\n              color: getHex(colorMap['b-2-cl']),\n            },\n            splitLine: {\n              lineStyle: {\n                width: 1,\n                color: getHex(colorMap['a-3-bd']),\n              },\n            },\n          },\n        ],\n      });\n    },\n  },\n  computed: {\n    // 当前合约币对\n    contractId() {\n      return this.$store.state.future.contractId;\n    },\n    // 合约币对价格精度\n    pricefix() {\n      return this.$store.state.future.pricefix;\n    },\n    // 数量单位类型Number(1标的货币 2张)\n    coUnitType() {\n      return this.$store.state.future.coUnitType;\n    },\n    // 当前合约面值\n    multiplier() {\n      return Number(this.$store.state.future.multiplier) || 1;\n    },\n    // 当前合约数量精度\n    volfix() {\n      if (this.coUnitType === 1) {\n        return this.$store.state.future.volfix;\n      }\n      return 0;\n    },\n    seriesTypes() {\n      const buy = {\n        type: 'line',\n        symbol: 'none',\n        itemStyle: {\n          normal: {\n            color: colorMap['a-18-bg'],\n          },\n        },\n        lineStyle: {\n          normal: {\n            color: colorMap['a-18-bg'],\n            width: 2,\n          },\n        },\n        areaStyle: {\n          normal: {\n            color: new window.echarts.graphic.LinearGradient(\n              0, 0, 0, 1,\n              [\n                { offset: 0, color: colorMap['a-18-bg'] },\n                { offset: 1, color: colorMap['u-2-bg'] },\n              ],\n            ),\n          },\n        },\n        data: [],\n      };\n      const ask = {\n        type: 'line',\n        symbol: 'none',\n        lineStyle: {\n          normal: {\n            color: colorMap['a-19-bg'],\n            width: 2,\n          },\n        },\n        itemStyle: {\n          normal: {\n            color: colorMap['a-19-bg'],\n          },\n        },\n        areaStyle: {\n          normal: {\n            color: new window.echarts.graphic.LinearGradient(\n              0, 0, 0, 1,\n              [\n                { offset: 0, color: colorMap['a-19-bg'] },\n                { offset: 1, color: colorMap['u-5-bg'] },\n              ],\n            ),\n          },\n        },\n        data: [],\n      };\n      const autoBuy = {\n        ...buy,\n        lineStyle: {\n          normal: {\n            width: 0,\n          },\n        },\n      };\n      const autoAsk = {\n        ...ask,\n        lineStyle: {\n          normal: {\n            width: 0,\n          },\n        },\n      };\n      return {\n        buy,\n        ask,\n        autoBuy,\n        autoAsk,\n      };\n    },\n    // // 全部币对列表\n    // symbolAll() {\n    //   return this.$store.state.baseData.symbolAll;\n    // },\n    // // 当前币对精度计算的值\n    // fixValue() {\n    //   if (this.symbolAll && this.symbolCurrent) {\n    //     const symbol = this.symbolAll[this.symbolCurrent];\n    //     return {\n    //       priceFix: symbol.price,\n    //       volumeFix: symbol.volume,\n    //     };\n    //   }\n    //   return {\n    //     priceFix: 2,\n    //     volumeFix: 8,\n    //   };\n    // },\n  },\n  destroyed() {\n    this.$bus.$off('SYMBOL_CURRENT');\n    this.$bus.$off('WINFOW_ON_RESIIZE');\n    this.$bus.$off('DEPTH_VALUE');\n    clearInterval(this.intervalData);\n    this.intervalData = null;\n    this.destory = true;\n  },\n};\n"]}]}