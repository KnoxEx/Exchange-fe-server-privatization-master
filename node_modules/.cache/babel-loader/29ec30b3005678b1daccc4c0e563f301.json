{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAddressMent/b2cAddressMent.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cAddressMent/b2cAddressMent.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { imgMap, colorMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      colorMap: colorMap,\n      delFlag: false,\n      confirmLoading: false,\n      tabelLoading: true,\n      dialogConfirmLoading: false,\n      // 弹窗按钮确认loading状态\n      tableList: [],\n      dialogStatus: '',\n      // 弹窗状态 add 为增加 del 为删除\n      deleteObj: {},\n      // 删除的地址 对象\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      bankObj: {},\n      delId: ''\n    };\n  },\n  computed: {\n    paginationObjCurrentPage: function paginationObjCurrentPage() {\n      return this.paginationObj.currentPage;\n    },\n    enforceGoogleAuth: function enforceGoogleAuth() {\n      return this.$store.state.baseData.is_enforce_google_auth || 0;\n    },\n    // 表格title\n    columns: function columns() {\n      return [{\n        title: this.$t('assets.addressMent.listCoin'),\n        width: '15%'\n      }, // 币种\n      {\n        title: this.$t('assets.b2c.payType'),\n        width: '15%'\n      }, // 支付方式\n      {\n        title: this.$t('assets.b2c.address'),\n        width: '20%'\n      }, // 账户\n      {\n        title: this.$t('assets.b2c.addressUserName'),\n        width: '20%'\n      }, // 收款人\n      {\n        title: this.$t('assets.addressMent.listOptions'),\n        width: '30%'\n      } // 操作\n      ];\n    },\n    // 用户是否开启手机\n    OpenMobile: function OpenMobile() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.isOpenMobileCheck.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // 用户是否开启谷歌\n    OpenGoogle: function OpenGoogle() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.googleStatus.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // phoneValue 是否复合正则验证\n    phoneValueFlag: function phoneValueFlag() {\n      return this.$store.state.regExp.verification.test(this.phoneValue);\n    },\n    // googleValue 是否复合正则验证\n    googleValueFlag: function googleValueFlag() {\n      return this.$store.state.regExp.verification.test(this.googleValue);\n    },\n    phoneError: function phoneError() {\n      if (this.phoneValue.length !== 0 && !this.phoneValueFlag) return true;\n      return false;\n    },\n    googleError: function googleError() {\n      if (this.googleValue.length !== 0 && !this.googleValueFlag) return true;\n      return false;\n    },\n    // 弹窗确认按钮disabled\n    dialogConfirmDisabled: function dialogConfirmDisabled() {\n      var phone = true;\n      var google = true;\n\n      if (this.OpenMobile) {\n        phone = this.phoneValueFlag;\n      }\n\n      if (this.OpenGoogle) {\n        google = this.googleValueFlag;\n      }\n\n      if (phone && google || this.dialogConfirmLoading) {\n        return false;\n      }\n\n      return true;\n    }\n  },\n  watch: {\n    paginationObjCurrentPage: function paginationObjCurrentPage() {\n      this.getTableList();\n    }\n  },\n  methods: {\n    init: function init() {\n      // 如果没有 finance/account_balance 接口返回成功的数据\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/b2cAccount');\n        return;\n      }\n\n      this.getBankList();\n    },\n    delClose: function delClose() {\n      this.delFlag = false;\n    },\n    delConfirm: function delConfirm() {\n      var _this = this;\n\n      this.confirmLoading = true;\n      this.axios({\n        url: '/user/bank/delete',\n        params: {\n          id: this.delId\n        }\n      }).then(function (data) {\n        _this.confirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this.paginationObj.currentPage = 1;\n\n          _this.getTableList();\n\n          _this.delFlag = false;\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    getBankList: function getBankList() {\n      var _this2 = this;\n\n      this.axios({\n        url: '/bank/all',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var obj = {};\n          data.data.forEach(function (item) {\n            obj[item.bankNo.toString()] = item.accountName;\n          });\n          _this2.bankObj = obj;\n\n          _this2.getTableList();\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n    },\n    addressBtnClick: function addressBtnClick() {\n      this.$router.push(\"/assets/b2cAdd?symbol=\".concat(this.symbol, \"&type=add\"));\n    },\n    tableClick: function tableClick(type, id) {\n      if (type === 'del') {\n        this.delId = id;\n        this.delFlag = true; // let even = {};\n        // this.tableList.forEach((item) => {\n        //   if (item.id === id) {\n        //     even = item;\n        //   }\n        // });\n        // this.deleteObj = even;\n        // this.dialogStatus = 'del';\n      }\n\n      if (type === 'set') {\n        this.$router.push(\"/assets/b2cAdd?symbol=\".concat(this.symbol, \"&type=set&id=\").concat(id));\n      }\n    },\n    getTableList: function getTableList() {\n      var _this3 = this;\n\n      this.axios({\n        url: 'user/bank/user_bank_list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var list = [];\n          data.data.list.forEach(function (item) {\n            list.push({\n              id: item.id,\n              data: [item.symbol, _this3.$t('assets.b2c.bankCard'), // '银行卡',\n              _this3.bankObj[item.bankNo], item.name, [// 编辑\n              {\n                type: 'button',\n                // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n                text: _this3.$t('assets.b2c.set'),\n                // 编辑\n                iconClass: [''],\n                eventType: 'set'\n              }, {\n                type: 'button',\n                // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n                text: _this3.$t('assets.addressMent.delete'),\n                // 删除\n                iconClass: [''],\n                eventType: 'del'\n              }]]\n            });\n          });\n          _this3.tabelLoading = false;\n          _this3.tableList = list;\n          _this3.paginationObj.total = data.data.count;\n        }\n      });\n    }\n  }\n};",null]}