{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/api/http/axios.js","dependencies":[{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/api/http/axios.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.regexp.to-string\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport axios from 'axios';\nimport { getCookie, logImg } from '@/utils';\nimport bus from \"../bus\";\nvar ignoreCode = {\n  10002: true,\n  10003: true,\n  10004: true,\n  10005: true,\n  10006: true,\n  10007: true,\n  10008: true,\n  10009: true,\n  10010: true,\n  10011: true,\n  10012: true,\n  10013: true,\n  10014: true,\n  10015: true,\n  10016: true,\n  10017: true,\n  10018: true,\n  10019: true,\n  10020: true,\n  10021: true,\n  10022: true,\n  10023: true,\n  10024: true,\n  10025: true,\n  10026: true,\n  10027: true,\n  10028: true,\n  10029: true,\n  10030: true,\n  10031: true,\n  10032: true,\n  10033: true,\n  10034: true,\n  10035: true,\n  10036: true,\n  10037: true,\n  10038: true,\n  10039: true,\n  10040: true,\n  10041: true,\n  10043: true,\n  10044: true,\n  10045: true,\n  10046: true,\n  10047: true,\n  10048: true,\n  10049: true,\n  10050: true,\n  10051: true,\n  10052: true,\n  10053: true,\n  10054: true,\n  10055: true,\n  10056: true,\n  10057: true,\n  10058: true,\n  10059: true,\n  10060: true,\n  10061: true,\n  10062: true,\n  10063: true,\n  10065: true,\n  10066: true,\n  10067: true,\n  10068: true,\n  10069: true,\n  10070: true,\n  10071: true,\n  10072: true,\n  10073: true,\n  10074: true,\n  10075: true,\n  10076: true,\n  10077: true,\n  10078: true,\n  10079: true,\n  10080: true,\n  10081: true,\n  10086: true,\n  10087: true,\n  10088: true,\n  10089: true,\n  10090: true,\n  10091: true,\n  10092: true,\n  10093: true,\n  10094: true,\n  10095: true,\n  10096: true,\n  10097: true,\n  10098: true,\n  10099: true,\n  10100: true,\n  10101: true,\n  10102: true,\n  10103: true,\n  10104: true,\n  10200: true,\n  10201: true,\n  10202: true,\n  10203: true,\n  10204: true,\n  10205: true,\n  11001: true,\n  101114: true,\n  10042: true,\n  10064: true,\n  0: true\n}; // import md5 from 'js-md5'\n\nvar formatTime = function formatTime(dateTime) {\n  var date = new Date(dateTime);\n  var year = date.getFullYear();\n  var month = date.getMonth() + 1;\n  var day = date.getDate();\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var seconds = date.getSeconds();\n\n  function s(t) {\n    return t < 10 ? \"0\".concat(t) : t;\n  }\n\n  return \"\".concat(year, \"-\").concat(s(month), \"-\").concat(s(day), \" \").concat(s(hours), \":\").concat(s(minutes), \":\").concat(s(seconds));\n}; // 参数\n\n\nvar formatParams = function formatParams() {\n  var acParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var data;\n  var _window$secur = window.secur,\n      org = _window$secur.org,\n      device = _window$secur.device,\n      language = _window$secur.language,\n      platform = _window$secur.platform,\n      timezone = _window$secur.timezone,\n      adblock = _window$secur.adblock,\n      userAgent = _window$secur.userAgent,\n      plugins = _window$secur.plugins,\n      sessionStorage = _window$secur.sessionStorage,\n      localStorage = _window$secur.localStorage,\n      indexedDb = _window$secur.indexedDb,\n      touchSupport = _window$secur.touchSupport,\n      fonts = _window$secur.fonts,\n      availableScreenResolution = _window$secur.availableScreenResolution,\n      screenResolution = _window$secur.screenResolution;\n  var infoOrg = org;\n\n  if (process.env.NODE_ENV === 'development') {\n    infoOrg = 'www.fe.com';\n  }\n\n  var securityInfo = JSON.stringify({\n    id: '',\n    org: infoOrg,\n    timestamp: formatTime(new Date().getTime()),\n    userAgent: userAgent,\n    availableScreenResolution: availableScreenResolution,\n    screenResolution: screenResolution,\n    touchSupport: touchSupport,\n    sessionStorage: sessionStorage,\n    localStorage: localStorage,\n    indexedDb: indexedDb,\n    plugins: plugins,\n    fonts: fonts,\n    adblock: adblock,\n    client_type: '',\n    identity: '',\n    device: device,\n    ip: '',\n    ip2region: '',\n    language: language,\n    platform: platform,\n    browser: '',\n    browser_version: '',\n    os: '',\n    os_version: '',\n    resolution: '',\n    timezone: timezone,\n    ctime: '',\n    mtime: ''\n  });\n\n  if (Object.prototype.toString.call(acParams) === '[object FormData]') {\n    acParams.append('uaTime', formatTime(new Date().getTime()));\n    acParams.append('securityInfo', securityInfo);\n    data = acParams;\n  } else {\n    data = _objectSpread({}, acParams);\n    data.uaTime = formatTime(new Date().getTime());\n    data.securityInfo = securityInfo;\n  }\n\n  return data;\n}; // 请求头\n\n\nvar formatHeaders = function formatHeaders(acHeaders) {\n  var headers = {};\n  headers['exchange-token'] = getCookie('token') || 'c5fa97c1140aafea1ef1e84b67503d5e0db18d0ca0ff4819a0ca3f24722407df';\n  headers['exchange-client'] = 'pc';\n  headers['exchange-language'] = getCookie('lan') || 'zh_CN'; // headers['Content-type'] = 'application/x-www-form-urlencoded'\n  // headers['exchange-time'] = formatTime(new Date().getTime())\n\n  if (acHeaders) {\n    headers = _objectSpread(_objectSpread({}, headers), acHeaders);\n  }\n\n  return headers;\n};\n\nvar request = function request(prefix, url, headers, params, method, hostType, resolve, reject) {\n  return axios({\n    url: \"\".concat(prefix).concat(url),\n    // exchange-web-api线上  vue-api本地\n    headers: formatHeaders(headers),\n    data: formatParams(params),\n    method: method || 'post'\n  }).then(function (data) {\n    if (typeof data.data.code !== 'undefined') {\n      if (data.data.code.toString() === '10002') {\n        bus.$emit('outUserIsLogin');\n      }\n\n      if (!ignoreCode[Number(data.data.code)]) {\n        logImg({\n          host: window.location.host,\n          type: 'webapi connect error',\n          path: window.location.href,\n          ds: '接口状态码非0',\n          api: url,\n          data: {\n            code: data.data.code,\n            msg: data.data.msg\n          },\n          t: new Date().getTime()\n        });\n      }\n    } else {\n      logImg({\n        host: window.location.host,\n        type: 'webapi connect error',\n        path: window.location.href,\n        ds: '接口没有返回错误码',\n        api: url,\n        data: data,\n        t: new Date().getTime()\n      });\n    }\n\n    resolve(data.data);\n  }).catch(function (err) {\n    logImg({\n      host: window.location.host,\n      type: 'webapi connect error',\n      path: window.location.href,\n      api: url,\n      ds: '接口不通错误',\n      t: new Date().getTime()\n    });\n    reject(err);\n    throw new Error(\"Error:\".concat(err));\n  });\n};\n\nvar http = function http(_ref) {\n  var url = _ref.url,\n      headers = _ref.headers,\n      params = _ref.params,\n      method = _ref.method,\n      hostType = _ref.hostType;\n  var prefix = '';\n\n  switch (hostType) {\n    case 'otc':\n      prefix = '/fe-otc-api/'; // 场外\n\n      break;\n\n    case 'co':\n      prefix = '/fe-co-api/'; // 合约\n\n      break;\n\n    case 'upload':\n      prefix = '/fe-upload-api/'; // 上传\n\n      break;\n\n    case 'financing':\n      prefix = '/fe-financing-api/'; // 场內\n\n      break;\n\n    case 'fe-increment-api':\n      prefix = '/fe-increment-api/'; // 增值业务板块\n\n      break;\n\n    case 'fe-cov2-api':\n      prefix = '/fe-cov2-api/'; // 合约\n\n      break;\n\n    case 'agent':\n      prefix = '/fe-agent-api/';\n      break;\n\n    case 'quant':\n      prefix = '/fe-quant-api/';\n      break;\n\n    case 'def':\n      prefix = '';\n      break;\n\n    default:\n      prefix = '/fe-ex-api/';\n    // 公共和交易所\n  }\n\n  return new Promise(function (resolve, reject) {\n    if (!window.secur) {\n      var msec = {\n        org: window.location.host,\n        server: '',\n        sendRemote: false\n      };\n      window.security.init(msec, function (info) {\n        window.secur = info;\n        request(prefix, url, headers, params, method, hostType, resolve, reject);\n      });\n    } else {\n      request(prefix, url, headers, params, method, hostType, resolve, reject);\n    }\n  });\n};\n\nexport default http;",null]}