{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/manageFinances/view/view.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/manageFinances/view/view.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { fixD, formatTime, fixInput, imgMap } from '@/utils';\nvar replaceStrMap = {\n  biki: 'Tokencan',\n  'www.biki.com': 'www.tokencan.net'\n};\nexport default {\n  name: 'InnovationList',\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      numberValue: '',\n      // 购买数量\n      alertFlag: false,\n      // 验证弹窗\n      alertFlagAuth: false,\n      // 实名弹窗\n      // bannerImg: null,\n      // bannerTitle: '',\n      nowType: 1,\n      errorFlag: false,\n      errorHave: false,\n      pageId: null,\n      pageData: {},\n      amount: '',\n      dialogFlag: false,\n      // 弹窗flag\n      dialogConfirmLoading: false,\n      // 用于弹窗按钮loading效果\n      checkValue: '',\n      // 验证码value\n      googleVlaue: '',\n      // 谷歌验证码\n      checkErrorText: '',\n      googleErrorText: '',\n      dbclick: true,\n      rate_type: '',\n      // 年化日化\n      interest_begin_time: '',\n      // 计息开始时间\n      interest_end_time: '',\n      // 到期退出时间\n      end_time: '',\n      // 项目截止时间\n      return_type: '',\n      // 还款方式\n      income: 0,\n      balance: null,\n      // 可用余额\n      secoundClick: true // 防止二次点击\n\n    };\n  },\n  watch: {\n    userInfoIsReady: function userInfoIsReady() {\n      this.alert();\n    },\n    income: function income(value) {\n      this.income = fixD(value, this.showPrecision(this.pageData.interest_symbol));\n    },\n    amount: function amount(value) {\n      this.amount = fixInput(value, this.showPrecision(this.pageData.symbol));\n      this.income = this.amount * this.pageData.rate / 100 / 365 * this.pageData.limit_day;\n    },\n    checkValue: function checkValue(value) {\n      this.checkValue = fixInput(value, 0);\n    },\n    googleVlaue: function googleVlaue(value) {\n      this.googleVlaue = fixInput(value, 0);\n    }\n  },\n  computed: {\n    coinList: function coinList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    templateLayoutType: function templateLayoutType() {\n      return Number(this.$store.state.baseData.templateLayoutType);\n    },\n    userInfoIsReady: function userInfoIsReady() {\n      return this.$store.state.baseData.userInfoIsReady;\n    },\n    // 用户是否实名\n    authLevel: function authLevel() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.authLevel.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // 用户是否开启手机\n    OpenMobile: function OpenMobile() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.isOpenMobileCheck.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    // 用户是否开启谷歌\n    OpenGoogle: function OpenGoogle() {\n      var flag = false;\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo && userInfo.googleStatus.toString() === '1') {\n        flag = true;\n      }\n\n      return flag;\n    },\n    alertData: function alertData() {\n      var arr = [// 绑定谷歌验证\n      {\n        text: this.$t('assets.withdraw.bindGoogle'),\n        flag: this.OpenGoogle\n      }, // 绑定手机验证\n      {\n        text: this.$t('assets.withdraw.bindPhone'),\n        flag: this.OpenMobile\n      }];\n      return arr;\n    },\n    promptText: function promptText() {\n      return this.$t('innov.numbre'); // '数量';\n    },\n    userInfo: function userInfo() {\n      if (this.$store.state.baseData.userInfo) {\n        return this.$store.state.baseData.userInfo;\n      }\n\n      return {};\n    },\n    numberOptions: function numberOptions() {\n      var obj = {\n        text: '',\n        // 错误提示文案\n        flag: null,\n        // 是否通过校验\n        error: null // 是否展示文案\n\n      };\n      var haveNum = parseFloat(this.pageData.balance) || 0; // 可用\n      // console.log(this.pageData.balance)\n\n      if (this.amount.length === 0 || parseFloat(this.amount) === 0) {\n        // 请输入购买数量\n        obj.text = this.$t('manageFinances.inputNumber');\n        obj.flag = false;\n        obj.error = false;\n        return obj;\n      }\n\n      if (parseFloat(this.amount) > haveNum) {\n        // 购买数量不得大于可用余额\n        obj.text = this.$t('manageFinances.buyNumMax');\n        obj.flag = false;\n        obj.error = true;\n        return obj;\n      }\n\n      obj.flag = true;\n      obj.error = false;\n      return obj;\n    },\n    btnDisabled: function btnDisabled() {\n      var flag = true;\n\n      if (this.numberOptions.flag) {\n        flag = false;\n      }\n\n      return flag;\n    }\n  },\n  methods: {\n    init: function init() {\n      this.pageId = this.$route.params.id;\n      this.getData();\n\n      if (this.userInfoIsReady) {\n        this.alert();\n      }\n    },\n    replaceStr: function replaceStr(str) {\n      return replaceStrMap[str.toLowerCase()];\n    },\n    alert: function alert() {\n      if (!this.authLevel) {\n        this.canAuthAlert();\n      } else {\n        this.canAlert();\n      }\n    },\n    canAlert: function canAlert() {\n      var _this = this;\n\n      if (this.OpenGoogle || this.OpenMobile) {\n        this.alertFlag = false;\n      } else {\n        setTimeout(function () {\n          _this.alertFlag = true;\n        }, 100);\n      }\n    },\n    canAuthAlert: function canAuthAlert() {\n      var _this2 = this;\n\n      if (this.authLevel) {\n        this.alertFlagAuth = false;\n      } else {\n        setTimeout(function () {\n          _this2.alertFlagAuth = true;\n        }, 100);\n      }\n    },\n    alertClone: function alertClone() {\n      this.alertFlag = false;\n    },\n    alertAuthClone: function alertAuthClone() {\n      this.alertFlagAuth = false;\n    },\n    alertGo: function alertGo() {\n      this.$router.push('/personal/userManagement');\n    },\n    alertAuthGo: function alertAuthGo() {\n      this.$router.push('/personal/idAuth');\n    },\n    fixDFun: function fixDFun(val, symbol) {\n      if (this.showPrecision(symbol)) {\n        return fixD(val, this.showPrecision(symbol));\n      }\n\n      return val;\n    },\n    showPrecision: function showPrecision(symbol) {\n      if (this.$store.state.baseData && this.$store.state.baseData.market && this.$store.state.baseData.market.coinList) {\n        var coinList = this.$store.state.baseData.market.coinList;\n\n        if (coinList[symbol]) {\n          var precision = coinList[symbol].showPrecision;\n\n          if (precision) {\n            return precision;\n          }\n        }\n      }\n\n      return 4;\n    },\n    submit: function submit() {\n      if (!this.authLevel) {\n        this.alertFlagAuth = true;\n        return;\n      }\n\n      if (!this.OpenGoogle && !this.OpenMobile) {\n        this.alertFlag = true;\n        return;\n      }\n\n      this.order();\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    formatTimeFn: function formatTimeFn(date) {\n      return formatTime(date);\n    },\n    goRecharge: function goRecharge(symbol) {\n      // console.log(symbol)\n      this.$router.push(\"/assets/recharge?symbol=\".concat(symbol));\n    },\n    getMore: function getMore() {\n      this.$router.push('/manageFinances');\n    },\n    // 请求数据\n    getData: function getData() {\n      var _this3 = this;\n\n      this.axios({\n        url: this.$store.state.url.common.financingDet,\n        params: {\n          id: this.pageId\n        },\n        hostType: 'financing',\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          _this3.pageData = data.data;\n\n          if (data.data.rate_type === 0) {\n            _this3.rate_type = _this3.$t('manageFinances.yearRate');\n          } else {\n            _this3.rate_type = _this3.$t('manageFinances.dayRate');\n          }\n\n          _this3.balance = fixD(data.data.balance, _this3.showPrecision(data.data.symbol));\n          _this3.end_time = formatTime(data.data.end_time);\n\n          if (data.data.interest_begin_type === 1) {\n            _this3.interest_begin_time = formatTime(data.data.user_interest_begin_time);\n            _this3.interest_end_time = formatTime(data.data.user_interest_end_time);\n          } else {\n            _this3.interest_begin_time = formatTime(data.data.interest_begin_time);\n            _this3.interest_end_time = formatTime(data.data.interest_end_time);\n          }\n\n          if (data.data.return_type === 1) {\n            _this3.return_type = _this3.$t('manageFinances.first');\n          } else {\n            _this3.return_type = _this3.$t('manageFinances.together');\n          } // this.bannerImg = data.data.banner;\n\n        }\n      });\n    },\n    // 下单\n    order: function order() {\n      var _this4 = this;\n\n      if (!this.secoundClick) {\n        return;\n      }\n\n      this.secoundClick = false;\n      this.axios({\n        url: this.$store.state.url.common.order,\n        params: {\n          id: this.pageData.id,\n          number: this.amount\n        },\n        hostType: 'financing',\n        method: 'post'\n      }).then(function (data) {\n        if (data.code === '0') {\n          window.location.href = data.data.payUrl;\n          _this4.secoundClick = true;\n        }\n      });\n    }\n  }\n};",null]}