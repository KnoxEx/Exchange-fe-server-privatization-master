{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/home/recommend/momo/momo.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/home/recommend/momo/momo.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.regexp.split\";\nimport _defineProperty from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { myStorage, colorMap } from '@/utils';\nexport default {\n  name: 'recommend',\n  data: function data() {\n    return {\n      // 滚动组件配置\n      ops: {\n        scrollPanel: {\n          speed: 400,\n          easing: 'easeOutQuad'\n        },\n        bar: {\n          size: 0\n        },\n        rail: {\n          size: 0\n        }\n      },\n      clientWidths: 0,\n      process: 0,\n      dataList: {},\n      klineDataList: {},\n      isScroll: false,\n      // true滚动 false剧中\n      scrollRG: 0,\n      // 滚动距离\n      timer: null,\n      liItemWidth: 300\n    };\n  },\n  computed: {\n    coinTagLangs: function coinTagLangs() {\n      return this.$store.state.baseData.coinTagLangs;\n    },\n    coinTagOpen: function coinTagOpen() {\n      return this.$store.state.baseData.coin_tag_open;\n    },\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 全部币种列表\n    coinList: function coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    },\n    ulStyle: function ulStyle() {\n      var obj = {\n        width: \"\".concat(this.boxWidth, \"px\")\n      };\n\n      if (this.isScroll) {\n        obj.marginLeft = \"\".concat(-1 * this.scrollRG, \"px\");\n      }\n\n      return obj;\n    },\n    itemWidth: function itemWidth() {\n      return this.headerSymbol.length * 300 - 20;\n    },\n    headerSymbol: function headerSymbol() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.headerSymbol;\n      }\n\n      return [];\n    },\n    boxWidth: function boxWidth() {\n      return 4 * this.liItemWidth;\n    },\n    evenDatas: function evenDatas() {\n      var _this = this;\n\n      var arr = [];\n\n      if (this.headerSymbol.length) {\n        this.headerSymbol.forEach(function (item) {\n          var obj = {\n            symbol: item,\n            // 币对\n            price: '--',\n            // 价格\n            volume: '--',\n            // 24H vol\n            roseVal: '--',\n            // 涨跌幅\n            roseCls: '' // 涨跌幅颜色\n\n          };\n\n          if (_this.dataList[item]) {\n            var data = _this.dataList[item];\n            obj.price = data.close ? data.close.data : '--';\n            obj.volume = data.vol;\n            obj.roseVal = data.rose ? data.rose.data : '--';\n            obj.roseCls = data.rose ? data.rose.class : '--';\n            obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\n            obj.coinLabel = data.symbol ? _this.getCoinLabel(data.symbol.symbol, _this.coinList) : '';\n          }\n\n          arr.push(obj);\n        });\n\n        if (this.isScroll) {\n          for (var i = 0; i < this.headerSymbol.length; i += 1) {\n            arr.push(arr[i]);\n          }\n        }\n      }\n\n      return arr;\n    }\n  },\n  watch: {\n    isScroll: function isScroll(v) {\n      if (v) {\n        this.scrollRG = 0;\n        this.start();\n      } else {\n        this.scrollRG = 0;\n        clearInterval(this.timer);\n      }\n    },\n    clientWidths: function clientWidths(v) {\n      if (v) {\n        var by = this.headerSymbol.length * this.liItemWidth; // 剧中\n\n        if (by <= v) {\n          this.isScroll = false; // 滚动\n        } else {\n          this.isScroll = false;\n        }\n      }\n    }\n  },\n  destroyed: function destroyed() {\n    this.$bus.$off('WINFOW_ON_RESIIZE');\n    this.$bus.$off('RECOMMEEND_DATA');\n    this.$bus.$off('RECOMMEEND_KLINE_DATA');\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  methods: {\n    getCoinLabel: function getCoinLabel(name) {\n      var coinList = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (coinList && coinList[name.toUpperCase()]) {\n        var _coinList$name$toUppe = coinList[name.toUpperCase()].coinTag,\n            coinTag = _coinList$name$toUppe === void 0 ? '' : _coinList$name$toUppe;\n        return coinTag ? this.coinTagLangs[coinTag] : '';\n      }\n\n      return '';\n    },\n    init: function init() {\n      var _this2 = this;\n\n      this.clientWidths = document.body.clientWidth;\n      this.$bus.$on('WINFOW_ON_RESIIZE', function () {\n        _this2.clientWidths = document.body.clientWidth;\n      }); // 监听 数据\n\n      this.$bus.$on('RECOMMEEND_DATA', function (data) {\n        var keys = Object.keys(data);\n        keys.forEach(function (item) {\n          var coinLabel = data[item] && data[item].symbol ? _this2.getCoinLabel(data[item].symbol.symbol, _this2.coinList) : '';\n\n          _this2.$set(_this2.dataList, item, _objectSpread(_objectSpread(_objectSpread({}, {}), data[item]), {\n            coinLabel: coinLabel\n          }));\n        });\n      });\n      this.$bus.$on('RECOMMEEND_KLINE_DATA', function (data) {\n        var keys = Object.keys(data);\n        keys.forEach(function (item) {\n          _this2.$set(_this2.klineDataList, item, data[item]);\n        });\n      });\n    },\n    symbolIcon: function symbolIcon(data) {\n      var coin = data.symbol.split('/')[0];\n      var iconImg = this.coinList[coin] ? this.coinList[coin].icon : '';\n      return iconImg;\n    },\n    enter: function enter() {\n      clearInterval(this.timer);\n    },\n    leave: function leave() {\n      this.start();\n    },\n    start: function start() {\n      var _this3 = this;\n\n      clearInterval(this.timer);\n      this.timer = setInterval(function () {\n        var sum = _this3.evenDatas.length * _this3.liItemWidth - _this3.clientWidths;\n        _this3.scrollRG += 1;\n\n        if (_this3.scrollRG > sum) {\n          // this.scrollRG = sum % this.liItemWidth\n          _this3.scrollRG = _this3.headerSymbol.length * _this3.liItemWidth - _this3.clientWidths;\n        }\n      }, 50);\n    },\n    handleScroll: function handleScroll(vertical, horizontal) {\n      this.process = horizontal.process;\n    },\n    scrollRecommend: function scrollRecommend(type) {\n      var num = this.clientWidths / 2;\n\n      if (type === 'prev') {\n        num = -num;\n      }\n\n      this.$refs.vs.scrollBy({\n        dx: num\n      });\n    },\n    bandLink: function bandLink(data) {\n      if (data) {\n        myStorage.set('sSymbolName', data);\n        myStorage.set('markTitle', data.split('/')[1]);\n      }\n\n      this.$router.push('/trade');\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/home/recommend/momo/momo.js"],"names":["myStorage","colorMap","name","data","ops","scrollPanel","speed","easing","bar","size","rail","clientWidths","process","dataList","klineDataList","isScroll","scrollRG","timer","liItemWidth","computed","coinTagLangs","$store","state","baseData","coinTagOpen","coin_tag_open","symbolAll","coinList","market","ulStyle","obj","width","boxWidth","marginLeft","itemWidth","headerSymbol","length","evenDatas","arr","forEach","item","symbol","price","volume","roseVal","roseCls","close","vol","rose","class","klineColor","coinLabel","getCoinLabel","push","i","watch","v","start","clearInterval","by","destroyed","$bus","$off","beforeDestroy","methods","toUpperCase","coinTag","init","document","body","clientWidth","$on","keys","Object","$set","symbolIcon","coin","split","iconImg","icon","enter","leave","setInterval","sum","handleScroll","vertical","horizontal","scrollRecommend","type","num","$refs","vs","scrollBy","dx","bandLink","set","$router"],"mappings":"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","sourcesContent":["import { myStorage, colorMap } from '@/utils';\r\n\r\nexport default {\r\n  name: 'recommend',\r\n  data() {\r\n    return {\r\n      // 滚动组件配置\r\n      ops: {\r\n        scrollPanel: {\r\n          speed: 400,\r\n          easing: 'easeOutQuad',\r\n        },\r\n        bar: {\r\n          size: 0,\r\n        },\r\n        rail: {\r\n          size: 0,\r\n        },\r\n      },\r\n      clientWidths: 0,\r\n      process: 0,\r\n      dataList: {},\r\n      klineDataList: {},\r\n      isScroll: false, // true滚动 false剧中\r\n      scrollRG: 0, // 滚动距离\r\n      timer: null,\r\n      liItemWidth: 300,\r\n    };\r\n  },\r\n  computed: {\r\n    coinTagLangs() {\r\n      return this.$store.state.baseData.coinTagLangs;\r\n    },\r\n    coinTagOpen() {\r\n      return this.$store.state.baseData.coin_tag_open;\r\n    },\r\n    symbolAll() {\r\n      return this.$store.state.baseData.symbolAll;\r\n    },\r\n    // 全部币种列表\r\n    coinList() {\r\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\r\n        return this.$store.state.baseData.market.coinList;\r\n      }\r\n      return null;\r\n    },\r\n    ulStyle() {\r\n      const obj = {\r\n        width: `${this.boxWidth}px`,\r\n      };\r\n      if (this.isScroll) {\r\n        obj.marginLeft = `${-1 * this.scrollRG}px`;\r\n      }\r\n      return obj;\r\n    },\r\n    itemWidth() {\r\n      return this.headerSymbol.length * 300 - 20;\r\n    },\r\n    headerSymbol() {\r\n      if (this.$store.state.baseData.market) {\r\n        return this.$store.state.baseData.market.headerSymbol;\r\n      }\r\n      return [];\r\n    },\r\n    boxWidth() {\r\n      return 4 * this.liItemWidth;\r\n    },\r\n    evenDatas() {\r\n      const arr = [];\r\n      if (this.headerSymbol.length) {\r\n        this.headerSymbol.forEach((item) => {\r\n          const obj = {\r\n            symbol: item, // 币对\r\n            price: '--', // 价格\r\n            volume: '--', // 24H vol\r\n            roseVal: '--', // 涨跌幅\r\n            roseCls: '', // 涨跌幅颜色\r\n          };\r\n          if (this.dataList[item]) {\r\n            const data = this.dataList[item];\r\n            obj.price = data.close ? data.close.data : '--';\r\n            obj.volume = data.vol;\r\n            obj.roseVal = data.rose ? data.rose.data : '--';\r\n            obj.roseCls = data.rose ? data.rose.class : '--';\r\n            obj.klineColor = data.rose ? colorMap[data.rose.class] : '';\r\n            obj.coinLabel = data.symbol ? this.getCoinLabel(data.symbol.symbol, this.coinList) : '';\r\n          }\r\n          arr.push(obj);\r\n        });\r\n        if (this.isScroll) {\r\n          for (let i = 0; i < this.headerSymbol.length; i += 1) {\r\n            arr.push(arr[i]);\r\n          }\r\n        }\r\n      }\r\n      return arr;\r\n    },\r\n  },\r\n  watch: {\r\n    isScroll(v) {\r\n      if (v) {\r\n        this.scrollRG = 0;\r\n        this.start();\r\n      } else {\r\n        this.scrollRG = 0;\r\n        clearInterval(this.timer);\r\n      }\r\n    },\r\n    clientWidths(v) {\r\n      if (v) {\r\n        const by = this.headerSymbol.length * this.liItemWidth;\r\n        // 剧中\r\n        if (by <= v) {\r\n          this.isScroll = false;\r\n        // 滚动\r\n        } else {\r\n          this.isScroll = false;\r\n        }\r\n      }\r\n    },\r\n  },\r\n  destroyed() {\r\n    this.$bus.$off('WINFOW_ON_RESIIZE');\r\n    this.$bus.$off('RECOMMEEND_DATA');\r\n    this.$bus.$off('RECOMMEEND_KLINE_DATA');\r\n  },\r\n  beforeDestroy() {\r\n    clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    getCoinLabel(name, coinList = {}) {\r\n      if (coinList && coinList[name.toUpperCase()]) {\r\n        const { coinTag = '' } = coinList[name.toUpperCase()];\r\n        return coinTag ? this.coinTagLangs[coinTag] : '';\r\n      }\r\n\r\n      return '';\r\n    },\r\n    init() {\r\n      this.clientWidths = document.body.clientWidth;\r\n      this.$bus.$on('WINFOW_ON_RESIIZE', () => {\r\n        this.clientWidths = document.body.clientWidth;\r\n      });\r\n      // 监听 数据\r\n      this.$bus.$on('RECOMMEEND_DATA', (data) => {\r\n        const keys = Object.keys(data);\r\n        keys.forEach((item) => {\r\n          const coinLabel = (data[item] && data[item].symbol)\r\n            ? this.getCoinLabel(data[item].symbol.symbol, this.coinList)\r\n            : '';\r\n          this.$set(this.dataList, item,\r\n            { ...{}, ...data[item], ...{ coinLabel } });\r\n        });\r\n      });\r\n      this.$bus.$on('RECOMMEEND_KLINE_DATA', (data) => {\r\n        const keys = Object.keys(data);\r\n        keys.forEach((item) => {\r\n          this.$set(this.klineDataList, item, data[item]);\r\n        });\r\n      });\r\n    },\r\n    symbolIcon(data) {\r\n      const coin = data.symbol.split('/')[0];\r\n      const iconImg = this.coinList[coin] ? this.coinList[coin].icon : '';\r\n      return iconImg;\r\n    },\r\n    enter() {\r\n      clearInterval(this.timer);\r\n    },\r\n    leave() {\r\n      this.start();\r\n    },\r\n    start() {\r\n      clearInterval(this.timer);\r\n      this.timer = setInterval(() => {\r\n        const sum = this.evenDatas.length * this.liItemWidth - this.clientWidths;\r\n        this.scrollRG += 1;\r\n        if (this.scrollRG > sum) {\r\n          // this.scrollRG = sum % this.liItemWidth\r\n          this.scrollRG = this.headerSymbol.length * this.liItemWidth - this.clientWidths;\r\n        }\r\n      }, 50);\r\n    },\r\n    handleScroll(vertical, horizontal) {\r\n      this.process = horizontal.process;\r\n    },\r\n    scrollRecommend(type) {\r\n      let num = this.clientWidths / 2;\r\n      if (type === 'prev') {\r\n        num = -num;\r\n      }\r\n      this.$refs.vs.scrollBy({\r\n        dx: num,\r\n      });\r\n    },\r\n    bandLink(data) {\r\n      if (data) {\r\n        myStorage.set('sSymbolName', data);\r\n        myStorage.set('markTitle', data.split('/')[1]);\r\n      }\r\n\r\n      this.$router.push('/trade');\r\n    },\r\n  },\r\n\r\n};\r\n"]}]}