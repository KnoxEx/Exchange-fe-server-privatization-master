{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/views/innovation/view.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/app/view/src/views/innovation/view.vue","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport mixin from 'blockchain-ui-privatization/PC/common-mixin/innovation/view/view';\nimport 'blockchain-ui-privatization/PC/common-mixin/innovation/view/view.styl';\n\nexport default {\n  mixins: [mixin],\n  mounted() {\n    this.init();\n  },\n  computed: {\n    submitDisabled() {\n      if (\n        this.pageData.status === 2 || this.pageData.status === 3\n      ) {\n        return false;\n      }\n      return true;\n    },\n    isLogin() {\n      if (this.$store.state.baseData.isLogin) {\n        return this.$store.state.baseData.isLogin;\n      }\n      return false;\n    },\n    // 二次确认按钮是否开启\n    confirmBtnFlag() {\n      if (this.googleStatus === 1) {\n        if (this.googleErrorFlag || this.googleVlaue.length === 0) {\n          return true;\n        }\n      }\n      if (this.isOpenMobileCheck === 1) {\n        if (this.checkValue.length === 0 || this.checkErrorFlag) {\n          return true;\n        }\n      }\n      if (this.isOpenMobileCheck !== 1 && this.emailAuthOpen) {\n        if (this.emailCheckValue.length === 0 || this.checkEmailErrorFlag) {\n          return true;\n        }\n      }\n      return false;\n    },\n  },\n  methods: {\n    submit() {\n      if (!this.isLogin) {\n        this.$router.push('/login');\n        return;\n      }\n      // 兑换金额不能小于单次购买最小额度\n      if (this.amount < this.pageData.singleMinRaiseMoney) {\n        this.$bus.$emit('tip', {\n          text: `${this.$t('innov.lowerThanMinAmount')}${this.pageData.singleMinRaiseMoney}`,\n          type: 'error',\n        });\n\n        return;\n      }\n      // 单笔兑换金额不能大于单次兑换最大额度\n      if (this.amount > this.pageData.singleMaxRaiseMoney) {\n        this.$bus.$emit('tip', {\n          text: `${this.$t('innov.higherThanMaxAmount')}${this.pageData.singleMaxRaiseMoney}`,\n          type: 'error',\n        });\n\n        return;\n      }\n      // 接受币种余额不足\n      if (this.amount > this.pageData.u_coinSymbol_amount) {\n        this.$bus.$emit('tip', {\n          text: `${this.pageData.coinSymbol}${this.$t('innov.balanceNotEnough')}`,\n          type: 'error',\n        });\n\n        return;\n      }\n      // 输入额度超出我的剩余可兑换额度\n      if (this.pageData.level_amount !== null && this.amount > this.pageData.level_amount) {\n        this.$bus.$emit('tip', {\n          text: `${this.$t('innov.surplusExchangeAmount')}:${this.pageData.level_amount}`,\n          type: 'error',\n        });\n\n        return;\n      }\n      // 手机和邮箱必须有一个开启\n      if (\n        this.isOpenMobileCheck !== 1 && !this.emailAuthOpen\n      ) {\n        this.$bus.$emit('tip', {\n          text: `${this.$t('innov.bindAlter')}`,\n          type: 'error',\n        });\n\n        return;\n      }\n\n      // 谷歌强制认证开启的时候 判断有没有谷歌没有的话 提示去绑定\n      if (this.googleStatus !== 1 && this.enforceGoogleAuth) {\n        this.$bus.$emit('tip', {\n          text: this.$t('assets.withdraw.bindGoogle'),\n          type: 'error',\n        });\n\n        return;\n      }\n      if (this.verificationType === '2') {\n        this.captchaObj.verify();\n      } else {\n        this.dialogFlag = true;\n      }\n    },\n    // 请求数据\n    getData() {\n      this.axios({\n        url: this.$store.state.url.common.newcoin_project_detail,\n        params: {\n          projectId: Number(this.pageId),\n        },\n        method: 'post',\n      }).then((data) => {\n        if (data.code === '0') {\n          const params = data.data;\n          const { status, projectStatus } = params;\n          if (status === 0 || status === 1 || status === 7) {\n            this.$router.replace('/innovation');\n          }\n          if (!projectStatus) {\n            params.status = 0;\n          }\n          // params.email_validate_open = 0;\n          this.pageData = params;\n          this.bannerImg = params.banner;\n        }\n      });\n    },\n  },\n};\n",null]}