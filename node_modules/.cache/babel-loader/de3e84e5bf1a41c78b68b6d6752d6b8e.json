{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cWithdraw/b2cWithdraw.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cWithdraw/b2cWithdraw.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { fixD, fixInput, imgMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      tabelLoading: true,\n      detailsList: [{\n        key: 'totalBalance',\n        value: '--'\n      }, {\n        key: 'normalBalance',\n        value: '--'\n      }, {\n        key: 'lockBalance',\n        value: '--'\n      }],\n      withdrawMin: '--',\n      // 最小提币额度\n      withdrawMax: '--',\n      // 最大提币额度\n      daywithdrawMax: '--',\n      // 最大提币额度\n      symbol: '',\n      addressValue: '',\n      // 提现地址\n      numberValue: '',\n      // 提币数量\n      addressList: [],\n      // 提现地址列表\n      dialogFlag: false,\n      // 弹窗开关\n      dialogConfirmLoading: false,\n      // 弹窗按钮loading\n      googleValue: '',\n      // 谷歌\n      phoneValue: '',\n      // 手机\n      nowSymbolMess: {},\n      feeList: {},\n      warning: ''\n    };\n  },\n  filters: {\n    fixDFn: function fixDFn(v, showPrecision) {\n      return fixD(v, showPrecision);\n    }\n  },\n  watch: {\n    numberValue: function numberValue(v) {\n      this.numberValue = fixInput(v, this.showPrecision);\n    },\n    market: {\n      handler: function handler(v) {\n        if (v && this.symbol) {\n          this.getMessage();\n        }\n      }\n    }\n  },\n  computed: {\n    inputW: function inputW() {\n      var str = '';\n\n      if (this.isOther) {\n        str = \"\".concat(this.$t('assets.withdraw.NumberOfCoins'), \"\\uFF08\").concat(this.symbol, \"\\uFF09\");\n      } else {\n        str = this.$t('assets.withdraw.NumberOfCoins');\n      }\n\n      return str;\n    },\n    aikrw: function aikrw() {\n      var str = '--';\n\n      if (this.isOther && this.arrivalAccount !== '--') {\n        str = this.arrivalAccount * 1000;\n      }\n\n      return str;\n    },\n    isOther: function isOther() {\n      return this.symbol === 'AIKRW';\n    },\n    buttonDisabled: function buttonDisabled() {\n      if (this.numberValueObj.flag && this.feeList[this.addressValue]) {\n        return false;\n      }\n\n      return true;\n    },\n    numberValueObj: function numberValueObj() {\n      var flag = true;\n      var showError = false;\n      var text = '';\n      var inp = parseFloat(this.numberValue);\n      var haveNum = parseFloat(this.detailsList[1].value) || 0; // 可用\n\n      var max = parseFloat(this.withdrawMax) || 0; // 最大\n\n      var min = parseFloat(this.withdrawMin) || 0; // 最小\n\n      var day = parseFloat(this.daywithdrawMax) || 0; // 最小\n\n      if (!inp) {\n        flag = false;\n        showError = false;\n      } else if (inp < min) {\n        flag = false;\n        showError = true; // 单笔提现金额不得小于\n\n        var warn = this.$t('assets.b2c.withdrawMinWarn');\n        text = \"\".concat(warn).concat(this.withdrawMin, \" \").concat(this.symbol);\n      } else if (inp > max) {\n        flag = false;\n        showError = true; // 单笔提现金额不得大于\n\n        var _warn = this.$t('assets.b2c.withdrawMaxWarn');\n\n        text = \"\".concat(_warn).concat(this.withdrawMax, \" \").concat(this.symbol);\n      } else if (inp > day) {\n        flag = false;\n        showError = true; // 今日可提现金额\n\n        var _warn2 = this.$t('assets.b2c.withdrawDayWarn');\n\n        text = \"\".concat(_warn2).concat(this.daywithdrawMax, \" \").concat(this.symbol);\n      } else if (inp > haveNum) {\n        flag = false;\n        showError = true; // 可用余额为\n\n        var _warn3 = this.$t('assets.b2c.withdrawHaveWarn');\n\n        text = \"\".concat(_warn3).concat(this.detailsList[1].value, \" \").concat(this.symbol);\n      }\n\n      return {\n        flag: flag,\n        showError: showError,\n        text: text\n      };\n    },\n    showSymbol: function showSymbol() {\n      var str = this.symbol;\n      return str;\n    },\n    // 当前币种精度\n    showPrecision: function showPrecision() {\n      var v = 0;\n      var market = this.$store.state.baseData.market;\n\n      if (market && market.coinList && market.coinList[this.symbol]) {\n        v = market.coinList[this.symbol].showPrecision;\n      }\n\n      return v;\n    },\n    // finance/account_balance 接口返回成功的数据\n    exchangeData: function exchangeData() {\n      return this.$store.state.assets.exchangeData;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // phoneValue 是否复合正则验证\n    phoneValueFlag: function phoneValueFlag() {\n      return this.$store.state.regExp.verification.test(this.phoneValue);\n    },\n    // googleValue 是否复合正则验证\n    googleValueFlag: function googleValueFlag() {\n      return this.$store.state.regExp.verification.test(this.googleValue);\n    },\n    phoneError: function phoneError() {\n      if (this.phoneValue.length !== 0 && !this.phoneValueFlag) return true;\n      return false;\n    },\n    googleError: function googleError() {\n      if (this.googleValue.length !== 0 && !this.googleValueFlag) return true;\n      return false;\n    },\n    // 弹窗确认按钮\n    dialogConfirmDisabled: function dialogConfirmDisabled() {\n      var phone = true;\n      var google = true;\n\n      if (this.OpenMobile) {\n        phone = this.phoneValueFlag;\n      }\n\n      if (this.OpenGoogle) {\n        google = this.googleValueFlag;\n      }\n\n      if (phone && google || this.dialogConfirmLoading) {\n        return false;\n      }\n\n      return true;\n    },\n    that: function that() {\n      return this;\n    },\n    arrivalAccount: function arrivalAccount() {\n      if (!this.numberValueObj.flag) return '--';\n\n      if (this.fee !== '--') {\n        return fixD(parseFloat(this.numberValue) - parseFloat(this.fee), this.showPrecision);\n      }\n\n      return '--';\n    },\n    fee: function fee() {\n      if (!this.numberValueObj.flag) return '--';\n\n      if (this.feeList[this.addressValue] && this.market) {\n        var _this$feeList$this$ad = this.feeList[this.addressValue],\n            fee = _this$feeList$this$ad.fee,\n            feeType = _this$feeList$this$ad.feeType; // if(this.addressValue === '81') {\n        //   fee = 1\n        //   feeType = 0\n        // }\n        // 百分比\n\n        if (feeType) {\n          var feeFix = fee / 100;\n          return fixD(this.numberValue * feeFix, this.showPrecision); // 固定值\n        }\n\n        return fixD(fee, this.showPrecision);\n      }\n\n      return '--';\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      // 如果不存在币种跳走\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/exchangeAccount');\n      }\n\n      this.$bus.$on('getMess', function () {\n        _this.getMessage();\n      });\n\n      if (this.market && this.symbol) {\n        this.getMessage();\n      }\n\n      this.getBankList();\n    },\n    getMessage: function getMessage() {\n      var _this2 = this;\n\n      this.axios({\n        url: 'fiat/balance',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var obj = {};\n          data.data.allCoinMap.forEach(function (item) {\n            if (item.symbol === _this2.symbol) {\n              obj = item;\n            }\n          });\n          _this2.nowSymbolMess = obj;\n\n          _this2.detailsList.forEach(function (item, index) {\n            _this2.detailsList[index].value = fixD(obj[item.key], _this2.showPrecision);\n          });\n\n          _this2.withdrawMin = fixD(obj.withdrawMin, _this2.showPrecision);\n          _this2.withdrawMax = fixD(obj.withdrawMax, _this2.showPrecision);\n          _this2.daywithdrawMax = fixD(obj.canWithdrawBalance, _this2.showPrecision);\n          _this2.warning = data.data.withdrawTip;\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    getBankList: function getBankList() {\n      var _this3 = this;\n\n      this.axios({\n        url: '/bank/all',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var obj = {};\n          data.data.forEach(function (item) {\n            obj[item.bankNo.toString()] = item.accountName;\n          });\n\n          _this3.getUserBank(obj);\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    getUserBank: function getUserBank(bankObj) {\n      var _this4 = this;\n\n      this.axios({\n        url: 'user/bank/user_bank_list',\n        params: {\n          pageSize: 100,\n          // 每页条数\n          page: 1,\n          // 页码\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          var list = [];\n          var feeList = {};\n          data.data.list.forEach(function (item) {\n            list.push({\n              code: \"\".concat(item.id),\n              value: \"\".concat(item.cardNo),\n              label: \"\".concat(bankObj[item.bankNo], \"(\").concat(item.name, \")\")\n            });\n            feeList[item.id] = item;\n          });\n          _this4.feeList = feeList;\n          _this4.addressList = list;\n        } else {\n          _this4.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    goAddress: function goAddress() {\n      this.$router.push(\"/assets/b2cAddressMent?symbol=\".concat(this.symbol));\n    },\n    inputChange: function inputChange(v, name) {\n      this[name] = v;\n    },\n    // 提现select框 change\n    addressChange: function addressChange(item) {\n      this.addressValue = item.code;\n    },\n    // 全部提现\n    allWithDraw: function allWithDraw() {\n      if (this.detailsList[1].value === '--') return;\n      this.numberValue = this.detailsList[1].value;\n    },\n    // 获取验证码\n    getCodeClick: function getCodeClick() {\n      this.sendSmsCode();\n    },\n    // 发送验证码\n    sendSmsCode: function sendSmsCode() {\n      var _this5 = this;\n\n      this.axios({\n        url: 'v4/common/smsValidCode',\n        params: {\n          operationType: '32'\n        }\n      }).then(function (data) {\n        if (data.code.toString() !== '0') {\n          setTimeout(function () {\n            // 倒计时重置\n            _this5.$bus.$emit('getCode-clear', 'withdrawGetcode'); // tip框提示错误\n\n\n            _this5.$bus.$emit('tip', {\n              text: data.msg,\n              type: 'error'\n            });\n          }, 2000);\n        } else {\n          _this5.$bus.$emit('tip', {\n            text: _this5.$t('assets.withdraw.phoneSendSuccess'),\n            type: 'success'\n          });\n        }\n      });\n    },\n    withdrawClick: function withdrawClick() {\n      this.dialogFlag = true;\n    },\n    // 弹窗关闭\n    dialogClose: function dialogClose() {\n      this.phoneValue = '';\n      this.googleValue = '';\n      this.dialogFlag = false;\n    },\n    // 弹窗确认\n    dialogConfirm: function dialogConfirm() {\n      var _this6 = this;\n\n      this.dialogConfirmLoading = true;\n      this.axios({\n        url: '/fiat/withdraw',\n        params: {\n          symbol: this.symbol,\n          userWithdrawBankId: this.addressValue,\n          amount: this.numberValue,\n          smsAuthCode: this.phoneValue || undefined,\n          googleCode: this.googleValue || undefined\n        }\n      }).then(function (data) {\n        _this6.dialogConfirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          // this.getTableList(); // 获取列表\n          // this.$store.dispatch('assetsExchangeData'); // 更新额度\n          _this6.$bus.$emit('b2cWithdrawHisGet');\n\n          _this6.getMessage();\n\n          _this6.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this6.addressValue = '';\n          _this6.numberValue = '';\n          _this6.phoneValue = '';\n          _this6.googleValue = '';\n          _this6.dialogFlag = false;\n        } else {\n          _this6.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cWithdraw/b2cWithdraw.js"],"names":["fixD","fixInput","imgMap","data","tabelLoading","detailsList","key","value","withdrawMin","withdrawMax","daywithdrawMax","symbol","addressValue","numberValue","addressList","dialogFlag","dialogConfirmLoading","googleValue","phoneValue","nowSymbolMess","feeList","warning","filters","fixDFn","v","showPrecision","watch","market","handler","getMessage","computed","inputW","str","isOther","$t","aikrw","arrivalAccount","buttonDisabled","numberValueObj","flag","showError","text","inp","parseFloat","haveNum","max","min","day","warn","showSymbol","$store","state","baseData","coinList","exchangeData","assets","phoneValueFlag","regExp","verification","test","googleValueFlag","phoneError","length","googleError","dialogConfirmDisabled","phone","google","OpenMobile","OpenGoogle","that","fee","feeType","feeFix","methods","init","$route","query","toUpperCase","$router","push","$bus","$on","getBankList","axios","url","params","then","code","toString","obj","allCoinMap","forEach","item","index","canWithdrawBalance","withdrawTip","$emit","msg","type","bankNo","accountName","getUserBank","bankObj","pageSize","page","list","id","cardNo","label","name","goAddress","inputChange","addressChange","allWithDraw","getCodeClick","sendSmsCode","operationType","setTimeout","withdrawClick","dialogClose","dialogConfirm","userWithdrawBankId","amount","smsAuthCode","undefined","googleCode"],"mappings":"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","sourcesContent":["import { fixD, fixInput, imgMap } from '@/utils';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      imgMap,\r\n      tabelLoading: true,\r\n      detailsList: [\r\n        { key: 'totalBalance', value: '--' },\r\n        { key: 'normalBalance', value: '--' },\r\n        { key: 'lockBalance', value: '--' },\r\n      ],\r\n      withdrawMin: '--', // 最小提币额度\r\n      withdrawMax: '--', // 最大提币额度\r\n      daywithdrawMax: '--', // 最大提币额度\r\n      symbol: '',\r\n      addressValue: '', // 提现地址\r\n      numberValue: '', // 提币数量\r\n      addressList: [], // 提现地址列表\r\n      dialogFlag: false, // 弹窗开关\r\n      dialogConfirmLoading: false, // 弹窗按钮loading\r\n      googleValue: '', // 谷歌\r\n      phoneValue: '', // 手机\r\n      nowSymbolMess: {},\r\n      feeList: {},\r\n      warning: '',\r\n    };\r\n  },\r\n  filters: {\r\n    fixDFn(v, showPrecision) {\r\n      return fixD(v, showPrecision);\r\n    },\r\n  },\r\n  watch: {\r\n    numberValue(v) { this.numberValue = fixInput(v, this.showPrecision); },\r\n    market: {\r\n      handler(v) {\r\n        if (v && this.symbol) {\r\n          this.getMessage();\r\n        }\r\n      },\r\n    },\r\n  },\r\n  computed: {\r\n    inputW() {\r\n      let str = '';\r\n      if (this.isOther) {\r\n        str = `${this.$t('assets.withdraw.NumberOfCoins')}（${this.symbol}）`;\r\n      } else {\r\n        str = this.$t('assets.withdraw.NumberOfCoins');\r\n      }\r\n      return str;\r\n    },\r\n    aikrw() {\r\n      let str = '--';\r\n      if (this.isOther && this.arrivalAccount !== '--') {\r\n        str = this.arrivalAccount * 1000;\r\n      }\r\n      return str;\r\n    },\r\n    isOther() {\r\n      return this.symbol === 'AIKRW';\r\n    },\r\n    buttonDisabled() {\r\n      if (this.numberValueObj.flag && this.feeList[this.addressValue]) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    numberValueObj() {\r\n      let flag = true;\r\n      let showError = false;\r\n      let text = '';\r\n      const inp = parseFloat(this.numberValue);\r\n      const haveNum = parseFloat(this.detailsList[1].value) || 0; // 可用\r\n      const max = parseFloat(this.withdrawMax) || 0; // 最大\r\n      const min = parseFloat(this.withdrawMin) || 0; // 最小\r\n      const day = parseFloat(this.daywithdrawMax) || 0; // 最小\r\n      if (!inp) {\r\n        flag = false;\r\n        showError = false;\r\n      } else if (inp < min) {\r\n        flag = false;\r\n        showError = true;\r\n        // 单笔提现金额不得小于\r\n        const warn = this.$t('assets.b2c.withdrawMinWarn');\r\n        text = `${warn}${this.withdrawMin} ${this.symbol}`;\r\n      } else if (inp > max) {\r\n        flag = false;\r\n        showError = true;\r\n        // 单笔提现金额不得大于\r\n        const warn = this.$t('assets.b2c.withdrawMaxWarn');\r\n        text = `${warn}${this.withdrawMax} ${this.symbol}`;\r\n      } else if (inp > day) {\r\n        flag = false;\r\n        showError = true;\r\n        // 今日可提现金额\r\n        const warn = this.$t('assets.b2c.withdrawDayWarn');\r\n        text = `${warn}${this.daywithdrawMax} ${this.symbol}`;\r\n      } else if (inp > haveNum) {\r\n        flag = false;\r\n        showError = true;\r\n        // 可用余额为\r\n        const warn = this.$t('assets.b2c.withdrawHaveWarn');\r\n        text = `${warn}${this.detailsList[1].value} ${this.symbol}`;\r\n      }\r\n      return {\r\n        flag,\r\n        showError,\r\n        text,\r\n      };\r\n    },\r\n    showSymbol() {\r\n      const str = this.symbol;\r\n      return str;\r\n    },\r\n    // 当前币种精度\r\n    showPrecision() {\r\n      let v = 0;\r\n      const { market } = this.$store.state.baseData;\r\n      if (market && market.coinList && market.coinList[this.symbol]) {\r\n        v = market.coinList[this.symbol].showPrecision;\r\n      }\r\n      return v;\r\n    },\r\n    // finance/account_balance 接口返回成功的数据\r\n    exchangeData() { return this.$store.state.assets.exchangeData; },\r\n    // market 接口\r\n    market() { return this.$store.state.baseData.market; },\r\n    // phoneValue 是否复合正则验证\r\n    phoneValueFlag() { return this.$store.state.regExp.verification.test(this.phoneValue); },\r\n    // googleValue 是否复合正则验证\r\n    googleValueFlag() { return this.$store.state.regExp.verification.test(this.googleValue); },\r\n    phoneError() {\r\n      if (this.phoneValue.length !== 0 && !this.phoneValueFlag) return true;\r\n      return false;\r\n    },\r\n    googleError() {\r\n      if (this.googleValue.length !== 0 && !this.googleValueFlag) return true;\r\n      return false;\r\n    },\r\n    // 弹窗确认按钮\r\n    dialogConfirmDisabled() {\r\n      let phone = true;\r\n      let google = true;\r\n      if (this.OpenMobile) { phone = this.phoneValueFlag; }\r\n      if (this.OpenGoogle) { google = this.googleValueFlag; }\r\n      if ((phone && google) || this.dialogConfirmLoading) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n    that() { return this; },\r\n    arrivalAccount() {\r\n      if (!this.numberValueObj.flag) return '--';\r\n      if (this.fee !== '--') {\r\n        return fixD(parseFloat(this.numberValue) - parseFloat(this.fee),\r\n          this.showPrecision);\r\n      }\r\n      return '--';\r\n    },\r\n    fee() {\r\n      if (!this.numberValueObj.flag) return '--';\r\n      if (this.feeList[this.addressValue] && this.market) {\r\n        const { fee, feeType } = this.feeList[this.addressValue];\r\n        // if(this.addressValue === '81') {\r\n        //   fee = 1\r\n        //   feeType = 0\r\n        // }\r\n        // 百分比\r\n        if (feeType) {\r\n          const feeFix = fee / 100;\r\n          return fixD(this.numberValue * feeFix, this.showPrecision);\r\n        // 固定值\r\n        }\r\n        return fixD(fee, this.showPrecision);\r\n      }\r\n      return '--';\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      // 如果不存在币种跳走\r\n      if (this.$route.query.symbol) {\r\n        this.symbol = this.$route.query.symbol.toUpperCase();\r\n      } else {\r\n        this.$router.push('/assets/exchangeAccount');\r\n      }\r\n      this.$bus.$on('getMess', () => {\r\n        this.getMessage();\r\n      });\r\n      if (this.market && this.symbol) {\r\n        this.getMessage();\r\n      }\r\n      this.getBankList();\r\n    },\r\n    getMessage() {\r\n      this.axios({\r\n        url: 'fiat/balance',\r\n        params: { symbol: this.symbol },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          let obj = {};\r\n          data.data.allCoinMap.forEach((item) => {\r\n            if (item.symbol === this.symbol) {\r\n              obj = item;\r\n            }\r\n          });\r\n          this.nowSymbolMess = obj;\r\n          this.detailsList.forEach((item, index) => {\r\n            this.detailsList[index].value = fixD(obj[item.key], this.showPrecision);\r\n          });\r\n          this.withdrawMin = fixD(obj.withdrawMin, this.showPrecision);\r\n          this.withdrawMax = fixD(obj.withdrawMax, this.showPrecision);\r\n          this.daywithdrawMax = fixD(obj.canWithdrawBalance, this.showPrecision);\r\n          this.warning = data.data.withdrawTip;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    getBankList() {\r\n      this.axios({\r\n        url: '/bank/all',\r\n        params: {\r\n          symbol: this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          const obj = {};\r\n          data.data.forEach((item) => {\r\n            obj[item.bankNo.toString()] = item.accountName;\r\n          });\r\n          this.getUserBank(obj);\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    getUserBank(bankObj) {\r\n      this.axios({\r\n        url: 'user/bank/user_bank_list',\r\n        params: {\r\n          pageSize: 100, // 每页条数\r\n          page: 1, // 页码\r\n          symbol: this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        if (data.code.toString() === '0') {\r\n          const list = [];\r\n          const feeList = {};\r\n          data.data.list.forEach((item) => {\r\n            list.push({\r\n              code: `${item.id}`,\r\n              value: `${item.cardNo}`,\r\n              label: `${bankObj[item.bankNo]}(${item.name})`,\r\n            });\r\n            feeList[item.id] = item;\r\n          });\r\n          this.feeList = feeList;\r\n          this.addressList = list;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n    goAddress() { this.$router.push(`/assets/b2cAddressMent?symbol=${this.symbol}`); },\r\n    inputChange(v, name) {\r\n      this[name] = v;\r\n    },\r\n    // 提现select框 change\r\n    addressChange(item) {\r\n      this.addressValue = item.code;\r\n    },\r\n    // 全部提现\r\n    allWithDraw() {\r\n      if (this.detailsList[1].value === '--') return;\r\n      this.numberValue = this.detailsList[1].value;\r\n    },\r\n    // 获取验证码\r\n    getCodeClick() {\r\n      this.sendSmsCode();\r\n    },\r\n    // 发送验证码\r\n    sendSmsCode() {\r\n      this.axios({\r\n        url: 'v4/common/smsValidCode',\r\n        params: { operationType: '32' },\r\n      }).then((data) => {\r\n        if (data.code.toString() !== '0') {\r\n          setTimeout(() => {\r\n            // 倒计时重置\r\n            this.$bus.$emit('getCode-clear', 'withdrawGetcode');\r\n            // tip框提示错误\r\n            this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n          }, 2000);\r\n        } else {\r\n          this.$bus.$emit('tip', { text: this.$t('assets.withdraw.phoneSendSuccess'), type: 'success' });\r\n        }\r\n      });\r\n    },\r\n    withdrawClick() {\r\n      this.dialogFlag = true;\r\n    },\r\n    // 弹窗关闭\r\n    dialogClose() {\r\n      this.phoneValue = '';\r\n      this.googleValue = '';\r\n      this.dialogFlag = false;\r\n    },\r\n    // 弹窗确认\r\n    dialogConfirm() {\r\n      this.dialogConfirmLoading = true;\r\n      this.axios({\r\n        url: '/fiat/withdraw',\r\n        params: {\r\n          symbol: this.symbol,\r\n          userWithdrawBankId: this.addressValue,\r\n          amount: this.numberValue,\r\n          smsAuthCode: this.phoneValue || undefined,\r\n          googleCode: this.googleValue || undefined,\r\n        },\r\n      }).then((data) => {\r\n        this.dialogConfirmLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          // this.getTableList(); // 获取列表\r\n          // this.$store.dispatch('assetsExchangeData'); // 更新额度\r\n          this.$bus.$emit('b2cWithdrawHisGet');\r\n          this.getMessage();\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n          this.addressValue = '';\r\n          this.numberValue = '';\r\n          this.phoneValue = '';\r\n          this.googleValue = '';\r\n          this.dialogFlag = false;\r\n        } else {\r\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n"]}]}