{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/Downloads/BlockChain-ui-privatization/PC/components/oldUploadFile/OldUploadFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/components/oldUploadFile/OldUploadFile.vue","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'c-oldUploadFile',\n  props: {\n    // 最大尺寸\n    maxSize: {\n      type: String,\n      default: '5'\n    },\n    imageType: {\n      type: String,\n      default: '2'\n    },\n    // 上传数据类型\n    formatValue: {\n      type: String,\n      default: 'image/jpeg, image/jpg, image/png'\n    },\n    // 接口名\n    url: {\n      type: String,\n      default: ''\n    },\n    // 外部传入name\n    name: {\n      type: String,\n      default: ''\n    },\n    // 外部传入请求类型\n    isOpenUploadImg: {\n      type: String,\n      default: ''\n    },\n    // 外部传入可拓展项\n    expand: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    // className\n    className: {\n      type: String,\n      default: ''\n    },\n    // isWaterMark 添加水印\n    isWaterMark: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      // 真实文件尺寸\n      size: '',\n      // 真实文件格式\n      realFormatValue: ''\n    };\n  },\n  mounted: function mounted() {},\n  computed: {},\n  watch: {},\n  methods: {\n    uploadClick: function uploadClick() {\n      this.$refs.upload.click();\n    },\n    tellFun: function tellFun(e) {\n      var _this = this;\n\n      var val = e.target.files[0];\n\n      if (val.size > this.maxSize * 1024 * 1024) {\n        this.$emit('tellMessage', {\n          error: '图片尺寸过大',\n          code: 'maxSize'\n        });\n        e.target.value = '';\n      } else {\n        this.$emit('tellMessage', {\n          name: this.name\n        });\n        var formData = new FormData();\n        formData.append(this.name, val);\n        formData.append('name', this.name); // 添加水印\n\n        if (this.isWaterMark) {// formData.append('isWaterMark', 1);\n        }\n\n        if (this.expand.length > 0) {\n          this.expand.forEach(function (item) {\n            formData.append(Object.keys(item)[0], item[Object.keys(item)[0]]);\n          });\n        }\n\n        this.axios({\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          method: 'post',\n          url: this.url,\n          hostType: Number(this.isOpenUploadImg) === 1 ? 'upload' : null,\n          params: formData\n        }).then(function (res) {\n          if (!Number(res.code)) {\n            var data = res.data;\n            var fileName = data.filenameStr ? data.filenameStr : data.filename;\n            var name = data.name || _this.name;\n\n            _this.$emit('uploadFinish', {\n              url: data.base_image_url + fileName,\n              imgSrc: data.filename,\n              fileName: fileName,\n              name: name\n            });\n\n            e.target.value = '';\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["OldUploadFile.vue"],"names":[],"mappings":"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","sourcesContent":["// Created by 王晓波. // 上传图片 // *****************************\r\n<template>\r\n  <div>\r\n    <input\r\n      class='input_upload_file'\r\n      type='file'\r\n      :class='className'\r\n      :accept='formatValue'\r\n      ref='upload'\r\n      @change='tellFun'\r\n    />\r\n    <div class='upload-div' @click='uploadClick'></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'c-oldUploadFile',\r\n  props: {\r\n    // 最大尺寸\r\n    maxSize: {\r\n      type: String,\r\n      default: '5',\r\n    },\r\n    imageType: {\r\n      type: String,\r\n      default: '2',\r\n    },\r\n    // 上传数据类型\r\n    formatValue: {\r\n      type: String,\r\n      default: 'image/jpeg, image/jpg, image/png',\r\n    },\r\n    // 接口名\r\n    url: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    // 外部传入name\r\n    name: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    // 外部传入请求类型\r\n    isOpenUploadImg: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    // 外部传入可拓展项\r\n    expand: {\r\n      type: Array,\r\n      default: () => [],\r\n    },\r\n    // className\r\n    className: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    // isWaterMark 添加水印\r\n    isWaterMark: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      // 真实文件尺寸\r\n      size: '',\r\n      // 真实文件格式\r\n      realFormatValue: '',\r\n    };\r\n  },\r\n  mounted() {},\r\n  computed: {},\r\n  watch: {},\r\n  methods: {\r\n    uploadClick() {\r\n      this.$refs.upload.click();\r\n    },\r\n    tellFun(e) {\r\n      const val = e.target.files[0];\r\n      if (val.size > this.maxSize * 1024 * 1024) {\r\n        this.$emit('tellMessage', {\r\n          error: '图片尺寸过大',\r\n          code: 'maxSize',\r\n        });\r\n        e.target.value = '';\r\n      } else {\r\n        this.$emit('tellMessage', {\r\n          name: this.name,\r\n        });\r\n        const formData = new FormData();\r\n        formData.append(this.name, val);\r\n        formData.append('name', this.name);\r\n        // 添加水印\r\n        if (this.isWaterMark) {\r\n          // formData.append('isWaterMark', 1);\r\n        }\r\n        if (this.expand.length > 0) {\r\n          this.expand.forEach((item) => {\r\n            formData.append(Object.keys(item)[0], item[Object.keys(item)[0]]);\r\n          });\r\n        }\r\n        this.axios({\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n          method: 'post',\r\n          url: this.url,\r\n          hostType: Number(this.isOpenUploadImg) === 1 ? 'upload' : null,\r\n          params: formData,\r\n        }).then((res) => {\r\n          if (!Number(res.code)) {\r\n            const { data } = res;\r\n            const fileName = data.filenameStr\r\n              ? data.filenameStr\r\n              : data.filename;\r\n            const name = data.name || this.name;\r\n            this.$emit('uploadFinish', {\r\n              url: data.base_image_url + fileName,\r\n              imgSrc: data.filename,\r\n              fileName,\r\n              name,\r\n            });\r\n            e.target.value = '';\r\n          }\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped lang='stylus'>\r\n.input_upload_file{\r\n  opacity: 0;\r\n}\r\n.upload-div{\r\n  width:100%;\r\n  height:100%;\r\n  position: absolute;\r\n  top:0;\r\n  opacity: 0;\r\n  z-index: 3;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"sourceRoot":"../../Downloads/BlockChain-ui-privatization/PC/components/oldUploadFile"}]}