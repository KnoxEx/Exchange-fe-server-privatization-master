{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cRecrge/b2cRecrge.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/b2cRecrge/b2cRecrge.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { fixD, fixInput, imgMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      QRflag: false,\n      dialogFlag: false,\n      dialogConfirmLoading: false,\n      rechargeNum: '',\n      imgLoading: false,\n      imageType: '2',\n      messageValue: {\n        bankName: '',\n        // 银行名称\n        bankSub: '',\n        // 分行\n        cardNo: '',\n        // 卡号\n        name: '',\n        // 收款人\n        remark: '' // 转账备注\n\n      },\n      symbol: '',\n      imgUrl: '',\n      imageDataStr: '',\n      nowSymbolMess: {},\n      infoIsReady: false,\n      assetsReady: false,\n      buttonLoading: false,\n      isTransferVoucher: 0,\n      warning: ''\n    };\n  },\n  filters: {\n    fixDFn: function fixDFn(v, that) {\n      return fixD(v, that.showPrecision);\n    }\n  },\n  watch: {\n    clientUploadType: function clientUploadType() {\n      this.getImageToken();\n    },\n    market: function market(v) {\n      if (v && this.symbol) {\n        this.getAssets();\n        this.getMessage();\n      }\n    },\n    rechargeNum: function rechargeNum(v) {\n      this.rechargeNum = fixInput(v, this.showPrecision);\n    }\n  },\n  computed: {\n    inputW: function inputW() {\n      var str = '';\n\n      if (this.isOther) {\n        str = \"\".concat(this.$t('assets.b2c.rechargeSum'), \"\\uFF08\").concat(this.symbol, \"\\uFF09\");\n      } else {\n        str = this.$t('assets.b2c.rechargeSum');\n      }\n\n      return str;\n    },\n    aikrw: function aikrw() {\n      var str = '--';\n\n      if (this.isOther && this.rechargeNum) {\n        str = this.rechargeNum * 1000;\n      }\n\n      return str;\n    },\n    isOther: function isOther() {\n      return this.symbol === 'AIKRW';\n    },\n    rechargeNumFlag: function rechargeNumFlag() {\n      var inputValue = parseFloat(this.rechargeNum);\n      var minValue = parseFloat(this.minRecrge);\n      return inputValue >= minValue;\n    },\n    rechargeNumError: function rechargeNumError() {\n      if (this.rechargeNum.length && !this.rechargeNumFlag) return true;\n      return false;\n    },\n    that: function that() {\n      return this;\n    },\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    minRecrge: function minRecrge() {\n      var str = '0';\n\n      if (this.nowSymbolMess.depositMin) {\n        str = this.nowSymbolMess.depositMin;\n      }\n\n      return str;\n    },\n    clientUploadType: function clientUploadType() {\n      return this.$store.state.baseData.client_img_upload_open;\n    },\n    isOpenUploadImg: function isOpenUploadImg() {\n      var data = this.$store.state.baseData.publicInfo;\n      var flag = '0';\n\n      if (data && data.switch && data.switch.is_open_upload_img && data.switch.is_open_upload_img.toString === '1') {\n        flag = '1';\n      }\n\n      return flag;\n    },\n    imgToken: function imgToken() {\n      return this.$store.state.baseData.imgToken || {};\n    },\n    messageOptions: function messageOptions() {\n      return {\n        // 银行名称\n        bankName: {\n          title: this.$t('assets.b2c.bankName'),\n          haveCopy: false\n        },\n        // 分行\n        bankSub: {\n          title: this.$t('assets.b2c.bankSub'),\n          haveCopy: true\n        },\n        // 卡号\n        cardNo: {\n          title: this.$t('assets.b2c.cardNo'),\n          haveCopy: true\n        },\n        // 收款人\n        name: {\n          title: this.$t('assets.b2c.name'),\n          haveCopy: true\n        },\n        // 转账备注\n        remark: {\n          title: this.$t('assets.b2c.remark'),\n          haveCopy: true,\n          hover: true\n        }\n      };\n    },\n    showSymbol: function showSymbol() {\n      var str = this.symbol; // if (this.market && this.market.coinList\n      //   && this.market.coinList[this.symbol]) {\n      //   str = getCoinShowName(this.symbol, this.market.coinList);\n      // }\n\n      return str;\n    },\n    // 当前币种精度\n    showPrecision: function showPrecision() {\n      var v = 0;\n      var market = this.$store.state.baseData.market;\n\n      if (market && market.coinList && market.coinList[this.symbol]) {\n        v = market.coinList[this.symbol].showPrecision;\n      }\n\n      return v;\n    },\n    // 提现按钮禁用状态\n    btnDisabled: function btnDisabled() {\n      var flag = true;\n      var imgFlag = this.isTransferVoucher ? !!this.imageDataStr.length : true;\n\n      if (this.assetsReady && this.infoIsReady && this.rechargeNumFlag && imgFlag || this.buttonLoading) {\n        flag = false;\n      }\n\n      return flag;\n    }\n  },\n  methods: {\n    init: function init() {\n      this.getImageToken(); // 如果不存在币种跳走\n\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/b2cAccount');\n        return;\n      }\n\n      if (this.symbol && this.market) {\n        this.getAssets();\n        this.getMessage();\n      }\n    },\n    imgClick: function imgClick() {\n      this.QRflag = true;\n    },\n    QRcodeClick: function QRcodeClick() {\n      this.QRflag = false;\n    },\n    dialogClose: function dialogClose() {\n      this.dialogFlag = false;\n    },\n    dialogConfirm: function dialogConfirm() {\n      var _this = this;\n\n      this.dialogConfirmLoading = true;\n      this.axios({\n        url: '/fiat/deposit',\n        params: {\n          symbol: this.symbol,\n          transferVoucher: this.imageDataStr,\n          amount: this.isOther ? this.aikrw : this.rechargeNum\n        }\n      }).then(function (data) {\n        _this.dialogConfirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this.rechargeNum = '';\n          _this.imgUrl = '';\n          _this.imageDataStr = '';\n          _this.dialogFlag = false;\n\n          _this.$bus.$emit('b2cRecrgeHisGet');\n\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    getAssets: function getAssets() {\n      var _this2 = this;\n\n      this.axios({\n        url: 'fiat/balance',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this2.assetsReady = true;\n          var obj = {};\n          data.data.allCoinMap.forEach(function (item) {\n            if (item.symbol === _this2.symbol) {\n              obj = item;\n            }\n          });\n          _this2.nowSymbolMess = obj;\n          _this2.warning = data.data.depositTip;\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    submit: function submit() {\n      this.dialogFlag = true;\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    onChangeFileFun: function onChangeFileFun() {\n      this.imgLoading = true;\n    },\n    uploadFinish: function uploadFinish(obj) {\n      if (obj.error) {\n        this.$bus.$emit('tip', {\n          text: obj.error,\n          type: 'error'\n        });\n        return;\n      }\n\n      this.imgUrl = obj.url;\n      this.imgLoading = false;\n      this.imageDataStr = obj.fileName;\n    },\n    getImageToken: function getImageToken() {\n      var tokenData = this.imgToken[this.imageType];\n\n      if ((!tokenData || new Date(tokenData.Expiration).getTime() - new Date().getTime() < 30000) && Number(this.clientUploadType)) {\n        this.$store.dispatch('getImgToken', this.imageType);\n      }\n    },\n    getMessage: function getMessage() {\n      var _this3 = this;\n\n      this.axios({\n        url: '/company/bank/info',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this3.infoIsReady = true;\n          _this3.messageValue.bankName = data.data.bankName || '';\n          _this3.messageValue.bankSub = data.data.bankSub || '';\n          _this3.messageValue.cardNo = data.data.cardNo || '';\n          _this3.messageValue.name = data.data.name || '';\n          _this3.messageValue.remark = data.data.remark || '';\n          _this3.isTransferVoucher = data.data.isTransferVoucher || 0;\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    inputChange: function inputChange(v, name) {\n      this[name] = v;\n    }\n  }\n};",null]}