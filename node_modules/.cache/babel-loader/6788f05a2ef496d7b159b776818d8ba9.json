{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/assets/b2cRecrge/b2cRecrge.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/assets/b2cRecrge/b2cRecrge.js","mtime":1623835967000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { fixD, fixInput, imgMap } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      imgMap: imgMap,\n      QRflag: false,\n      dialogFlag: false,\n      dialogConfirmLoading: false,\n      rechargeNum: '',\n      imgLoading: false,\n      imageType: '2',\n      messageValue: {\n        bankName: '',\n        // 银行名称\n        bankSub: '',\n        // 分行\n        cardNo: '',\n        // 卡号\n        name: '',\n        // 收款人\n        remark: '' // 转账备注\n\n      },\n      symbol: '',\n      imgUrl: '',\n      imageDataStr: '',\n      nowSymbolMess: {},\n      infoIsReady: false,\n      assetsReady: false,\n      buttonLoading: false,\n      isTransferVoucher: 0,\n      warning: ''\n    };\n  },\n  filters: {\n    fixDFn: function fixDFn(v, that) {\n      return fixD(v, that.showPrecision);\n    }\n  },\n  watch: {\n    clientUploadType: function clientUploadType() {\n      this.getImageToken();\n    },\n    market: function market(v) {\n      if (v && this.symbol) {\n        this.getAssets();\n        this.getMessage();\n      }\n    },\n    rechargeNum: function rechargeNum(v) {\n      this.rechargeNum = fixInput(v, this.showPrecision);\n    }\n  },\n  computed: {\n    inputW: function inputW() {\n      var str = '';\n\n      if (this.isOther) {\n        str = \"\".concat(this.$t('assets.b2c.rechargeSum'), \"\\uFF08\").concat(this.symbol, \"\\uFF09\");\n      } else {\n        str = this.$t('assets.b2c.rechargeSum');\n      }\n\n      return str;\n    },\n    aikrw: function aikrw() {\n      var str = '--';\n\n      if (this.isOther && this.rechargeNum) {\n        str = this.rechargeNum * 1000;\n      }\n\n      return str;\n    },\n    isOther: function isOther() {\n      return this.symbol === 'AIKRW';\n    },\n    rechargeNumFlag: function rechargeNumFlag() {\n      var inputValue = parseFloat(this.rechargeNum);\n      var minValue = parseFloat(this.minRecrge);\n      return inputValue >= minValue;\n    },\n    rechargeNumError: function rechargeNumError() {\n      if (this.rechargeNum.length && !this.rechargeNumFlag) return true;\n      return false;\n    },\n    that: function that() {\n      return this;\n    },\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    minRecrge: function minRecrge() {\n      var str = '0';\n\n      if (this.nowSymbolMess.depositMin) {\n        str = this.nowSymbolMess.depositMin;\n      }\n\n      return str;\n    },\n    clientUploadType: function clientUploadType() {\n      return this.$store.state.baseData.client_img_upload_open;\n    },\n    isOpenUploadImg: function isOpenUploadImg() {\n      var data = this.$store.state.baseData.publicInfo;\n      var flag = '0';\n\n      if (data && data.switch && data.switch.is_open_upload_img && data.switch.is_open_upload_img.toString === '1') {\n        flag = '1';\n      }\n\n      return flag;\n    },\n    imgToken: function imgToken() {\n      return this.$store.state.baseData.imgToken || {};\n    },\n    messageOptions: function messageOptions() {\n      return {\n        // 银行名称\n        bankName: {\n          title: this.$t('assets.b2c.bankName'),\n          haveCopy: false\n        },\n        // 分行\n        bankSub: {\n          title: this.$t('assets.b2c.bankSub'),\n          haveCopy: true\n        },\n        // 卡号\n        cardNo: {\n          title: this.$t('assets.b2c.cardNo'),\n          haveCopy: true\n        },\n        // 收款人\n        name: {\n          title: this.$t('assets.b2c.name'),\n          haveCopy: true\n        },\n        // 转账备注\n        remark: {\n          title: this.$t('assets.b2c.remark'),\n          haveCopy: true,\n          hover: true\n        }\n      };\n    },\n    showSymbol: function showSymbol() {\n      var str = this.symbol; // if (this.market && this.market.coinList\n      //   && this.market.coinList[this.symbol]) {\n      //   str = getCoinShowName(this.symbol, this.market.coinList);\n      // }\n\n      return str;\n    },\n    // 当前币种精度\n    showPrecision: function showPrecision() {\n      var v = 0;\n      var market = this.$store.state.baseData.market;\n\n      if (market && market.coinList && market.coinList[this.symbol]) {\n        v = market.coinList[this.symbol].showPrecision;\n      }\n\n      return v;\n    },\n    // 提现按钮禁用状态\n    btnDisabled: function btnDisabled() {\n      var flag = true;\n      var imgFlag = this.isTransferVoucher ? !!this.imageDataStr.length : true;\n\n      if (this.assetsReady && this.infoIsReady && this.rechargeNumFlag && imgFlag || this.buttonLoading) {\n        flag = false;\n      }\n\n      return flag;\n    }\n  },\n  methods: {\n    init: function init() {\n      this.getImageToken(); // 如果不存在币种跳走\n\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/b2cAccount');\n        return;\n      }\n\n      if (this.symbol && this.market) {\n        this.getAssets();\n        this.getMessage();\n      }\n    },\n    imgClick: function imgClick() {\n      this.QRflag = true;\n    },\n    QRcodeClick: function QRcodeClick() {\n      this.QRflag = false;\n    },\n    dialogClose: function dialogClose() {\n      this.dialogFlag = false;\n    },\n    dialogConfirm: function dialogConfirm() {\n      var _this = this;\n\n      this.dialogConfirmLoading = true;\n      this.axios({\n        url: '/fiat/deposit',\n        params: {\n          symbol: this.symbol,\n          transferVoucher: this.imageDataStr,\n          amount: this.isOther ? this.aikrw : this.rechargeNum\n        }\n      }).then(function (data) {\n        _this.dialogConfirmLoading = false;\n\n        if (data.code.toString() === '0') {\n          _this.rechargeNum = '';\n          _this.imgUrl = '';\n          _this.imageDataStr = '';\n          _this.dialogFlag = false;\n\n          _this.$bus.$emit('b2cRecrgeHisGet');\n\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    getAssets: function getAssets() {\n      var _this2 = this;\n\n      this.axios({\n        url: 'fiat/balance',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this2.assetsReady = true;\n          var obj = {};\n          data.data.allCoinMap.forEach(function (item) {\n            if (item.symbol === _this2.symbol) {\n              obj = item;\n            }\n          });\n          _this2.nowSymbolMess = obj;\n          _this2.warning = data.data.depositTip;\n        } else {\n          _this2.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    submit: function submit() {\n      this.dialogFlag = true;\n    },\n    inputChanges: function inputChanges(value, name) {\n      this[name] = value;\n    },\n    onChangeFileFun: function onChangeFileFun() {\n      this.imgLoading = true;\n    },\n    uploadFinish: function uploadFinish(obj) {\n      if (obj.error) {\n        this.$bus.$emit('tip', {\n          text: obj.error,\n          type: 'error'\n        });\n        return;\n      }\n\n      this.imgUrl = obj.url;\n      this.imgLoading = false;\n      this.imageDataStr = obj.fileName;\n    },\n    getImageToken: function getImageToken() {\n      var tokenData = this.imgToken[this.imageType];\n\n      if ((!tokenData || new Date(tokenData.Expiration).getTime() - new Date().getTime() < 30000) && Number(this.clientUploadType)) {\n        this.$store.dispatch('getImgToken', this.imageType);\n      }\n    },\n    getMessage: function getMessage() {\n      var _this3 = this;\n\n      this.axios({\n        url: '/company/bank/info',\n        params: {\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this3.infoIsReady = true;\n          _this3.messageValue.bankName = data.data.bankName || '';\n          _this3.messageValue.bankSub = data.data.bankSub || '';\n          _this3.messageValue.cardNo = data.data.cardNo || '';\n          _this3.messageValue.name = data.data.name || '';\n          _this3.messageValue.remark = data.data.remark || '';\n          _this3.isTransferVoucher = data.data.isTransferVoucher || 0;\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    inputChange: function inputChange(v, name) {\n      this[name] = v;\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/BlockChain-ui/PC/common-mixin/assets/b2cRecrge/b2cRecrge.js"],"names":["fixD","fixInput","imgMap","data","QRflag","dialogFlag","dialogConfirmLoading","rechargeNum","imgLoading","imageType","messageValue","bankName","bankSub","cardNo","name","remark","symbol","imgUrl","imageDataStr","nowSymbolMess","infoIsReady","assetsReady","buttonLoading","isTransferVoucher","warning","filters","fixDFn","v","that","showPrecision","watch","clientUploadType","getImageToken","market","getAssets","getMessage","computed","inputW","str","isOther","$t","aikrw","rechargeNumFlag","inputValue","parseFloat","minValue","minRecrge","rechargeNumError","length","$store","state","baseData","depositMin","client_img_upload_open","isOpenUploadImg","publicInfo","flag","switch","is_open_upload_img","toString","imgToken","messageOptions","title","haveCopy","hover","showSymbol","coinList","btnDisabled","imgFlag","methods","init","$route","query","toUpperCase","$router","push","imgClick","QRcodeClick","dialogClose","dialogConfirm","axios","url","params","transferVoucher","amount","then","code","$bus","$emit","text","msg","type","obj","allCoinMap","forEach","item","depositTip","submit","inputChanges","value","onChangeFileFun","uploadFinish","error","fileName","tokenData","Date","Expiration","getTime","Number","dispatch","inputChange"],"mappings":"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","sourcesContent":["\nimport { fixD, fixInput, imgMap } from '@/utils';\n\n\nexport default {\n  data() {\n    return {\n      imgMap,\n      QRflag: false,\n      dialogFlag: false,\n      dialogConfirmLoading: false,\n      rechargeNum: '',\n      imgLoading: false,\n      imageType: '2',\n      messageValue: {\n        bankName: '', // 银行名称\n        bankSub: '', // 分行\n        cardNo: '', // 卡号\n        name: '', // 收款人\n        remark: '', // 转账备注\n      },\n      symbol: '',\n      imgUrl: '',\n      imageDataStr: '',\n      nowSymbolMess: {},\n      infoIsReady: false,\n      assetsReady: false,\n      buttonLoading: false,\n      isTransferVoucher: 0,\n      warning: '',\n    };\n  },\n  filters: {\n    fixDFn(v, that) {\n      return fixD(v, that.showPrecision);\n    },\n  },\n  watch: {\n    clientUploadType() {\n      this.getImageToken();\n    },\n    market(v) {\n      if (v && this.symbol) {\n        this.getAssets();\n        this.getMessage();\n      }\n    },\n    rechargeNum(v) {\n      this.rechargeNum = fixInput(v, this.showPrecision);\n    },\n  },\n  computed: {\n    inputW() {\n      let str = '';\n      if (this.isOther) {\n        str = `${this.$t('assets.b2c.rechargeSum')}（${this.symbol}）`;\n      } else {\n        str = this.$t('assets.b2c.rechargeSum');\n      }\n      return str;\n    },\n    aikrw() {\n      let str = '--';\n      if (this.isOther && this.rechargeNum) {\n        str = this.rechargeNum * 1000;\n      }\n      return str;\n    },\n    isOther() {\n      return this.symbol === 'AIKRW';\n    },\n    rechargeNumFlag() {\n      const inputValue = parseFloat(this.rechargeNum);\n      const minValue = parseFloat(this.minRecrge);\n      return inputValue >= minValue;\n    },\n    rechargeNumError() {\n      if (this.rechargeNum.length && !this.rechargeNumFlag) return true;\n      return false;\n    },\n    that() { return this; },\n    market() { return this.$store.state.baseData.market; },\n    minRecrge() {\n      let str = '0';\n      if (this.nowSymbolMess.depositMin) {\n        str = this.nowSymbolMess.depositMin;\n      }\n      return str;\n    },\n    clientUploadType() {\n      return this.$store.state.baseData.client_img_upload_open;\n    },\n    isOpenUploadImg() {\n      const data = this.$store.state.baseData.publicInfo;\n      let flag = '0';\n      if (data && data.switch && data.switch.is_open_upload_img\n        && data.switch.is_open_upload_img.toString === '1') {\n        flag = '1';\n      }\n      return flag;\n    },\n    imgToken() {\n      return this.$store.state.baseData.imgToken || {};\n    },\n    messageOptions() {\n      return {\n        // 银行名称\n        bankName: {\n          title: this.$t('assets.b2c.bankName'),\n          haveCopy: false,\n        },\n        // 分行\n        bankSub: {\n          title: this.$t('assets.b2c.bankSub'),\n          haveCopy: true,\n        },\n        // 卡号\n        cardNo: {\n          title: this.$t('assets.b2c.cardNo'),\n          haveCopy: true,\n        },\n        // 收款人\n        name: {\n          title: this.$t('assets.b2c.name'),\n          haveCopy: true,\n        },\n        // 转账备注\n        remark: {\n          title: this.$t('assets.b2c.remark'),\n          haveCopy: true,\n          hover: true,\n        },\n      };\n    },\n    showSymbol() {\n      const str = this.symbol;\n      // if (this.market && this.market.coinList\n      //   && this.market.coinList[this.symbol]) {\n      //   str = getCoinShowName(this.symbol, this.market.coinList);\n      // }\n      return str;\n    },\n    // 当前币种精度\n    showPrecision() {\n      let v = 0;\n      const { market } = this.$store.state.baseData;\n      if (market && market.coinList && market.coinList[this.symbol]) {\n        v = market.coinList[this.symbol].showPrecision;\n      }\n      return v;\n    },\n    // 提现按钮禁用状态\n    btnDisabled() {\n      let flag = true;\n      const imgFlag = this.isTransferVoucher\n        ? (!!this.imageDataStr.length)\n        : true;\n      if ((this.assetsReady && this.infoIsReady\n        && this.rechargeNumFlag && imgFlag)\n        || this.buttonLoading) {\n        flag = false;\n      }\n      return flag;\n    },\n  },\n  methods: {\n    init() {\n      this.getImageToken();\n      // 如果不存在币种跳走\n      if (this.$route.query.symbol) {\n        this.symbol = this.$route.query.symbol.toUpperCase();\n      } else {\n        this.$router.push('/assets/b2cAccount');\n        return;\n      }\n      if (this.symbol && this.market) {\n        this.getAssets();\n        this.getMessage();\n      }\n    },\n    imgClick() {\n      this.QRflag = true;\n    },\n    QRcodeClick() {\n      this.QRflag = false;\n    },\n    dialogClose() {\n      this.dialogFlag = false;\n    },\n    dialogConfirm() {\n      this.dialogConfirmLoading = true;\n      this.axios({\n        url: '/fiat/deposit',\n        params: {\n          symbol: this.symbol,\n          transferVoucher: this.imageDataStr,\n          amount: this.isOther ? this.aikrw : this.rechargeNum,\n        },\n      }).then((data) => {\n        this.dialogConfirmLoading = false;\n        if (data.code.toString() === '0') {\n          this.rechargeNum = '';\n          this.imgUrl = '';\n          this.imageDataStr = '';\n          this.dialogFlag = false;\n          this.$bus.$emit('b2cRecrgeHisGet');\n          this.$bus.$emit('tip', { text: data.msg, type: 'success' });\n        } else {\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\n        }\n      });\n    },\n    getAssets() {\n      this.axios({\n        url: 'fiat/balance',\n        params: {\n          symbol: this.symbol,\n        },\n      }).then((data) => {\n        if (data.code.toString() === '0') {\n          this.assetsReady = true;\n          let obj = {};\n          data.data.allCoinMap.forEach((item) => {\n            if (item.symbol === this.symbol) {\n              obj = item;\n            }\n          });\n          this.nowSymbolMess = obj;\n          this.warning = data.data.depositTip;\n        } else {\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\n        }\n      });\n    },\n    submit() {\n      this.dialogFlag = true;\n    },\n    inputChanges(value, name) {\n      this[name] = value;\n    },\n    onChangeFileFun() {\n      this.imgLoading = true;\n    },\n    uploadFinish(obj) {\n      if (obj.error) {\n        this.$bus.$emit('tip', { text: obj.error, type: 'error' });\n        return;\n      }\n      this.imgUrl = obj.url;\n      this.imgLoading = false;\n      this.imageDataStr = obj.fileName;\n    },\n    getImageToken() {\n      const tokenData = this.imgToken[this.imageType];\n      if ((!tokenData || (new Date(tokenData.Expiration).getTime() - new Date().getTime() < 30000))\n        && Number(this.clientUploadType)) {\n        this.$store.dispatch('getImgToken', this.imageType);\n      }\n    },\n    getMessage() {\n      this.axios({\n        url: '/company/bank/info',\n        params: {\n          symbol: this.symbol,\n        },\n      }).then((data) => {\n        if (data.code.toString() === '0') {\n          this.infoIsReady = true;\n          this.messageValue.bankName = data.data.bankName || '';\n          this.messageValue.bankSub = data.data.bankSub || '';\n          this.messageValue.cardNo = data.data.cardNo || '';\n          this.messageValue.name = data.data.name || '';\n          this.messageValue.remark = data.data.remark || '';\n          this.isTransferVoucher = data.data.isTransferVoucher || 0;\n        } else {\n          this.$bus.$emit('tip', { text: data.msg, type: 'error' });\n        }\n      });\n    },\n    inputChange(v, name) {\n      this[name] = v;\n    },\n  },\n};\n"]}]}