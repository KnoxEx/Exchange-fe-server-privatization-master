{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/market/market.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/home/market/market.js","mtime":1636809409761},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"core-js/modules/es6.regexp.constructor\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { myStorage } from '@/utils';\nexport default {\n  name: 'Market',\n  data: function data() {\n    return {\n      // 滚动条配置\n      ops: {\n        rail: {\n          gutterOfSide: '0px'\n        }\n      },\n      // 筛选 货币对\n      listfilter: null,\n      // 表格加载LOADING\n      tableLoading: true,\n      // 表格 超过 20条出现滚动条\n      lineNumber: 15,\n      // 表头 Class\n      headClasses: 'c-3-bg',\n      bodyClasses: 'c-4-bg',\n      klineDataList: {},\n      marketDataObj: [],\n      marketDataList: [],\n      marketDataList_bar: [],\n      marketCurrent: null,\n      MainAreaFilter: [],\n      // 主区币种\n      CreateAreaFilter: [],\n      // 创新区币种\n      SeeAreaFilter: [],\n      // 观察区币种\n      hideAreaFilter: [],\n      // 隐藏区币种,\n      unsealAreaFilter: [],\n      // 解封区币种\n      halveAreaFilter: [],\n      // 减半区币种\n      MainAreaData: [],\n      hideAreaData: [],\n      CreateAreaData: [],\n      SeeAreaData: [],\n      unsealAreaData: [],\n      halveAreaData: [],\n      sortValue: 'sort',\n      // 排序类型\n      sortSell: false,\n      // 排序方向 true-正序 false-倒序\n      hoverIndex: null,\n      coAreaData: [],\n      coTypeList: [],\n      usdtHeaderFlag: false,\n      usdHeaderFlag: false\n    };\n  },\n  props: {\n    dataList: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  filters: {\n    sortIcon: function sortIcon(v, sortValue, sortSell) {\n      var str = '#icon-a_17';\n\n      if (v === sortValue) {\n        if (sortSell) {\n          str = '#icon-a_17_1';\n        } else {\n          str = '#icon-a_17_2';\n        }\n      }\n\n      return str;\n    }\n  },\n  computed: {\n    linkurl: function linkurl() {\n      if (this.$store.state.baseData.publicInfo) {\n        return this.$store.state.baseData.publicInfo.url;\n      }\n\n      return {};\n    },\n    isCoOpen: function isCoOpen() {\n      var base = this.$store.state.baseData.publicInfo;\n\n      if (base && base.switch && base.switch.indep_co_switch === '1') {\n        return true;\n      }\n\n      return false;\n    },\n    index_international_open: function index_international_open() {\n      return this.$store.state.baseData.index_international_open;\n    },\n    dataLength: function dataLength() {\n      var _this = this;\n\n      var len = 0;\n      this.tableData.forEach(function (item) {\n        if (_this.tableData.length > 1) {\n          len += 1;\n        }\n\n        item.data.forEach(function () {\n          len += 1;\n        });\n      });\n      return len;\n    },\n    tableHeight: function tableHeight() {\n      var h = 300;\n      var spk = 30; // 条数\n\n      if (this.dataLength > 5 && this.dataLength < spk) {\n        h = 56 * this.dataLength;\n      } else if (this.dataLength >= spk) {\n        h = 56 * spk;\n      }\n\n      return h;\n    },\n    tableData: function tableData() {\n      var _this2 = this;\n\n      var arr = [];\n      var result = [];\n      var coResult = [];\n      var coArr = [];\n\n      if (this.halveAreaData.length) {\n        var data = this.dataSort(this.halveAreaData);\n        arr.push({\n          title: this.$t('trade.halving'),\n          titleIndex: 0,\n          data: data\n        });\n      }\n\n      if (this.MainAreaData.length) {\n        var _data = this.dataSort(this.MainAreaData);\n\n        arr.push({\n          title: this.$t('trade.maincon'),\n          data: _data\n        });\n      }\n\n      if (this.CreateAreaData.length) {\n        var _data2 = this.dataSort(this.CreateAreaData);\n\n        arr.push({\n          title: this.$t('trade.newcon'),\n          data: _data2\n        });\n      }\n\n      if (this.SeeAreaData.length) {\n        var _data3 = this.dataSort(this.SeeAreaData);\n\n        arr.push({\n          title: this.$t('trade.seecon'),\n          data: _data3\n        });\n      }\n\n      if (this.unsealAreaData.length) {\n        var _data4 = this.dataSort(this.unsealAreaData);\n\n        arr.push({\n          title: this.$t('trade.unseal'),\n          data: _data4\n        });\n      }\n\n      if (this.coAreaData.length) {\n        var _data5 = this.dataSort(this.coAreaData);\n\n        coArr.push({\n          title: this.$t('trade.unseal'),\n          data: _data5\n        });\n        coArr.forEach(function (el) {\n          var item = el;\n          var datas = el.data.filter(function (e) {\n            return e.isShow || _this2.listfilter || _this2.marketCurrent === 'USDT';\n          });\n\n          if (datas.length) {\n            item.data = datas;\n            var newItem = item;\n            coResult.push(newItem);\n          }\n        });\n      }\n\n      arr.forEach(function (el) {\n        var item = el;\n        var data = el.data.filter(function (e) {\n          return e.isShow || _this2.listfilter || _this2.marketCurrent === 'myMarket';\n        });\n\n        if (data.length) {\n          item.data = data;\n          var newItem = item;\n          item.data.forEach(function (citem, index) {\n            newItem.data[index].etfOpen = _this2.symbolAll[citem.id].etfOpen; // citem.etfOpen\n          });\n          result.push(newItem);\n        }\n      });\n\n      if (this.isCoOpen) {\n        return coResult;\n      }\n\n      return result;\n    },\n    // 表头\n    columns: function columns() {\n      return [{\n        title: this.$t('home.market'),\n        // 市场\n        key: 'sort',\n        sortable: !this.isCoOpen\n      }, {\n        title: this.$t('home.close'),\n        // 最新价\n        key: 'closes',\n        sortable: true\n      }, {\n        title: this.$t('home.applies'),\n        // 涨跌幅\n        key: 'roses',\n        sortable: true\n      }, {\n        title: this.$t('home.height') // 最高价\n\n      }, {\n        title: this.$t('home.low') // 最低价\n\n      }, {\n        title: this.isCoOpen ? \"\".concat(this.$t('home.H_volume'), \"(\").concat(this.$t('common.zhang'), \")\") : this.$t('home.H_volume') // 24H成交量\n\n      }, {\n        title: this.isCoOpen ? \"\".concat(this.$t('home.H_coNumber'), \"(\").concat(this.$t('common.zhang'), \")\") : this.$t('home.H_turnover') // 持仓量\n\n      }];\n    },\n    // 全部市场\n    marketAllList: function marketAllList() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.marketSort;\n      }\n\n      return [];\n    },\n    // 全部市场\n    coMmarketAllList: function coMmarketAllList() {\n      var _this3 = this;\n\n      var data = [];\n\n      if (this.usdtHeaderFlag) {\n        data.push(1);\n      }\n\n      if (this.usdHeaderFlag) {\n        data.push(2);\n      }\n\n      var arr = [];\n\n      if (data && data.length) {\n        data.forEach(function (ele) {\n          var obj = {};\n\n          if (Number(ele) === 1) {\n            obj.type = 'USDT';\n            obj.name = _this3.$t('home.tab_USDT');\n          }\n\n          if (Number(ele) === 2) {\n            obj.type = 'USD';\n            obj.name = _this3.$t('home.tab_USD');\n          }\n\n          arr.push(obj);\n        });\n        myStorage.set('homeMarkTitle', arr[0].type);\n      }\n\n      return arr;\n    },\n    // market\n    market: function market() {\n      if (this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.market;\n      }\n\n      return {};\n    },\n    // 全部币对列表\n    symbolAll: function symbolAll() {\n      return this.$store.state.baseData.symbolAll;\n    },\n    // 全部币种列表\n    coinList: function coinList() {\n      if (this.$store.state.baseData && this.$store.state.baseData.market) {\n        return this.$store.state.baseData.market.coinList;\n      }\n\n      return null;\n    }\n  },\n  watch: {\n    market: function market(v) {\n      if (Object.keys(v).length) {\n        this.filterArea();\n      }\n    },\n    listfilter: function listfilter(val) {\n      var data = this.marketDataList_bar;\n\n      if (val) {\n        var reg = new RegExp(val, 'gim');\n        data = this.marketDataList_bar.filter(function (item) {\n          return item.showName.match(reg);\n        });\n      }\n\n      this.setData(data, true);\n    },\n    dataList: function dataList(val) {\n      this.tableLoading = false;\n      this.marketDataList_bar = val;\n      var data = val;\n\n      if (this.listfilter) {\n        var reg = new RegExp(this.listfilter, 'gim');\n        data = this.marketDataList_bar.filter(function (item) {\n          return item.showName.match(reg);\n        });\n      }\n\n      this.setData(data);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearInterval(this.timer);\n  },\n  methods: {\n    init: function init() {\n      var _this4 = this;\n\n      this.marketCurrent = myStorage.get('homeMarkTitle');\n\n      if (Object.keys(this.market).length) {\n        this.filterArea();\n      } // 监听交易区\n\n\n      this.$bus.$on('COMARGET_SWITCH', function (data) {\n        if (data === 'USDT') {\n          _this4.usdtHeaderFlag = true;\n        }\n\n        if (data === 'USD') {\n          _this4.usdHeaderFlag = true;\n        }\n      });\n    },\n    enter: function enter(index) {\n      this.hoverIndex = index;\n    },\n    leave: function leave() {\n      this.hoverIndex = null;\n    },\n    lineClassesH: function lineClassesH(index) {\n      if (index === this.hoverIndex) {\n        return 'c-3-bg';\n      }\n\n      return 'c-4-bg';\n    },\n    dataSort: function dataSort(v) {\n      var _this5 = this;\n\n      if (this.sortValue.length) {\n        return v.sort(function (a, b) {\n          var first = a;\n          var end = b;\n\n          if (_this5.sortSell) {\n            first = b;\n            end = a;\n          }\n\n          switch (_this5.sortValue) {\n            case 'roses':\n              return (parseFloat(first.data[2][0].sortVal) || 0) - (parseFloat(end.data[2][0].sortVal) || 0);\n\n            case 'closes':\n              return (parseFloat(first.data[1][0].sortVal) || 0) - (parseFloat(end.data[1][0].sortVal) || 0);\n\n            default:\n              return (parseFloat(first.data[0][1].sortVal) || 0) - (parseFloat(end.data[0][1].sortVal) || 0);\n          }\n        });\n      }\n\n      return v;\n    },\n    sort: function sort(v) {\n      if (this.tableLoading) return;\n      if (!v.sortable) return;\n\n      if (this.sortValue !== v.key) {\n        this.sortValue = v.key;\n        this.sortSell = true;\n      } else {\n        this.sortSell = !this.sortSell;\n      }\n    },\n    setData: function setData(val) {\n      var _this6 = this;\n\n      var isSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (!this.isCoOpen) {\n        var MainArea = []; // 主区\n\n        var CreateArea = []; // 创新区\n\n        var SeeArea = []; // 观察区\n\n        var hideArea = []; // 隐藏区\n\n        var unsealArea = []; // 解封区\n\n        var halveArea = []; // 减半区\n\n        val.forEach(function (item) {\n          if (_this6.MainAreaFilter.indexOf(item.id) !== -1) {\n            MainArea.push(item);\n          }\n\n          if (_this6.CreateAreaFilter.indexOf(item.id) !== -1) {\n            CreateArea.push(item);\n          }\n\n          if (_this6.SeeAreaFilter.indexOf(item.id) !== -1) {\n            SeeArea.push(item);\n          }\n\n          if (_this6.hideAreaFilter.indexOf(item.id) !== -1) {\n            hideArea.push(item);\n          }\n\n          if (_this6.unsealAreaFilter.indexOf(item.id) !== -1 && !isSearch) {\n            unsealArea.push(item);\n          }\n\n          if (_this6.halveAreaFilter.indexOf(item.id) !== -1) {\n            halveArea.push(item);\n          }\n        });\n        this.MainAreaData = MainArea;\n        this.CreateAreaData = CreateArea;\n        this.SeeAreaData = SeeArea;\n        this.hideAreaData = hideArea;\n        this.unsealAreaData = unsealArea;\n        this.halveAreaData = halveArea;\n      } else {\n        this.coAreaData = _toConsumableArray(val);\n      }\n    },\n    filterArea: function filterArea() {\n      var _this7 = this;\n\n      var MainAreaFilter = []; // 主区币种\n\n      var CreateAreaFilter = []; // 创新区币种\n\n      var SeeAreaFilter = []; // 观察区币种\n\n      var hideAreaFilter = []; // 隐藏区币种\n\n      var unsealAreaFilter = []; // 解封区币种\n\n      var halveAreaFilter = []; // 减半区币种\n\n      Object.keys(this.market).forEach(function (item) {\n        Object.keys(_this7.market[item]).forEach(function (citem) {\n          var _this7$market$item$ci = _this7.market[item][citem],\n              newcoinFlag = _this7$market$item$ci.newcoinFlag,\n              name = _this7$market$item$ci.name; // 解封区\n\n          if (_this7.coinList[name.split('/')[0]] && _this7.coinList[name.split('/')[0]].isOvercharge && _this7.coinList[name.split('/')[0]].isOvercharge.toString() === '1') {\n            unsealAreaFilter.push(citem);\n          } else if (newcoinFlag === 1) {\n            // 创新区\n            CreateAreaFilter.push(citem); // 观察区\n          } else if (newcoinFlag === 2) {\n            SeeAreaFilter.push(citem);\n          } else if (newcoinFlag === 0) {\n            MainAreaFilter.push(citem);\n          } else if (newcoinFlag === 3) {\n            halveAreaFilter.push(citem);\n          }\n        });\n      });\n      this.MainAreaFilter = MainAreaFilter;\n      this.CreateAreaFilter = CreateAreaFilter;\n      this.SeeAreaFilter = SeeAreaFilter;\n      this.hideAreaFilter = hideAreaFilter;\n      this.unsealAreaFilter = unsealAreaFilter;\n      this.halveAreaFilter = halveAreaFilter;\n    },\n    marketClick: function marketClick(symbol) {\n      this.$bus.$emit('SWITCH-STORE', symbol);\n    },\n    // 切换市场\n    switchMarket: function switchMarket(data) {\n      if (this.tableLoading) return;\n      this.listfilter = null;\n      this.marketCurrent = this.isCoOpen ? data.type : data;\n      this.tableLoading = true;\n\n      if (data !== 'myMarket' && !this.isCoOpen) {\n        myStorage.set('homeMarkTitle', data);\n      }\n\n      if (this.isCoOpen) {\n        myStorage.set('homeMarkTitle', data.type);\n      }\n\n      this.$bus.$emit('SWITCH-MARKET', data);\n    },\n    bandLink: function bandLink(data, etfOpen) {\n      if (this.isCoOpen) {\n        var coUrl = this.linkurl.coUrl ? \"\".concat(this.linkurl.coUrl, \"/trade/\").concat(data) : '';\n        window.location.href = coUrl;\n        return;\n      }\n\n      myStorage.set('sSymbolName', data);\n\n      if (etfOpen) {\n        myStorage.set('markTitle', 'ETF');\n      } else {\n        myStorage.set('markTitle', data.split('/')[1]);\n      }\n\n      this.$router.push('/trade'); // this.$router.push(`/trade/${data.replace('/', '_')}`);\n    }\n  }\n};",null]}