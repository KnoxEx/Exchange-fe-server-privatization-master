{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/personal/advertisingManagement/advertisingManagement.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/personal/advertisingManagement/advertisingManagement.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { formatTime, fixD, imgMap, colorMap, getCoinShowName } from '@/utils';\nexport default {\n  name: 'advertisingManagement',\n  watch: {\n    otcPersonAds: function otcPersonAds(_otcPersonAds) {\n      if (_otcPersonAds !== null) {\n        if (this.publicInfo) {\n          this.loading = false;\n          this.count = _otcPersonAds.data.count;\n          this.dataProcessin(_otcPersonAds.data.adList, this.$store.state.baseData.market);\n        }\n      }\n    },\n    otcCloseWanted: function otcCloseWanted(_otcCloseWanted) {\n      if (_otcCloseWanted !== null) {\n        this.dialogConfirmLoading = false;\n\n        if (_otcCloseWanted.text === 'success') {\n          this.$bus.$emit('tip', {\n            text: _otcCloseWanted.msg,\n            type: 'success'\n          });\n          this.$store.dispatch('resetType');\n\n          if (this.currentTab === 1) {\n            var info = {\n              uid: this.uid,\n              pageSize: this.pageSize,\n              page: this.page,\n              adType: 'buy'\n            };\n            this.$store.dispatch('otcPersonAds', info);\n          } else {\n            var _info = {\n              uid: this.uid,\n              pageSize: this.pageSize,\n              page: this.page,\n              adType: 'sell'\n            };\n            this.$store.dispatch('otcPersonAds', _info);\n          }\n\n          this.dialogFlag = false;\n        } else {\n          this.$bus.$emit('tip', {\n            text: _otcCloseWanted.msg,\n            type: 'error'\n          });\n          this.$store.dispatch('resetType');\n          this.$bus.$emit('getCode-clear', 'phone');\n        }\n      }\n    },\n    userInfo: function userInfo(_userInfo) {\n      if (_userInfo) {\n        this.uid = _userInfo.id;\n        var info = {\n          uid: this.uid,\n          pageSize: this.pageSize,\n          page: this.page\n        };\n        this.$store.dispatch('otcPersonAds', info);\n      }\n    }\n  },\n  computed: {\n    navTab: function navTab() {\n      return [{\n        name: this.$t('personal.advertisingManagement.navTab')[0],\n        index: 1\n      }, {\n        name: this.$t('personal.advertisingManagement.navTab')[1],\n        index: 2\n      }];\n    },\n    baseData: function baseData() {\n      return this.$store.state.baseData;\n    },\n    otcPersonAds: function otcPersonAds() {\n      return this.$store.state.personal.otcPersonAds;\n    },\n    otcCloseWanted: function otcCloseWanted() {\n      return this.$store.state.personal.otcCloseWanted;\n    },\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo;\n    },\n    publicInfo: function publicInfo() {\n      return this.$store.state.baseData.publicInfo;\n    },\n    otcLinkUrl: function otcLinkUrl() {\n      var obj = {\n        url: '',\n        type: '' // 1为push 2为herf\n\n      }; // 开发\n\n      if (process.env.NODE_ENV === 'development') {\n        obj.url = '';\n        obj.type = '1'; // 线上\n      } else if (window.HOSTAPI === 'ex' && this.baseData.publicInfo) {\n        obj.url = this.$store.state.baseData.publicInfo.url.otcUrl;\n        obj.type = '2';\n      } else if (window.HOSTAPI === 'otc') {\n        obj.url = '';\n        obj.type = '1';\n      }\n\n      return obj;\n    }\n  },\n  data: function data() {\n    return {\n      // table loading\n      titleText: this.$t('personal.dialog.closeAd'),\n      imgMap: imgMap,\n      colorMap: colorMap,\n      loading: false,\n      // uid\n      uid: '',\n      // 横向导航参数\n      currentTab: 1,\n      marginRight: 48,\n      // 距离右边的距离\n      lineHeight: '55',\n      // table相关\n      columns: [{\n        title: this.$t('personal.advertisingManagement.columns')[0],\n        align: 'left',\n        width: '120px',\n        classes: ''\n      }, {\n        title: this.$t('personal.advertisingManagement.columns')[1],\n        align: 'right',\n        width: '100px'\n      }, {\n        title: this.$t('personal.advertisingManagement.columns')[2],\n        align: 'right',\n        width: '100px'\n      }, {\n        title: this.$t('personal.advertisingManagement.columns')[3],\n        align: 'right',\n        width: '150px'\n      }, {\n        title: this.$t('personal.advertisingManagement.columns')[4],\n        align: 'right',\n        width: '100px'\n      }, {\n        title: this.$t('personal.advertisingManagement.columns')[5],\n        align: 'right',\n        width: '100px'\n      }, {\n        title: this.$t('personal.advertisingManagement.columns')[6],\n        align: 'right',\n        width: '100px'\n      }],\n      dataList: [],\n      cellHeight: 55,\n      headHeight: 30,\n      lineNumber: 10,\n      classes: '',\n      headClasses: '',\n      bodyClasses: '',\n      lineClass: '',\n      // page相关\n      count: 0,\n      page: 1,\n      pageSize: 10,\n      // 弹框相关\n      dialogFlag: false,\n      dialogConfirmLoading: false,\n      dialogConfirmDisabled: false,\n      // 要关闭的广告id\n      advertId: ''\n    };\n  },\n  methods: {\n    init: function init() {\n      var userInfo = this.$store.state.baseData.userInfo;\n\n      if (userInfo !== null) {\n        this.loading = true;\n        this.uid = userInfo.id;\n        var info = {\n          uid: this.uid,\n          pageSize: this.pageSize,\n          page: this.page\n        };\n        this.$store.dispatch('otcPersonAds', info);\n      }\n    },\n    dataProcessin: function dataProcessin(list, market) {\n      var _this = this;\n\n      var dataList = [];\n\n      if (list !== null) {\n        list.forEach(function (obj) {\n          dataList.push({\n            id: [obj.advertId, _this.uid],\n            data: [formatTime(obj.createTime), obj.advertId, getCoinShowName(obj.coin, market.coinList), fixD(obj.price, market.coinList[obj.coin].fiatPrecision[obj.payCoin.toLowerCase()] ? Number(market.coinList[obj.coin].fiatPrecision[obj.payCoin.toLowerCase()]) : _this.$store.state.baseData.defaultFiatPrecision) + obj.payCoin, fixD(obj.volume, market.coinList[obj.coin].showPrecision), _this.stateHand(obj.status), [{\n              type: 'button',\n              text: _this.$t('personal.tool.view'),\n              iconClass: [''],\n              eventType: 'view',\n              classes: ''\n            }, {\n              // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n              type: _this.typeShow(obj.status),\n              text: _this.showText(obj.status),\n              iconClass: [''],\n              eventType: _this.eventType(obj.status),\n              classes: [_this.showClasses(obj.status)]\n            }]]\n          });\n        });\n        this.dataList = dataList;\n      }\n    },\n    currentType: function currentType(data) {\n      this.currentTab = data.index;\n      this.loading = true;\n\n      if (this.currentTab === 1) {\n        var info = {\n          uid: this.uid,\n          pageSize: this.pageSize,\n          page: this.page,\n          adType: 'buy'\n        };\n        this.$store.dispatch('otcPersonAds', info);\n      } else {\n        var _info2 = {\n          uid: this.uid,\n          pageSize: this.pageSize,\n          page: this.page,\n          adType: 'sell'\n        };\n        this.$store.dispatch('otcPersonAds', _info2);\n      }\n    },\n    closeData: function closeData(type, id) {\n      if (type === 'close') {\n        var _ref = [true, id[0]];\n        this.dialogFlag = _ref[0];\n        this.advertId = _ref[1];\n      } else if (type === 'view') {\n        if (this.otcLinkUrl.type === '1') {\n          this.$router.push(\"\".concat(this.otcLinkUrl.url, \"/otcTrade?orderId=\").concat(id[0], \"&userId=\").concat(id[1]));\n        } else if (this.otcLinkUrl.type === '2') {\n          window.location.href = \"\".concat(this.otcLinkUrl.url, \"/otcTrade?orderId=\").concat(id[0], \"&userId=\").concat(id[1]);\n        }\n      }\n    },\n    dialogClose: function dialogClose() {\n      this.dialogFlag = false;\n    },\n    dialogConfirm: function dialogConfirm() {\n      this.dialogConfirmLoading = true;\n      var info = {\n        advertId: this.advertId\n      };\n      this.$store.dispatch('otcCloseWanted', info);\n    },\n    pagechange: function pagechange(page) {\n      this.page = page;\n      var adType = 'buy';\n\n      if (this.currentTab !== 1) {\n        adType = 'sell';\n      }\n\n      var info = {\n        uid: this.uid,\n        pageSize: this.pageSize,\n        page: this.page,\n        adType: adType\n      };\n      this.$store.dispatch('otcPersonAds', info);\n    },\n    stateHand: function stateHand(num) {\n      switch (num) {\n        case 1:\n          return this.$t('personal.state.release');\n\n        case 2:\n          return this.$t('personal.state.trading');\n\n        case 3:\n          return this.$t('personal.state.overdue');\n\n        default:\n          return this.$t('personal.state.close');\n      }\n    },\n    showText: function showText(num) {\n      switch (num) {\n        case 1:\n          return this.$t('personal.state.close');\n\n        case 2:\n          return this.$t('personal.state.trading');\n\n        case 3:\n          return this.$t('personal.state.overdue');\n\n        default:\n          return this.$t('personal.state.closed');\n      }\n    },\n    eventType: function eventType(num) {\n      switch (num) {\n        case 1:\n          return 'close';\n\n        default:\n          return '';\n      }\n    },\n    showClasses: function showClasses(num) {\n      switch (num) {\n        case 1:\n          return '';\n\n        default:\n          return 'b-2-cl banned-click';\n      }\n    },\n    typeShow: function typeShow(num) {\n      switch (num) {\n        case 1:\n          return 'button';\n\n        default:\n          return 'label';\n      }\n    }\n  }\n};",null]}