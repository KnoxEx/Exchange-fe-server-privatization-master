{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/CompanyApplication/CompanyApplication/CompanyApplication.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/CompanyApplication/CompanyApplication/CompanyApplication.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.number.constructor\";\nimport { myStorage, imgMap } from '@/utils';\nexport default {\n  name: 'CompanyApplication',\n  data: function data() {\n    return {\n      jurisdictionObj: {\n        data: [],\n        // 数据\n        str: '',\n        // 文案\n        statusKey: '',\n        // 当前跳转状态\n        flag: false,\n        //\n        btnText: '',\n        // 确定按钮\n        btnLink: '',\n        // 确认文案\n        pass: true\n      },\n      textFlag: true,\n      copyTime: 0,\n      btnConfirm: this.$t('application.confirm'),\n      submitLoading: false,\n      // 提交按钮loading\n      superCompany: false,\n      confirmLoading: false,\n      alertFlag: false,\n      serviceList: this.$t('application.serviceList'),\n      viewShow: false,\n      imgList: [imgMap.application_security, imgMap.application_ads, imgMap.application_special, imgMap.application_vip]\n    };\n  },\n  watch: {},\n  computed: {\n    otcCompanyInfo: function otcCompanyInfo() {\n      return this.userInfo.otcCompanyInfo || {};\n    },\n    userCompanyInfo: function userCompanyInfo() {\n      return this.userInfo.userCompanyInfo || {};\n    },\n    btnShow: function btnShow() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      var bol = false;\n\n      if (applyStatus === 0 || applyRuleStatus === 0 || applyStatus === 1 && applyRuleStatus !== 4 && applyRuleStatus !== 2 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 2 || applyStatus === 2 && applyRuleStatus === 1 && companyStatus === 2) {\n        bol = true;\n      }\n\n      return bol;\n    },\n    congratulate: function congratulate() {\n      var str = '';\n\n      if (this.applyRuleStatus === 1) {\n        str = this.$t('application.congratulate');\n      } else {\n        str = this.$t('application.congratulateSuper');\n      }\n\n      return str;\n    },\n    allPass: function allPass() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      return applyRuleStatus === 3 && applyStatus === 3 || applyStatus === 3 && applyRuleStatus === 1 && companyStatus === 1;\n    },\n    applyBtn: function applyBtn() {\n      var str = '';\n\n      if (this.applyRuleStatus === 0) {\n        str = this.$t('application.applyBtn');\n      } else {\n        str = this.$t('application.applyBtnSuper');\n      }\n\n      return str;\n    },\n    companyStatus: function companyStatus() {\n      return Number(this.otcCompanyInfo.status);\n    },\n    applyStatus: function applyStatus() {\n      return Number(this.userCompanyInfo.applyStatus);\n    },\n    relieving: function relieving() {\n      var bol = false;\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus;\n\n      if (applyStatus === 1 && (applyRuleStatus === 2 || applyRuleStatus === 4)) {\n        bol = true;\n      }\n\n      return bol;\n    },\n\n    /*\r\n    * applyRuleStatus\r\n    * 0: 未认证\r\n    * 1: 普通商户\r\n    * 2: 普通商户解除\r\n    * 3: 超级商户\r\n    * 4: 超级商户解除\r\n    * */\n    applyRuleStatus: function applyRuleStatus() {\n      return Number(this.userCompanyInfo.status);\n    },\n    applyPass: function applyPass() {\n      var applyStatus = this.applyStatus,\n          applyRuleStatus = this.applyRuleStatus,\n          companyStatus = this.companyStatus;\n      return (applyRuleStatus === 1 && applyStatus === 3 || (applyStatus === 1 || applyStatus === 3) && applyRuleStatus === 3 || applyStatus === 2 && (applyRuleStatus === 1 || applyRuleStatus === 3) || applyStatus === 1 && applyRuleStatus === 1 && companyStatus === 2) && applyStatus !== 1;\n    },\n    marginCoinSymbol: function marginCoinSymbol() {\n      return this.otcCompanyInfo.marginCoinSymbol;\n    },\n    normalCompanyMarginNum: function normalCompanyMarginNum() {\n      return Number(this.otcCompanyInfo.normalCompanyMarginNum);\n    },\n    otcCompanyApplyEmail: function otcCompanyApplyEmail() {\n      return Number(this.otcCompanyInfo.otcCompanyApplyEmail);\n    },\n    docAddr: function docAddr() {\n      return Number(this.otcCompanyInfo.docAddr);\n    },\n    submitDisabled: function submitDisabled() {\n      return !this.textFlag;\n    },\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo || {};\n    }\n  },\n  methods: {\n    init: function init() {\n      if (this.companyStatus === 0) {\n        this.$router.push('/');\n      } else {\n        this.viewShow = true;\n      }\n\n      this.jurisdiction();\n    },\n    isSh: function isSh() {\n      if (this.userInfo.authLevel.toString() !== '1') {\n        // alert('请您先实名认证');\n        return;\n      }\n\n      if (this.userInfo.otcCompanyInfo && this.userInfo.userCompanyInfo) {\n        if (this.userInfo.otcCompanyInfo.status !== '0') {\n          if (this.userInfo.userCompanyInfo === '0') {// alert('请您申请成为商户');\n          }\n        }\n      }\n    },\n    jurisdiction: function jurisdiction() {\n      // const arr = [\n      //   { text: '绑定谷歌验证', flag: this.OpenGoogle },\n      //   { text: '绑定手机验证', flag: this.OpenMobile },\n      // ];\n      // let userInfo = {\n      //   authLevel: 1,\n      //   nickName: '1',\n      //   otcCompanyInfo: { status: 1 },\n      //   userCompanyInfo: { status: 0 }\n      // }\n      var data = []; // 请完成实名认证，设置昵称才能发布广告\n\n      var str = this.$t('otcRelease.jurisdictionTitle');\n      var _this$userInfo = this.userInfo,\n          otcCompanyInfo = _this$userInfo.otcCompanyInfo,\n          userCompanyInfo = _this$userInfo.userCompanyInfo,\n          nickName = _this$userInfo.nickName,\n          authLevel = _this$userInfo.authLevel;\n      var statusKey = '';\n      var btnText = '';\n      var btnLink = '';\n      var pass = true; // 实名认证\n\n      var authentication = this.$t('otcRelease.authentication');\n\n      if (authLevel.toString() === '1') {\n        data.push({\n          text: authentication,\n          flag: true,\n          key: 'authLevel'\n        });\n      } else {\n        data.push({\n          text: authentication,\n          flag: false,\n          key: 'authLevel'\n        });\n        statusKey = 'authLevel'; // 去认证\n\n        btnText = this.$t('otcRelease.DeCertification');\n        btnLink = '/personal/idAuth';\n        pass = false;\n      } // 设置昵称\n\n\n      var SetNickname = this.$t('otcRelease.SetNickname');\n\n      if (nickName && nickName.length) {\n        data.push({\n          text: SetNickname,\n          flag: true,\n          key: 'nickName'\n        });\n      } else {\n        data.push({\n          text: SetNickname,\n          flag: false,\n          key: 'nickName'\n        });\n\n        if (!statusKey.length) {\n          statusKey = 'nickName'; // 去设置\n\n          btnText = this.$t('otcRelease.ToSetUp');\n          btnLink = '/personal/userManagement';\n          pass = false;\n        }\n      } // 申请商户\n\n\n      if (otcCompanyInfo.status.toString() !== '0') {\n        // 请完成实名认证，设置昵称并申请成为商家才能发布广告\n        str = this.$t('otcRelease.jurisdictionTitle2');\n        var ApplicationMerchant = this.$t('otcRelease.ApplicationMerchant');\n\n        if (userCompanyInfo.status.toString() !== '0') {\n          data.push({\n            text: ApplicationMerchant,\n            flag: true,\n            key: 'companyInfo'\n          });\n        } else {\n          data.push({\n            text: ApplicationMerchant,\n            flag: false,\n            key: 'companyInfo'\n          });\n\n          if (!statusKey.length) {\n            statusKey = 'companyInfo'; // 去申请\n\n            btnText = this.$t('otcRelease.ToApply');\n            btnLink = 'self';\n            pass = false;\n          }\n        }\n      }\n\n      var obj = {\n        data: data,\n        str: str,\n        statusKey: statusKey,\n        btnText: btnText,\n        btnLink: btnLink,\n        pass: pass,\n        flag: !!statusKey.length\n      };\n      this.jurisdictionObj = obj;\n    },\n    alertConfirm: function alertConfirm() {\n      if (this.jurisdictionObj.btnLink === 'self') {\n        this.jurisdictionObj.flag = false;\n      } else {\n        this.$router.push(this.jurisdictionObj.btnLink);\n      }\n    },\n    verifyAlertClose: function verifyAlertClose() {\n      this.jurisdictionObj.flag = false;\n    },\n    alertClose: function alertClose() {\n      this.alertFlag = false;\n    },\n    confirm: function confirm() {\n      this.relieve();\n    },\n    checkoutClick: function checkoutClick(flag) {\n      this.textFlag = flag;\n    },\n    apply: function apply() {\n      this.$router.push('/companyApplicationDetail');\n    },\n    relieveClick: function relieveClick() {\n      this.alertFlag = true;\n    },\n    relieve: function relieve() {\n      var _this = this;\n\n      this.confirmLoading = true;\n      this.axios({\n        url: this.$store.state.url.common.company_release,\n        hostType: 'otc',\n        method: 'post'\n      }).then(function (data) {\n        if (!Number(data.code)) {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'success'\n          });\n\n          _this.$store.dispatch('getUserInfo');\n\n          _this.alertFlag = false;\n          _this.confirmLoading = false;\n          myStorage.remove('companyAppling');\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n\n          _this.alertFlag = false;\n          _this.confirmLoading = false;\n        }\n      });\n    }\n  }\n};",null]}