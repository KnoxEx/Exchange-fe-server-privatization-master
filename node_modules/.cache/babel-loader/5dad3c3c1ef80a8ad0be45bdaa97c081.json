{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/h/partTimeJob/blockchain-ui-privatization/PC/components/oldUploadFile/OldUploadFile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/components/oldUploadFile/OldUploadFile.vue","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'c-oldUploadFile',\n  props: {\n    // 最大尺寸\n    maxSize: {\n      type: String,\n      default: '5'\n    },\n    imageType: {\n      type: String,\n      default: '2'\n    },\n    // 上传数据类型\n    formatValue: {\n      type: String,\n      default: 'image/jpeg, image/jpg, image/png'\n    },\n    // 接口名\n    url: {\n      type: String,\n      default: ''\n    },\n    // 外部传入name\n    name: {\n      type: String,\n      default: ''\n    },\n    // 外部传入请求类型\n    isOpenUploadImg: {\n      type: String,\n      default: ''\n    },\n    // 外部传入可拓展项\n    expand: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    // className\n    className: {\n      type: String,\n      default: ''\n    },\n    // isWaterMark 添加水印\n    isWaterMark: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      // 真实文件尺寸\n      size: '',\n      // 真实文件格式\n      realFormatValue: ''\n    };\n  },\n  mounted: function mounted() {},\n  computed: {},\n  watch: {},\n  methods: {\n    uploadClick: function uploadClick() {\n      this.$refs.upload.click();\n    },\n    tellFun: function tellFun(e) {\n      var _this = this;\n\n      var val = e.target.files[0];\n\n      if (val.size > this.maxSize * 1024 * 1024) {\n        this.$emit('tellMessage', {\n          error: '图片尺寸过大',\n          code: 'maxSize'\n        });\n        e.target.value = '';\n      } else {\n        this.$emit('tellMessage', {\n          name: this.name\n        });\n        var formData = new FormData();\n        formData.append(this.name, val);\n        formData.append('name', this.name); // 添加水印\n\n        if (this.isWaterMark) {// formData.append('isWaterMark', 1);\n        }\n\n        if (this.expand.length > 0) {\n          this.expand.forEach(function (item) {\n            formData.append(Object.keys(item)[0], item[Object.keys(item)[0]]);\n          });\n        }\n\n        this.axios({\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          method: 'post',\n          url: this.url,\n          hostType: Number(this.isOpenUploadImg) === 1 ? 'upload' : null,\n          params: formData\n        }).then(function (res) {\n          if (!Number(res.code)) {\n            var data = res.data;\n            var fileName = data.filenameStr ? data.filenameStr : data.filename;\n            var name = data.name || _this.name;\n\n            _this.$emit('uploadFinish', {\n              url: data.base_image_url + fileName,\n              imgSrc: data.filename,\n              fileName: fileName,\n              name: name\n            });\n\n            e.target.value = '';\n          }\n        });\n      }\n    }\n  }\n};",null]}