{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/personal/ChangeEmail/ChangeEmail.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/personal/ChangeEmail/ChangeEmail.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nexport default {\n  name: 'changePassword',\n  watch: {\n    userInfo: function userInfo(userinfo) {\n      this.googleCode = !!Number(userinfo.googleStatus);\n      this.smsCode = !!Number(userinfo.isOpenMobileCheck);\n      this.checkValue1 = this.userInfo.email;\n    },\n    sendSmsCode: function sendSmsCode(_sendSmsCode) {\n      if (_sendSmsCode !== null) {\n        if (_sendSmsCode.text === 'success') {\n          this.$bus.$emit('tip', {\n            text: _sendSmsCode.msg,\n            type: 'success'\n          });\n          this.$store.dispatch('resetType');\n        } else {\n          this.$bus.$emit('tip', {\n            text: _sendSmsCode.msg,\n            type: 'error'\n          });\n          this.$store.dispatch('resetType');\n        }\n      }\n    },\n    emailUpdate: function emailUpdate(_emailUpdate) {\n      if (_emailUpdate !== null) {\n        this.loading = false;\n\n        if (_emailUpdate.text === 'success') {\n          this.$bus.$emit('tip', {\n            text: _emailUpdate.msg,\n            type: 'success'\n          });\n          this.$store.dispatch('resetType');\n          this.$router.push('/personal/userManagement');\n        } else {\n          this.$bus.$emit('tip', {\n            text: _emailUpdate.msg,\n            type: 'error'\n          });\n          this.$store.dispatch('resetType');\n\n          if (_emailUpdate.code !== '10009') {\n            this.$bus.$emit('getCode-clear', 'smsCode');\n          }\n        }\n      }\n    },\n    sendEmailCode: function sendEmailCode(_sendEmailCode) {\n      if (_sendEmailCode !== null) {\n        // console.log(sendEmailCode.text);\n        if (_sendEmailCode.text === 'success') {\n          this.$bus.$emit('tip', {\n            text: _sendEmailCode.msg,\n            type: 'success'\n          });\n          this.$store.dispatch('resetType');\n        } else {\n          this.$bus.$emit('tip', {\n            text: _sendEmailCode.msg,\n            type: 'error'\n          });\n          this.$store.dispatch('resetType');\n        }\n      }\n    }\n  },\n  computed: {\n    userInfo: function userInfo() {\n      return this.$store.state.baseData.userInfo;\n    },\n    sendSmsCode: function sendSmsCode() {\n      return this.$store.state.personal.sendSmsCode;\n    },\n    emailUpdate: function emailUpdate() {\n      return this.$store.state.personal.emailUpdate;\n    },\n    sendEmailCode: function sendEmailCode() {\n      return this.$store.state.personal.sendEmailCode;\n    }\n  },\n  data: function data() {\n    return {\n      loading: false,\n      checkValue1: '',\n      checkValue2: '',\n      checkValue3: '',\n      checkValue6: '',\n      checkValue4: '',\n      checkValue5: '',\n      promptText1: this.$t('personal.label.oldEmail'),\n      promptText2: this.$t('personal.label.newEmail'),\n      promptText3: this.$t('personal.label.emailCodeText'),\n      promptText6: this.$t('personal.label.newEmailCodeText'),\n      promptText4: this.$t('personal.label.smsCodeText'),\n      promptText5: this.$t('personal.label.googleCodeText'),\n      errorText1: '',\n      errorText2: this.$t('personal.prompt.errorEmailText'),\n      errorText3: this.$t('personal.prompt.errorCode'),\n      errorText6: this.$t('personal.prompt.errorCode'),\n      errorText4: this.$t('personal.prompt.errorCode'),\n      errorText5: this.$t('personal.prompt.errorCode'),\n      checkErrorFlag1: false,\n      checkErrorFlag2: false,\n      checkErrorFlag3: false,\n      checkErrorFlag6: false,\n      checkErrorFlag4: false,\n      checkErrorFlag5: false,\n      disabled: true,\n      oldNew: false,\n      smsCode: false,\n      googleCode: false\n    };\n  },\n  methods: {\n    init: function init() {\n      if (this.userInfo) {\n        this.googleCode = !!Number(this.userInfo.googleStatus);\n        this.smsCode = !!Number(this.userInfo.isOpenMobileCheck);\n        this.checkValue1 = this.userInfo.email;\n      }\n    },\n    getCodeClick: function getCodeClick(name) {\n      if (name === 'smsCode') {\n        this.$bus.$emit('getCode-start', 'smsCode');\n        var info = {\n          operationType: 15\n        };\n        this.$store.dispatch('sendSmsCode', info);\n      } else if (name === 'oldEmailCode') {\n        this.$bus.$emit('getCode-start', 'oldEmailCode');\n        var _info = {\n          operationType: 15\n        };\n        this.$store.dispatch('sendEmailCode', _info);\n      } else if (this.checkValue2) {\n        this.$bus.$emit('getCode-start', 'newEmailCode');\n        var _info2 = {\n          email: this.checkValue2,\n          operationType: 2\n        };\n        this.$store.dispatch('sendEmailCode', _info2);\n      } else {\n        this.checkErrorFlag2 = true;\n        this.errorText2 = this.$t('personal.prompt.errorEmail');\n      }\n    },\n    inputChanges: function inputChanges(value, name) {\n      switch (name) {\n        case 'newEmail':\n          {\n            // newEmail\n            this.checkValue2 = value;\n\n            if (this.emailFlag(value)) {\n              this.checkErrorFlag2 = false;\n            } else {\n              this.checkErrorFlag2 = true;\n            }\n\n            break;\n          }\n\n        case 'oldEmailCode':\n          {\n            // oldEmailCode\n            this.checkValue3 = value;\n\n            if (this.codeFlag(value)) {\n              this.checkErrorFlag3 = false;\n            } else {\n              this.checkErrorFlag3 = true;\n            }\n\n            break;\n          }\n\n        case 'newEmailCode':\n          {\n            // newEmailCode\n            this.checkValue6 = value;\n\n            if (this.codeFlag(value)) {\n              this.checkErrorFlag6 = false;\n            } else {\n              this.checkErrorFlag6 = true;\n            }\n\n            break;\n          }\n\n        case 'smsCode':\n          {\n            // 短信验证码\n            this.checkValue4 = value;\n\n            if (this.codeFlag(value)) {\n              this.checkErrorFlag4 = false;\n            } else {\n              this.checkErrorFlag4 = true;\n            }\n\n            break;\n          }\n\n        default:\n          {\n            // google验证码\n            this.checkValue5 = value;\n\n            if (this.codeFlag(value)) {\n              this.checkErrorFlag5 = false;\n            } else {\n              this.checkErrorFlag5 = true;\n            }\n          }\n      }\n\n      if (this.checkValue2 && this.checkValue3 && this.checkValue6 && !this.checkErrorFlag2 && !this.checkErrorFlag3 && !this.checkErrorFlag4 && !this.checkErrorFlag5 && !this.checkErrorFlag6) {\n        if (this.smsCode) {\n          this.disabled = !this.checkValue4;\n        }\n\n        if (this.googleCode) {\n          this.disabled = !this.checkValue5;\n        }\n\n        if (!this.smsCode && !this.googleCode) {\n          this.disabled = false;\n        }\n      } else {\n        this.disabled = true;\n      }\n    },\n    emailFlag: function emailFlag(val) {\n      return this.$store.state.regExp.email.test(val);\n    },\n    codeFlag: function codeFlag(val) {\n      return this.$store.state.regExp.verification.test(val);\n    },\n    btnLink: function btnLink() {\n      this.loading = true;\n      var info = {\n        emailOldValidCode: this.checkValue3,\n        emailNewValidCode: this.checkValue6,\n        email: this.checkValue2,\n        smsValidCode: this.checkValue4,\n        googleCode: this.checkValue5\n      };\n      this.$store.dispatch('emailUpdate', info);\n    }\n  }\n};",{"version":3,"sources":["/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/personal/ChangeEmail/ChangeEmail.js"],"names":["name","watch","userInfo","userinfo","googleCode","Number","googleStatus","smsCode","isOpenMobileCheck","checkValue1","email","sendSmsCode","text","$bus","$emit","msg","type","$store","dispatch","emailUpdate","loading","$router","push","code","sendEmailCode","computed","state","baseData","personal","data","checkValue2","checkValue3","checkValue6","checkValue4","checkValue5","promptText1","$t","promptText2","promptText3","promptText6","promptText4","promptText5","errorText1","errorText2","errorText3","errorText6","errorText4","errorText5","checkErrorFlag1","checkErrorFlag2","checkErrorFlag3","checkErrorFlag6","checkErrorFlag4","checkErrorFlag5","disabled","oldNew","methods","init","getCodeClick","info","operationType","inputChanges","value","emailFlag","codeFlag","val","regExp","test","verification","btnLink","emailOldValidCode","emailNewValidCode","smsValidCode"],"mappings":";AACA,eAAe;AACbA,EAAAA,IAAI,EAAE,gBADO;AAEbC,EAAAA,KAAK,EAAE;AACLC,IAAAA,QADK,oBACIC,QADJ,EACc;AACjB,WAAKC,UAAL,GAAkB,CAAC,CAACC,MAAM,CAACF,QAAQ,CAACG,YAAV,CAA1B;AACA,WAAKC,OAAL,GAAe,CAAC,CAACF,MAAM,CAACF,QAAQ,CAACK,iBAAV,CAAvB;AACA,WAAKC,WAAL,GAAmB,KAAKP,QAAL,CAAcQ,KAAjC;AACD,KALI;AAMLC,IAAAA,WANK,uBAMOA,YANP,EAMoB;AACvB,UAAIA,YAAW,KAAK,IAApB,EAA0B;AACxB,YAAIA,YAAW,CAACC,IAAZ,KAAqB,SAAzB,EAAoC;AAClC,eAAKC,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEF,YAAAA,IAAI,EAAED,YAAW,CAACI,GAApB;AAAyBC,YAAAA,IAAI,EAAE;AAA/B,WAAvB;AACA,eAAKC,MAAL,CAAYC,QAAZ,CAAqB,WAArB;AACD,SAHD,MAGO;AACL,eAAKL,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEF,YAAAA,IAAI,EAAED,YAAW,CAACI,GAApB;AAAyBC,YAAAA,IAAI,EAAE;AAA/B,WAAvB;AACA,eAAKC,MAAL,CAAYC,QAAZ,CAAqB,WAArB;AACD;AACF;AACF,KAhBI;AAiBLC,IAAAA,WAjBK,uBAiBOA,YAjBP,EAiBoB;AACvB,UAAIA,YAAW,KAAK,IAApB,EAA0B;AACxB,aAAKC,OAAL,GAAe,KAAf;;AACA,YAAID,YAAW,CAACP,IAAZ,KAAqB,SAAzB,EAAoC;AAClC,eAAKC,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEF,YAAAA,IAAI,EAAEO,YAAW,CAACJ,GAApB;AAAyBC,YAAAA,IAAI,EAAE;AAA/B,WAAvB;AACA,eAAKC,MAAL,CAAYC,QAAZ,CAAqB,WAArB;AACA,eAAKG,OAAL,CAAaC,IAAb,CAAkB,0BAAlB;AACD,SAJD,MAIO;AACL,eAAKT,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEF,YAAAA,IAAI,EAAEO,YAAW,CAACJ,GAApB;AAAyBC,YAAAA,IAAI,EAAE;AAA/B,WAAvB;AACA,eAAKC,MAAL,CAAYC,QAAZ,CAAqB,WAArB;;AACA,cAAIC,YAAW,CAACI,IAAZ,KAAqB,OAAzB,EAAkC;AAChC,iBAAKV,IAAL,CAAUC,KAAV,CAAgB,eAAhB,EAAiC,SAAjC;AACD;AACF;AACF;AACF,KAhCI;AAiCLU,IAAAA,aAjCK,yBAiCSA,cAjCT,EAiCwB;AAC3B,UAAIA,cAAa,KAAK,IAAtB,EAA4B;AAC1B;AACA,YAAIA,cAAa,CAACZ,IAAd,KAAuB,SAA3B,EAAsC;AACpC,eAAKC,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEF,YAAAA,IAAI,EAAEY,cAAa,CAACT,GAAtB;AAA2BC,YAAAA,IAAI,EAAE;AAAjC,WAAvB;AACA,eAAKC,MAAL,CAAYC,QAAZ,CAAqB,WAArB;AACD,SAHD,MAGO;AACL,eAAKL,IAAL,CAAUC,KAAV,CAAgB,KAAhB,EAAuB;AAAEF,YAAAA,IAAI,EAAEY,cAAa,CAACT,GAAtB;AAA2BC,YAAAA,IAAI,EAAE;AAAjC,WAAvB;AACA,eAAKC,MAAL,CAAYC,QAAZ,CAAqB,WAArB;AACD;AACF;AACF;AA5CI,GAFM;AAgDbO,EAAAA,QAAQ,EAAE;AACRvB,IAAAA,QADQ,sBACG;AACT,aAAO,KAAKe,MAAL,CAAYS,KAAZ,CAAkBC,QAAlB,CAA2BzB,QAAlC;AACD,KAHO;AAIRS,IAAAA,WAJQ,yBAIM;AACZ,aAAO,KAAKM,MAAL,CAAYS,KAAZ,CAAkBE,QAAlB,CAA2BjB,WAAlC;AACD,KANO;AAORQ,IAAAA,WAPQ,yBAOM;AACZ,aAAO,KAAKF,MAAL,CAAYS,KAAZ,CAAkBE,QAAlB,CAA2BT,WAAlC;AACD,KATO;AAURK,IAAAA,aAVQ,2BAUQ;AACd,aAAO,KAAKP,MAAL,CAAYS,KAAZ,CAAkBE,QAAlB,CAA2BJ,aAAlC;AACD;AAZO,GAhDG;AA8DbK,EAAAA,IA9Da,kBA8DN;AACL,WAAO;AACLT,MAAAA,OAAO,EAAE,KADJ;AAELX,MAAAA,WAAW,EAAE,EAFR;AAGLqB,MAAAA,WAAW,EAAE,EAHR;AAILC,MAAAA,WAAW,EAAE,EAJR;AAKLC,MAAAA,WAAW,EAAE,EALR;AAMLC,MAAAA,WAAW,EAAE,EANR;AAOLC,MAAAA,WAAW,EAAE,EAPR;AAQLC,MAAAA,WAAW,EAAE,KAAKC,EAAL,CAAQ,yBAAR,CARR;AASLC,MAAAA,WAAW,EAAE,KAAKD,EAAL,CAAQ,yBAAR,CATR;AAULE,MAAAA,WAAW,EAAE,KAAKF,EAAL,CAAQ,8BAAR,CAVR;AAWLG,MAAAA,WAAW,EAAE,KAAKH,EAAL,CAAQ,iCAAR,CAXR;AAYLI,MAAAA,WAAW,EAAE,KAAKJ,EAAL,CAAQ,4BAAR,CAZR;AAaLK,MAAAA,WAAW,EAAE,KAAKL,EAAL,CAAQ,+BAAR,CAbR;AAcLM,MAAAA,UAAU,EAAE,EAdP;AAeLC,MAAAA,UAAU,EAAE,KAAKP,EAAL,CAAQ,gCAAR,CAfP;AAgBLQ,MAAAA,UAAU,EAAE,KAAKR,EAAL,CAAQ,2BAAR,CAhBP;AAiBLS,MAAAA,UAAU,EAAE,KAAKT,EAAL,CAAQ,2BAAR,CAjBP;AAkBLU,MAAAA,UAAU,EAAE,KAAKV,EAAL,CAAQ,2BAAR,CAlBP;AAmBLW,MAAAA,UAAU,EAAE,KAAKX,EAAL,CAAQ,2BAAR,CAnBP;AAoBLY,MAAAA,eAAe,EAAE,KApBZ;AAqBLC,MAAAA,eAAe,EAAE,KArBZ;AAsBLC,MAAAA,eAAe,EAAE,KAtBZ;AAuBLC,MAAAA,eAAe,EAAE,KAvBZ;AAwBLC,MAAAA,eAAe,EAAE,KAxBZ;AAyBLC,MAAAA,eAAe,EAAE,KAzBZ;AA0BLC,MAAAA,QAAQ,EAAE,IA1BL;AA2BLC,MAAAA,MAAM,EAAE,KA3BH;AA4BLhD,MAAAA,OAAO,EAAE,KA5BJ;AA6BLH,MAAAA,UAAU,EAAE;AA7BP,KAAP;AA+BD,GA9FY;AA+FboD,EAAAA,OAAO,EAAE;AACPC,IAAAA,IADO,kBACA;AACL,UAAI,KAAKvD,QAAT,EAAmB;AACjB,aAAKE,UAAL,GAAkB,CAAC,CAACC,MAAM,CAAC,KAAKH,QAAL,CAAcI,YAAf,CAA1B;AACA,aAAKC,OAAL,GAAe,CAAC,CAACF,MAAM,CAAC,KAAKH,QAAL,CAAcM,iBAAf,CAAvB;AACA,aAAKC,WAAL,GAAmB,KAAKP,QAAL,CAAcQ,KAAjC;AACD;AACF,KAPM;AAQPgD,IAAAA,YARO,wBAQM1D,IARN,EAQY;AACjB,UAAIA,IAAI,KAAK,SAAb,EAAwB;AACtB,aAAKa,IAAL,CAAUC,KAAV,CAAgB,eAAhB,EAAiC,SAAjC;AACA,YAAM6C,IAAI,GAAG;AAAEC,UAAAA,aAAa,EAAE;AAAjB,SAAb;AACA,aAAK3C,MAAL,CAAYC,QAAZ,CAAqB,aAArB,EAAoCyC,IAApC;AACD,OAJD,MAIO,IAAI3D,IAAI,KAAK,cAAb,EAA6B;AAClC,aAAKa,IAAL,CAAUC,KAAV,CAAgB,eAAhB,EAAiC,cAAjC;AACA,YAAM6C,KAAI,GAAG;AAAEC,UAAAA,aAAa,EAAE;AAAjB,SAAb;AACA,aAAK3C,MAAL,CAAYC,QAAZ,CAAqB,eAArB,EAAsCyC,KAAtC;AACD,OAJM,MAIA,IAAI,KAAK7B,WAAT,EAAsB;AAC3B,aAAKjB,IAAL,CAAUC,KAAV,CAAgB,eAAhB,EAAiC,cAAjC;AACA,YAAM6C,MAAI,GAAG;AAAEjD,UAAAA,KAAK,EAAE,KAAKoB,WAAd;AAA2B8B,UAAAA,aAAa,EAAE;AAA1C,SAAb;AACA,aAAK3C,MAAL,CAAYC,QAAZ,CAAqB,eAArB,EAAsCyC,MAAtC;AACD,OAJM,MAIA;AACL,aAAKV,eAAL,GAAuB,IAAvB;AACA,aAAKN,UAAL,GAAkB,KAAKP,EAAL,CAAQ,4BAAR,CAAlB;AACD;AACF,KAzBM;AA0BPyB,IAAAA,YA1BO,wBA0BMC,KA1BN,EA0Ba9D,IA1Bb,EA0BmB;AACxB,cAAQA,IAAR;AACE,aAAK,UAAL;AAAiB;AAAE;AACjB,iBAAK8B,WAAL,GAAmBgC,KAAnB;;AACA,gBAAI,KAAKC,SAAL,CAAeD,KAAf,CAAJ,EAA2B;AACzB,mBAAKb,eAAL,GAAuB,KAAvB;AACD,aAFD,MAEO;AACL,mBAAKA,eAAL,GAAuB,IAAvB;AACD;;AACD;AACD;;AACD,aAAK,cAAL;AAAqB;AAAE;AACrB,iBAAKlB,WAAL,GAAmB+B,KAAnB;;AACA,gBAAI,KAAKE,QAAL,CAAcF,KAAd,CAAJ,EAA0B;AACxB,mBAAKZ,eAAL,GAAuB,KAAvB;AACD,aAFD,MAEO;AACL,mBAAKA,eAAL,GAAuB,IAAvB;AACD;;AACD;AACD;;AACD,aAAK,cAAL;AAAqB;AAAE;AACrB,iBAAKlB,WAAL,GAAmB8B,KAAnB;;AACA,gBAAI,KAAKE,QAAL,CAAcF,KAAd,CAAJ,EAA0B;AACxB,mBAAKX,eAAL,GAAuB,KAAvB;AACD,aAFD,MAEO;AACL,mBAAKA,eAAL,GAAuB,IAAvB;AACD;;AACD;AACD;;AACD,aAAK,SAAL;AAAgB;AAAE;AAChB,iBAAKlB,WAAL,GAAmB6B,KAAnB;;AACA,gBAAI,KAAKE,QAAL,CAAcF,KAAd,CAAJ,EAA0B;AACxB,mBAAKV,eAAL,GAAuB,KAAvB;AACD,aAFD,MAEO;AACL,mBAAKA,eAAL,GAAuB,IAAvB;AACD;;AACD;AACD;;AACD;AAAS;AAAE;AACT,iBAAKlB,WAAL,GAAmB4B,KAAnB;;AACA,gBAAI,KAAKE,QAAL,CAAcF,KAAd,CAAJ,EAA0B;AACxB,mBAAKT,eAAL,GAAuB,KAAvB;AACD,aAFD,MAEO;AACL,mBAAKA,eAAL,GAAuB,IAAvB;AACD;AACF;AA5CH;;AA8CA,UAAI,KAAKvB,WAAL,IAAoB,KAAKC,WAAzB,IAAwC,KAAKC,WAA7C,IACG,CAAC,KAAKiB,eADT,IAC4B,CAAC,KAAKC,eADlC,IAEG,CAAC,KAAKE,eAFT,IAE4B,CAAC,KAAKC,eAFlC,IAGG,CAAC,KAAKF,eAHb,EAG8B;AAC5B,YAAI,KAAK5C,OAAT,EAAkB;AAChB,eAAK+C,QAAL,GAAgB,CAAC,KAAKrB,WAAtB;AACD;;AACD,YAAI,KAAK7B,UAAT,EAAqB;AACnB,eAAKkD,QAAL,GAAgB,CAAC,KAAKpB,WAAtB;AACD;;AACD,YAAI,CAAC,KAAK3B,OAAN,IAAiB,CAAC,KAAKH,UAA3B,EAAuC;AACrC,eAAKkD,QAAL,GAAgB,KAAhB;AACD;AACF,OAbD,MAaO;AACL,aAAKA,QAAL,GAAgB,IAAhB;AACD;AACF,KAzFM;AA0FPS,IAAAA,SA1FO,qBA0FGE,GA1FH,EA0FQ;AACb,aAAO,KAAKhD,MAAL,CAAYS,KAAZ,CAAkBwC,MAAlB,CAAyBxD,KAAzB,CAA+ByD,IAA/B,CAAoCF,GAApC,CAAP;AACD,KA5FM;AA6FPD,IAAAA,QA7FO,oBA6FEC,GA7FF,EA6FO;AACZ,aAAO,KAAKhD,MAAL,CAAYS,KAAZ,CAAkBwC,MAAlB,CAAyBE,YAAzB,CAAsCD,IAAtC,CAA2CF,GAA3C,CAAP;AACD,KA/FM;AAgGPI,IAAAA,OAhGO,qBAgGG;AACR,WAAKjD,OAAL,GAAe,IAAf;AACA,UAAMuC,IAAI,GAAG;AACXW,QAAAA,iBAAiB,EAAE,KAAKvC,WADb;AAEXwC,QAAAA,iBAAiB,EAAE,KAAKvC,WAFb;AAGXtB,QAAAA,KAAK,EAAE,KAAKoB,WAHD;AAIX0C,QAAAA,YAAY,EAAE,KAAKvC,WAJR;AAKX7B,QAAAA,UAAU,EAAE,KAAK8B;AALN,OAAb;AAOA,WAAKjB,MAAL,CAAYC,QAAZ,CAAqB,aAArB,EAAoCyC,IAApC;AACD;AA1GM;AA/FI,CAAf","sourcesContent":["\r\nexport default {\r\n  name: 'changePassword',\r\n  watch: {\r\n    userInfo(userinfo) {\r\n      this.googleCode = !!Number(userinfo.googleStatus);\r\n      this.smsCode = !!Number(userinfo.isOpenMobileCheck);\r\n      this.checkValue1 = this.userInfo.email;\r\n    },\r\n    sendSmsCode(sendSmsCode) {\r\n      if (sendSmsCode !== null) {\r\n        if (sendSmsCode.text === 'success') {\r\n          this.$bus.$emit('tip', { text: sendSmsCode.msg, type: 'success' });\r\n          this.$store.dispatch('resetType');\r\n        } else {\r\n          this.$bus.$emit('tip', { text: sendSmsCode.msg, type: 'error' });\r\n          this.$store.dispatch('resetType');\r\n        }\r\n      }\r\n    },\r\n    emailUpdate(emailUpdate) {\r\n      if (emailUpdate !== null) {\r\n        this.loading = false;\r\n        if (emailUpdate.text === 'success') {\r\n          this.$bus.$emit('tip', { text: emailUpdate.msg, type: 'success' });\r\n          this.$store.dispatch('resetType');\r\n          this.$router.push('/personal/userManagement');\r\n        } else {\r\n          this.$bus.$emit('tip', { text: emailUpdate.msg, type: 'error' });\r\n          this.$store.dispatch('resetType');\r\n          if (emailUpdate.code !== '10009') {\r\n            this.$bus.$emit('getCode-clear', 'smsCode');\r\n          }\r\n        }\r\n      }\r\n    },\r\n    sendEmailCode(sendEmailCode) {\r\n      if (sendEmailCode !== null) {\r\n        // console.log(sendEmailCode.text);\r\n        if (sendEmailCode.text === 'success') {\r\n          this.$bus.$emit('tip', { text: sendEmailCode.msg, type: 'success' });\r\n          this.$store.dispatch('resetType');\r\n        } else {\r\n          this.$bus.$emit('tip', { text: sendEmailCode.msg, type: 'error' });\r\n          this.$store.dispatch('resetType');\r\n        }\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.state.baseData.userInfo;\r\n    },\r\n    sendSmsCode() {\r\n      return this.$store.state.personal.sendSmsCode;\r\n    },\r\n    emailUpdate() {\r\n      return this.$store.state.personal.emailUpdate;\r\n    },\r\n    sendEmailCode() {\r\n      return this.$store.state.personal.sendEmailCode;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      checkValue1: '',\r\n      checkValue2: '',\r\n      checkValue3: '',\r\n      checkValue6: '',\r\n      checkValue4: '',\r\n      checkValue5: '',\r\n      promptText1: this.$t('personal.label.oldEmail'),\r\n      promptText2: this.$t('personal.label.newEmail'),\r\n      promptText3: this.$t('personal.label.emailCodeText'),\r\n      promptText6: this.$t('personal.label.newEmailCodeText'),\r\n      promptText4: this.$t('personal.label.smsCodeText'),\r\n      promptText5: this.$t('personal.label.googleCodeText'),\r\n      errorText1: '',\r\n      errorText2: this.$t('personal.prompt.errorEmailText'),\r\n      errorText3: this.$t('personal.prompt.errorCode'),\r\n      errorText6: this.$t('personal.prompt.errorCode'),\r\n      errorText4: this.$t('personal.prompt.errorCode'),\r\n      errorText5: this.$t('personal.prompt.errorCode'),\r\n      checkErrorFlag1: false,\r\n      checkErrorFlag2: false,\r\n      checkErrorFlag3: false,\r\n      checkErrorFlag6: false,\r\n      checkErrorFlag4: false,\r\n      checkErrorFlag5: false,\r\n      disabled: true,\r\n      oldNew: false,\r\n      smsCode: false,\r\n      googleCode: false,\r\n    };\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.userInfo) {\r\n        this.googleCode = !!Number(this.userInfo.googleStatus);\r\n        this.smsCode = !!Number(this.userInfo.isOpenMobileCheck);\r\n        this.checkValue1 = this.userInfo.email;\r\n      }\r\n    },\r\n    getCodeClick(name) {\r\n      if (name === 'smsCode') {\r\n        this.$bus.$emit('getCode-start', 'smsCode');\r\n        const info = { operationType: 15 };\r\n        this.$store.dispatch('sendSmsCode', info);\r\n      } else if (name === 'oldEmailCode') {\r\n        this.$bus.$emit('getCode-start', 'oldEmailCode');\r\n        const info = { operationType: 15 };\r\n        this.$store.dispatch('sendEmailCode', info);\r\n      } else if (this.checkValue2) {\r\n        this.$bus.$emit('getCode-start', 'newEmailCode');\r\n        const info = { email: this.checkValue2, operationType: 2 };\r\n        this.$store.dispatch('sendEmailCode', info);\r\n      } else {\r\n        this.checkErrorFlag2 = true;\r\n        this.errorText2 = this.$t('personal.prompt.errorEmail');\r\n      }\r\n    },\r\n    inputChanges(value, name) {\r\n      switch (name) {\r\n        case 'newEmail': { // newEmail\r\n          this.checkValue2 = value;\r\n          if (this.emailFlag(value)) {\r\n            this.checkErrorFlag2 = false;\r\n          } else {\r\n            this.checkErrorFlag2 = true;\r\n          }\r\n          break;\r\n        }\r\n        case 'oldEmailCode': { // oldEmailCode\r\n          this.checkValue3 = value;\r\n          if (this.codeFlag(value)) {\r\n            this.checkErrorFlag3 = false;\r\n          } else {\r\n            this.checkErrorFlag3 = true;\r\n          }\r\n          break;\r\n        }\r\n        case 'newEmailCode': { // newEmailCode\r\n          this.checkValue6 = value;\r\n          if (this.codeFlag(value)) {\r\n            this.checkErrorFlag6 = false;\r\n          } else {\r\n            this.checkErrorFlag6 = true;\r\n          }\r\n          break;\r\n        }\r\n        case 'smsCode': { // 短信验证码\r\n          this.checkValue4 = value;\r\n          if (this.codeFlag(value)) {\r\n            this.checkErrorFlag4 = false;\r\n          } else {\r\n            this.checkErrorFlag4 = true;\r\n          }\r\n          break;\r\n        }\r\n        default: { // google验证码\r\n          this.checkValue5 = value;\r\n          if (this.codeFlag(value)) {\r\n            this.checkErrorFlag5 = false;\r\n          } else {\r\n            this.checkErrorFlag5 = true;\r\n          }\r\n        }\r\n      }\r\n      if (this.checkValue2 && this.checkValue3 && this.checkValue6\r\n          && !this.checkErrorFlag2 && !this.checkErrorFlag3\r\n          && !this.checkErrorFlag4 && !this.checkErrorFlag5\r\n          && !this.checkErrorFlag6) {\r\n        if (this.smsCode) {\r\n          this.disabled = !this.checkValue4;\r\n        }\r\n        if (this.googleCode) {\r\n          this.disabled = !this.checkValue5;\r\n        }\r\n        if (!this.smsCode && !this.googleCode) {\r\n          this.disabled = false;\r\n        }\r\n      } else {\r\n        this.disabled = true;\r\n      }\r\n    },\r\n    emailFlag(val) {\r\n      return this.$store.state.regExp.email.test(val);\r\n    },\r\n    codeFlag(val) {\r\n      return this.$store.state.regExp.verification.test(val);\r\n    },\r\n    btnLink() {\r\n      this.loading = true;\r\n      const info = {\r\n        emailOldValidCode: this.checkValue3,\r\n        emailNewValidCode: this.checkValue6,\r\n        email: this.checkValue2,\r\n        smsValidCode: this.checkValue4,\r\n        googleCode: this.checkValue5,\r\n      };\r\n      this.$store.dispatch('emailUpdate', info);\r\n    },\r\n  },\r\n};\r\n"]}]}