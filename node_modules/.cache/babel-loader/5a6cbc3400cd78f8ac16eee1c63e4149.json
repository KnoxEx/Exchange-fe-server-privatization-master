{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/personal/brokerSystem/commission/commission.js","dependencies":[{"path":"/Users/h/partTimeJob/blockchain-ui-privatization/PC/common-mixin/personal/brokerSystem/commission/commission.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport { imgMap, colorMap, fixD, formatTime } from '@/utils';\nexport default {\n  data: function data() {\n    return {\n      currentTab: 1,\n      lineHeight: '55',\n      marginRight: 50,\n      // 距离右边的距离\n      loading1: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      loading2: true,\n      dataList: [],\n      dataList2: [],\n      cellHeight: 55,\n      headHeight: 30,\n      lineNumber: 10,\n      classes: '',\n      headClasses: '',\n      bodyClasses: '',\n      lineClass: '',\n      // 分页器1\n      list1Page: {\n        count: 0,\n        // 总条数\n        page: 1,\n        // 当前page\n        pageSize: 10 // 每页显示\n\n      },\n      // 分页器2\n      list2Page: {\n        count: 0,\n        // 总条数\n        page: 1,\n        // 当前page\n        pageSize: 10 // 每页显示\n\n      },\n      startTime: '',\n      endTime: '',\n      coin: 'all',\n      coinList: []\n    };\n  },\n  watch: {\n    market: {\n      immediate: true,\n      handler: function handler(v) {\n        if (v) {\n          this.init();\n        }\n      }\n    }\n  },\n  computed: {\n    usdtFix: function usdtFix() {\n      var fix = 2;\n\n      if (this.market && this.market.coinList && this.market.coinList.USDT) {\n        fix = this.market.coinList.USDT.showPrecision;\n      }\n\n      return fix;\n    },\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    sideList: function sideList() {\n      return [// 方向选择列表\n      // 全部\n      {\n        code: 'all',\n        value: this.$t('order.exchangeOrder.all')\n      }, // 买入\n      {\n        code: 'buy',\n        value: this.$t('order.exchangeOrder.buy')\n      }, // 卖出\n      {\n        code: 'sell',\n        value: this.$t('order.exchangeOrder.sell')\n      }];\n    },\n    startTimeNum: function startTimeNum() {\n      return (new Date(this.startTime.replace(/-/g, '/')).getTime() / 1000).toString();\n    },\n    endTimeNum: function endTimeNum() {\n      return (new Date(this.endTime.replace(/-/g, '/')).getTime() / 1000).toString();\n    },\n    startTimeText: function startTimeText() {\n      return this.$t('broker.startTime');\n    },\n    endTimeText: function endTimeText() {\n      return this.$t('freeStaking.myPos.endTime');\n    },\n    navTab: function navTab() {\n      return [{\n        name: this.$t('brokerSystem.commissionNavTab[0]'),\n        index: 1\n      }, {\n        name: this.$t('brokerSystem.commissionNavTab[1]'),\n        index: 2\n      }];\n    },\n    columns: function columns() {\n      return [{\n        title: this.$t('brokerSystem.commissionTable[1]'),\n        align: 'left',\n        width: '200px',\n        classes: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[2]'),\n        align: 'center',\n        width: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[3]'),\n        align: 'center',\n        width: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[4]'),\n        align: 'right',\n        width: ''\n      }];\n    },\n    columns2: function columns2() {\n      return [{\n        title: this.$t('brokerSystem.commissionTable[0]'),\n        align: 'left',\n        width: '200px',\n        classes: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[1]'),\n        align: 'center',\n        width: '200px',\n        classes: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[2]'),\n        align: 'center',\n        width: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[3]'),\n        align: 'center',\n        width: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[4]'),\n        width: ''\n      }, {\n        title: this.$t('brokerSystem.commissionTable[5]'),\n        align: 'right',\n        width: ''\n      }];\n    }\n  },\n  methods: {\n    init: function init() {\n      this.startTime = this.getNowTime(this.getMonth(-1));\n      this.endTime = this.getNowTime(this.getMonth(0)); // const arr = [\n      //   { code: 'all', value: this.$t('order.exchangeOrder.all') },\n      // ];\n      // Object.keys(this.market.coinList).forEach((v) => {\n      //   const even = this.market.coinList[v];\n      //   arr.push({\n      //     code: even.showName || even.name,\n      //     value: even.name,\n      //   });\n      // });\n      // this.coinList = arr;\n\n      this.getList1();\n    },\n    pagechange1: function pagechange1(v) {\n      this.list1Page.page = v;\n      this.getList1();\n    },\n    pagechange2: function pagechange2(v) {\n      this.list2Page.page = v;\n      this.getList2();\n    },\n    getList1: function getList1() {\n      var _this = this;\n\n      // const data = {\n      //   mapList: [\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //     { coin: 'USDT', amount_total: '1', amount_return: '2', amount_sub: '3', },\n      //   ]\n      // }\n      this.axios({\n        url: 'co/agent/bonus_survey',\n        hostType: 'fe-increment-api',\n        params: {\n          page: this.list1Page.page,\n          pageSize: this.list1Page.pageSize\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this.setList1(data.data.mapList);\n\n          _this.list1Page.count = data.data.count;\n\n          _this.setV2(data.data.mapList);\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    setV2: function setV2(data) {\n      var arr = [{\n        code: 'all',\n        value: this.$t('order.exchangeOrder.all')\n      }];\n      data.forEach(function (v) {\n        arr.push({\n          code: v.coin,\n          value: v.coin\n        });\n      });\n      this.coinList = arr;\n      this.getList2();\n    },\n    getFix: function getFix(v) {\n      var fix = 2;\n\n      if (this.market && this.market.coinList && this.market.coinList[v]) {\n        fix = this.market.coinList[v].showPrecision;\n      }\n\n      return fix;\n    },\n    setList1: function setList1(data) {\n      var _this2 = this;\n\n      this.loading1 = false;\n      var arr = [];\n      data.forEach(function (item, index) {\n        var fix = _this2.getFix(item.coin.toUpperCase());\n\n        arr.push({\n          id: index,\n          data: [item.coin, fixD(item.amount_return, fix), fixD(item.amount_sub, fix), fixD(item.amount_total, fix)]\n        });\n      });\n      this.dataList = arr;\n    },\n    getList2: function getList2() {\n      var _this3 = this;\n\n      this.axios({\n        url: 'co/agent/bonus_record',\n        hostType: 'fe-increment-api',\n        params: {\n          page: this.list2Page.page,\n          pageSize: this.list2Page.pageSize,\n          start_time: formatTime(new Date(this.startTime).getTime()),\n          end_time: formatTime(new Date(this.endTime).getTime()),\n          coin: this.coin === 'all' ? undefined : this.coin\n        }\n      }).then(function (data) {\n        if (data.code.toString() === '0') {\n          _this3.setList2(data.data.mapList);\n\n          _this3.list2Page.count = data.data.count;\n        } else {\n          _this3.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      }); // const data = [\n      //   { coin: 'USDT', amount_total: '123', amount_return: '13', amount_sub: 123, time: 123 },\n      //   { coin: 'USDT', amount_total: '123', amount_return: '13', amount_sub: 123, time: 123 },\n      //   { coin: 'USDT', amount_total: '123', amount_return: '13', amount_sub: 123, time: 123 },\n      //   { coin: 'USDT', amount_total: '123', amount_return: '13', amount_sub: 123, time: 123 },\n      //   { coin: 'USDT', amount_total: '123', amount_return: '13', amount_sub: 123, time: 123 },\n      //   { coin: 'USDT', amount_total: '123', amount_return: '13', amount_sub: 123, time: 123 },\n      // ]\n    },\n    setList2: function setList2(data) {\n      var _this4 = this;\n\n      this.loading2 = false;\n      var arr = [];\n      data.forEach(function (item, index) {\n        var fix = _this4.getFix(item.coin.toUpperCase());\n\n        arr.push({\n          id: index,\n          data: [item.time ? formatTime(item.time) : '--', // 时间\n          item.coin, // 币种\n          fixD(item.amount_return, fix), // 直推佣金\n          fixD(item.amount_sub, fix), // 子经纪分佣\n          fixD(item.amount_total, fix), // 累计佣金\n          _this4.$t('brokerSystem.commissionTable[6]')]\n        });\n      });\n      this.dataList2 = arr;\n    },\n    getMonth: function getMonth(n) {\n      var date = new Date();\n      return date.setMonth(date.getMonth() + n);\n    },\n    getNowTime: function getNowTime() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var date = new Date(time);\n      var year = date.getFullYear();\n      var month = date.getMonth() + 1;\n      var day = date.getDate();\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    },\n    startTimeSelect: function startTimeSelect(v) {\n      this.startTime = v;\n      this.loading2 = true;\n      this.list2Page.page = 1;\n      this.getList2();\n    },\n    endTimeSelect: function endTimeSelect(v) {\n      this.endTime = v;\n      this.loading2 = true;\n      this.list2Page.page = 1;\n      this.getList2();\n    },\n    currentType: function currentType(data) {\n      this.currentTab = data.index;\n    },\n    coinChange: function coinChange(item) {\n      this.coin = item.code;\n      this.loading2 = true;\n      this.list2Page.page = 1;\n      this.getList2();\n    }\n  }\n};",null]}