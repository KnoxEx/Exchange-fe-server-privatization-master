{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/coFlowingWater/coFlowingWater.js","dependencies":[{"path":"/Users/h/partTimeJob/BlockChain-ui-privatization/PC/common-mixin/assets/coFlowingWater/coFlowingWater.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, colorMap, imgMap } from '@/utils';\nexport default {\n  name: 'page-flowingWater',\n  data: function data() {\n    return {\n      tabelLoading: true,\n      imgMap: imgMap,\n      colorMap: colorMap,\n      tabelList: [],\n      // table数据列表\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      startTime: '',\n      endTime: '',\n      type: 'all',\n      symbol: '' // symbolList: [],\n\n    };\n  },\n  computed: {\n    tradeLinkUrl: function tradeLinkUrl() {\n      if (process.env.NODE_ENV === 'development') {\n        return '/co/trade';\n      }\n\n      if (this.$store.state.baseData && this.$store.state.baseData.publicInfo) {\n        return \"\".concat(this.linkurl.coUrl, \"/trade\");\n      }\n\n      return '';\n    },\n    marginCoinList: function marginCoinList() {\n      if (this.$store.state.future.marginCoinList) {\n        return this.$store.state.future.marginCoinList;\n      }\n\n      return [];\n    },\n    // 币种信息\n    marginCoinInfor: function marginCoinInfor() {\n      if (this.$store.state.future.marginCoinInfor) {\n        return this.$store.state.future.marginCoinInfor;\n      }\n\n      return {};\n    },\n    symbolList: function symbolList() {\n      var arr = [];\n\n      if (this.marginCoinList.length !== 0) {\n        this.marginCoinList.forEach(function (item) {\n          arr.push({\n            value: item,\n            code: item\n          });\n        });\n        this.symbol = arr[0].code;\n      }\n\n      return arr;\n    },\n    typeList: function typeList() {\n      return [{\n        code: 'all',\n        value: this.$t('futures.coFlowingWater.all')\n      }, // 全部\n      {\n        code: '1',\n        value: this.$t('futures.coFlowingWater.transferIn')\n      }, // 转入\n      {\n        code: '2',\n        value: this.$t('futures.coFlowingWater.transferOut')\n      }, // 转出\n      // { code: '3', value: '结算多仓' }, // 结算多仓\n      // { code: '4', value: '结算空仓' }, // 结算空仓\n      {\n        code: '5',\n        value: this.$t('futures.coFlowingWater.fee')\n      }, // 资金费用\n      {\n        code: '6',\n        value: this.$t('futures.coFlowingWater.typeList5')\n      }, // 开仓手续费\n      {\n        code: '7',\n        value: this.$t('futures.coFlowingWater.typeList4')\n      }, // 平仓手续费\n      {\n        code: '8',\n        value: this.$t('futures.coFlowingWater.loss')\n      }, // 分摊\n      {\n        code: '9',\n        value: this.$t('futures.coFlowingWater.typeList1')\n      }, // 手续费分成\n      {\n        code: '10',\n        value: this.$t('futures.coFlowingWater.typeList2')\n      }, // 增金发放\n      {\n        code: '11',\n        value: this.$t('futures.coFlowingWater.typeList3')\n      } // 赠金回收\n      ];\n    },\n    axiosType: function axiosType() {\n      if (this.type === 'all') {\n        return '';\n      }\n\n      return this.type;\n    },\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    // 表格title\n    columns: function columns() {\n      var list = [{\n        title: this.$t('futures.coFlowingWater.time'),\n        width: '20%'\n      }, // 时间\n      {\n        title: this.$t('futures.coFlowingWater.type'),\n        width: '20%'\n      }, // 类型\n      {\n        title: this.$t('futures.coFlowingWater.amount'),\n        width: '20%'\n      }, // 金额\n      {\n        title: this.$t('futures.order.contract'),\n        width: '20%'\n      }, // 手续费\n      {\n        title: this.$t('futures.coFlowingWater.coin'),\n        width: '20%'\n      } // 币种\n      ];\n      return list;\n    }\n  },\n  watch: {\n    // marginCoinList(v) {\n    //   if (v) {\n    //     const arr = [];\n    //     this.$store.state.future.marginCoinList.forEach((item) => {\n    //       arr.push({ value: item, code: item });\n    //     });\n    //     this.symbolList = arr;\n    //     console.log(this.symbolList)\n    //     this.symbol = arr[0].code;\n    //     console.log(this.symbol)\n    //     this.getData();\n    //   }\n    // },\n    symbol: function symbol(v) {\n      if (v) {\n        this.getData();\n      }\n    }\n  },\n  methods: {\n    init: function init() {\n      this.resetTime(); // this.getSymbolList();\n    },\n    // getSymbolList() {\n    //   const arr = [];\n    //   const list = this.marginCoinList;\n    //   if (list) {\n    //     list.forEach((item) => {\n    //       arr.push({ value: item, code: item });\n    //     });\n    //     this.symbol = arr[0].code;\n    //     this.symbolList = arr;\n    //   }\n    // },\n    // 重置时间\n    resetTime: function resetTime() {\n      var timestamp = new Date().getTime();\n      var t = 60 * 60 * 24 * 1000 * 14;\n      this.startTime = this.getNowTime(timestamp - t);\n      this.endTime = this.getNowTime(timestamp);\n      this.start = \"\".concat(this.startTime, \" 00:00:00\");\n      this.end = \"\".concat(this.endTime, \" 23:59:59\");\n    },\n    getNowTime: function getNowTime() {\n      var time = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var date = new Date(time);\n      var year = date.getFullYear();\n      var month = date.getMonth() + 1;\n      var day = date.getDate();\n      return \"\".concat(year, \"-\").concat(month, \"-\").concat(day);\n    },\n    // 选择时间\n    startTimeSelect: function startTimeSelect(v) {\n      this.startTime = v;\n      this.start = \"\".concat(this.startTime, \" 00:00:00\");\n      this.end = \"\".concat(this.endTime, \" 23:59:59\");\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    endTimeSelect: function endTimeSelect(v) {\n      this.endTime = v;\n      this.start = \"\".concat(this.startTime, \" 00:00:00\");\n      this.end = \"\".concat(this.endTime, \" 23:59:59\");\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    symbolChange: function symbolChange(item) {\n      this.symbol = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    typeChange: function typeChange(item) {\n      this.type = item.code;\n      this.paginationObj.currentPage = 1; // 页码\n\n      this.paginationObj.total = 0; // 总条数\n\n      this.tabelList = [];\n      this.tabelLoading = true;\n      this.getData();\n    },\n    getData: function getData() {\n      var _this = this;\n\n      this.axios({\n        url: 'record/get_transaction_list',\n        hostType: 'co',\n        params: {\n          limit: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          beginTime: new Date(this.start).getTime(),\n          endTime: new Date(this.end).getTime(),\n          type: this.axiosType,\n          symbol: this.symbol\n        }\n      }).then(function (data) {\n        _this.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n\n          if (data.data.transList && data.data.transList.length !== 0) {\n            data.data.transList.forEach(function (item, index) {\n              list.push({\n                id: index,\n                data: [item.ctime, // 时间\n                item.type, // 类型\n                fixD(item.amount, _this.marginCoinInfor[_this.symbol].marginCoinPrecision), // 金额\n                item.contractName, // 合约\n                _this.symbol]\n              });\n            });\n          }\n\n          _this.tabelList = list;\n          _this.paginationObj.total = data.data.count;\n        } else {\n          _this.$bus.$emit('tip', {\n            text: data.msg,\n            type: 'error'\n          });\n        }\n      });\n    },\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n      this.getData();\n    }\n  }\n};",null]}