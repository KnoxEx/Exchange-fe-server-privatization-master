{"remainingRequest":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js!/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/b2cRecrgeHis/b2cRecrgeHis.js","dependencies":[{"path":"/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/b2cRecrgeHis/b2cRecrgeHis.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/babel.config.js","mtime":1620459862000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/h/partTimeJob/exchange-fe-server-privatization-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { fixD, formatTime, colorMap } from '@/utils';\nexport default {\n  name: 'b2cRecrgeHis',\n  props: {\n    symbol: {\n      default: '',\n      type: String\n    },\n    // 是否为最近\n    lately: {\n      default: false,\n      type: Boolean\n    }\n  },\n  data: function data() {\n    return {\n      colorMap: colorMap,\n      revokeList: [],\n      // 撤销队列\n      paginationObj: {\n        total: 0,\n        // 数据总条数\n        display: 10,\n        // 每页显示条数\n        currentPage: 1 // 当前页码\n\n      },\n      tabelLoading: true,\n      tabelList: [],\n      // 提现记录\n      subTableData: [],\n      // 提现记录详情\n      subTableDataId: null,\n      // 提现记录详情ID\n      financeListData: [],\n      imgUrl: '',\n      QRflag: false\n    };\n  },\n  watch: {\n    symbol: function symbol(v) {\n      if (v && this.market) {\n        this.getTableList();\n      }\n    },\n    market: function market(v) {\n      if (v && this.symbol) {\n        this.getTableList();\n      }\n    },\n    paginationObjCurrentPage: function paginationObjCurrentPage() {\n      this.getTableList();\n    }\n  },\n  computed: {\n    // market 接口\n    market: function market() {\n      return this.$store.state.baseData.market;\n    },\n    paginationObjCurrentPage: function paginationObjCurrentPage() {\n      return this.paginationObj.currentPage;\n    },\n    columns: function columns() {\n      return [{\n        title: this.$t('assets.recharge.RechargeTime'),\n        width: '15%'\n      }, // 提现时间\n      {\n        title: this.$t('assets.recharge.RechargeCoin'),\n        width: '10%'\n      }, // 币种\n      {\n        title: this.$t('assets.b2c.b2cRecrgeHisList1'),\n        width: '18%'\n      }, // 申请数量\n      {\n        title: this.$t('assets.b2c.b2cRecrgeHisList2'),\n        width: '18%'\n      }, // 实际到账\n      {\n        title: this.$t('assets.withdraw.withdrawStatus'),\n        width: '14%'\n      }, // 状态\n      {\n        title: this.$t('assets.withdraw.withdrawOptions'),\n        width: '25%'\n      } // 操作\n      ];\n    },\n    subColumns: function subColumns() {\n      return [this.$t('assets.b2c.b2cRecrgeHisList3'), // 处理时间\n      this.$t('assets.b2c.firstWay'), // 收款方式\n      this.$t('assets.b2c.addressUserName') // 收款人\n      ];\n    }\n  },\n  methods: {\n    init: function init() {\n      var _this = this;\n\n      if (this.symbol && this.market) {\n        this.getTableList();\n      }\n\n      this.$bus.$on('b2cRecrgeHisGet', function () {\n        _this.tabelLoading = true;\n        _this.paginationObj.currentPage = 1;\n\n        _this.getTableList();\n      });\n    },\n    QRcodeClick: function QRcodeClick() {\n      this.QRflag = false;\n    },\n    showPrecision: function showPrecision(symbol) {\n      var v = 0;\n      var market = this.$store.state.baseData.market;\n\n      if (market && market.coinList && market.coinList[symbol]) {\n        v = market.coinList[symbol].showPrecision;\n      }\n\n      return v;\n    },\n    // 分页器\n    pagechange: function pagechange(v) {\n      this.paginationObj.currentPage = v;\n    },\n    // 撤销操作\n    tableClick: function tableClick(type, id) {\n      var _this2 = this;\n\n      if (type === 'revoke') {\n        var even = {};\n        this.tabelList.forEach(function (item) {\n          if (item.id === id) {\n            even = item;\n          }\n        });\n\n        if (this.revokeList.indexOf(even.id) === -1) {\n          this.revokeList.push(even.id);\n          this.axios({\n            url: '/fiat/cancel_deposit',\n            headers: {},\n            params: {\n              id: even.id\n            },\n            method: 'post'\n          }).then(function (data) {\n            var ind = _this2.revokeList.indexOf(even.id);\n\n            _this2.revokeList.splice(ind, 1);\n\n            if (data.code.toString() === '0') {\n              _this2.getTableList();\n\n              _this2.$bus.$emit('tip', {\n                text: data.msg,\n                type: 'success'\n              });\n            } else {\n              _this2.$bus.$emit('tip', {\n                text: data.msg,\n                type: 'error'\n              });\n            }\n          });\n        }\n      }\n\n      if (type === 'subView') {\n        this.subTableDataId = id.id;\n        this.subTableData = [];\n        this.financeListData.forEach(function (item) {\n          if (item.id === _this2.subTableDataId) {\n            _this2.subTableData.push([item.updatedAt ? formatTime(item.updatedAt) : '--', _this2.$t('assets.b2c.bankCard'), // '银行卡',\n            item.userName]);\n          }\n        });\n      }\n\n      if (type === 'seePz') {\n        var _even = {};\n        this.tabelList.forEach(function (item) {\n          if (item.id === id) {\n            _even = item;\n          }\n        });\n        this.imgUrl = _even.transferVoucher;\n        this.QRflag = true;\n      }\n    },\n    handleButton: function handleButton(item) {\n      var arr = [];\n\n      if (item.transferVoucher) {\n        arr.push({\n          type: 'button',\n          // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n          text: this.$t('assets.b2c.seePz'),\n          iconClass: [''],\n          eventType: 'seePz'\n        });\n      }\n\n      if (item.status === 0) {\n        arr.push({\n          type: 'button',\n          // 'link' ' button' ,'html', 'label', 'icon' ‘str’\n          text: this.$t('assets.flowingWater.Cancel'),\n          iconClass: [''],\n          eventType: 'revoke'\n        });\n      }\n\n      arr.push({\n        type: 'subTable',\n        text: this.$t('trade.view'),\n        // 详情\n        eventType: 'subView'\n      });\n      return arr;\n    },\n    getTableList: function getTableList() {\n      var _this3 = this;\n\n      this.axios({\n        // url: '/fiat/deposit/list',\n        url: '/fiat/deposit/list',\n        params: {\n          pageSize: this.paginationObj.display,\n          // 每页条数\n          page: this.paginationObj.currentPage,\n          // 页码\n          symbol: this.symbol === 'all' ? undefined : this.symbol\n        }\n      }).then(function (data) {\n        _this3.tabelLoading = false;\n\n        if (data.code.toString() === '0') {\n          var list = [];\n          _this3.financeListData = data.data.financeList;\n          data.data.financeList.forEach(function (item) {\n            var isOther = item.symbol === 'AIKRW';\n\n            var showPrecision = _this3.showPrecision(item.symbol);\n\n            list.push({\n              id: item.id,\n              transferVoucher: item.transferVoucher,\n              data: [formatTime(item.createdAt), // 时间\n              item.symbol, fixD(item.amount, showPrecision) + (isOther ? ' KRW' : \" \".concat(item.symbol)), // 申请数量\n              \"\".concat(fixD(item.settledAmount, showPrecision), \" \").concat(item.symbol), // 实际到账\n              item.statusText, // 状态\n              _this3.handleButton(item)]\n            });\n          });\n          _this3.tabelList = list; // this.paginationObj.total = data.data.count;\n\n          _this3.paginationObj.total = _this3.lately && data.data.count > 30 ? 30 : data.data.count;\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/Users/h/Downloads/BlockChain-ui-privatization/PC/common-mixin/assets/b2cRecrgeHis/b2cRecrgeHis.js"],"names":["fixD","formatTime","colorMap","name","props","symbol","default","type","String","lately","Boolean","data","revokeList","paginationObj","total","display","currentPage","tabelLoading","tabelList","subTableData","subTableDataId","financeListData","imgUrl","QRflag","watch","v","market","getTableList","paginationObjCurrentPage","computed","$store","state","baseData","columns","title","$t","width","subColumns","methods","init","$bus","$on","QRcodeClick","showPrecision","coinList","pagechange","tableClick","id","even","forEach","item","indexOf","push","axios","url","headers","params","method","then","ind","splice","code","toString","$emit","text","msg","updatedAt","userName","transferVoucher","handleButton","arr","iconClass","eventType","status","pageSize","page","undefined","list","financeList","isOther","createdAt","amount","settledAmount","statusText","count"],"mappings":"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","sourcesContent":["import { fixD, formatTime, colorMap } from '@/utils';\r\n\r\nexport default {\r\n  name: 'b2cRecrgeHis',\r\n  props: {\r\n    symbol: {\r\n      default: '',\r\n      type: String,\r\n    },\r\n    // 是否为最近\r\n    lately: {\r\n      default: false,\r\n      type: Boolean,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      colorMap,\r\n      revokeList: [], // 撤销队列\r\n      paginationObj: {\r\n        total: 0, // 数据总条数\r\n        display: 10, // 每页显示条数\r\n        currentPage: 1, // 当前页码\r\n      },\r\n      tabelLoading: true,\r\n      tabelList: [], // 提现记录\r\n      subTableData: [], // 提现记录详情\r\n      subTableDataId: null, // 提现记录详情ID\r\n      financeListData: [],\r\n      imgUrl: '',\r\n      QRflag: false,\r\n    };\r\n  },\r\n  watch: {\r\n    symbol(v) {\r\n      if (v && this.market) {\r\n        this.getTableList();\r\n      }\r\n    },\r\n    market(v) {\r\n      if (v && this.symbol) {\r\n        this.getTableList();\r\n      }\r\n    },\r\n    paginationObjCurrentPage() { this.getTableList(); },\r\n  },\r\n  computed: {\r\n    // market 接口\r\n    market() { return this.$store.state.baseData.market; },\r\n    paginationObjCurrentPage() { return this.paginationObj.currentPage; },\r\n    columns() {\r\n      return [\r\n        { title: this.$t('assets.recharge.RechargeTime'), width: '15%' }, // 提现时间\r\n        { title: this.$t('assets.recharge.RechargeCoin'), width: '10%' }, // 币种\r\n        { title: this.$t('assets.b2c.b2cRecrgeHisList1'), width: '18%' }, // 申请数量\r\n        { title: this.$t('assets.b2c.b2cRecrgeHisList2'), width: '18%' }, // 实际到账\r\n        { title: this.$t('assets.withdraw.withdrawStatus'), width: '14%' }, // 状态\r\n        { title: this.$t('assets.withdraw.withdrawOptions'), width: '25%' }, // 操作\r\n      ];\r\n    },\r\n    subColumns() {\r\n      return [\r\n        this.$t('assets.b2c.b2cRecrgeHisList3'), // 处理时间\r\n        this.$t('assets.b2c.firstWay'), // 收款方式\r\n        this.$t('assets.b2c.addressUserName'), // 收款人\r\n      ];\r\n    },\r\n  },\r\n  methods: {\r\n    init() {\r\n      if (this.symbol && this.market) {\r\n        this.getTableList();\r\n      }\r\n      this.$bus.$on('b2cRecrgeHisGet', () => {\r\n        this.tabelLoading = true;\r\n        this.paginationObj.currentPage = 1;\r\n        this.getTableList();\r\n      });\r\n    },\r\n    QRcodeClick() {\r\n      this.QRflag = false;\r\n    },\r\n    showPrecision(symbol) {\r\n      let v = 0;\r\n      const { market } = this.$store.state.baseData;\r\n      if (market && market.coinList && market.coinList[symbol]) {\r\n        v = market.coinList[symbol].showPrecision;\r\n      }\r\n      return v;\r\n    },\r\n    // 分页器\r\n    pagechange(v) { this.paginationObj.currentPage = v; },\r\n    // 撤销操作\r\n    tableClick(type, id) {\r\n      if (type === 'revoke') {\r\n        let even = {};\r\n        this.tabelList.forEach((item) => {\r\n          if (item.id === id) {\r\n            even = item;\r\n          }\r\n        });\r\n        if (this.revokeList.indexOf(even.id) === -1) {\r\n          this.revokeList.push(even.id);\r\n          this.axios({\r\n            url: '/fiat/cancel_deposit',\r\n            headers: {},\r\n            params: {\r\n              id: even.id,\r\n            },\r\n            method: 'post',\r\n          }).then((data) => {\r\n            const ind = this.revokeList.indexOf(even.id);\r\n            this.revokeList.splice(ind, 1);\r\n            if (data.code.toString() === '0') {\r\n              this.getTableList();\r\n              this.$bus.$emit('tip', { text: data.msg, type: 'success' });\r\n            } else {\r\n              this.$bus.$emit('tip', { text: data.msg, type: 'error' });\r\n            }\r\n          });\r\n        }\r\n      }\r\n      if (type === 'subView') {\r\n        this.subTableDataId = id.id;\r\n        this.subTableData = [];\r\n        this.financeListData.forEach((item) => {\r\n          if (item.id === this.subTableDataId) {\r\n            this.subTableData.push([\r\n              item.updatedAt ? formatTime(item.updatedAt) : '--',\r\n              this.$t('assets.b2c.bankCard'), // '银行卡',\r\n              item.userName,\r\n            ]);\r\n          }\r\n        });\r\n      }\r\n      if (type === 'seePz') {\r\n        let even = {};\r\n        this.tabelList.forEach((item) => {\r\n          if (item.id === id) {\r\n            even = item;\r\n          }\r\n        });\r\n        this.imgUrl = even.transferVoucher;\r\n        this.QRflag = true;\r\n      }\r\n    },\r\n    handleButton(item) {\r\n      const arr = [];\r\n      if (item.transferVoucher) {\r\n        arr.push({\r\n          type: 'button', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n          text: this.$t('assets.b2c.seePz'),\r\n          iconClass: [''],\r\n          eventType: 'seePz',\r\n        });\r\n      }\r\n      if (item.status === 0) {\r\n        arr.push({\r\n          type: 'button', // 'link' ' button' ,'html', 'label', 'icon' ‘str’\r\n          text: this.$t('assets.flowingWater.Cancel'),\r\n          iconClass: [''],\r\n          eventType: 'revoke',\r\n        });\r\n      }\r\n      arr.push({\r\n        type: 'subTable',\r\n        text: this.$t('trade.view'), // 详情\r\n        eventType: 'subView',\r\n      });\r\n      return arr;\r\n    },\r\n    getTableList() {\r\n      this.axios({\r\n        // url: '/fiat/deposit/list',\r\n        url: '/fiat/deposit/list',\r\n        params: {\r\n          pageSize: this.paginationObj.display, // 每页条数\r\n          page: this.paginationObj.currentPage, // 页码\r\n          symbol: this.symbol === 'all' ? undefined : this.symbol,\r\n        },\r\n      }).then((data) => {\r\n        this.tabelLoading = false;\r\n        if (data.code.toString() === '0') {\r\n          const list = [];\r\n          this.financeListData = data.data.financeList;\r\n          data.data.financeList.forEach((item) => {\r\n            const isOther = item.symbol === 'AIKRW';\r\n            const showPrecision = this.showPrecision(item.symbol);\r\n            list.push({\r\n              id: item.id,\r\n              transferVoucher: item.transferVoucher,\r\n              data: [\r\n                formatTime(item.createdAt), // 时间\r\n                item.symbol,\r\n                fixD(item.amount, showPrecision)\r\n                  + (isOther ? ' KRW' : ` ${item.symbol}`), // 申请数量\r\n                `${fixD(item.settledAmount, showPrecision)} ${item.symbol}`, // 实际到账\r\n                item.statusText, // 状态\r\n                this.handleButton(item),\r\n              ],\r\n            });\r\n          });\r\n          this.tabelList = list;\r\n          // this.paginationObj.total = data.data.count;\r\n          this.paginationObj.total = (this.lately && data.data.count > 30)\r\n            ? 30 : data.data.count;\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n"]}]}